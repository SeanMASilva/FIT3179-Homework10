(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function PO(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var A_={exports:{}},Qh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sF;function yW(){if(sF)return Qh;sF=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:s,ref:r!==void 0?r:null,props:a}}return Qh.Fragment=t,Qh.jsx=n,Qh.jsxs=n,Qh}var oF;function vW(){return oF||(oF=1,A_.exports=yW()),A_.exports}var Ml=vW(),S_={exports:{}},qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uF;function bW(){if(uF)return qe;uF=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),g=Symbol.iterator;function p(R){return R===null||typeof R!="object"?null:(R=g&&R[g]||R["@@iterator"],typeof R=="function"?R:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,x={};function E(R,W,ie){this.props=R,this.context=W,this.refs=x,this.updater=ie||y}E.prototype.isReactComponent={},E.prototype.setState=function(R,W){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,W,"setState")},E.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function A(){}A.prototype=E.prototype;function S(R,W,ie){this.props=R,this.context=W,this.refs=x,this.updater=ie||y}var w=S.prototype=new A;w.constructor=S,v(w,E.prototype),w.isPureReactComponent=!0;var D=Array.isArray,O={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function C(R,W,ie,se,ge,pe){return ie=pe.ref,{$$typeof:e,type:R,key:W,ref:ie!==void 0?ie:null,props:pe}}function k(R,W){return C(R.type,W,void 0,void 0,void 0,R.props)}function N(R){return typeof R=="object"&&R!==null&&R.$$typeof===e}function L(R){var W={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(ie){return W[ie]})}var B=/\/+/g;function V(R,W){return typeof R=="object"&&R!==null&&R.key!=null?L(""+R.key):W.toString(36)}function G(){}function P(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(G,G):(R.status="pending",R.then(function(W){R.status==="pending"&&(R.status="fulfilled",R.value=W)},function(W){R.status==="pending"&&(R.status="rejected",R.reason=W)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function j(R,W,ie,se,ge){var pe=typeof R;(pe==="undefined"||pe==="boolean")&&(R=null);var _e=!1;if(R===null)_e=!0;else switch(pe){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(R.$$typeof){case e:case t:_e=!0;break;case d:return _e=R._init,j(_e(R._payload),W,ie,se,ge)}}if(_e)return ge=ge(R),_e=se===""?"."+V(R,0):se,D(ge)?(ie="",_e!=null&&(ie=_e.replace(B,"$&/")+"/"),j(ge,W,ie,"",function(me){return me})):ge!=null&&(N(ge)&&(ge=k(ge,ie+(ge.key==null||R&&R.key===ge.key?"":(""+ge.key).replace(B,"$&/")+"/")+_e)),W.push(ge)),1;_e=0;var It=se===""?".":se+":";if(D(R))for(var ft=0;ft<R.length;ft++)se=R[ft],pe=It+V(se,ft),_e+=j(se,W,ie,pe,ge);else if(ft=p(R),typeof ft=="function")for(R=ft.call(R),ft=0;!(se=R.next()).done;)se=se.value,pe=It+V(se,ft++),_e+=j(se,W,ie,pe,ge);else if(pe==="object"){if(typeof R.then=="function")return j(P(R),W,ie,se,ge);throw W=String(R),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return _e}function F(R,W,ie){if(R==null)return R;var se=[],ge=0;return j(R,se,"","",function(pe){return W.call(ie,pe,ge++)}),se}function U(R){if(R._status===-1){var W=R._result;W=W(),W.then(function(ie){(R._status===0||R._status===-1)&&(R._status=1,R._result=ie)},function(ie){(R._status===0||R._status===-1)&&(R._status=2,R._result=ie)}),R._status===-1&&(R._status=0,R._result=W)}if(R._status===1)return R._result.default;throw R._result}var H=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)};function Q(){}return qe.Children={map:F,forEach:function(R,W,ie){F(R,function(){W.apply(this,arguments)},ie)},count:function(R){var W=0;return F(R,function(){W++}),W},toArray:function(R){return F(R,function(W){return W})||[]},only:function(R){if(!N(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},qe.Component=E,qe.Fragment=n,qe.Profiler=r,qe.PureComponent=S,qe.StrictMode=i,qe.Suspense=l,qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=O,qe.__COMPILER_RUNTIME={__proto__:null,c:function(R){return O.H.useMemoCache(R)}},qe.cache=function(R){return function(){return R.apply(null,arguments)}},qe.cloneElement=function(R,W,ie){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var se=v({},R.props),ge=R.key,pe=void 0;if(W!=null)for(_e in W.ref!==void 0&&(pe=void 0),W.key!==void 0&&(ge=""+W.key),W)!M.call(W,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&W.ref===void 0||(se[_e]=W[_e]);var _e=arguments.length-2;if(_e===1)se.children=ie;else if(1<_e){for(var It=Array(_e),ft=0;ft<_e;ft++)It[ft]=arguments[ft+2];se.children=It}return C(R.type,ge,void 0,void 0,pe,se)},qe.createContext=function(R){return R={$$typeof:s,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:a,_context:R},R},qe.createElement=function(R,W,ie){var se,ge={},pe=null;if(W!=null)for(se in W.key!==void 0&&(pe=""+W.key),W)M.call(W,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(ge[se]=W[se]);var _e=arguments.length-2;if(_e===1)ge.children=ie;else if(1<_e){for(var It=Array(_e),ft=0;ft<_e;ft++)It[ft]=arguments[ft+2];ge.children=It}if(R&&R.defaultProps)for(se in _e=R.defaultProps,_e)ge[se]===void 0&&(ge[se]=_e[se]);return C(R,pe,void 0,void 0,null,ge)},qe.createRef=function(){return{current:null}},qe.forwardRef=function(R){return{$$typeof:o,render:R}},qe.isValidElement=N,qe.lazy=function(R){return{$$typeof:d,_payload:{_status:-1,_result:R},_init:U}},qe.memo=function(R,W){return{$$typeof:f,type:R,compare:W===void 0?null:W}},qe.startTransition=function(R){var W=O.T,ie={};O.T=ie;try{var se=R(),ge=O.S;ge!==null&&ge(ie,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(Q,H)}catch(pe){H(pe)}finally{O.T=W}},qe.unstable_useCacheRefresh=function(){return O.H.useCacheRefresh()},qe.use=function(R){return O.H.use(R)},qe.useActionState=function(R,W,ie){return O.H.useActionState(R,W,ie)},qe.useCallback=function(R,W){return O.H.useCallback(R,W)},qe.useContext=function(R){return O.H.useContext(R)},qe.useDebugValue=function(){},qe.useDeferredValue=function(R,W){return O.H.useDeferredValue(R,W)},qe.useEffect=function(R,W,ie){var se=O.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(R,W)},qe.useId=function(){return O.H.useId()},qe.useImperativeHandle=function(R,W,ie){return O.H.useImperativeHandle(R,W,ie)},qe.useInsertionEffect=function(R,W){return O.H.useInsertionEffect(R,W)},qe.useLayoutEffect=function(R,W){return O.H.useLayoutEffect(R,W)},qe.useMemo=function(R,W){return O.H.useMemo(R,W)},qe.useOptimistic=function(R,W){return O.H.useOptimistic(R,W)},qe.useReducer=function(R,W,ie){return O.H.useReducer(R,W,ie)},qe.useRef=function(R){return O.H.useRef(R)},qe.useState=function(R){return O.H.useState(R)},qe.useSyncExternalStore=function(R,W,ie){return O.H.useSyncExternalStore(R,W,ie)},qe.useTransition=function(){return O.H.useTransition()},qe.version="19.1.1",qe}var lF;function IO(){return lF||(lF=1,S_.exports=bW()),S_.exports}var a7=IO(),w_={exports:{}},Zh={},O_={exports:{}},C_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cF;function xW(){return cF||(cF=1,(function(e){function t(F,U){var H=F.length;F.push(U);e:for(;0<H;){var Q=H-1>>>1,R=F[Q];if(0<r(R,U))F[Q]=U,F[H]=R,H=Q;else break e}}function n(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var U=F[0],H=F.pop();if(H!==U){F[0]=H;e:for(var Q=0,R=F.length,W=R>>>1;Q<W;){var ie=2*(Q+1)-1,se=F[ie],ge=ie+1,pe=F[ge];if(0>r(se,H))ge<R&&0>r(pe,se)?(F[Q]=pe,F[ge]=H,Q=ge):(F[Q]=se,F[ie]=H,Q=ie);else if(ge<R&&0>r(pe,H))F[Q]=pe,F[ge]=H,Q=ge;else break e}}return U}function r(F,U){var H=F.sortIndex-U.sortIndex;return H!==0?H:F.id-U.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],f=[],d=1,g=null,p=3,y=!1,v=!1,x=!1,E=!1,A=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function D(F){for(var U=n(f);U!==null;){if(U.callback===null)i(f);else if(U.startTime<=F)i(f),U.sortIndex=U.expirationTime,t(l,U);else break;U=n(f)}}function O(F){if(x=!1,D(F),!v)if(n(l)!==null)v=!0,M||(M=!0,V());else{var U=n(f);U!==null&&j(O,U.startTime-F)}}var M=!1,C=-1,k=5,N=-1;function L(){return E?!0:!(e.unstable_now()-N<k)}function B(){if(E=!1,M){var F=e.unstable_now();N=F;var U=!0;try{e:{v=!1,x&&(x=!1,S(C),C=-1),y=!0;var H=p;try{t:{for(D(F),g=n(l);g!==null&&!(g.expirationTime>F&&L());){var Q=g.callback;if(typeof Q=="function"){g.callback=null,p=g.priorityLevel;var R=Q(g.expirationTime<=F);if(F=e.unstable_now(),typeof R=="function"){g.callback=R,D(F),U=!0;break t}g===n(l)&&i(l),D(F)}else i(l);g=n(l)}if(g!==null)U=!0;else{var W=n(f);W!==null&&j(O,W.startTime-F),U=!1}}break e}finally{g=null,p=H,y=!1}U=void 0}}finally{U?V():M=!1}}}var V;if(typeof w=="function")V=function(){w(B)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,P=G.port2;G.port1.onmessage=B,V=function(){P.postMessage(null)}}else V=function(){A(B,0)};function j(F,U){C=A(function(){F(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(F){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var H=p;p=U;try{return F()}finally{p=H}},e.unstable_requestPaint=function(){E=!0},e.unstable_runWithPriority=function(F,U){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var H=p;p=F;try{return U()}finally{p=H}},e.unstable_scheduleCallback=function(F,U,H){var Q=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Q+H:Q):H=Q,F){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=H+R,F={id:d++,callback:U,priorityLevel:F,startTime:H,expirationTime:R,sortIndex:-1},H>Q?(F.sortIndex=H,t(f,F),n(l)===null&&F===n(f)&&(x?(S(C),C=-1):x=!0,j(O,H-Q))):(F.sortIndex=R,t(l,F),v||y||(v=!0,M||(M=!0,V()))),F},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(F){var U=p;return function(){var H=p;p=U;try{return F.apply(this,arguments)}finally{p=H}}}})(C_)),C_}var fF;function EW(){return fF||(fF=1,O_.exports=xW()),O_.exports}var D_={exports:{}},Gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dF;function _W(){if(dF)return Gn;dF=1;var e=IO();function t(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(l,f,d){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:l,containerInfo:f,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,f){if(l==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Gn.createPortal=function(l,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(l,f,null,d)},Gn.flushSync=function(l){var f=s.T,d=i.p;try{if(s.T=null,i.p=2,l)return l()}finally{s.T=f,i.p=d,i.d.f()}},Gn.preconnect=function(l,f){typeof l=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(l,f))},Gn.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},Gn.preinit=function(l,f){if(typeof l=="string"&&f&&typeof f.as=="string"){var d=f.as,g=o(d,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(l,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(l,{crossOrigin:g,integrity:p,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Gn.preinitModule=function(l,f){if(typeof l=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=o(f.as,f.crossOrigin);i.d.M(l,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(l)},Gn.preload=function(l,f){if(typeof l=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,g=o(d,f.crossOrigin);i.d.L(l,d,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Gn.preloadModule=function(l,f){if(typeof l=="string")if(f){var d=o(f.as,f.crossOrigin);i.d.m(l,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(l)},Gn.requestFormReset=function(l){i.d.r(l)},Gn.unstable_batchedUpdates=function(l,f){return l(f)},Gn.useFormState=function(l,f,d){return s.H.useFormState(l,f,d)},Gn.useFormStatus=function(){return s.H.useHostTransitionStatus()},Gn.version="19.1.1",Gn}var hF;function AW(){if(hF)return D_.exports;hF=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),D_.exports=_W(),D_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gF;function SW(){if(gF)return Zh;gF=1;var e=EW(),t=IO(),n=AW();function i(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var c=u,h=u;if(u.alternate)for(;c.return;)c=c.return;else{u=c;do c=u,(c.flags&4098)!==0&&(h=c.return),u=c.return;while(u)}return c.tag===3?h:null}function s(u){if(u.tag===13){var c=u.memoizedState;if(c===null&&(u=u.alternate,u!==null&&(c=u.memoizedState)),c!==null)return c.dehydrated}return null}function o(u){if(a(u)!==u)throw Error(i(188))}function l(u){var c=u.alternate;if(!c){if(c=a(u),c===null)throw Error(i(188));return c!==u?null:u}for(var h=u,m=c;;){var b=h.return;if(b===null)break;var _=b.alternate;if(_===null){if(m=b.return,m!==null){h=m;continue}break}if(b.child===_.child){for(_=b.child;_;){if(_===h)return o(b),u;if(_===m)return o(b),c;_=_.sibling}throw Error(i(188))}if(h.return!==m.return)h=b,m=_;else{for(var $=!1,T=b.child;T;){if(T===h){$=!0,h=b,m=_;break}if(T===m){$=!0,m=b,h=_;break}T=T.sibling}if(!$){for(T=_.child;T;){if(T===h){$=!0,h=_,m=b;break}if(T===m){$=!0,m=_,h=b;break}T=T.sibling}if(!$)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?u:c}function f(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u;for(u=u.child;u!==null;){if(c=f(u),c!==null)return c;u=u.sibling}return null}var d=Object.assign,g=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),w=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function V(u){return u===null||typeof u!="object"?null:(u=B&&u[B]||u["@@iterator"],typeof u=="function"?u:null)}var G=Symbol.for("react.client.reference");function P(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===G?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case v:return"Fragment";case E:return"Profiler";case x:return"StrictMode";case O:return"Suspense";case M:return"SuspenseList";case N:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case y:return"Portal";case w:return(u.displayName||"Context")+".Provider";case S:return(u._context.displayName||"Context")+".Consumer";case D:var c=u.render;return u=u.displayName,u||(u=c.displayName||c.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case C:return c=u.displayName||null,c!==null?c:P(u.type)||"Memo";case k:c=u._payload,u=u._init;try{return P(u(c))}catch{}}return null}var j=Array.isArray,F=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},Q=[],R=-1;function W(u){return{current:u}}function ie(u){0>R||(u.current=Q[R],Q[R]=null,R--)}function se(u,c){R++,Q[R]=u.current,u.current=c}var ge=W(null),pe=W(null),_e=W(null),It=W(null);function ft(u,c){switch(se(_e,c),se(pe,u),se(ge,null),c.nodeType){case 9:case 11:u=(u=c.documentElement)&&(u=u.namespaceURI)?R6(u):0;break;default:if(u=c.tagName,c=c.namespaceURI)c=R6(c),u=N6(c,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}ie(ge),se(ge,u)}function me(){ie(ge),ie(pe),ie(_e)}function ze(u){u.memoizedState!==null&&se(It,u);var c=ge.current,h=N6(c,u.type);c!==h&&(se(pe,u),se(ge,h))}function Pe(u){pe.current===u&&(ie(ge),ie(pe)),It.current===u&&(ie(It),Gh._currentValue=H)}var le=Object.prototype.hasOwnProperty,Qt=e.unstable_scheduleCallback,rt=e.unstable_cancelCallback,tn=e.unstable_shouldYield,En=e.unstable_requestPaint,nn=e.unstable_now,qp=e.unstable_getCurrentPriorityLevel,gT=e.unstable_ImmediatePriority,pT=e.unstable_UserBlockingPriority,Hp=e.unstable_NormalPriority,KY=e.unstable_LowPriority,mT=e.unstable_IdlePriority,JY=e.log,eX=e.unstable_setDisableYieldValue,Jd=null,Zi=null;function yo(u){if(typeof JY=="function"&&eX(u),Zi&&typeof Zi.setStrictMode=="function")try{Zi.setStrictMode(Jd,u)}catch{}}var Ki=Math.clz32?Math.clz32:iX,tX=Math.log,nX=Math.LN2;function iX(u){return u>>>=0,u===0?32:31-(tX(u)/nX|0)|0}var Gp=256,Yp=4194304;function Xu(u){var c=u&42;if(c!==0)return c;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function Xp(u,c,h){var m=u.pendingLanes;if(m===0)return 0;var b=0,_=u.suspendedLanes,$=u.pingedLanes;u=u.warmLanes;var T=m&134217727;return T!==0?(m=T&~_,m!==0?b=Xu(m):($&=T,$!==0?b=Xu($):h||(h=T&~u,h!==0&&(b=Xu(h))))):(T=m&~_,T!==0?b=Xu(T):$!==0?b=Xu($):h||(h=m&~u,h!==0&&(b=Xu(h)))),b===0?0:c!==0&&c!==b&&(c&_)===0&&(_=b&-b,h=c&-c,_>=h||_===32&&(h&4194048)!==0)?c:b}function eh(u,c){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&c)===0}function rX(u,c){switch(u){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yT(){var u=Gp;return Gp<<=1,(Gp&4194048)===0&&(Gp=256),u}function vT(){var u=Yp;return Yp<<=1,(Yp&62914560)===0&&(Yp=4194304),u}function d2(u){for(var c=[],h=0;31>h;h++)c.push(u);return c}function th(u,c){u.pendingLanes|=c,c!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function aX(u,c,h,m,b,_){var $=u.pendingLanes;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=h,u.entangledLanes&=h,u.errorRecoveryDisabledLanes&=h,u.shellSuspendCounter=0;var T=u.entanglements,z=u.expirationTimes,X=u.hiddenUpdates;for(h=$&~h;0<h;){var re=31-Ki(h),oe=1<<re;T[re]=0,z[re]=-1;var Z=X[re];if(Z!==null)for(X[re]=null,re=0;re<Z.length;re++){var K=Z[re];K!==null&&(K.lane&=-536870913)}h&=~oe}m!==0&&bT(u,m,0),_!==0&&b===0&&u.tag!==0&&(u.suspendedLanes|=_&~($&~c))}function bT(u,c,h){u.pendingLanes|=c,u.suspendedLanes&=~c;var m=31-Ki(c);u.entangledLanes|=c,u.entanglements[m]=u.entanglements[m]|1073741824|h&4194090}function xT(u,c){var h=u.entangledLanes|=c;for(u=u.entanglements;h;){var m=31-Ki(h),b=1<<m;b&c|u[m]&c&&(u[m]|=c),h&=~b}}function h2(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function g2(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function ET(){var u=U.p;return u!==0?u:(u=window.event,u===void 0?32:eF(u.type))}function sX(u,c){var h=U.p;try{return U.p=u,c()}finally{U.p=h}}var vo=Math.random().toString(36).slice(2),qn="__reactFiber$"+vo,Mi="__reactProps$"+vo,Mc="__reactContainer$"+vo,p2="__reactEvents$"+vo,oX="__reactListeners$"+vo,uX="__reactHandles$"+vo,_T="__reactResources$"+vo,nh="__reactMarker$"+vo;function m2(u){delete u[qn],delete u[Mi],delete u[p2],delete u[oX],delete u[uX]}function Tc(u){var c=u[qn];if(c)return c;for(var h=u.parentNode;h;){if(c=h[Mc]||h[qn]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(u=L6(u);u!==null;){if(h=u[qn])return h;u=L6(u)}return c}u=h,h=u.parentNode}return null}function kc(u){if(u=u[qn]||u[Mc]){var c=u.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return u}return null}function ih(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u.stateNode;throw Error(i(33))}function Fc(u){var c=u[_T];return c||(c=u[_T]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function _n(u){u[nh]=!0}var AT=new Set,ST={};function Vu(u,c){Rc(u,c),Rc(u+"Capture",c)}function Rc(u,c){for(ST[u]=c,u=0;u<c.length;u++)AT.add(c[u])}var lX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wT={},OT={};function cX(u){return le.call(OT,u)?!0:le.call(wT,u)?!1:lX.test(u)?OT[u]=!0:(wT[u]=!0,!1)}function Vp(u,c,h){if(cX(c))if(h===null)u.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":u.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){u.removeAttribute(c);return}}u.setAttribute(c,""+h)}}function Wp(u,c,h){if(h===null)u.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(c);return}u.setAttribute(c,""+h)}}function vs(u,c,h,m){if(m===null)u.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(h);return}u.setAttributeNS(c,h,""+m)}}var y2,CT;function Nc(u){if(y2===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);y2=c&&c[1]||"",CT=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+y2+u+CT}var v2=!1;function b2(u,c){if(!u||v2)return"";v2=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(K){var Z=K}Reflect.construct(u,[],oe)}else{try{oe.call()}catch(K){Z=K}u.call(oe.prototype)}}else{try{throw Error()}catch(K){Z=K}(oe=u())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(K){if(K&&Z&&typeof K.stack=="string")return[K.stack,Z.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=m.DetermineComponentFrameRoot(),$=_[0],T=_[1];if($&&T){var z=$.split(`
`),X=T.split(`
`);for(b=m=0;m<z.length&&!z[m].includes("DetermineComponentFrameRoot");)m++;for(;b<X.length&&!X[b].includes("DetermineComponentFrameRoot");)b++;if(m===z.length||b===X.length)for(m=z.length-1,b=X.length-1;1<=m&&0<=b&&z[m]!==X[b];)b--;for(;1<=m&&0<=b;m--,b--)if(z[m]!==X[b]){if(m!==1||b!==1)do if(m--,b--,0>b||z[m]!==X[b]){var re=`
`+z[m].replace(" at new "," at ");return u.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",u.displayName)),re}while(1<=m&&0<=b);break}}}finally{v2=!1,Error.prepareStackTrace=h}return(h=u?u.displayName||u.name:"")?Nc(h):""}function fX(u){switch(u.tag){case 26:case 27:case 5:return Nc(u.type);case 16:return Nc("Lazy");case 13:return Nc("Suspense");case 19:return Nc("SuspenseList");case 0:case 15:return b2(u.type,!1);case 11:return b2(u.type.render,!1);case 1:return b2(u.type,!0);case 31:return Nc("Activity");default:return""}}function DT(u){try{var c="";do c+=fX(u),u=u.return;while(u);return c}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}function xr(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function $T(u){var c=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function dX(u){var c=$T(u)?"checked":"value",h=Object.getOwnPropertyDescriptor(u.constructor.prototype,c),m=""+u[c];if(!u.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var b=h.get,_=h.set;return Object.defineProperty(u,c,{configurable:!0,get:function(){return b.call(this)},set:function($){m=""+$,_.call(this,$)}}),Object.defineProperty(u,c,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function($){m=""+$},stopTracking:function(){u._valueTracker=null,delete u[c]}}}}function Qp(u){u._valueTracker||(u._valueTracker=dX(u))}function MT(u){if(!u)return!1;var c=u._valueTracker;if(!c)return!0;var h=c.getValue(),m="";return u&&(m=$T(u)?u.checked?"true":"false":u.value),u=m,u!==h?(c.setValue(u),!0):!1}function Zp(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var hX=/[\n"\\]/g;function Er(u){return u.replace(hX,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function x2(u,c,h,m,b,_,$,T){u.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?u.type=$:u.removeAttribute("type"),c!=null?$==="number"?(c===0&&u.value===""||u.value!=c)&&(u.value=""+xr(c)):u.value!==""+xr(c)&&(u.value=""+xr(c)):$!=="submit"&&$!=="reset"||u.removeAttribute("value"),c!=null?E2(u,$,xr(c)):h!=null?E2(u,$,xr(h)):m!=null&&u.removeAttribute("value"),b==null&&_!=null&&(u.defaultChecked=!!_),b!=null&&(u.checked=b&&typeof b!="function"&&typeof b!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?u.name=""+xr(T):u.removeAttribute("name")}function TT(u,c,h,m,b,_,$,T){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(u.type=_),c!=null||h!=null){if(!(_!=="submit"&&_!=="reset"||c!=null))return;h=h!=null?""+xr(h):"",c=c!=null?""+xr(c):h,T||c===u.value||(u.value=c),u.defaultValue=c}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,u.checked=T?u.checked:!!m,u.defaultChecked=!!m,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(u.name=$)}function E2(u,c,h){c==="number"&&Zp(u.ownerDocument)===u||u.defaultValue===""+h||(u.defaultValue=""+h)}function jc(u,c,h,m){if(u=u.options,c){c={};for(var b=0;b<h.length;b++)c["$"+h[b]]=!0;for(h=0;h<u.length;h++)b=c.hasOwnProperty("$"+u[h].value),u[h].selected!==b&&(u[h].selected=b),b&&m&&(u[h].defaultSelected=!0)}else{for(h=""+xr(h),c=null,b=0;b<u.length;b++){if(u[b].value===h){u[b].selected=!0,m&&(u[b].defaultSelected=!0);return}c!==null||u[b].disabled||(c=u[b])}c!==null&&(c.selected=!0)}}function kT(u,c,h){if(c!=null&&(c=""+xr(c),c!==u.value&&(u.value=c),h==null)){u.defaultValue!==c&&(u.defaultValue=c);return}u.defaultValue=h!=null?""+xr(h):""}function FT(u,c,h,m){if(c==null){if(m!=null){if(h!=null)throw Error(i(92));if(j(m)){if(1<m.length)throw Error(i(93));m=m[0]}h=m}h==null&&(h=""),c=h}h=xr(c),u.defaultValue=h,m=u.textContent,m===h&&m!==""&&m!==null&&(u.value=m)}function zc(u,c){if(c){var h=u.firstChild;if(h&&h===u.lastChild&&h.nodeType===3){h.nodeValue=c;return}}u.textContent=c}var gX=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function RT(u,c,h){var m=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?u.setProperty(c,""):c==="float"?u.cssFloat="":u[c]="":m?u.setProperty(c,h):typeof h!="number"||h===0||gX.has(c)?c==="float"?u.cssFloat=h:u[c]=(""+h).trim():u[c]=h+"px"}function NT(u,c,h){if(c!=null&&typeof c!="object")throw Error(i(62));if(u=u.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?u.setProperty(m,""):m==="float"?u.cssFloat="":u[m]="");for(var b in c)m=c[b],c.hasOwnProperty(b)&&h[b]!==m&&RT(u,b,m)}else for(var _ in c)c.hasOwnProperty(_)&&RT(u,_,c[_])}function _2(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pX=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mX=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Kp(u){return mX.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var A2=null;function S2(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Bc=null,Lc=null;function jT(u){var c=kc(u);if(c&&(u=c.stateNode)){var h=u[Mi]||null;e:switch(u=c.stateNode,c.type){case"input":if(x2(u,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=u;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Er(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var m=h[c];if(m!==u&&m.form===u.form){var b=m[Mi]||null;if(!b)throw Error(i(90));x2(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(c=0;c<h.length;c++)m=h[c],m.form===u.form&&MT(m)}break e;case"textarea":kT(u,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&jc(u,!!h.multiple,c,!1)}}}var w2=!1;function zT(u,c,h){if(w2)return u(c,h);w2=!0;try{var m=u(c);return m}finally{if(w2=!1,(Bc!==null||Lc!==null)&&(zm(),Bc&&(c=Bc,u=Lc,Lc=Bc=null,jT(c),u)))for(c=0;c<u.length;c++)jT(u[c])}}function rh(u,c){var h=u.stateNode;if(h===null)return null;var m=h[Mi]||null;if(m===null)return null;h=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(u=u.type,m=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!m;break e;default:u=!1}if(u)return null;if(h&&typeof h!="function")throw Error(i(231,c,typeof h));return h}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),O2=!1;if(bs)try{var ah={};Object.defineProperty(ah,"passive",{get:function(){O2=!0}}),window.addEventListener("test",ah,ah),window.removeEventListener("test",ah,ah)}catch{O2=!1}var bo=null,C2=null,Jp=null;function BT(){if(Jp)return Jp;var u,c=C2,h=c.length,m,b="value"in bo?bo.value:bo.textContent,_=b.length;for(u=0;u<h&&c[u]===b[u];u++);var $=h-u;for(m=1;m<=$&&c[h-m]===b[_-m];m++);return Jp=b.slice(u,1<m?1-m:void 0)}function em(u){var c=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&c===13&&(u=13)):u=c,u===10&&(u=13),32<=u||u===13?u:0}function tm(){return!0}function LT(){return!1}function Ti(u){function c(h,m,b,_,$){this._reactName=h,this._targetInst=b,this.type=m,this.nativeEvent=_,this.target=$,this.currentTarget=null;for(var T in u)u.hasOwnProperty(T)&&(h=u[T],this[T]=h?h(_):_[T]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?tm:LT,this.isPropagationStopped=LT,this}return d(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=tm)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=tm)},persist:function(){},isPersistent:tm}),c}var Wu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nm=Ti(Wu),sh=d({},Wu,{view:0,detail:0}),yX=Ti(sh),D2,$2,oh,im=d({},sh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T2,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==oh&&(oh&&u.type==="mousemove"?(D2=u.screenX-oh.screenX,$2=u.screenY-oh.screenY):$2=D2=0,oh=u),D2)},movementY:function(u){return"movementY"in u?u.movementY:$2}}),UT=Ti(im),vX=d({},im,{dataTransfer:0}),bX=Ti(vX),xX=d({},sh,{relatedTarget:0}),M2=Ti(xX),EX=d({},Wu,{animationName:0,elapsedTime:0,pseudoElement:0}),_X=Ti(EX),AX=d({},Wu,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),SX=Ti(AX),wX=d({},Wu,{data:0}),PT=Ti(wX),OX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},CX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $X(u){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(u):(u=DX[u])?!!c[u]:!1}function T2(){return $X}var MX=d({},sh,{key:function(u){if(u.key){var c=OX[u.key]||u.key;if(c!=="Unidentified")return c}return u.type==="keypress"?(u=em(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?CX[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T2,charCode:function(u){return u.type==="keypress"?em(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?em(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),TX=Ti(MX),kX=d({},im,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IT=Ti(kX),FX=d({},sh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T2}),RX=Ti(FX),NX=d({},Wu,{propertyName:0,elapsedTime:0,pseudoElement:0}),jX=Ti(NX),zX=d({},im,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),BX=Ti(zX),LX=d({},Wu,{newState:0,oldState:0}),UX=Ti(LX),PX=[9,13,27,32],k2=bs&&"CompositionEvent"in window,uh=null;bs&&"documentMode"in document&&(uh=document.documentMode);var IX=bs&&"TextEvent"in window&&!uh,qT=bs&&(!k2||uh&&8<uh&&11>=uh),HT=" ",GT=!1;function YT(u,c){switch(u){case"keyup":return PX.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XT(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Uc=!1;function qX(u,c){switch(u){case"compositionend":return XT(c);case"keypress":return c.which!==32?null:(GT=!0,HT);case"textInput":return u=c.data,u===HT&&GT?null:u;default:return null}}function HX(u,c){if(Uc)return u==="compositionend"||!k2&&YT(u,c)?(u=BT(),Jp=C2=bo=null,Uc=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return qT&&c.locale!=="ko"?null:c.data;default:return null}}var GX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VT(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c==="input"?!!GX[u.type]:c==="textarea"}function WT(u,c,h,m){Bc?Lc?Lc.push(m):Lc=[m]:Bc=m,c=qm(c,"onChange"),0<c.length&&(h=new nm("onChange","change",null,h,m),u.push({event:h,listeners:c}))}var lh=null,ch=null;function YX(u){$6(u,0)}function rm(u){var c=ih(u);if(MT(c))return u}function QT(u,c){if(u==="change")return c}var ZT=!1;if(bs){var F2;if(bs){var R2="oninput"in document;if(!R2){var KT=document.createElement("div");KT.setAttribute("oninput","return;"),R2=typeof KT.oninput=="function"}F2=R2}else F2=!1;ZT=F2&&(!document.documentMode||9<document.documentMode)}function JT(){lh&&(lh.detachEvent("onpropertychange",e5),ch=lh=null)}function e5(u){if(u.propertyName==="value"&&rm(ch)){var c=[];WT(c,ch,u,S2(u)),zT(YX,c)}}function XX(u,c,h){u==="focusin"?(JT(),lh=c,ch=h,lh.attachEvent("onpropertychange",e5)):u==="focusout"&&JT()}function VX(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return rm(ch)}function WX(u,c){if(u==="click")return rm(c)}function QX(u,c){if(u==="input"||u==="change")return rm(c)}function ZX(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var Ji=typeof Object.is=="function"?Object.is:ZX;function fh(u,c){if(Ji(u,c))return!0;if(typeof u!="object"||u===null||typeof c!="object"||c===null)return!1;var h=Object.keys(u),m=Object.keys(c);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var b=h[m];if(!le.call(c,b)||!Ji(u[b],c[b]))return!1}return!0}function t5(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function n5(u,c){var h=t5(u);u=0;for(var m;h;){if(h.nodeType===3){if(m=u+h.textContent.length,u<=c&&m>=c)return{node:h,offset:c-u};u=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=t5(h)}}function i5(u,c){return u&&c?u===c?!0:u&&u.nodeType===3?!1:c&&c.nodeType===3?i5(u,c.parentNode):"contains"in u?u.contains(c):u.compareDocumentPosition?!!(u.compareDocumentPosition(c)&16):!1:!1}function r5(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var c=Zp(u.document);c instanceof u.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)u=c.contentWindow;else break;c=Zp(u.document)}return c}function N2(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c&&(c==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||c==="textarea"||u.contentEditable==="true")}var KX=bs&&"documentMode"in document&&11>=document.documentMode,Pc=null,j2=null,dh=null,z2=!1;function a5(u,c,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;z2||Pc==null||Pc!==Zp(m)||(m=Pc,"selectionStart"in m&&N2(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),dh&&fh(dh,m)||(dh=m,m=qm(j2,"onSelect"),0<m.length&&(c=new nm("onSelect","select",null,c,h),u.push({event:c,listeners:m}),c.target=Pc)))}function Qu(u,c){var h={};return h[u.toLowerCase()]=c.toLowerCase(),h["Webkit"+u]="webkit"+c,h["Moz"+u]="moz"+c,h}var Ic={animationend:Qu("Animation","AnimationEnd"),animationiteration:Qu("Animation","AnimationIteration"),animationstart:Qu("Animation","AnimationStart"),transitionrun:Qu("Transition","TransitionRun"),transitionstart:Qu("Transition","TransitionStart"),transitioncancel:Qu("Transition","TransitionCancel"),transitionend:Qu("Transition","TransitionEnd")},B2={},s5={};bs&&(s5=document.createElement("div").style,"AnimationEvent"in window||(delete Ic.animationend.animation,delete Ic.animationiteration.animation,delete Ic.animationstart.animation),"TransitionEvent"in window||delete Ic.transitionend.transition);function Zu(u){if(B2[u])return B2[u];if(!Ic[u])return u;var c=Ic[u],h;for(h in c)if(c.hasOwnProperty(h)&&h in s5)return B2[u]=c[h];return u}var o5=Zu("animationend"),u5=Zu("animationiteration"),l5=Zu("animationstart"),JX=Zu("transitionrun"),eV=Zu("transitionstart"),tV=Zu("transitioncancel"),c5=Zu("transitionend"),f5=new Map,L2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");L2.push("scrollEnd");function Qr(u,c){f5.set(u,c),Vu(c,[u])}var d5=new WeakMap;function _r(u,c){if(typeof u=="object"&&u!==null){var h=d5.get(u);return h!==void 0?h:(c={value:u,source:c,stack:DT(c)},d5.set(u,c),c)}return{value:u,source:c,stack:DT(c)}}var Ar=[],qc=0,U2=0;function am(){for(var u=qc,c=U2=qc=0;c<u;){var h=Ar[c];Ar[c++]=null;var m=Ar[c];Ar[c++]=null;var b=Ar[c];Ar[c++]=null;var _=Ar[c];if(Ar[c++]=null,m!==null&&b!==null){var $=m.pending;$===null?b.next=b:(b.next=$.next,$.next=b),m.pending=b}_!==0&&h5(h,b,_)}}function sm(u,c,h,m){Ar[qc++]=u,Ar[qc++]=c,Ar[qc++]=h,Ar[qc++]=m,U2|=m,u.lanes|=m,u=u.alternate,u!==null&&(u.lanes|=m)}function P2(u,c,h,m){return sm(u,c,h,m),om(u)}function Hc(u,c){return sm(u,null,null,c),om(u)}function h5(u,c,h){u.lanes|=h;var m=u.alternate;m!==null&&(m.lanes|=h);for(var b=!1,_=u.return;_!==null;)_.childLanes|=h,m=_.alternate,m!==null&&(m.childLanes|=h),_.tag===22&&(u=_.stateNode,u===null||u._visibility&1||(b=!0)),u=_,_=_.return;return u.tag===3?(_=u.stateNode,b&&c!==null&&(b=31-Ki(h),u=_.hiddenUpdates,m=u[b],m===null?u[b]=[c]:m.push(c),c.lane=h|536870912),_):null}function om(u){if(50<zh)throw zh=0,XE=null,Error(i(185));for(var c=u.return;c!==null;)u=c,c=u.return;return u.tag===3?u.stateNode:null}var Gc={};function nV(u,c,h,m){this.tag=u,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(u,c,h,m){return new nV(u,c,h,m)}function I2(u){return u=u.prototype,!(!u||!u.isReactComponent)}function xs(u,c){var h=u.alternate;return h===null?(h=er(u.tag,c,u.key,u.mode),h.elementType=u.elementType,h.type=u.type,h.stateNode=u.stateNode,h.alternate=u,u.alternate=h):(h.pendingProps=c,h.type=u.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=u.flags&65011712,h.childLanes=u.childLanes,h.lanes=u.lanes,h.child=u.child,h.memoizedProps=u.memoizedProps,h.memoizedState=u.memoizedState,h.updateQueue=u.updateQueue,c=u.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=u.sibling,h.index=u.index,h.ref=u.ref,h.refCleanup=u.refCleanup,h}function g5(u,c){u.flags&=65011714;var h=u.alternate;return h===null?(u.childLanes=0,u.lanes=c,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,c=h.dependencies,u.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),u}function um(u,c,h,m,b,_){var $=0;if(m=u,typeof u=="function")I2(u)&&($=1);else if(typeof u=="string")$=rW(u,h,ge.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case N:return u=er(31,h,c,b),u.elementType=N,u.lanes=_,u;case v:return Ku(h.children,b,_,c);case x:$=8,b|=24;break;case E:return u=er(12,h,c,b|2),u.elementType=E,u.lanes=_,u;case O:return u=er(13,h,c,b),u.elementType=O,u.lanes=_,u;case M:return u=er(19,h,c,b),u.elementType=M,u.lanes=_,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case A:case w:$=10;break e;case S:$=9;break e;case D:$=11;break e;case C:$=14;break e;case k:$=16,m=null;break e}$=29,h=Error(i(130,u===null?"null":typeof u,"")),m=null}return c=er($,h,c,b),c.elementType=u,c.type=m,c.lanes=_,c}function Ku(u,c,h,m){return u=er(7,u,m,c),u.lanes=h,u}function q2(u,c,h){return u=er(6,u,null,c),u.lanes=h,u}function H2(u,c,h){return c=er(4,u.children!==null?u.children:[],u.key,c),c.lanes=h,c.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},c}var Yc=[],Xc=0,lm=null,cm=0,Sr=[],wr=0,Ju=null,Es=1,_s="";function el(u,c){Yc[Xc++]=cm,Yc[Xc++]=lm,lm=u,cm=c}function p5(u,c,h){Sr[wr++]=Es,Sr[wr++]=_s,Sr[wr++]=Ju,Ju=u;var m=Es;u=_s;var b=32-Ki(m)-1;m&=~(1<<b),h+=1;var _=32-Ki(c)+b;if(30<_){var $=b-b%5;_=(m&(1<<$)-1).toString(32),m>>=$,b-=$,Es=1<<32-Ki(c)+b|h<<b|m,_s=_+u}else Es=1<<_|h<<b|m,_s=u}function G2(u){u.return!==null&&(el(u,1),p5(u,1,0))}function Y2(u){for(;u===lm;)lm=Yc[--Xc],Yc[Xc]=null,cm=Yc[--Xc],Yc[Xc]=null;for(;u===Ju;)Ju=Sr[--wr],Sr[wr]=null,_s=Sr[--wr],Sr[wr]=null,Es=Sr[--wr],Sr[wr]=null}var ci=null,qt=null,dt=!1,tl=null,wa=!1,X2=Error(i(519));function nl(u){var c=Error(i(418,""));throw ph(_r(c,u)),X2}function m5(u){var c=u.stateNode,h=u.type,m=u.memoizedProps;switch(c[qn]=u,c[Mi]=m,h){case"dialog":Ze("cancel",c),Ze("close",c);break;case"iframe":case"object":case"embed":Ze("load",c);break;case"video":case"audio":for(h=0;h<Lh.length;h++)Ze(Lh[h],c);break;case"source":Ze("error",c);break;case"img":case"image":case"link":Ze("error",c),Ze("load",c);break;case"details":Ze("toggle",c);break;case"input":Ze("invalid",c),TT(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Qp(c);break;case"select":Ze("invalid",c);break;case"textarea":Ze("invalid",c),FT(c,m.value,m.defaultValue,m.children),Qp(c)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||m.suppressHydrationWarning===!0||F6(c.textContent,h)?(m.popover!=null&&(Ze("beforetoggle",c),Ze("toggle",c)),m.onScroll!=null&&Ze("scroll",c),m.onScrollEnd!=null&&Ze("scrollend",c),m.onClick!=null&&(c.onclick=Hm),c=!0):c=!1,c||nl(u)}function y5(u){for(ci=u.return;ci;)switch(ci.tag){case 5:case 13:wa=!1;return;case 27:case 3:wa=!0;return;default:ci=ci.return}}function hh(u){if(u!==ci)return!1;if(!dt)return y5(u),dt=!0,!1;var c=u.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=u.type,h=!(h!=="form"&&h!=="button")||l_(u.type,u.memoizedProps)),h=!h),h&&qt&&nl(u),y5(u),c===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));e:{for(u=u.nextSibling,c=0;u;){if(u.nodeType===8)if(h=u.data,h==="/$"){if(c===0){qt=Kr(u.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++;u=u.nextSibling}qt=null}}else c===27?(c=qt,No(u.type)?(u=h_,h_=null,qt=u):qt=c):qt=ci?Kr(u.stateNode.nextSibling):null;return!0}function gh(){qt=ci=null,dt=!1}function v5(){var u=tl;return u!==null&&(Ri===null?Ri=u:Ri.push.apply(Ri,u),tl=null),u}function ph(u){tl===null?tl=[u]:tl.push(u)}var V2=W(null),il=null,As=null;function xo(u,c,h){se(V2,c._currentValue),c._currentValue=h}function Ss(u){u._currentValue=V2.current,ie(V2)}function W2(u,c,h){for(;u!==null;){var m=u.alternate;if((u.childLanes&c)!==c?(u.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),u===h)break;u=u.return}}function Q2(u,c,h,m){var b=u.child;for(b!==null&&(b.return=u);b!==null;){var _=b.dependencies;if(_!==null){var $=b.child;_=_.firstContext;e:for(;_!==null;){var T=_;_=b;for(var z=0;z<c.length;z++)if(T.context===c[z]){_.lanes|=h,T=_.alternate,T!==null&&(T.lanes|=h),W2(_.return,h,u),m||($=null);break e}_=T.next}}else if(b.tag===18){if($=b.return,$===null)throw Error(i(341));$.lanes|=h,_=$.alternate,_!==null&&(_.lanes|=h),W2($,h,u),$=null}else $=b.child;if($!==null)$.return=b;else for($=b;$!==null;){if($===u){$=null;break}if(b=$.sibling,b!==null){b.return=$.return,$=b;break}$=$.return}b=$}}function mh(u,c,h,m){u=null;for(var b=c,_=!1;b!==null;){if(!_){if((b.flags&524288)!==0)_=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var $=b.alternate;if($===null)throw Error(i(387));if($=$.memoizedProps,$!==null){var T=b.type;Ji(b.pendingProps.value,$.value)||(u!==null?u.push(T):u=[T])}}else if(b===It.current){if($=b.alternate,$===null)throw Error(i(387));$.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(u!==null?u.push(Gh):u=[Gh])}b=b.return}u!==null&&Q2(c,u,h,m),c.flags|=262144}function fm(u){for(u=u.firstContext;u!==null;){if(!Ji(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function rl(u){il=u,As=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Hn(u){return b5(il,u)}function dm(u,c){return il===null&&rl(u),b5(u,c)}function b5(u,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},As===null){if(u===null)throw Error(i(308));As=c,u.dependencies={lanes:0,firstContext:c},u.flags|=524288}else As=As.next=c;return h}var iV=typeof AbortController<"u"?AbortController:function(){var u=[],c=this.signal={aborted:!1,addEventListener:function(h,m){u.push(m)}};this.abort=function(){c.aborted=!0,u.forEach(function(h){return h()})}},rV=e.unstable_scheduleCallback,aV=e.unstable_NormalPriority,cn={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Z2(){return{controller:new iV,data:new Map,refCount:0}}function yh(u){u.refCount--,u.refCount===0&&rV(aV,function(){u.controller.abort()})}var vh=null,K2=0,Vc=0,Wc=null;function sV(u,c){if(vh===null){var h=vh=[];K2=0,Vc=e_(),Wc={status:"pending",value:void 0,then:function(m){h.push(m)}}}return K2++,c.then(x5,x5),c}function x5(){if(--K2===0&&vh!==null){Wc!==null&&(Wc.status="fulfilled");var u=vh;vh=null,Vc=0,Wc=null;for(var c=0;c<u.length;c++)(0,u[c])()}}function oV(u,c){var h=[],m={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return u.then(function(){m.status="fulfilled",m.value=c;for(var b=0;b<h.length;b++)(0,h[b])(c)},function(b){for(m.status="rejected",m.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),m}var E5=F.S;F.S=function(u,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&sV(u,c),E5!==null&&E5(u,c)};var al=W(null);function J2(){var u=al.current;return u!==null?u:$t.pooledCache}function hm(u,c){c===null?se(al,al.current):se(al,c.pool)}function _5(){var u=J2();return u===null?null:{parent:cn._currentValue,pool:u}}var bh=Error(i(460)),A5=Error(i(474)),gm=Error(i(542)),eE={then:function(){}};function S5(u){return u=u.status,u==="fulfilled"||u==="rejected"}function pm(){}function w5(u,c,h){switch(h=u[h],h===void 0?u.push(c):h!==c&&(c.then(pm,pm),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,C5(u),u;default:if(typeof c.status=="string")c.then(pm,pm);else{if(u=$t,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=c,u.status="pending",u.then(function(m){if(c.status==="pending"){var b=c;b.status="fulfilled",b.value=m}},function(m){if(c.status==="pending"){var b=c;b.status="rejected",b.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,C5(u),u}throw xh=c,bh}}var xh=null;function O5(){if(xh===null)throw Error(i(459));var u=xh;return xh=null,u}function C5(u){if(u===bh||u===gm)throw Error(i(483))}var Eo=!1;function tE(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nE(u,c){u=u.updateQueue,c.updateQueue===u&&(c.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function _o(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Ao(u,c,h){var m=u.updateQueue;if(m===null)return null;if(m=m.shared,(mt&2)!==0){var b=m.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),m.pending=c,c=om(u),h5(u,null,h),c}return sm(u,m,c,h),om(u)}function Eh(u,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var m=c.lanes;m&=u.pendingLanes,h|=m,c.lanes=h,xT(u,h)}}function iE(u,c){var h=u.updateQueue,m=u.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var b=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var $={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};_===null?b=_=$:_=_.next=$,h=h.next}while(h!==null);_===null?b=_=c:_=_.next=c}else b=_=c;h={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:_,shared:m.shared,callbacks:m.callbacks},u.updateQueue=h;return}u=h.lastBaseUpdate,u===null?h.firstBaseUpdate=c:u.next=c,h.lastBaseUpdate=c}var rE=!1;function _h(){if(rE){var u=Wc;if(u!==null)throw u}}function Ah(u,c,h,m){rE=!1;var b=u.updateQueue;Eo=!1;var _=b.firstBaseUpdate,$=b.lastBaseUpdate,T=b.shared.pending;if(T!==null){b.shared.pending=null;var z=T,X=z.next;z.next=null,$===null?_=X:$.next=X,$=z;var re=u.alternate;re!==null&&(re=re.updateQueue,T=re.lastBaseUpdate,T!==$&&(T===null?re.firstBaseUpdate=X:T.next=X,re.lastBaseUpdate=z))}if(_!==null){var oe=b.baseState;$=0,re=X=z=null,T=_;do{var Z=T.lane&-536870913,K=Z!==T.lane;if(K?(nt&Z)===Z:(m&Z)===Z){Z!==0&&Z===Vc&&(rE=!0),re!==null&&(re=re.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ne=u,ke=T;Z=c;var _t=h;switch(ke.tag){case 1:if(Ne=ke.payload,typeof Ne=="function"){oe=Ne.call(_t,oe,Z);break e}oe=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=ke.payload,Z=typeof Ne=="function"?Ne.call(_t,oe,Z):Ne,Z==null)break e;oe=d({},oe,Z);break e;case 2:Eo=!0}}Z=T.callback,Z!==null&&(u.flags|=64,K&&(u.flags|=8192),K=b.callbacks,K===null?b.callbacks=[Z]:K.push(Z))}else K={lane:Z,tag:T.tag,payload:T.payload,callback:T.callback,next:null},re===null?(X=re=K,z=oe):re=re.next=K,$|=Z;if(T=T.next,T===null){if(T=b.shared.pending,T===null)break;K=T,T=K.next,K.next=null,b.lastBaseUpdate=K,b.shared.pending=null}}while(!0);re===null&&(z=oe),b.baseState=z,b.firstBaseUpdate=X,b.lastBaseUpdate=re,_===null&&(b.shared.lanes=0),To|=$,u.lanes=$,u.memoizedState=oe}}function D5(u,c){if(typeof u!="function")throw Error(i(191,u));u.call(c)}function $5(u,c){var h=u.callbacks;if(h!==null)for(u.callbacks=null,u=0;u<h.length;u++)D5(h[u],c)}var Qc=W(null),mm=W(0);function M5(u,c){u=Ts,se(mm,u),se(Qc,c),Ts=u|c.baseLanes}function aE(){se(mm,Ts),se(Qc,Qc.current)}function sE(){Ts=mm.current,ie(Qc),ie(mm)}var So=0,Ye=null,xt=null,rn=null,ym=!1,Zc=!1,sl=!1,vm=0,Sh=0,Kc=null,uV=0;function Zt(){throw Error(i(321))}function oE(u,c){if(c===null)return!1;for(var h=0;h<c.length&&h<u.length;h++)if(!Ji(u[h],c[h]))return!1;return!0}function uE(u,c,h,m,b,_){return So=_,Ye=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,F.H=u===null||u.memoizedState===null?hk:gk,sl=!1,_=h(m,b),sl=!1,Zc&&(_=k5(c,h,m,b)),T5(u),_}function T5(u){F.H=Sm;var c=xt!==null&&xt.next!==null;if(So=0,rn=xt=Ye=null,ym=!1,Sh=0,Kc=null,c)throw Error(i(300));u===null||An||(u=u.dependencies,u!==null&&fm(u)&&(An=!0))}function k5(u,c,h,m){Ye=u;var b=0;do{if(Zc&&(Kc=null),Sh=0,Zc=!1,25<=b)throw Error(i(301));if(b+=1,rn=xt=null,u.updateQueue!=null){var _=u.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}F.H=pV,_=c(h,m)}while(Zc);return _}function lV(){var u=F.H,c=u.useState()[0];return c=typeof c.then=="function"?wh(c):c,u=u.useState()[0],(xt!==null?xt.memoizedState:null)!==u&&(Ye.flags|=1024),c}function lE(){var u=vm!==0;return vm=0,u}function cE(u,c,h){c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~h}function fE(u){if(ym){for(u=u.memoizedState;u!==null;){var c=u.queue;c!==null&&(c.pending=null),u=u.next}ym=!1}So=0,rn=xt=Ye=null,Zc=!1,Sh=vm=0,Kc=null}function ki(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Ye.memoizedState=rn=u:rn=rn.next=u,rn}function an(){if(xt===null){var u=Ye.alternate;u=u!==null?u.memoizedState:null}else u=xt.next;var c=rn===null?Ye.memoizedState:rn.next;if(c!==null)rn=c,xt=u;else{if(u===null)throw Ye.alternate===null?Error(i(467)):Error(i(310));xt=u,u={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},rn===null?Ye.memoizedState=rn=u:rn=rn.next=u}return rn}function dE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wh(u){var c=Sh;return Sh+=1,Kc===null&&(Kc=[]),u=w5(Kc,u,c),c=Ye,(rn===null?c.memoizedState:rn.next)===null&&(c=c.alternate,F.H=c===null||c.memoizedState===null?hk:gk),u}function bm(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return wh(u);if(u.$$typeof===w)return Hn(u)}throw Error(i(438,String(u)))}function hE(u){var c=null,h=Ye.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var m=Ye.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(b){return b.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=dE(),Ye.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(u),m=0;m<u;m++)h[m]=L;return c.index++,h}function ws(u,c){return typeof c=="function"?c(u):c}function xm(u){var c=an();return gE(c,xt,u)}function gE(u,c,h){var m=u.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=h;var b=u.baseQueue,_=m.pending;if(_!==null){if(b!==null){var $=b.next;b.next=_.next,_.next=$}c.baseQueue=b=_,m.pending=null}if(_=u.baseState,b===null)u.memoizedState=_;else{c=b.next;var T=$=null,z=null,X=c,re=!1;do{var oe=X.lane&-536870913;if(oe!==X.lane?(nt&oe)===oe:(So&oe)===oe){var Z=X.revertLane;if(Z===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),oe===Vc&&(re=!0);else if((So&Z)===Z){X=X.next,Z===Vc&&(re=!0);continue}else oe={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},z===null?(T=z=oe,$=_):z=z.next=oe,Ye.lanes|=Z,To|=Z;oe=X.action,sl&&h(_,oe),_=X.hasEagerState?X.eagerState:h(_,oe)}else Z={lane:oe,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},z===null?(T=z=Z,$=_):z=z.next=Z,Ye.lanes|=oe,To|=oe;X=X.next}while(X!==null&&X!==c);if(z===null?$=_:z.next=T,!Ji(_,u.memoizedState)&&(An=!0,re&&(h=Wc,h!==null)))throw h;u.memoizedState=_,u.baseState=$,u.baseQueue=z,m.lastRenderedState=_}return b===null&&(m.lanes=0),[u.memoizedState,m.dispatch]}function pE(u){var c=an(),h=c.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=u;var m=h.dispatch,b=h.pending,_=c.memoizedState;if(b!==null){h.pending=null;var $=b=b.next;do _=u(_,$.action),$=$.next;while($!==b);Ji(_,c.memoizedState)||(An=!0),c.memoizedState=_,c.baseQueue===null&&(c.baseState=_),h.lastRenderedState=_}return[_,m]}function F5(u,c,h){var m=Ye,b=an(),_=dt;if(_){if(h===void 0)throw Error(i(407));h=h()}else h=c();var $=!Ji((xt||b).memoizedState,h);$&&(b.memoizedState=h,An=!0),b=b.queue;var T=j5.bind(null,m,b,u);if(Oh(2048,8,T,[u]),b.getSnapshot!==c||$||rn!==null&&rn.memoizedState.tag&1){if(m.flags|=2048,Jc(9,Em(),N5.bind(null,m,b,h,c),null),$t===null)throw Error(i(349));_||(So&124)!==0||R5(m,c,h)}return h}function R5(u,c,h){u.flags|=16384,u={getSnapshot:c,value:h},c=Ye.updateQueue,c===null?(c=dE(),Ye.updateQueue=c,c.stores=[u]):(h=c.stores,h===null?c.stores=[u]:h.push(u))}function N5(u,c,h,m){c.value=h,c.getSnapshot=m,z5(c)&&B5(u)}function j5(u,c,h){return h(function(){z5(c)&&B5(u)})}function z5(u){var c=u.getSnapshot;u=u.value;try{var h=c();return!Ji(u,h)}catch{return!0}}function B5(u){var c=Hc(u,2);c!==null&&ar(c,u,2)}function mE(u){var c=ki();if(typeof u=="function"){var h=u;if(u=h(),sl){yo(!0);try{h()}finally{yo(!1)}}}return c.memoizedState=c.baseState=u,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:u},c}function L5(u,c,h,m){return u.baseState=h,gE(u,xt,typeof m=="function"?m:ws)}function cV(u,c,h,m,b){if(Am(u))throw Error(i(485));if(u=c.action,u!==null){var _={payload:b,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){_.listeners.push($)}};F.T!==null?h(!0):_.isTransition=!1,m(_),h=c.pending,h===null?(_.next=c.pending=_,U5(c,_)):(_.next=h.next,c.pending=h.next=_)}}function U5(u,c){var h=c.action,m=c.payload,b=u.state;if(c.isTransition){var _=F.T,$={};F.T=$;try{var T=h(b,m),z=F.S;z!==null&&z($,T),P5(u,c,T)}catch(X){yE(u,c,X)}finally{F.T=_}}else try{_=h(b,m),P5(u,c,_)}catch(X){yE(u,c,X)}}function P5(u,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){I5(u,c,m)},function(m){return yE(u,c,m)}):I5(u,c,h)}function I5(u,c,h){c.status="fulfilled",c.value=h,q5(c),u.state=h,c=u.pending,c!==null&&(h=c.next,h===c?u.pending=null:(h=h.next,c.next=h,U5(u,h)))}function yE(u,c,h){var m=u.pending;if(u.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=h,q5(c),c=c.next;while(c!==m)}u.action=null}function q5(u){u=u.listeners;for(var c=0;c<u.length;c++)(0,u[c])()}function H5(u,c){return c}function G5(u,c){if(dt){var h=$t.formState;if(h!==null){e:{var m=Ye;if(dt){if(qt){t:{for(var b=qt,_=wa;b.nodeType!==8;){if(!_){b=null;break t}if(b=Kr(b.nextSibling),b===null){b=null;break t}}_=b.data,b=_==="F!"||_==="F"?b:null}if(b){qt=Kr(b.nextSibling),m=b.data==="F!";break e}}nl(m)}m=!1}m&&(c=h[0])}}return h=ki(),h.memoizedState=h.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:H5,lastRenderedState:c},h.queue=m,h=ck.bind(null,Ye,m),m.dispatch=h,m=mE(!1),_=_E.bind(null,Ye,!1,m.queue),m=ki(),b={state:c,dispatch:null,action:u,pending:null},m.queue=b,h=cV.bind(null,Ye,b,_,h),b.dispatch=h,m.memoizedState=u,[c,h,!1]}function Y5(u){var c=an();return X5(c,xt,u)}function X5(u,c,h){if(c=gE(u,c,H5)[0],u=xm(ws)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=wh(c)}catch($){throw $===bh?gm:$}else m=c;c=an();var b=c.queue,_=b.dispatch;return h!==c.memoizedState&&(Ye.flags|=2048,Jc(9,Em(),fV.bind(null,b,h),null)),[m,_,u]}function fV(u,c){u.action=c}function V5(u){var c=an(),h=xt;if(h!==null)return X5(c,h,u);an(),c=c.memoizedState,h=an();var m=h.queue.dispatch;return h.memoizedState=u,[c,m,!1]}function Jc(u,c,h,m){return u={tag:u,create:h,deps:m,inst:c,next:null},c=Ye.updateQueue,c===null&&(c=dE(),Ye.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=u.next=u:(m=h.next,h.next=u,u.next=m,c.lastEffect=u),u}function Em(){return{destroy:void 0,resource:void 0}}function W5(){return an().memoizedState}function _m(u,c,h,m){var b=ki();m=m===void 0?null:m,Ye.flags|=u,b.memoizedState=Jc(1|c,Em(),h,m)}function Oh(u,c,h,m){var b=an();m=m===void 0?null:m;var _=b.memoizedState.inst;xt!==null&&m!==null&&oE(m,xt.memoizedState.deps)?b.memoizedState=Jc(c,_,h,m):(Ye.flags|=u,b.memoizedState=Jc(1|c,_,h,m))}function Q5(u,c){_m(8390656,8,u,c)}function Z5(u,c){Oh(2048,8,u,c)}function K5(u,c){return Oh(4,2,u,c)}function J5(u,c){return Oh(4,4,u,c)}function ek(u,c){if(typeof c=="function"){u=u();var h=c(u);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return u=u(),c.current=u,function(){c.current=null}}function tk(u,c,h){h=h!=null?h.concat([u]):null,Oh(4,4,ek.bind(null,c,u),h)}function vE(){}function nk(u,c){var h=an();c=c===void 0?null:c;var m=h.memoizedState;return c!==null&&oE(c,m[1])?m[0]:(h.memoizedState=[u,c],u)}function ik(u,c){var h=an();c=c===void 0?null:c;var m=h.memoizedState;if(c!==null&&oE(c,m[1]))return m[0];if(m=u(),sl){yo(!0);try{u()}finally{yo(!1)}}return h.memoizedState=[m,c],m}function bE(u,c,h){return h===void 0||(So&1073741824)!==0?u.memoizedState=c:(u.memoizedState=h,u=s6(),Ye.lanes|=u,To|=u,h)}function rk(u,c,h,m){return Ji(h,c)?h:Qc.current!==null?(u=bE(u,h,m),Ji(u,c)||(An=!0),u):(So&42)===0?(An=!0,u.memoizedState=h):(u=s6(),Ye.lanes|=u,To|=u,c)}function ak(u,c,h,m,b){var _=U.p;U.p=_!==0&&8>_?_:8;var $=F.T,T={};F.T=T,_E(u,!1,c,h);try{var z=b(),X=F.S;if(X!==null&&X(T,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var re=oV(z,m);Ch(u,c,re,rr(u))}else Ch(u,c,m,rr(u))}catch(oe){Ch(u,c,{then:function(){},status:"rejected",reason:oe},rr())}finally{U.p=_,F.T=$}}function dV(){}function xE(u,c,h,m){if(u.tag!==5)throw Error(i(476));var b=sk(u).queue;ak(u,b,c,H,h===null?dV:function(){return ok(u),h(m)})}function sk(u){var c=u.memoizedState;if(c!==null)return c;c={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:H},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:h},next:null},u.memoizedState=c,u=u.alternate,u!==null&&(u.memoizedState=c),c}function ok(u){var c=sk(u).next.queue;Ch(u,c,{},rr())}function EE(){return Hn(Gh)}function uk(){return an().memoizedState}function lk(){return an().memoizedState}function hV(u){for(var c=u.return;c!==null;){switch(c.tag){case 24:case 3:var h=rr();u=_o(h);var m=Ao(c,u,h);m!==null&&(ar(m,c,h),Eh(m,c,h)),c={cache:Z2()},u.payload=c;return}c=c.return}}function gV(u,c,h){var m=rr();h={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null},Am(u)?fk(c,h):(h=P2(u,c,h,m),h!==null&&(ar(h,u,m),dk(h,c,m)))}function ck(u,c,h){var m=rr();Ch(u,c,h,m)}function Ch(u,c,h,m){var b={lane:m,revertLane:0,action:h,hasEagerState:!1,eagerState:null,next:null};if(Am(u))fk(c,b);else{var _=u.alternate;if(u.lanes===0&&(_===null||_.lanes===0)&&(_=c.lastRenderedReducer,_!==null))try{var $=c.lastRenderedState,T=_($,h);if(b.hasEagerState=!0,b.eagerState=T,Ji(T,$))return sm(u,c,b,0),$t===null&&am(),!1}catch{}finally{}if(h=P2(u,c,b,m),h!==null)return ar(h,u,m),dk(h,c,m),!0}return!1}function _E(u,c,h,m){if(m={lane:2,revertLane:e_(),action:m,hasEagerState:!1,eagerState:null,next:null},Am(u)){if(c)throw Error(i(479))}else c=P2(u,h,m,2),c!==null&&ar(c,u,2)}function Am(u){var c=u.alternate;return u===Ye||c!==null&&c===Ye}function fk(u,c){Zc=ym=!0;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}function dk(u,c,h){if((h&4194048)!==0){var m=c.lanes;m&=u.pendingLanes,h|=m,c.lanes=h,xT(u,h)}}var Sm={readContext:Hn,use:bm,useCallback:Zt,useContext:Zt,useEffect:Zt,useImperativeHandle:Zt,useLayoutEffect:Zt,useInsertionEffect:Zt,useMemo:Zt,useReducer:Zt,useRef:Zt,useState:Zt,useDebugValue:Zt,useDeferredValue:Zt,useTransition:Zt,useSyncExternalStore:Zt,useId:Zt,useHostTransitionStatus:Zt,useFormState:Zt,useActionState:Zt,useOptimistic:Zt,useMemoCache:Zt,useCacheRefresh:Zt},hk={readContext:Hn,use:bm,useCallback:function(u,c){return ki().memoizedState=[u,c===void 0?null:c],u},useContext:Hn,useEffect:Q5,useImperativeHandle:function(u,c,h){h=h!=null?h.concat([u]):null,_m(4194308,4,ek.bind(null,c,u),h)},useLayoutEffect:function(u,c){return _m(4194308,4,u,c)},useInsertionEffect:function(u,c){_m(4,2,u,c)},useMemo:function(u,c){var h=ki();c=c===void 0?null:c;var m=u();if(sl){yo(!0);try{u()}finally{yo(!1)}}return h.memoizedState=[m,c],m},useReducer:function(u,c,h){var m=ki();if(h!==void 0){var b=h(c);if(sl){yo(!0);try{h(c)}finally{yo(!1)}}}else b=c;return m.memoizedState=m.baseState=b,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:b},m.queue=u,u=u.dispatch=gV.bind(null,Ye,u),[m.memoizedState,u]},useRef:function(u){var c=ki();return u={current:u},c.memoizedState=u},useState:function(u){u=mE(u);var c=u.queue,h=ck.bind(null,Ye,c);return c.dispatch=h,[u.memoizedState,h]},useDebugValue:vE,useDeferredValue:function(u,c){var h=ki();return bE(h,u,c)},useTransition:function(){var u=mE(!1);return u=ak.bind(null,Ye,u.queue,!0,!1),ki().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,c,h){var m=Ye,b=ki();if(dt){if(h===void 0)throw Error(i(407));h=h()}else{if(h=c(),$t===null)throw Error(i(349));(nt&124)!==0||R5(m,c,h)}b.memoizedState=h;var _={value:h,getSnapshot:c};return b.queue=_,Q5(j5.bind(null,m,_,u),[u]),m.flags|=2048,Jc(9,Em(),N5.bind(null,m,_,h,c),null),h},useId:function(){var u=ki(),c=$t.identifierPrefix;if(dt){var h=_s,m=Es;h=(m&~(1<<32-Ki(m)-1)).toString(32)+h,c="«"+c+"R"+h,h=vm++,0<h&&(c+="H"+h.toString(32)),c+="»"}else h=uV++,c="«"+c+"r"+h.toString(32)+"»";return u.memoizedState=c},useHostTransitionStatus:EE,useFormState:G5,useActionState:G5,useOptimistic:function(u){var c=ki();c.memoizedState=c.baseState=u;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=_E.bind(null,Ye,!0,h),h.dispatch=c,[u,c]},useMemoCache:hE,useCacheRefresh:function(){return ki().memoizedState=hV.bind(null,Ye)}},gk={readContext:Hn,use:bm,useCallback:nk,useContext:Hn,useEffect:Z5,useImperativeHandle:tk,useInsertionEffect:K5,useLayoutEffect:J5,useMemo:ik,useReducer:xm,useRef:W5,useState:function(){return xm(ws)},useDebugValue:vE,useDeferredValue:function(u,c){var h=an();return rk(h,xt.memoizedState,u,c)},useTransition:function(){var u=xm(ws)[0],c=an().memoizedState;return[typeof u=="boolean"?u:wh(u),c]},useSyncExternalStore:F5,useId:uk,useHostTransitionStatus:EE,useFormState:Y5,useActionState:Y5,useOptimistic:function(u,c){var h=an();return L5(h,xt,u,c)},useMemoCache:hE,useCacheRefresh:lk},pV={readContext:Hn,use:bm,useCallback:nk,useContext:Hn,useEffect:Z5,useImperativeHandle:tk,useInsertionEffect:K5,useLayoutEffect:J5,useMemo:ik,useReducer:pE,useRef:W5,useState:function(){return pE(ws)},useDebugValue:vE,useDeferredValue:function(u,c){var h=an();return xt===null?bE(h,u,c):rk(h,xt.memoizedState,u,c)},useTransition:function(){var u=pE(ws)[0],c=an().memoizedState;return[typeof u=="boolean"?u:wh(u),c]},useSyncExternalStore:F5,useId:uk,useHostTransitionStatus:EE,useFormState:V5,useActionState:V5,useOptimistic:function(u,c){var h=an();return xt!==null?L5(h,xt,u,c):(h.baseState=u,[u,h.queue.dispatch])},useMemoCache:hE,useCacheRefresh:lk},ef=null,Dh=0;function wm(u){var c=Dh;return Dh+=1,ef===null&&(ef=[]),w5(ef,u,c)}function $h(u,c){c=c.props.ref,u.ref=c!==void 0?c:null}function Om(u,c){throw c.$$typeof===g?Error(i(525)):(u=Object.prototype.toString.call(c),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":u)))}function pk(u){var c=u._init;return c(u._payload)}function mk(u){function c(q,I){if(u){var Y=q.deletions;Y===null?(q.deletions=[I],q.flags|=16):Y.push(I)}}function h(q,I){if(!u)return null;for(;I!==null;)c(q,I),I=I.sibling;return null}function m(q){for(var I=new Map;q!==null;)q.key!==null?I.set(q.key,q):I.set(q.index,q),q=q.sibling;return I}function b(q,I){return q=xs(q,I),q.index=0,q.sibling=null,q}function _(q,I,Y){return q.index=Y,u?(Y=q.alternate,Y!==null?(Y=Y.index,Y<I?(q.flags|=67108866,I):Y):(q.flags|=67108866,I)):(q.flags|=1048576,I)}function $(q){return u&&q.alternate===null&&(q.flags|=67108866),q}function T(q,I,Y,ae){return I===null||I.tag!==6?(I=q2(Y,q.mode,ae),I.return=q,I):(I=b(I,Y),I.return=q,I)}function z(q,I,Y,ae){var ye=Y.type;return ye===v?re(q,I,Y.props.children,ae,Y.key):I!==null&&(I.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===k&&pk(ye)===I.type)?(I=b(I,Y.props),$h(I,Y),I.return=q,I):(I=um(Y.type,Y.key,Y.props,null,q.mode,ae),$h(I,Y),I.return=q,I)}function X(q,I,Y,ae){return I===null||I.tag!==4||I.stateNode.containerInfo!==Y.containerInfo||I.stateNode.implementation!==Y.implementation?(I=H2(Y,q.mode,ae),I.return=q,I):(I=b(I,Y.children||[]),I.return=q,I)}function re(q,I,Y,ae,ye){return I===null||I.tag!==7?(I=Ku(Y,q.mode,ae,ye),I.return=q,I):(I=b(I,Y),I.return=q,I)}function oe(q,I,Y){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=q2(""+I,q.mode,Y),I.return=q,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case p:return Y=um(I.type,I.key,I.props,null,q.mode,Y),$h(Y,I),Y.return=q,Y;case y:return I=H2(I,q.mode,Y),I.return=q,I;case k:var ae=I._init;return I=ae(I._payload),oe(q,I,Y)}if(j(I)||V(I))return I=Ku(I,q.mode,Y,null),I.return=q,I;if(typeof I.then=="function")return oe(q,wm(I),Y);if(I.$$typeof===w)return oe(q,dm(q,I),Y);Om(q,I)}return null}function Z(q,I,Y,ae){var ye=I!==null?I.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return ye!==null?null:T(q,I,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case p:return Y.key===ye?z(q,I,Y,ae):null;case y:return Y.key===ye?X(q,I,Y,ae):null;case k:return ye=Y._init,Y=ye(Y._payload),Z(q,I,Y,ae)}if(j(Y)||V(Y))return ye!==null?null:re(q,I,Y,ae,null);if(typeof Y.then=="function")return Z(q,I,wm(Y),ae);if(Y.$$typeof===w)return Z(q,I,dm(q,Y),ae);Om(q,Y)}return null}function K(q,I,Y,ae,ye){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return q=q.get(Y)||null,T(I,q,""+ae,ye);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case p:return q=q.get(ae.key===null?Y:ae.key)||null,z(I,q,ae,ye);case y:return q=q.get(ae.key===null?Y:ae.key)||null,X(I,q,ae,ye);case k:var Ve=ae._init;return ae=Ve(ae._payload),K(q,I,Y,ae,ye)}if(j(ae)||V(ae))return q=q.get(Y)||null,re(I,q,ae,ye,null);if(typeof ae.then=="function")return K(q,I,Y,wm(ae),ye);if(ae.$$typeof===w)return K(q,I,Y,dm(I,ae),ye);Om(I,ae)}return null}function Ne(q,I,Y,ae){for(var ye=null,Ve=null,Ae=I,Fe=I=0,wn=null;Ae!==null&&Fe<Y.length;Fe++){Ae.index>Fe?(wn=Ae,Ae=null):wn=Ae.sibling;var st=Z(q,Ae,Y[Fe],ae);if(st===null){Ae===null&&(Ae=wn);break}u&&Ae&&st.alternate===null&&c(q,Ae),I=_(st,I,Fe),Ve===null?ye=st:Ve.sibling=st,Ve=st,Ae=wn}if(Fe===Y.length)return h(q,Ae),dt&&el(q,Fe),ye;if(Ae===null){for(;Fe<Y.length;Fe++)Ae=oe(q,Y[Fe],ae),Ae!==null&&(I=_(Ae,I,Fe),Ve===null?ye=Ae:Ve.sibling=Ae,Ve=Ae);return dt&&el(q,Fe),ye}for(Ae=m(Ae);Fe<Y.length;Fe++)wn=K(Ae,q,Fe,Y[Fe],ae),wn!==null&&(u&&wn.alternate!==null&&Ae.delete(wn.key===null?Fe:wn.key),I=_(wn,I,Fe),Ve===null?ye=wn:Ve.sibling=wn,Ve=wn);return u&&Ae.forEach(function(Uo){return c(q,Uo)}),dt&&el(q,Fe),ye}function ke(q,I,Y,ae){if(Y==null)throw Error(i(151));for(var ye=null,Ve=null,Ae=I,Fe=I=0,wn=null,st=Y.next();Ae!==null&&!st.done;Fe++,st=Y.next()){Ae.index>Fe?(wn=Ae,Ae=null):wn=Ae.sibling;var Uo=Z(q,Ae,st.value,ae);if(Uo===null){Ae===null&&(Ae=wn);break}u&&Ae&&Uo.alternate===null&&c(q,Ae),I=_(Uo,I,Fe),Ve===null?ye=Uo:Ve.sibling=Uo,Ve=Uo,Ae=wn}if(st.done)return h(q,Ae),dt&&el(q,Fe),ye;if(Ae===null){for(;!st.done;Fe++,st=Y.next())st=oe(q,st.value,ae),st!==null&&(I=_(st,I,Fe),Ve===null?ye=st:Ve.sibling=st,Ve=st);return dt&&el(q,Fe),ye}for(Ae=m(Ae);!st.done;Fe++,st=Y.next())st=K(Ae,q,Fe,st.value,ae),st!==null&&(u&&st.alternate!==null&&Ae.delete(st.key===null?Fe:st.key),I=_(st,I,Fe),Ve===null?ye=st:Ve.sibling=st,Ve=st);return u&&Ae.forEach(function(mW){return c(q,mW)}),dt&&el(q,Fe),ye}function _t(q,I,Y,ae){if(typeof Y=="object"&&Y!==null&&Y.type===v&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case p:e:{for(var ye=Y.key;I!==null;){if(I.key===ye){if(ye=Y.type,ye===v){if(I.tag===7){h(q,I.sibling),ae=b(I,Y.props.children),ae.return=q,q=ae;break e}}else if(I.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===k&&pk(ye)===I.type){h(q,I.sibling),ae=b(I,Y.props),$h(ae,Y),ae.return=q,q=ae;break e}h(q,I);break}else c(q,I);I=I.sibling}Y.type===v?(ae=Ku(Y.props.children,q.mode,ae,Y.key),ae.return=q,q=ae):(ae=um(Y.type,Y.key,Y.props,null,q.mode,ae),$h(ae,Y),ae.return=q,q=ae)}return $(q);case y:e:{for(ye=Y.key;I!==null;){if(I.key===ye)if(I.tag===4&&I.stateNode.containerInfo===Y.containerInfo&&I.stateNode.implementation===Y.implementation){h(q,I.sibling),ae=b(I,Y.children||[]),ae.return=q,q=ae;break e}else{h(q,I);break}else c(q,I);I=I.sibling}ae=H2(Y,q.mode,ae),ae.return=q,q=ae}return $(q);case k:return ye=Y._init,Y=ye(Y._payload),_t(q,I,Y,ae)}if(j(Y))return Ne(q,I,Y,ae);if(V(Y)){if(ye=V(Y),typeof ye!="function")throw Error(i(150));return Y=ye.call(Y),ke(q,I,Y,ae)}if(typeof Y.then=="function")return _t(q,I,wm(Y),ae);if(Y.$$typeof===w)return _t(q,I,dm(q,Y),ae);Om(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,I!==null&&I.tag===6?(h(q,I.sibling),ae=b(I,Y),ae.return=q,q=ae):(h(q,I),ae=q2(Y,q.mode,ae),ae.return=q,q=ae),$(q)):h(q,I)}return function(q,I,Y,ae){try{Dh=0;var ye=_t(q,I,Y,ae);return ef=null,ye}catch(Ae){if(Ae===bh||Ae===gm)throw Ae;var Ve=er(29,Ae,null,q.mode);return Ve.lanes=ae,Ve.return=q,Ve}finally{}}}var tf=mk(!0),yk=mk(!1),Or=W(null),Oa=null;function wo(u){var c=u.alternate;se(fn,fn.current&1),se(Or,u),Oa===null&&(c===null||Qc.current!==null||c.memoizedState!==null)&&(Oa=u)}function vk(u){if(u.tag===22){if(se(fn,fn.current),se(Or,u),Oa===null){var c=u.alternate;c!==null&&c.memoizedState!==null&&(Oa=u)}}else Oo()}function Oo(){se(fn,fn.current),se(Or,Or.current)}function Os(u){ie(Or),Oa===u&&(Oa=null),ie(fn)}var fn=W(0);function Cm(u){for(var c=u;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||d_(h)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function AE(u,c,h,m){c=u.memoizedState,h=h(m,c),h=h==null?c:d({},c,h),u.memoizedState=h,u.lanes===0&&(u.updateQueue.baseState=h)}var SE={enqueueSetState:function(u,c,h){u=u._reactInternals;var m=rr(),b=_o(m);b.payload=c,h!=null&&(b.callback=h),c=Ao(u,b,m),c!==null&&(ar(c,u,m),Eh(c,u,m))},enqueueReplaceState:function(u,c,h){u=u._reactInternals;var m=rr(),b=_o(m);b.tag=1,b.payload=c,h!=null&&(b.callback=h),c=Ao(u,b,m),c!==null&&(ar(c,u,m),Eh(c,u,m))},enqueueForceUpdate:function(u,c){u=u._reactInternals;var h=rr(),m=_o(h);m.tag=2,c!=null&&(m.callback=c),c=Ao(u,m,h),c!==null&&(ar(c,u,h),Eh(c,u,h))}};function bk(u,c,h,m,b,_,$){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(m,_,$):c.prototype&&c.prototype.isPureReactComponent?!fh(h,m)||!fh(b,_):!0}function xk(u,c,h,m){u=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,m),c.state!==u&&SE.enqueueReplaceState(c,c.state,null)}function ol(u,c){var h=c;if("ref"in c){h={};for(var m in c)m!=="ref"&&(h[m]=c[m])}if(u=u.defaultProps){h===c&&(h=d({},h));for(var b in u)h[b]===void 0&&(h[b]=u[b])}return h}var Dm=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function Ek(u){Dm(u)}function _k(u){console.error(u)}function Ak(u){Dm(u)}function $m(u,c){try{var h=u.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function Sk(u,c,h){try{var m=u.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function wE(u,c,h){return h=_o(h),h.tag=3,h.payload={element:null},h.callback=function(){$m(u,c)},h}function wk(u){return u=_o(u),u.tag=3,u}function Ok(u,c,h,m){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var _=m.value;u.payload=function(){return b(_)},u.callback=function(){Sk(c,h,m)}}var $=h.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(u.callback=function(){Sk(c,h,m),typeof b!="function"&&(ko===null?ko=new Set([this]):ko.add(this));var T=m.stack;this.componentDidCatch(m.value,{componentStack:T!==null?T:""})})}function mV(u,c,h,m,b){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=h.alternate,c!==null&&mh(c,h,b,!0),h=Or.current,h!==null){switch(h.tag){case 13:return Oa===null?WE():h.alternate===null&&Ht===0&&(Ht=3),h.flags&=-257,h.flags|=65536,h.lanes=b,m===eE?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([m]):c.add(m),ZE(u,m,b)),!1;case 22:return h.flags|=65536,m===eE?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([m]):h.add(m)),ZE(u,m,b)),!1}throw Error(i(435,h.tag))}return ZE(u,m,b),WE(),!1}if(dt)return c=Or.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=b,m!==X2&&(u=Error(i(422),{cause:m}),ph(_r(u,h)))):(m!==X2&&(c=Error(i(423),{cause:m}),ph(_r(c,h))),u=u.current.alternate,u.flags|=65536,b&=-b,u.lanes|=b,m=_r(m,h),b=wE(u.stateNode,m,b),iE(u,b),Ht!==4&&(Ht=2)),!1;var _=Error(i(520),{cause:m});if(_=_r(_,h),jh===null?jh=[_]:jh.push(_),Ht!==4&&(Ht=2),c===null)return!0;m=_r(m,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,u=b&-b,h.lanes|=u,u=wE(h.stateNode,m,u),iE(h,u),!1;case 1:if(c=h.type,_=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ko===null||!ko.has(_))))return h.flags|=65536,b&=-b,h.lanes|=b,b=wk(b),Ok(b,u,h,m),iE(h,b),!1}h=h.return}while(h!==null);return!1}var Ck=Error(i(461)),An=!1;function Rn(u,c,h,m){c.child=u===null?yk(c,null,h,m):tf(c,u.child,h,m)}function Dk(u,c,h,m,b){h=h.render;var _=c.ref;if("ref"in m){var $={};for(var T in m)T!=="ref"&&($[T]=m[T])}else $=m;return rl(c),m=uE(u,c,h,$,_,b),T=lE(),u!==null&&!An?(cE(u,c,b),Cs(u,c,b)):(dt&&T&&G2(c),c.flags|=1,Rn(u,c,m,b),c.child)}function $k(u,c,h,m,b){if(u===null){var _=h.type;return typeof _=="function"&&!I2(_)&&_.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=_,Mk(u,c,_,m,b)):(u=um(h.type,null,m,c,c.mode,b),u.ref=c.ref,u.return=c,c.child=u)}if(_=u.child,!FE(u,b)){var $=_.memoizedProps;if(h=h.compare,h=h!==null?h:fh,h($,m)&&u.ref===c.ref)return Cs(u,c,b)}return c.flags|=1,u=xs(_,m),u.ref=c.ref,u.return=c,c.child=u}function Mk(u,c,h,m,b){if(u!==null){var _=u.memoizedProps;if(fh(_,m)&&u.ref===c.ref)if(An=!1,c.pendingProps=m=_,FE(u,b))(u.flags&131072)!==0&&(An=!0);else return c.lanes=u.lanes,Cs(u,c,b)}return OE(u,c,h,m,b)}function Tk(u,c,h){var m=c.pendingProps,b=m.children,_=u!==null?u.memoizedState:null;if(m.mode==="hidden"){if((c.flags&128)!==0){if(m=_!==null?_.baseLanes|h:h,u!==null){for(b=c.child=u.child,_=0;b!==null;)_=_|b.lanes|b.childLanes,b=b.sibling;c.childLanes=_&~m}else c.childLanes=0,c.child=null;return kk(u,c,m,h)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},u!==null&&hm(c,_!==null?_.cachePool:null),_!==null?M5(c,_):aE(),vk(c);else return c.lanes=c.childLanes=536870912,kk(u,c,_!==null?_.baseLanes|h:h,h)}else _!==null?(hm(c,_.cachePool),M5(c,_),Oo(),c.memoizedState=null):(u!==null&&hm(c,null),aE(),Oo());return Rn(u,c,b,h),c.child}function kk(u,c,h,m){var b=J2();return b=b===null?null:{parent:cn._currentValue,pool:b},c.memoizedState={baseLanes:h,cachePool:b},u!==null&&hm(c,null),aE(),vk(c),u!==null&&mh(u,c,m,!0),null}function Mm(u,c){var h=c.ref;if(h===null)u!==null&&u.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(u===null||u.ref!==h)&&(c.flags|=4194816)}}function OE(u,c,h,m,b){return rl(c),h=uE(u,c,h,m,void 0,b),m=lE(),u!==null&&!An?(cE(u,c,b),Cs(u,c,b)):(dt&&m&&G2(c),c.flags|=1,Rn(u,c,h,b),c.child)}function Fk(u,c,h,m,b,_){return rl(c),c.updateQueue=null,h=k5(c,m,h,b),T5(u),m=lE(),u!==null&&!An?(cE(u,c,_),Cs(u,c,_)):(dt&&m&&G2(c),c.flags|=1,Rn(u,c,h,_),c.child)}function Rk(u,c,h,m,b){if(rl(c),c.stateNode===null){var _=Gc,$=h.contextType;typeof $=="object"&&$!==null&&(_=Hn($)),_=new h(m,_),c.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=SE,c.stateNode=_,_._reactInternals=c,_=c.stateNode,_.props=m,_.state=c.memoizedState,_.refs={},tE(c),$=h.contextType,_.context=typeof $=="object"&&$!==null?Hn($):Gc,_.state=c.memoizedState,$=h.getDerivedStateFromProps,typeof $=="function"&&(AE(c,h,$,m),_.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||($=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),$!==_.state&&SE.enqueueReplaceState(_,_.state,null),Ah(c,m,_,b),_h(),_.state=c.memoizedState),typeof _.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(u===null){_=c.stateNode;var T=c.memoizedProps,z=ol(h,T);_.props=z;var X=_.context,re=h.contextType;$=Gc,typeof re=="object"&&re!==null&&($=Hn(re));var oe=h.getDerivedStateFromProps;re=typeof oe=="function"||typeof _.getSnapshotBeforeUpdate=="function",T=c.pendingProps!==T,re||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T||X!==$)&&xk(c,_,m,$),Eo=!1;var Z=c.memoizedState;_.state=Z,Ah(c,m,_,b),_h(),X=c.memoizedState,T||Z!==X||Eo?(typeof oe=="function"&&(AE(c,h,oe,m),X=c.memoizedState),(z=Eo||bk(c,h,z,m,Z,X,$))?(re||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(c.flags|=4194308)):(typeof _.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=X),_.props=m,_.state=X,_.context=$,m=z):(typeof _.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{_=c.stateNode,nE(u,c),$=c.memoizedProps,re=ol(h,$),_.props=re,oe=c.pendingProps,Z=_.context,X=h.contextType,z=Gc,typeof X=="object"&&X!==null&&(z=Hn(X)),T=h.getDerivedStateFromProps,(X=typeof T=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||($!==oe||Z!==z)&&xk(c,_,m,z),Eo=!1,Z=c.memoizedState,_.state=Z,Ah(c,m,_,b),_h();var K=c.memoizedState;$!==oe||Z!==K||Eo||u!==null&&u.dependencies!==null&&fm(u.dependencies)?(typeof T=="function"&&(AE(c,h,T,m),K=c.memoizedState),(re=Eo||bk(c,h,re,m,Z,K,z)||u!==null&&u.dependencies!==null&&fm(u.dependencies))?(X||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(m,K,z),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(m,K,z)),typeof _.componentDidUpdate=="function"&&(c.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof _.componentDidUpdate!="function"||$===u.memoizedProps&&Z===u.memoizedState||(c.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||$===u.memoizedProps&&Z===u.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=K),_.props=m,_.state=K,_.context=z,m=re):(typeof _.componentDidUpdate!="function"||$===u.memoizedProps&&Z===u.memoizedState||(c.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||$===u.memoizedProps&&Z===u.memoizedState||(c.flags|=1024),m=!1)}return _=m,Mm(u,c),m=(c.flags&128)!==0,_||m?(_=c.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:_.render(),c.flags|=1,u!==null&&m?(c.child=tf(c,u.child,null,b),c.child=tf(c,null,h,b)):Rn(u,c,h,b),c.memoizedState=_.state,u=c.child):u=Cs(u,c,b),u}function Nk(u,c,h,m){return gh(),c.flags|=256,Rn(u,c,h,m),c.child}var CE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function DE(u){return{baseLanes:u,cachePool:_5()}}function $E(u,c,h){return u=u!==null?u.childLanes&~h:0,c&&(u|=Cr),u}function jk(u,c,h){var m=c.pendingProps,b=!1,_=(c.flags&128)!==0,$;if(($=_)||($=u!==null&&u.memoizedState===null?!1:(fn.current&2)!==0),$&&(b=!0,c.flags&=-129),$=(c.flags&32)!==0,c.flags&=-33,u===null){if(dt){if(b?wo(c):Oo(),dt){var T=qt,z;if(z=T){e:{for(z=T,T=wa;z.nodeType!==8;){if(!T){T=null;break e}if(z=Kr(z.nextSibling),z===null){T=null;break e}}T=z}T!==null?(c.memoizedState={dehydrated:T,treeContext:Ju!==null?{id:Es,overflow:_s}:null,retryLane:536870912,hydrationErrors:null},z=er(18,null,null,0),z.stateNode=T,z.return=c,c.child=z,ci=c,qt=null,z=!0):z=!1}z||nl(c)}if(T=c.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return d_(T)?c.lanes=32:c.lanes=536870912,null;Os(c)}return T=m.children,m=m.fallback,b?(Oo(),b=c.mode,T=Tm({mode:"hidden",children:T},b),m=Ku(m,b,h,null),T.return=c,m.return=c,T.sibling=m,c.child=T,b=c.child,b.memoizedState=DE(h),b.childLanes=$E(u,$,h),c.memoizedState=CE,m):(wo(c),ME(c,T))}if(z=u.memoizedState,z!==null&&(T=z.dehydrated,T!==null)){if(_)c.flags&256?(wo(c),c.flags&=-257,c=TE(u,c,h)):c.memoizedState!==null?(Oo(),c.child=u.child,c.flags|=128,c=null):(Oo(),b=m.fallback,T=c.mode,m=Tm({mode:"visible",children:m.children},T),b=Ku(b,T,h,null),b.flags|=2,m.return=c,b.return=c,m.sibling=b,c.child=m,tf(c,u.child,null,h),m=c.child,m.memoizedState=DE(h),m.childLanes=$E(u,$,h),c.memoizedState=CE,c=b);else if(wo(c),d_(T)){if($=T.nextSibling&&T.nextSibling.dataset,$)var X=$.dgst;$=X,m=Error(i(419)),m.stack="",m.digest=$,ph({value:m,source:null,stack:null}),c=TE(u,c,h)}else if(An||mh(u,c,h,!1),$=(h&u.childLanes)!==0,An||$){if($=$t,$!==null&&(m=h&-h,m=(m&42)!==0?1:h2(m),m=(m&($.suspendedLanes|h))!==0?0:m,m!==0&&m!==z.retryLane))throw z.retryLane=m,Hc(u,m),ar($,u,m),Ck;T.data==="$?"||WE(),c=TE(u,c,h)}else T.data==="$?"?(c.flags|=192,c.child=u.child,c=null):(u=z.treeContext,qt=Kr(T.nextSibling),ci=c,dt=!0,tl=null,wa=!1,u!==null&&(Sr[wr++]=Es,Sr[wr++]=_s,Sr[wr++]=Ju,Es=u.id,_s=u.overflow,Ju=c),c=ME(c,m.children),c.flags|=4096);return c}return b?(Oo(),b=m.fallback,T=c.mode,z=u.child,X=z.sibling,m=xs(z,{mode:"hidden",children:m.children}),m.subtreeFlags=z.subtreeFlags&65011712,X!==null?b=xs(X,b):(b=Ku(b,T,h,null),b.flags|=2),b.return=c,m.return=c,m.sibling=b,c.child=m,m=b,b=c.child,T=u.child.memoizedState,T===null?T=DE(h):(z=T.cachePool,z!==null?(X=cn._currentValue,z=z.parent!==X?{parent:X,pool:X}:z):z=_5(),T={baseLanes:T.baseLanes|h,cachePool:z}),b.memoizedState=T,b.childLanes=$E(u,$,h),c.memoizedState=CE,m):(wo(c),h=u.child,u=h.sibling,h=xs(h,{mode:"visible",children:m.children}),h.return=c,h.sibling=null,u!==null&&($=c.deletions,$===null?(c.deletions=[u],c.flags|=16):$.push(u)),c.child=h,c.memoizedState=null,h)}function ME(u,c){return c=Tm({mode:"visible",children:c},u.mode),c.return=u,u.child=c}function Tm(u,c){return u=er(22,u,null,c),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function TE(u,c,h){return tf(c,u.child,null,h),u=ME(c,c.pendingProps.children),u.flags|=2,c.memoizedState=null,u}function zk(u,c,h){u.lanes|=c;var m=u.alternate;m!==null&&(m.lanes|=c),W2(u.return,c,h)}function kE(u,c,h,m,b){var _=u.memoizedState;_===null?u.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:b}:(_.isBackwards=c,_.rendering=null,_.renderingStartTime=0,_.last=m,_.tail=h,_.tailMode=b)}function Bk(u,c,h){var m=c.pendingProps,b=m.revealOrder,_=m.tail;if(Rn(u,c,m.children,h),m=fn.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=c.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&zk(u,h,c);else if(u.tag===19)zk(u,h,c);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}m&=1}switch(se(fn,m),b){case"forwards":for(h=c.child,b=null;h!==null;)u=h.alternate,u!==null&&Cm(u)===null&&(b=h),h=h.sibling;h=b,h===null?(b=c.child,c.child=null):(b=h.sibling,h.sibling=null),kE(c,!1,b,h,_);break;case"backwards":for(h=null,b=c.child,c.child=null;b!==null;){if(u=b.alternate,u!==null&&Cm(u)===null){c.child=b;break}u=b.sibling,b.sibling=h,h=b,b=u}kE(c,!0,h,null,_);break;case"together":kE(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Cs(u,c,h){if(u!==null&&(c.dependencies=u.dependencies),To|=c.lanes,(h&c.childLanes)===0)if(u!==null){if(mh(u,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(u!==null&&c.child!==u.child)throw Error(i(153));if(c.child!==null){for(u=c.child,h=xs(u,u.pendingProps),c.child=h,h.return=c;u.sibling!==null;)u=u.sibling,h=h.sibling=xs(u,u.pendingProps),h.return=c;h.sibling=null}return c.child}function FE(u,c){return(u.lanes&c)!==0?!0:(u=u.dependencies,!!(u!==null&&fm(u)))}function yV(u,c,h){switch(c.tag){case 3:ft(c,c.stateNode.containerInfo),xo(c,cn,u.memoizedState.cache),gh();break;case 27:case 5:ze(c);break;case 4:ft(c,c.stateNode.containerInfo);break;case 10:xo(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(wo(c),c.flags|=128,null):(h&c.child.childLanes)!==0?jk(u,c,h):(wo(c),u=Cs(u,c,h),u!==null?u.sibling:null);wo(c);break;case 19:var b=(u.flags&128)!==0;if(m=(h&c.childLanes)!==0,m||(mh(u,c,h,!1),m=(h&c.childLanes)!==0),b){if(m)return Bk(u,c,h);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),se(fn,fn.current),m)break;return null;case 22:case 23:return c.lanes=0,Tk(u,c,h);case 24:xo(c,cn,u.memoizedState.cache)}return Cs(u,c,h)}function Lk(u,c,h){if(u!==null)if(u.memoizedProps!==c.pendingProps)An=!0;else{if(!FE(u,h)&&(c.flags&128)===0)return An=!1,yV(u,c,h);An=(u.flags&131072)!==0}else An=!1,dt&&(c.flags&1048576)!==0&&p5(c,cm,c.index);switch(c.lanes=0,c.tag){case 16:e:{u=c.pendingProps;var m=c.elementType,b=m._init;if(m=b(m._payload),c.type=m,typeof m=="function")I2(m)?(u=ol(m,u),c.tag=1,c=Rk(null,c,m,u,h)):(c.tag=0,c=OE(null,c,m,u,h));else{if(m!=null){if(b=m.$$typeof,b===D){c.tag=11,c=Dk(null,c,m,u,h);break e}else if(b===C){c.tag=14,c=$k(null,c,m,u,h);break e}}throw c=P(m)||m,Error(i(306,c,""))}}return c;case 0:return OE(u,c,c.type,c.pendingProps,h);case 1:return m=c.type,b=ol(m,c.pendingProps),Rk(u,c,m,b,h);case 3:e:{if(ft(c,c.stateNode.containerInfo),u===null)throw Error(i(387));m=c.pendingProps;var _=c.memoizedState;b=_.element,nE(u,c),Ah(c,m,null,h);var $=c.memoizedState;if(m=$.cache,xo(c,cn,m),m!==_.cache&&Q2(c,[cn],h,!0),_h(),m=$.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:$.cache},c.updateQueue.baseState=_,c.memoizedState=_,c.flags&256){c=Nk(u,c,m,h);break e}else if(m!==b){b=_r(Error(i(424)),c),ph(b),c=Nk(u,c,m,h);break e}else{switch(u=c.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(qt=Kr(u.firstChild),ci=c,dt=!0,tl=null,wa=!0,h=yk(c,null,m,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(gh(),m===b){c=Cs(u,c,h);break e}Rn(u,c,m,h)}c=c.child}return c;case 26:return Mm(u,c),u===null?(h=q6(c.type,null,c.pendingProps,null))?c.memoizedState=h:dt||(h=c.type,u=c.pendingProps,m=Gm(_e.current).createElement(h),m[qn]=c,m[Mi]=u,jn(m,h,u),_n(m),c.stateNode=m):c.memoizedState=q6(c.type,u.memoizedProps,c.pendingProps,u.memoizedState),null;case 27:return ze(c),u===null&&dt&&(m=c.stateNode=U6(c.type,c.pendingProps,_e.current),ci=c,wa=!0,b=qt,No(c.type)?(h_=b,qt=Kr(m.firstChild)):qt=b),Rn(u,c,c.pendingProps.children,h),Mm(u,c),u===null&&(c.flags|=4194304),c.child;case 5:return u===null&&dt&&((b=m=qt)&&(m=GV(m,c.type,c.pendingProps,wa),m!==null?(c.stateNode=m,ci=c,qt=Kr(m.firstChild),wa=!1,b=!0):b=!1),b||nl(c)),ze(c),b=c.type,_=c.pendingProps,$=u!==null?u.memoizedProps:null,m=_.children,l_(b,_)?m=null:$!==null&&l_(b,$)&&(c.flags|=32),c.memoizedState!==null&&(b=uE(u,c,lV,null,null,h),Gh._currentValue=b),Mm(u,c),Rn(u,c,m,h),c.child;case 6:return u===null&&dt&&((u=h=qt)&&(h=YV(h,c.pendingProps,wa),h!==null?(c.stateNode=h,ci=c,qt=null,u=!0):u=!1),u||nl(c)),null;case 13:return jk(u,c,h);case 4:return ft(c,c.stateNode.containerInfo),m=c.pendingProps,u===null?c.child=tf(c,null,m,h):Rn(u,c,m,h),c.child;case 11:return Dk(u,c,c.type,c.pendingProps,h);case 7:return Rn(u,c,c.pendingProps,h),c.child;case 8:return Rn(u,c,c.pendingProps.children,h),c.child;case 12:return Rn(u,c,c.pendingProps.children,h),c.child;case 10:return m=c.pendingProps,xo(c,c.type,m.value),Rn(u,c,m.children,h),c.child;case 9:return b=c.type._context,m=c.pendingProps.children,rl(c),b=Hn(b),m=m(b),c.flags|=1,Rn(u,c,m,h),c.child;case 14:return $k(u,c,c.type,c.pendingProps,h);case 15:return Mk(u,c,c.type,c.pendingProps,h);case 19:return Bk(u,c,h);case 31:return m=c.pendingProps,h=c.mode,m={mode:m.mode,children:m.children},u===null?(h=Tm(m,h),h.ref=c.ref,c.child=h,h.return=c,c=h):(h=xs(u.child,m),h.ref=c.ref,c.child=h,h.return=c,c=h),c;case 22:return Tk(u,c,h);case 24:return rl(c),m=Hn(cn),u===null?(b=J2(),b===null&&(b=$t,_=Z2(),b.pooledCache=_,_.refCount++,_!==null&&(b.pooledCacheLanes|=h),b=_),c.memoizedState={parent:m,cache:b},tE(c),xo(c,cn,b)):((u.lanes&h)!==0&&(nE(u,c),Ah(c,null,null,h),_h()),b=u.memoizedState,_=c.memoizedState,b.parent!==m?(b={parent:m,cache:m},c.memoizedState=b,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=b),xo(c,cn,m)):(m=_.cache,xo(c,cn,m),m!==b.cache&&Q2(c,[cn],h,!0))),Rn(u,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function Ds(u){u.flags|=4}function Uk(u,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!V6(c)){if(c=Or.current,c!==null&&((nt&4194048)===nt?Oa!==null:(nt&62914560)!==nt&&(nt&536870912)===0||c!==Oa))throw xh=eE,A5;u.flags|=8192}}function km(u,c){c!==null&&(u.flags|=4),u.flags&16384&&(c=u.tag!==22?vT():536870912,u.lanes|=c,sf|=c)}function Mh(u,c){if(!dt)switch(u.tailMode){case"hidden":c=u.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?u.tail=null:h.sibling=null;break;case"collapsed":h=u.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?c||u.tail===null?u.tail=null:u.tail.sibling=null:m.sibling=null}}function Lt(u){var c=u.alternate!==null&&u.alternate.child===u.child,h=0,m=0;if(c)for(var b=u.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=u,b=b.sibling;else for(b=u.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=u,b=b.sibling;return u.subtreeFlags|=m,u.childLanes=h,c}function vV(u,c,h){var m=c.pendingProps;switch(Y2(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(c),null;case 1:return Lt(c),null;case 3:return h=c.stateNode,m=null,u!==null&&(m=u.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),Ss(cn),me(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(u===null||u.child===null)&&(hh(c)?Ds(c):u===null||u.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,v5())),Lt(c),null;case 26:return h=c.memoizedState,u===null?(Ds(c),h!==null?(Lt(c),Uk(c,h)):(Lt(c),c.flags&=-16777217)):h?h!==u.memoizedState?(Ds(c),Lt(c),Uk(c,h)):(Lt(c),c.flags&=-16777217):(u.memoizedProps!==m&&Ds(c),Lt(c),c.flags&=-16777217),null;case 27:Pe(c),h=_e.current;var b=c.type;if(u!==null&&c.stateNode!=null)u.memoizedProps!==m&&Ds(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Lt(c),null}u=ge.current,hh(c)?m5(c):(u=U6(b,m,h),c.stateNode=u,Ds(c))}return Lt(c),null;case 5:if(Pe(c),h=c.type,u!==null&&c.stateNode!=null)u.memoizedProps!==m&&Ds(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Lt(c),null}if(u=ge.current,hh(c))m5(c);else{switch(b=Gm(_e.current),u){case 1:u=b.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:u=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":u=b.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":u=b.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":u=b.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof m.is=="string"?b.createElement("select",{is:m.is}):b.createElement("select"),m.multiple?u.multiple=!0:m.size&&(u.size=m.size);break;default:u=typeof m.is=="string"?b.createElement(h,{is:m.is}):b.createElement(h)}}u[qn]=c,u[Mi]=m;e:for(b=c.child;b!==null;){if(b.tag===5||b.tag===6)u.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===c)break e;for(;b.sibling===null;){if(b.return===null||b.return===c)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}c.stateNode=u;e:switch(jn(u,h,m),h){case"button":case"input":case"select":case"textarea":u=!!m.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ds(c)}}return Lt(c),c.flags&=-16777217,null;case 6:if(u&&c.stateNode!=null)u.memoizedProps!==m&&Ds(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(i(166));if(u=_e.current,hh(c)){if(u=c.stateNode,h=c.memoizedProps,m=null,b=ci,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}u[qn]=c,u=!!(u.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||F6(u.nodeValue,h)),u||nl(c)}else u=Gm(u).createTextNode(m),u[qn]=c,c.stateNode=u}return Lt(c),null;case 13:if(m=c.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(b=hh(c),m!==null&&m.dehydrated!==null){if(u===null){if(!b)throw Error(i(318));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));b[qn]=c}else gh(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Lt(c),b=!1}else b=v5(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=b),b=!0;if(!b)return c.flags&256?(Os(c),c):(Os(c),null)}if(Os(c),(c.flags&128)!==0)return c.lanes=h,c;if(h=m!==null,u=u!==null&&u.memoizedState!==null,h){m=c.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool);var _=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(_=m.memoizedState.cachePool.pool),_!==b&&(m.flags|=2048)}return h!==u&&h&&(c.child.flags|=8192),km(c,c.updateQueue),Lt(c),null;case 4:return me(),u===null&&r_(c.stateNode.containerInfo),Lt(c),null;case 10:return Ss(c.type),Lt(c),null;case 19:if(ie(fn),b=c.memoizedState,b===null)return Lt(c),null;if(m=(c.flags&128)!==0,_=b.rendering,_===null)if(m)Mh(b,!1);else{if(Ht!==0||u!==null&&(u.flags&128)!==0)for(u=c.child;u!==null;){if(_=Cm(u),_!==null){for(c.flags|=128,Mh(b,!1),u=_.updateQueue,c.updateQueue=u,km(c,u),c.subtreeFlags=0,u=h,h=c.child;h!==null;)g5(h,u),h=h.sibling;return se(fn,fn.current&1|2),c.child}u=u.sibling}b.tail!==null&&nn()>Nm&&(c.flags|=128,m=!0,Mh(b,!1),c.lanes=4194304)}else{if(!m)if(u=Cm(_),u!==null){if(c.flags|=128,m=!0,u=u.updateQueue,c.updateQueue=u,km(c,u),Mh(b,!0),b.tail===null&&b.tailMode==="hidden"&&!_.alternate&&!dt)return Lt(c),null}else 2*nn()-b.renderingStartTime>Nm&&h!==536870912&&(c.flags|=128,m=!0,Mh(b,!1),c.lanes=4194304);b.isBackwards?(_.sibling=c.child,c.child=_):(u=b.last,u!==null?u.sibling=_:c.child=_,b.last=_)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=nn(),c.sibling=null,u=fn.current,se(fn,m?u&1|2:u&1),c):(Lt(c),null);case 22:case 23:return Os(c),sE(),m=c.memoizedState!==null,u!==null?u.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(h&536870912)!==0&&(c.flags&128)===0&&(Lt(c),c.subtreeFlags&6&&(c.flags|=8192)):Lt(c),h=c.updateQueue,h!==null&&km(c,h.retryQueue),h=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(h=u.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==h&&(c.flags|=2048),u!==null&&ie(al),null;case 24:return h=null,u!==null&&(h=u.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),Ss(cn),Lt(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function bV(u,c){switch(Y2(c),c.tag){case 1:return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 3:return Ss(cn),me(),u=c.flags,(u&65536)!==0&&(u&128)===0?(c.flags=u&-65537|128,c):null;case 26:case 27:case 5:return Pe(c),null;case 13:if(Os(c),u=c.memoizedState,u!==null&&u.dehydrated!==null){if(c.alternate===null)throw Error(i(340));gh()}return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 19:return ie(fn),null;case 4:return me(),null;case 10:return Ss(c.type),null;case 22:case 23:return Os(c),sE(),u!==null&&ie(al),u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 24:return Ss(cn),null;case 25:return null;default:return null}}function Pk(u,c){switch(Y2(c),c.tag){case 3:Ss(cn),me();break;case 26:case 27:case 5:Pe(c);break;case 4:me();break;case 13:Os(c);break;case 19:ie(fn);break;case 10:Ss(c.type);break;case 22:case 23:Os(c),sE(),u!==null&&ie(al);break;case 24:Ss(cn)}}function Th(u,c){try{var h=c.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var b=m.next;h=b;do{if((h.tag&u)===u){m=void 0;var _=h.create,$=h.inst;m=_(),$.destroy=m}h=h.next}while(h!==b)}}catch(T){Ot(c,c.return,T)}}function Co(u,c,h){try{var m=c.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var _=b.next;m=_;do{if((m.tag&u)===u){var $=m.inst,T=$.destroy;if(T!==void 0){$.destroy=void 0,b=c;var z=h,X=T;try{X()}catch(re){Ot(b,z,re)}}}m=m.next}while(m!==_)}}catch(re){Ot(c,c.return,re)}}function Ik(u){var c=u.updateQueue;if(c!==null){var h=u.stateNode;try{$5(c,h)}catch(m){Ot(u,u.return,m)}}}function qk(u,c,h){h.props=ol(u.type,u.memoizedProps),h.state=u.memoizedState;try{h.componentWillUnmount()}catch(m){Ot(u,c,m)}}function kh(u,c){try{var h=u.ref;if(h!==null){switch(u.tag){case 26:case 27:case 5:var m=u.stateNode;break;case 30:m=u.stateNode;break;default:m=u.stateNode}typeof h=="function"?u.refCleanup=h(m):h.current=m}}catch(b){Ot(u,c,b)}}function Ca(u,c){var h=u.ref,m=u.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(b){Ot(u,c,b)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){Ot(u,c,b)}else h.current=null}function Hk(u){var c=u.type,h=u.memoizedProps,m=u.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(b){Ot(u,u.return,b)}}function RE(u,c,h){try{var m=u.stateNode;UV(m,u.type,h,c),m[Mi]=c}catch(b){Ot(u,u.return,b)}}function Gk(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&No(u.type)||u.tag===4}function NE(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Gk(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&No(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function jE(u,c,h){var m=u.tag;if(m===5||m===6)u=u.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(u,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(u),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=Hm));else if(m!==4&&(m===27&&No(u.type)&&(h=u.stateNode,c=null),u=u.child,u!==null))for(jE(u,c,h),u=u.sibling;u!==null;)jE(u,c,h),u=u.sibling}function Fm(u,c,h){var m=u.tag;if(m===5||m===6)u=u.stateNode,c?h.insertBefore(u,c):h.appendChild(u);else if(m!==4&&(m===27&&No(u.type)&&(h=u.stateNode),u=u.child,u!==null))for(Fm(u,c,h),u=u.sibling;u!==null;)Fm(u,c,h),u=u.sibling}function Yk(u){var c=u.stateNode,h=u.memoizedProps;try{for(var m=u.type,b=c.attributes;b.length;)c.removeAttributeNode(b[0]);jn(c,m,h),c[qn]=u,c[Mi]=h}catch(_){Ot(u,u.return,_)}}var $s=!1,Kt=!1,zE=!1,Xk=typeof WeakSet=="function"?WeakSet:Set,Sn=null;function xV(u,c){if(u=u.containerInfo,o_=Zm,u=r5(u),N2(u)){if("selectionStart"in u)var h={start:u.selectionStart,end:u.selectionEnd};else e:{h=(h=u.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var b=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var $=0,T=-1,z=-1,X=0,re=0,oe=u,Z=null;t:for(;;){for(var K;oe!==h||b!==0&&oe.nodeType!==3||(T=$+b),oe!==_||m!==0&&oe.nodeType!==3||(z=$+m),oe.nodeType===3&&($+=oe.nodeValue.length),(K=oe.firstChild)!==null;)Z=oe,oe=K;for(;;){if(oe===u)break t;if(Z===h&&++X===b&&(T=$),Z===_&&++re===m&&(z=$),(K=oe.nextSibling)!==null)break;oe=Z,Z=oe.parentNode}oe=K}h=T===-1||z===-1?null:{start:T,end:z}}else h=null}h=h||{start:0,end:0}}else h=null;for(u_={focusedElem:u,selectionRange:h},Zm=!1,Sn=c;Sn!==null;)if(c=Sn,u=c.child,(c.subtreeFlags&1024)!==0&&u!==null)u.return=c,Sn=u;else for(;Sn!==null;){switch(c=Sn,_=c.alternate,u=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&_!==null){u=void 0,h=c,b=_.memoizedProps,_=_.memoizedState,m=h.stateNode;try{var Ne=ol(h.type,b,h.elementType===h.type);u=m.getSnapshotBeforeUpdate(Ne,_),m.__reactInternalSnapshotBeforeUpdate=u}catch(ke){Ot(h,h.return,ke)}}break;case 3:if((u&1024)!==0){if(u=c.stateNode.containerInfo,h=u.nodeType,h===9)f_(u);else if(h===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":f_(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(i(163))}if(u=c.sibling,u!==null){u.return=c.return,Sn=u;break}Sn=c.return}}function Vk(u,c,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:Do(u,h),m&4&&Th(5,h);break;case 1:if(Do(u,h),m&4)if(u=h.stateNode,c===null)try{u.componentDidMount()}catch($){Ot(h,h.return,$)}else{var b=ol(h.type,c.memoizedProps);c=c.memoizedState;try{u.componentDidUpdate(b,c,u.__reactInternalSnapshotBeforeUpdate)}catch($){Ot(h,h.return,$)}}m&64&&Ik(h),m&512&&kh(h,h.return);break;case 3:if(Do(u,h),m&64&&(u=h.updateQueue,u!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{$5(u,c)}catch($){Ot(h,h.return,$)}}break;case 27:c===null&&m&4&&Yk(h);case 26:case 5:Do(u,h),c===null&&m&4&&Hk(h),m&512&&kh(h,h.return);break;case 12:Do(u,h);break;case 13:Do(u,h),m&4&&Zk(u,h),m&64&&(u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(h=$V.bind(null,h),XV(u,h))));break;case 22:if(m=h.memoizedState!==null||$s,!m){c=c!==null&&c.memoizedState!==null||Kt,b=$s;var _=Kt;$s=m,(Kt=c)&&!_?$o(u,h,(h.subtreeFlags&8772)!==0):Do(u,h),$s=b,Kt=_}break;case 30:break;default:Do(u,h)}}function Wk(u){var c=u.alternate;c!==null&&(u.alternate=null,Wk(c)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(c=u.stateNode,c!==null&&m2(c)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Nt=null,Fi=!1;function Ms(u,c,h){for(h=h.child;h!==null;)Qk(u,c,h),h=h.sibling}function Qk(u,c,h){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(Jd,h)}catch{}switch(h.tag){case 26:Kt||Ca(h,c),Ms(u,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Kt||Ca(h,c);var m=Nt,b=Fi;No(h.type)&&(Nt=h.stateNode,Fi=!1),Ms(u,c,h),Ph(h.stateNode),Nt=m,Fi=b;break;case 5:Kt||Ca(h,c);case 6:if(m=Nt,b=Fi,Nt=null,Ms(u,c,h),Nt=m,Fi=b,Nt!==null)if(Fi)try{(Nt.nodeType===9?Nt.body:Nt.nodeName==="HTML"?Nt.ownerDocument.body:Nt).removeChild(h.stateNode)}catch(_){Ot(h,c,_)}else try{Nt.removeChild(h.stateNode)}catch(_){Ot(h,c,_)}break;case 18:Nt!==null&&(Fi?(u=Nt,B6(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,h.stateNode),Wh(u)):B6(Nt,h.stateNode));break;case 4:m=Nt,b=Fi,Nt=h.stateNode.containerInfo,Fi=!0,Ms(u,c,h),Nt=m,Fi=b;break;case 0:case 11:case 14:case 15:Kt||Co(2,h,c),Kt||Co(4,h,c),Ms(u,c,h);break;case 1:Kt||(Ca(h,c),m=h.stateNode,typeof m.componentWillUnmount=="function"&&qk(h,c,m)),Ms(u,c,h);break;case 21:Ms(u,c,h);break;case 22:Kt=(m=Kt)||h.memoizedState!==null,Ms(u,c,h),Kt=m;break;default:Ms(u,c,h)}}function Zk(u,c){if(c.memoizedState===null&&(u=c.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Wh(u)}catch(h){Ot(c,c.return,h)}}function EV(u){switch(u.tag){case 13:case 19:var c=u.stateNode;return c===null&&(c=u.stateNode=new Xk),c;case 22:return u=u.stateNode,c=u._retryCache,c===null&&(c=u._retryCache=new Xk),c;default:throw Error(i(435,u.tag))}}function BE(u,c){var h=EV(u);c.forEach(function(m){var b=MV.bind(null,u,m);h.has(m)||(h.add(m),m.then(b,b))})}function tr(u,c){var h=c.deletions;if(h!==null)for(var m=0;m<h.length;m++){var b=h[m],_=u,$=c,T=$;e:for(;T!==null;){switch(T.tag){case 27:if(No(T.type)){Nt=T.stateNode,Fi=!1;break e}break;case 5:Nt=T.stateNode,Fi=!1;break e;case 3:case 4:Nt=T.stateNode.containerInfo,Fi=!0;break e}T=T.return}if(Nt===null)throw Error(i(160));Qk(_,$,b),Nt=null,Fi=!1,_=b.alternate,_!==null&&(_.return=null),b.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)Kk(c,u),c=c.sibling}var Zr=null;function Kk(u,c){var h=u.alternate,m=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:tr(c,u),nr(u),m&4&&(Co(3,u,u.return),Th(3,u),Co(5,u,u.return));break;case 1:tr(c,u),nr(u),m&512&&(Kt||h===null||Ca(h,h.return)),m&64&&$s&&(u=u.updateQueue,u!==null&&(m=u.callbacks,m!==null&&(h=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var b=Zr;if(tr(c,u),nr(u),m&512&&(Kt||h===null||Ca(h,h.return)),m&4){var _=h!==null?h.memoizedState:null;if(m=u.memoizedState,h===null)if(m===null)if(u.stateNode===null){e:{m=u.type,h=u.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":_=b.getElementsByTagName("title")[0],(!_||_[nh]||_[qn]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=b.createElement(m),b.head.insertBefore(_,b.querySelector("head > title"))),jn(_,m,h),_[qn]=u,_n(_),m=_;break e;case"link":var $=Y6("link","href",b).get(m+(h.href||""));if($){for(var T=0;T<$.length;T++)if(_=$[T],_.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&_.getAttribute("rel")===(h.rel==null?null:h.rel)&&_.getAttribute("title")===(h.title==null?null:h.title)&&_.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){$.splice(T,1);break t}}_=b.createElement(m),jn(_,m,h),b.head.appendChild(_);break;case"meta":if($=Y6("meta","content",b).get(m+(h.content||""))){for(T=0;T<$.length;T++)if(_=$[T],_.getAttribute("content")===(h.content==null?null:""+h.content)&&_.getAttribute("name")===(h.name==null?null:h.name)&&_.getAttribute("property")===(h.property==null?null:h.property)&&_.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&_.getAttribute("charset")===(h.charSet==null?null:h.charSet)){$.splice(T,1);break t}}_=b.createElement(m),jn(_,m,h),b.head.appendChild(_);break;default:throw Error(i(468,m))}_[qn]=u,_n(_),m=_}u.stateNode=m}else X6(b,u.type,u.stateNode);else u.stateNode=G6(b,m,u.memoizedProps);else _!==m?(_===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):_.count--,m===null?X6(b,u.type,u.stateNode):G6(b,m,u.memoizedProps)):m===null&&u.stateNode!==null&&RE(u,u.memoizedProps,h.memoizedProps)}break;case 27:tr(c,u),nr(u),m&512&&(Kt||h===null||Ca(h,h.return)),h!==null&&m&4&&RE(u,u.memoizedProps,h.memoizedProps);break;case 5:if(tr(c,u),nr(u),m&512&&(Kt||h===null||Ca(h,h.return)),u.flags&32){b=u.stateNode;try{zc(b,"")}catch(K){Ot(u,u.return,K)}}m&4&&u.stateNode!=null&&(b=u.memoizedProps,RE(u,b,h!==null?h.memoizedProps:b)),m&1024&&(zE=!0);break;case 6:if(tr(c,u),nr(u),m&4){if(u.stateNode===null)throw Error(i(162));m=u.memoizedProps,h=u.stateNode;try{h.nodeValue=m}catch(K){Ot(u,u.return,K)}}break;case 3:if(Vm=null,b=Zr,Zr=Ym(c.containerInfo),tr(c,u),Zr=b,nr(u),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Wh(c.containerInfo)}catch(K){Ot(u,u.return,K)}zE&&(zE=!1,Jk(u));break;case 4:m=Zr,Zr=Ym(u.stateNode.containerInfo),tr(c,u),nr(u),Zr=m;break;case 12:tr(c,u),nr(u);break;case 13:tr(c,u),nr(u),u.child.flags&8192&&u.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(HE=nn()),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,BE(u,m)));break;case 22:b=u.memoizedState!==null;var z=h!==null&&h.memoizedState!==null,X=$s,re=Kt;if($s=X||b,Kt=re||z,tr(c,u),Kt=re,$s=X,nr(u),m&8192)e:for(c=u.stateNode,c._visibility=b?c._visibility&-2:c._visibility|1,b&&(h===null||z||$s||Kt||ul(u)),h=null,c=u;;){if(c.tag===5||c.tag===26){if(h===null){z=h=c;try{if(_=z.stateNode,b)$=_.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{T=z.stateNode;var oe=z.memoizedProps.style,Z=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;T.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(K){Ot(z,z.return,K)}}}else if(c.tag===6){if(h===null){z=c;try{z.stateNode.nodeValue=b?"":z.memoizedProps}catch(K){Ot(z,z.return,K)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===u)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=u.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,BE(u,h))));break;case 19:tr(c,u),nr(u),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,BE(u,m)));break;case 30:break;case 21:break;default:tr(c,u),nr(u)}}function nr(u){var c=u.flags;if(c&2){try{for(var h,m=u.return;m!==null;){if(Gk(m)){h=m;break}m=m.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var b=h.stateNode,_=NE(u);Fm(u,_,b);break;case 5:var $=h.stateNode;h.flags&32&&(zc($,""),h.flags&=-33);var T=NE(u);Fm(u,T,$);break;case 3:case 4:var z=h.stateNode.containerInfo,X=NE(u);jE(u,X,z);break;default:throw Error(i(161))}}catch(re){Ot(u,u.return,re)}u.flags&=-3}c&4096&&(u.flags&=-4097)}function Jk(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var c=u;Jk(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),u=u.sibling}}function Do(u,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Vk(u,c.alternate,c),c=c.sibling}function ul(u){for(u=u.child;u!==null;){var c=u;switch(c.tag){case 0:case 11:case 14:case 15:Co(4,c,c.return),ul(c);break;case 1:Ca(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&qk(c,c.return,h),ul(c);break;case 27:Ph(c.stateNode);case 26:case 5:Ca(c,c.return),ul(c);break;case 22:c.memoizedState===null&&ul(c);break;case 30:ul(c);break;default:ul(c)}u=u.sibling}}function $o(u,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,b=u,_=c,$=_.flags;switch(_.tag){case 0:case 11:case 15:$o(b,_,h),Th(4,_);break;case 1:if($o(b,_,h),m=_,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(X){Ot(m,m.return,X)}if(m=_,b=m.updateQueue,b!==null){var T=m.stateNode;try{var z=b.shared.hiddenCallbacks;if(z!==null)for(b.shared.hiddenCallbacks=null,b=0;b<z.length;b++)D5(z[b],T)}catch(X){Ot(m,m.return,X)}}h&&$&64&&Ik(_),kh(_,_.return);break;case 27:Yk(_);case 26:case 5:$o(b,_,h),h&&m===null&&$&4&&Hk(_),kh(_,_.return);break;case 12:$o(b,_,h);break;case 13:$o(b,_,h),h&&$&4&&Zk(b,_);break;case 22:_.memoizedState===null&&$o(b,_,h),kh(_,_.return);break;case 30:break;default:$o(b,_,h)}c=c.sibling}}function LE(u,c){var h=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(h=u.memoizedState.cachePool.pool),u=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(u=c.memoizedState.cachePool.pool),u!==h&&(u!=null&&u.refCount++,h!=null&&yh(h))}function UE(u,c){u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&yh(u))}function Da(u,c,h,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)e6(u,c,h,m),c=c.sibling}function e6(u,c,h,m){var b=c.flags;switch(c.tag){case 0:case 11:case 15:Da(u,c,h,m),b&2048&&Th(9,c);break;case 1:Da(u,c,h,m);break;case 3:Da(u,c,h,m),b&2048&&(u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&yh(u)));break;case 12:if(b&2048){Da(u,c,h,m),u=c.stateNode;try{var _=c.memoizedProps,$=_.id,T=_.onPostCommit;typeof T=="function"&&T($,c.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(z){Ot(c,c.return,z)}}else Da(u,c,h,m);break;case 13:Da(u,c,h,m);break;case 23:break;case 22:_=c.stateNode,$=c.alternate,c.memoizedState!==null?_._visibility&2?Da(u,c,h,m):Fh(u,c):_._visibility&2?Da(u,c,h,m):(_._visibility|=2,nf(u,c,h,m,(c.subtreeFlags&10256)!==0)),b&2048&&LE($,c);break;case 24:Da(u,c,h,m),b&2048&&UE(c.alternate,c);break;default:Da(u,c,h,m)}}function nf(u,c,h,m,b){for(b=b&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var _=u,$=c,T=h,z=m,X=$.flags;switch($.tag){case 0:case 11:case 15:nf(_,$,T,z,b),Th(8,$);break;case 23:break;case 22:var re=$.stateNode;$.memoizedState!==null?re._visibility&2?nf(_,$,T,z,b):Fh(_,$):(re._visibility|=2,nf(_,$,T,z,b)),b&&X&2048&&LE($.alternate,$);break;case 24:nf(_,$,T,z,b),b&&X&2048&&UE($.alternate,$);break;default:nf(_,$,T,z,b)}c=c.sibling}}function Fh(u,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=u,m=c,b=m.flags;switch(m.tag){case 22:Fh(h,m),b&2048&&LE(m.alternate,m);break;case 24:Fh(h,m),b&2048&&UE(m.alternate,m);break;default:Fh(h,m)}c=c.sibling}}var Rh=8192;function rf(u){if(u.subtreeFlags&Rh)for(u=u.child;u!==null;)t6(u),u=u.sibling}function t6(u){switch(u.tag){case 26:rf(u),u.flags&Rh&&u.memoizedState!==null&&sW(Zr,u.memoizedState,u.memoizedProps);break;case 5:rf(u);break;case 3:case 4:var c=Zr;Zr=Ym(u.stateNode.containerInfo),rf(u),Zr=c;break;case 22:u.memoizedState===null&&(c=u.alternate,c!==null&&c.memoizedState!==null?(c=Rh,Rh=16777216,rf(u),Rh=c):rf(u));break;default:rf(u)}}function n6(u){var c=u.alternate;if(c!==null&&(u=c.child,u!==null)){c.child=null;do c=u.sibling,u.sibling=null,u=c;while(u!==null)}}function Nh(u){var c=u.deletions;if((u.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var m=c[h];Sn=m,r6(m,u)}n6(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)i6(u),u=u.sibling}function i6(u){switch(u.tag){case 0:case 11:case 15:Nh(u),u.flags&2048&&Co(9,u,u.return);break;case 3:Nh(u);break;case 12:Nh(u);break;case 22:var c=u.stateNode;u.memoizedState!==null&&c._visibility&2&&(u.return===null||u.return.tag!==13)?(c._visibility&=-3,Rm(u)):Nh(u);break;default:Nh(u)}}function Rm(u){var c=u.deletions;if((u.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var m=c[h];Sn=m,r6(m,u)}n6(u)}for(u=u.child;u!==null;){switch(c=u,c.tag){case 0:case 11:case 15:Co(8,c,c.return),Rm(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,Rm(c));break;default:Rm(c)}u=u.sibling}}function r6(u,c){for(;Sn!==null;){var h=Sn;switch(h.tag){case 0:case 11:case 15:Co(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:yh(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,Sn=m;else e:for(h=u;Sn!==null;){m=Sn;var b=m.sibling,_=m.return;if(Wk(m),m===h){Sn=null;break e}if(b!==null){b.return=_,Sn=b;break e}Sn=_}}}var _V={getCacheForType:function(u){var c=Hn(cn),h=c.data.get(u);return h===void 0&&(h=u(),c.data.set(u,h)),h}},AV=typeof WeakMap=="function"?WeakMap:Map,mt=0,$t=null,Qe=null,nt=0,yt=0,ir=null,Mo=!1,af=!1,PE=!1,Ts=0,Ht=0,To=0,ll=0,IE=0,Cr=0,sf=0,jh=null,Ri=null,qE=!1,HE=0,Nm=1/0,jm=null,ko=null,Nn=0,Fo=null,of=null,uf=0,GE=0,YE=null,a6=null,zh=0,XE=null;function rr(){if((mt&2)!==0&&nt!==0)return nt&-nt;if(F.T!==null){var u=Vc;return u!==0?u:e_()}return ET()}function s6(){Cr===0&&(Cr=(nt&536870912)===0||dt?yT():536870912);var u=Or.current;return u!==null&&(u.flags|=32),Cr}function ar(u,c,h){(u===$t&&(yt===2||yt===9)||u.cancelPendingCommit!==null)&&(lf(u,0),Ro(u,nt,Cr,!1)),th(u,h),((mt&2)===0||u!==$t)&&(u===$t&&((mt&2)===0&&(ll|=h),Ht===4&&Ro(u,nt,Cr,!1)),$a(u))}function o6(u,c,h){if((mt&6)!==0)throw Error(i(327));var m=!h&&(c&124)===0&&(c&u.expiredLanes)===0||eh(u,c),b=m?OV(u,c):QE(u,c,!0),_=m;do{if(b===0){af&&!m&&Ro(u,c,0,!1);break}else{if(h=u.current.alternate,_&&!SV(h)){b=QE(u,c,!1),_=!1;continue}if(b===2){if(_=c,u.errorRecoveryDisabledLanes&_)var $=0;else $=u.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){c=$;e:{var T=u;b=jh;var z=T.current.memoizedState.isDehydrated;if(z&&(lf(T,$).flags|=256),$=QE(T,$,!1),$!==2){if(PE&&!z){T.errorRecoveryDisabledLanes|=_,ll|=_,b=4;break e}_=Ri,Ri=b,_!==null&&(Ri===null?Ri=_:Ri.push.apply(Ri,_))}b=$}if(_=!1,b!==2)continue}}if(b===1){lf(u,0),Ro(u,c,0,!0);break}e:{switch(m=u,_=b,_){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:Ro(m,c,Cr,!Mo);break e;case 2:Ri=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(b=HE+300-nn(),10<b)){if(Ro(m,c,Cr,!Mo),Xp(m,0,!0)!==0)break e;m.timeoutHandle=j6(u6.bind(null,m,h,Ri,jm,qE,c,Cr,ll,sf,Mo,_,2,-0,0),b);break e}u6(m,h,Ri,jm,qE,c,Cr,ll,sf,Mo,_,0,-0,0)}}break}while(!0);$a(u)}function u6(u,c,h,m,b,_,$,T,z,X,re,oe,Z,K){if(u.timeoutHandle=-1,oe=c.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Hh={stylesheets:null,count:0,unsuspend:aW},t6(c),oe=oW(),oe!==null)){u.cancelPendingCommit=oe(p6.bind(null,u,c,_,h,m,b,$,T,z,re,1,Z,K)),Ro(u,_,$,!X);return}p6(u,c,_,h,m,b,$,T,z)}function SV(u){for(var c=u;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var b=h[m],_=b.getSnapshot;b=b.value;try{if(!Ji(_(),b))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ro(u,c,h,m){c&=~IE,c&=~ll,u.suspendedLanes|=c,u.pingedLanes&=~c,m&&(u.warmLanes|=c),m=u.expirationTimes;for(var b=c;0<b;){var _=31-Ki(b),$=1<<_;m[_]=-1,b&=~$}h!==0&&bT(u,h,c)}function zm(){return(mt&6)===0?(Bh(0),!1):!0}function VE(){if(Qe!==null){if(yt===0)var u=Qe.return;else u=Qe,As=il=null,fE(u),ef=null,Dh=0,u=Qe;for(;u!==null;)Pk(u.alternate,u),u=u.return;Qe=null}}function lf(u,c){var h=u.timeoutHandle;h!==-1&&(u.timeoutHandle=-1,IV(h)),h=u.cancelPendingCommit,h!==null&&(u.cancelPendingCommit=null,h()),VE(),$t=u,Qe=h=xs(u.current,null),nt=c,yt=0,ir=null,Mo=!1,af=eh(u,c),PE=!1,sf=Cr=IE=ll=To=Ht=0,Ri=jh=null,qE=!1,(c&8)!==0&&(c|=c&32);var m=u.entangledLanes;if(m!==0)for(u=u.entanglements,m&=c;0<m;){var b=31-Ki(m),_=1<<b;c|=u[b],m&=~_}return Ts=c,am(),h}function l6(u,c){Ye=null,F.H=Sm,c===bh||c===gm?(c=O5(),yt=3):c===A5?(c=O5(),yt=4):yt=c===Ck?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,ir=c,Qe===null&&(Ht=1,$m(u,_r(c,u.current)))}function c6(){var u=F.H;return F.H=Sm,u===null?Sm:u}function f6(){var u=F.A;return F.A=_V,u}function WE(){Ht=4,Mo||(nt&4194048)!==nt&&Or.current!==null||(af=!0),(To&134217727)===0&&(ll&134217727)===0||$t===null||Ro($t,nt,Cr,!1)}function QE(u,c,h){var m=mt;mt|=2;var b=c6(),_=f6();($t!==u||nt!==c)&&(jm=null,lf(u,c)),c=!1;var $=Ht;e:do try{if(yt!==0&&Qe!==null){var T=Qe,z=ir;switch(yt){case 8:VE(),$=6;break e;case 3:case 2:case 9:case 6:Or.current===null&&(c=!0);var X=yt;if(yt=0,ir=null,cf(u,T,z,X),h&&af){$=0;break e}break;default:X=yt,yt=0,ir=null,cf(u,T,z,X)}}wV(),$=Ht;break}catch(re){l6(u,re)}while(!0);return c&&u.shellSuspendCounter++,As=il=null,mt=m,F.H=b,F.A=_,Qe===null&&($t=null,nt=0,am()),$}function wV(){for(;Qe!==null;)d6(Qe)}function OV(u,c){var h=mt;mt|=2;var m=c6(),b=f6();$t!==u||nt!==c?(jm=null,Nm=nn()+500,lf(u,c)):af=eh(u,c);e:do try{if(yt!==0&&Qe!==null){c=Qe;var _=ir;t:switch(yt){case 1:yt=0,ir=null,cf(u,c,_,1);break;case 2:case 9:if(S5(_)){yt=0,ir=null,h6(c);break}c=function(){yt!==2&&yt!==9||$t!==u||(yt=7),$a(u)},_.then(c,c);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:S5(_)?(yt=0,ir=null,h6(c)):(yt=0,ir=null,cf(u,c,_,7));break;case 5:var $=null;switch(Qe.tag){case 26:$=Qe.memoizedState;case 5:case 27:var T=Qe;if(!$||V6($)){yt=0,ir=null;var z=T.sibling;if(z!==null)Qe=z;else{var X=T.return;X!==null?(Qe=X,Bm(X)):Qe=null}break t}}yt=0,ir=null,cf(u,c,_,5);break;case 6:yt=0,ir=null,cf(u,c,_,6);break;case 8:VE(),Ht=6;break e;default:throw Error(i(462))}}CV();break}catch(re){l6(u,re)}while(!0);return As=il=null,F.H=m,F.A=b,mt=h,Qe!==null?0:($t=null,nt=0,am(),Ht)}function CV(){for(;Qe!==null&&!tn();)d6(Qe)}function d6(u){var c=Lk(u.alternate,u,Ts);u.memoizedProps=u.pendingProps,c===null?Bm(u):Qe=c}function h6(u){var c=u,h=c.alternate;switch(c.tag){case 15:case 0:c=Fk(h,c,c.pendingProps,c.type,void 0,nt);break;case 11:c=Fk(h,c,c.pendingProps,c.type.render,c.ref,nt);break;case 5:fE(c);default:Pk(h,c),c=Qe=g5(c,Ts),c=Lk(h,c,Ts)}u.memoizedProps=u.pendingProps,c===null?Bm(u):Qe=c}function cf(u,c,h,m){As=il=null,fE(c),ef=null,Dh=0;var b=c.return;try{if(mV(u,b,c,h,nt)){Ht=1,$m(u,_r(h,u.current)),Qe=null;return}}catch(_){if(b!==null)throw Qe=b,_;Ht=1,$m(u,_r(h,u.current)),Qe=null;return}c.flags&32768?(dt||m===1?u=!0:af||(nt&536870912)!==0?u=!1:(Mo=u=!0,(m===2||m===9||m===3||m===6)&&(m=Or.current,m!==null&&m.tag===13&&(m.flags|=16384))),g6(c,u)):Bm(c)}function Bm(u){var c=u;do{if((c.flags&32768)!==0){g6(c,Mo);return}u=c.return;var h=vV(c.alternate,c,Ts);if(h!==null){Qe=h;return}if(c=c.sibling,c!==null){Qe=c;return}Qe=c=u}while(c!==null);Ht===0&&(Ht=5)}function g6(u,c){do{var h=bV(u.alternate,u);if(h!==null){h.flags&=32767,Qe=h;return}if(h=u.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(u=u.sibling,u!==null)){Qe=u;return}Qe=u=h}while(u!==null);Ht=6,Qe=null}function p6(u,c,h,m,b,_,$,T,z){u.cancelPendingCommit=null;do Lm();while(Nn!==0);if((mt&6)!==0)throw Error(i(327));if(c!==null){if(c===u.current)throw Error(i(177));if(_=c.lanes|c.childLanes,_|=U2,aX(u,h,_,$,T,z),u===$t&&(Qe=$t=null,nt=0),of=c,Fo=u,uf=h,GE=_,YE=b,a6=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,TV(Hp,function(){return x6(),null})):(u.callbackNode=null,u.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=F.T,F.T=null,b=U.p,U.p=2,$=mt,mt|=4;try{xV(u,c,h)}finally{mt=$,U.p=b,F.T=m}}Nn=1,m6(),y6(),v6()}}function m6(){if(Nn===1){Nn=0;var u=Fo,c=of,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=F.T,F.T=null;var m=U.p;U.p=2;var b=mt;mt|=4;try{Kk(c,u);var _=u_,$=r5(u.containerInfo),T=_.focusedElem,z=_.selectionRange;if($!==T&&T&&T.ownerDocument&&i5(T.ownerDocument.documentElement,T)){if(z!==null&&N2(T)){var X=z.start,re=z.end;if(re===void 0&&(re=X),"selectionStart"in T)T.selectionStart=X,T.selectionEnd=Math.min(re,T.value.length);else{var oe=T.ownerDocument||document,Z=oe&&oe.defaultView||window;if(Z.getSelection){var K=Z.getSelection(),Ne=T.textContent.length,ke=Math.min(z.start,Ne),_t=z.end===void 0?ke:Math.min(z.end,Ne);!K.extend&&ke>_t&&($=_t,_t=ke,ke=$);var q=n5(T,ke),I=n5(T,_t);if(q&&I&&(K.rangeCount!==1||K.anchorNode!==q.node||K.anchorOffset!==q.offset||K.focusNode!==I.node||K.focusOffset!==I.offset)){var Y=oe.createRange();Y.setStart(q.node,q.offset),K.removeAllRanges(),ke>_t?(K.addRange(Y),K.extend(I.node,I.offset)):(Y.setEnd(I.node,I.offset),K.addRange(Y))}}}}for(oe=[],K=T;K=K.parentNode;)K.nodeType===1&&oe.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<oe.length;T++){var ae=oe[T];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Zm=!!o_,u_=o_=null}finally{mt=b,U.p=m,F.T=h}}u.current=c,Nn=2}}function y6(){if(Nn===2){Nn=0;var u=Fo,c=of,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=F.T,F.T=null;var m=U.p;U.p=2;var b=mt;mt|=4;try{Vk(u,c.alternate,c)}finally{mt=b,U.p=m,F.T=h}}Nn=3}}function v6(){if(Nn===4||Nn===3){Nn=0,En();var u=Fo,c=of,h=uf,m=a6;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Nn=5:(Nn=0,of=Fo=null,b6(u,u.pendingLanes));var b=u.pendingLanes;if(b===0&&(ko=null),g2(h),c=c.stateNode,Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(Jd,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=F.T,b=U.p,U.p=2,F.T=null;try{for(var _=u.onRecoverableError,$=0;$<m.length;$++){var T=m[$];_(T.value,{componentStack:T.stack})}}finally{F.T=c,U.p=b}}(uf&3)!==0&&Lm(),$a(u),b=u.pendingLanes,(h&4194090)!==0&&(b&42)!==0?u===XE?zh++:(zh=0,XE=u):zh=0,Bh(0)}}function b6(u,c){(u.pooledCacheLanes&=c)===0&&(c=u.pooledCache,c!=null&&(u.pooledCache=null,yh(c)))}function Lm(u){return m6(),y6(),v6(),x6()}function x6(){if(Nn!==5)return!1;var u=Fo,c=GE;GE=0;var h=g2(uf),m=F.T,b=U.p;try{U.p=32>h?32:h,F.T=null,h=YE,YE=null;var _=Fo,$=uf;if(Nn=0,of=Fo=null,uf=0,(mt&6)!==0)throw Error(i(331));var T=mt;if(mt|=4,i6(_.current),e6(_,_.current,$,h),mt=T,Bh(0,!1),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(Jd,_)}catch{}return!0}finally{U.p=b,F.T=m,b6(u,c)}}function E6(u,c,h){c=_r(h,c),c=wE(u.stateNode,c,2),u=Ao(u,c,2),u!==null&&(th(u,2),$a(u))}function Ot(u,c,h){if(u.tag===3)E6(u,u,h);else for(;c!==null;){if(c.tag===3){E6(c,u,h);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ko===null||!ko.has(m))){u=_r(h,u),h=wk(2),m=Ao(c,h,2),m!==null&&(Ok(h,m,c,u),th(m,2),$a(m));break}}c=c.return}}function ZE(u,c,h){var m=u.pingCache;if(m===null){m=u.pingCache=new AV;var b=new Set;m.set(c,b)}else b=m.get(c),b===void 0&&(b=new Set,m.set(c,b));b.has(h)||(PE=!0,b.add(h),u=DV.bind(null,u,c,h),c.then(u,u))}function DV(u,c,h){var m=u.pingCache;m!==null&&m.delete(c),u.pingedLanes|=u.suspendedLanes&h,u.warmLanes&=~h,$t===u&&(nt&h)===h&&(Ht===4||Ht===3&&(nt&62914560)===nt&&300>nn()-HE?(mt&2)===0&&lf(u,0):IE|=h,sf===nt&&(sf=0)),$a(u)}function _6(u,c){c===0&&(c=vT()),u=Hc(u,c),u!==null&&(th(u,c),$a(u))}function $V(u){var c=u.memoizedState,h=0;c!==null&&(h=c.retryLane),_6(u,h)}function MV(u,c){var h=0;switch(u.tag){case 13:var m=u.stateNode,b=u.memoizedState;b!==null&&(h=b.retryLane);break;case 19:m=u.stateNode;break;case 22:m=u.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(c),_6(u,h)}function TV(u,c){return Qt(u,c)}var Um=null,ff=null,KE=!1,Pm=!1,JE=!1,cl=0;function $a(u){u!==ff&&u.next===null&&(ff===null?Um=ff=u:ff=ff.next=u),Pm=!0,KE||(KE=!0,FV())}function Bh(u,c){if(!JE&&Pm){JE=!0;do for(var h=!1,m=Um;m!==null;){if(u!==0){var b=m.pendingLanes;if(b===0)var _=0;else{var $=m.suspendedLanes,T=m.pingedLanes;_=(1<<31-Ki(42|u)+1)-1,_&=b&~($&~T),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(h=!0,O6(m,_))}else _=nt,_=Xp(m,m===$t?_:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(_&3)===0||eh(m,_)||(h=!0,O6(m,_));m=m.next}while(h);JE=!1}}function kV(){A6()}function A6(){Pm=KE=!1;var u=0;cl!==0&&(PV()&&(u=cl),cl=0);for(var c=nn(),h=null,m=Um;m!==null;){var b=m.next,_=S6(m,c);_===0?(m.next=null,h===null?Um=b:h.next=b,b===null&&(ff=h)):(h=m,(u!==0||(_&3)!==0)&&(Pm=!0)),m=b}Bh(u)}function S6(u,c){for(var h=u.suspendedLanes,m=u.pingedLanes,b=u.expirationTimes,_=u.pendingLanes&-62914561;0<_;){var $=31-Ki(_),T=1<<$,z=b[$];z===-1?((T&h)===0||(T&m)!==0)&&(b[$]=rX(T,c)):z<=c&&(u.expiredLanes|=T),_&=~T}if(c=$t,h=nt,h=Xp(u,u===c?h:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m=u.callbackNode,h===0||u===c&&(yt===2||yt===9)||u.cancelPendingCommit!==null)return m!==null&&m!==null&&rt(m),u.callbackNode=null,u.callbackPriority=0;if((h&3)===0||eh(u,h)){if(c=h&-h,c===u.callbackPriority)return c;switch(m!==null&&rt(m),g2(h)){case 2:case 8:h=pT;break;case 32:h=Hp;break;case 268435456:h=mT;break;default:h=Hp}return m=w6.bind(null,u),h=Qt(h,m),u.callbackPriority=c,u.callbackNode=h,c}return m!==null&&m!==null&&rt(m),u.callbackPriority=2,u.callbackNode=null,2}function w6(u,c){if(Nn!==0&&Nn!==5)return u.callbackNode=null,u.callbackPriority=0,null;var h=u.callbackNode;if(Lm()&&u.callbackNode!==h)return null;var m=nt;return m=Xp(u,u===$t?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m===0?null:(o6(u,m,c),S6(u,nn()),u.callbackNode!=null&&u.callbackNode===h?w6.bind(null,u):null)}function O6(u,c){if(Lm())return null;o6(u,c,!0)}function FV(){qV(function(){(mt&6)!==0?Qt(gT,kV):A6()})}function e_(){return cl===0&&(cl=yT()),cl}function C6(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Kp(""+u)}function D6(u,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,u.id&&h.setAttribute("form",u.id),c.parentNode.insertBefore(h,c),u=new FormData(u),h.parentNode.removeChild(h),u}function RV(u,c,h,m,b){if(c==="submit"&&h&&h.stateNode===b){var _=C6((b[Mi]||null).action),$=m.submitter;$&&(c=(c=$[Mi]||null)?C6(c.formAction):$.getAttribute("formAction"),c!==null&&(_=c,$=null));var T=new nm("action","action",null,m,b);u.push({event:T,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(cl!==0){var z=$?D6(b,$):new FormData(b);xE(h,{pending:!0,data:z,method:b.method,action:_},null,z)}}else typeof _=="function"&&(T.preventDefault(),z=$?D6(b,$):new FormData(b),xE(h,{pending:!0,data:z,method:b.method,action:_},_,z))},currentTarget:b}]})}}for(var t_=0;t_<L2.length;t_++){var n_=L2[t_],NV=n_.toLowerCase(),jV=n_[0].toUpperCase()+n_.slice(1);Qr(NV,"on"+jV)}Qr(o5,"onAnimationEnd"),Qr(u5,"onAnimationIteration"),Qr(l5,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(JX,"onTransitionRun"),Qr(eV,"onTransitionStart"),Qr(tV,"onTransitionCancel"),Qr(c5,"onTransitionEnd"),Rc("onMouseEnter",["mouseout","mouseover"]),Rc("onMouseLeave",["mouseout","mouseover"]),Rc("onPointerEnter",["pointerout","pointerover"]),Rc("onPointerLeave",["pointerout","pointerover"]),Vu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vu("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lh));function $6(u,c){c=(c&4)!==0;for(var h=0;h<u.length;h++){var m=u[h],b=m.event;m=m.listeners;e:{var _=void 0;if(c)for(var $=m.length-1;0<=$;$--){var T=m[$],z=T.instance,X=T.currentTarget;if(T=T.listener,z!==_&&b.isPropagationStopped())break e;_=T,b.currentTarget=X;try{_(b)}catch(re){Dm(re)}b.currentTarget=null,_=z}else for($=0;$<m.length;$++){if(T=m[$],z=T.instance,X=T.currentTarget,T=T.listener,z!==_&&b.isPropagationStopped())break e;_=T,b.currentTarget=X;try{_(b)}catch(re){Dm(re)}b.currentTarget=null,_=z}}}}function Ze(u,c){var h=c[p2];h===void 0&&(h=c[p2]=new Set);var m=u+"__bubble";h.has(m)||(M6(c,u,2,!1),h.add(m))}function i_(u,c,h){var m=0;c&&(m|=4),M6(h,u,m,c)}var Im="_reactListening"+Math.random().toString(36).slice(2);function r_(u){if(!u[Im]){u[Im]=!0,AT.forEach(function(h){h!=="selectionchange"&&(zV.has(h)||i_(h,!1,u),i_(h,!0,u))});var c=u.nodeType===9?u:u.ownerDocument;c===null||c[Im]||(c[Im]=!0,i_("selectionchange",!1,c))}}function M6(u,c,h,m){switch(eF(c)){case 2:var b=cW;break;case 8:b=fW;break;default:b=v_}h=b.bind(null,c,h,u),b=void 0,!O2||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),m?b!==void 0?u.addEventListener(c,h,{capture:!0,passive:b}):u.addEventListener(c,h,!0):b!==void 0?u.addEventListener(c,h,{passive:b}):u.addEventListener(c,h,!1)}function a_(u,c,h,m,b){var _=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var $=m.tag;if($===3||$===4){var T=m.stateNode.containerInfo;if(T===b)break;if($===4)for($=m.return;$!==null;){var z=$.tag;if((z===3||z===4)&&$.stateNode.containerInfo===b)return;$=$.return}for(;T!==null;){if($=Tc(T),$===null)return;if(z=$.tag,z===5||z===6||z===26||z===27){m=_=$;continue e}T=T.parentNode}}m=m.return}zT(function(){var X=_,re=S2(h),oe=[];e:{var Z=f5.get(u);if(Z!==void 0){var K=nm,Ne=u;switch(u){case"keypress":if(em(h)===0)break e;case"keydown":case"keyup":K=TX;break;case"focusin":Ne="focus",K=M2;break;case"focusout":Ne="blur",K=M2;break;case"beforeblur":case"afterblur":K=M2;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=UT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=bX;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=RX;break;case o5:case u5:case l5:K=_X;break;case c5:K=jX;break;case"scroll":case"scrollend":K=yX;break;case"wheel":K=BX;break;case"copy":case"cut":case"paste":K=SX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=IT;break;case"toggle":case"beforetoggle":K=UX}var ke=(c&4)!==0,_t=!ke&&(u==="scroll"||u==="scrollend"),q=ke?Z!==null?Z+"Capture":null:Z;ke=[];for(var I=X,Y;I!==null;){var ae=I;if(Y=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Y===null||q===null||(ae=rh(I,q),ae!=null&&ke.push(Uh(I,ae,Y))),_t)break;I=I.return}0<ke.length&&(Z=new K(Z,Ne,null,h,re),oe.push({event:Z,listeners:ke}))}}if((c&7)===0){e:{if(Z=u==="mouseover"||u==="pointerover",K=u==="mouseout"||u==="pointerout",Z&&h!==A2&&(Ne=h.relatedTarget||h.fromElement)&&(Tc(Ne)||Ne[Mc]))break e;if((K||Z)&&(Z=re.window===re?re:(Z=re.ownerDocument)?Z.defaultView||Z.parentWindow:window,K?(Ne=h.relatedTarget||h.toElement,K=X,Ne=Ne?Tc(Ne):null,Ne!==null&&(_t=a(Ne),ke=Ne.tag,Ne!==_t||ke!==5&&ke!==27&&ke!==6)&&(Ne=null)):(K=null,Ne=X),K!==Ne)){if(ke=UT,ae="onMouseLeave",q="onMouseEnter",I="mouse",(u==="pointerout"||u==="pointerover")&&(ke=IT,ae="onPointerLeave",q="onPointerEnter",I="pointer"),_t=K==null?Z:ih(K),Y=Ne==null?Z:ih(Ne),Z=new ke(ae,I+"leave",K,h,re),Z.target=_t,Z.relatedTarget=Y,ae=null,Tc(re)===X&&(ke=new ke(q,I+"enter",Ne,h,re),ke.target=Y,ke.relatedTarget=_t,ae=ke),_t=ae,K&&Ne)t:{for(ke=K,q=Ne,I=0,Y=ke;Y;Y=df(Y))I++;for(Y=0,ae=q;ae;ae=df(ae))Y++;for(;0<I-Y;)ke=df(ke),I--;for(;0<Y-I;)q=df(q),Y--;for(;I--;){if(ke===q||q!==null&&ke===q.alternate)break t;ke=df(ke),q=df(q)}ke=null}else ke=null;K!==null&&T6(oe,Z,K,ke,!1),Ne!==null&&_t!==null&&T6(oe,_t,Ne,ke,!0)}}e:{if(Z=X?ih(X):window,K=Z.nodeName&&Z.nodeName.toLowerCase(),K==="select"||K==="input"&&Z.type==="file")var ye=QT;else if(VT(Z))if(ZT)ye=QX;else{ye=VX;var Ve=XX}else K=Z.nodeName,!K||K.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&_2(X.elementType)&&(ye=QT):ye=WX;if(ye&&(ye=ye(u,X))){WT(oe,ye,h,re);break e}Ve&&Ve(u,Z,X),u==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&E2(Z,"number",Z.value)}switch(Ve=X?ih(X):window,u){case"focusin":(VT(Ve)||Ve.contentEditable==="true")&&(Pc=Ve,j2=X,dh=null);break;case"focusout":dh=j2=Pc=null;break;case"mousedown":z2=!0;break;case"contextmenu":case"mouseup":case"dragend":z2=!1,a5(oe,h,re);break;case"selectionchange":if(KX)break;case"keydown":case"keyup":a5(oe,h,re)}var Ae;if(k2)e:{switch(u){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Uc?YT(u,h)&&(Fe="onCompositionEnd"):u==="keydown"&&h.keyCode===229&&(Fe="onCompositionStart");Fe&&(qT&&h.locale!=="ko"&&(Uc||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Uc&&(Ae=BT()):(bo=re,C2="value"in bo?bo.value:bo.textContent,Uc=!0)),Ve=qm(X,Fe),0<Ve.length&&(Fe=new PT(Fe,u,null,h,re),oe.push({event:Fe,listeners:Ve}),Ae?Fe.data=Ae:(Ae=XT(h),Ae!==null&&(Fe.data=Ae)))),(Ae=IX?qX(u,h):HX(u,h))&&(Fe=qm(X,"onBeforeInput"),0<Fe.length&&(Ve=new PT("onBeforeInput","beforeinput",null,h,re),oe.push({event:Ve,listeners:Fe}),Ve.data=Ae)),RV(oe,u,X,h,re)}$6(oe,c)})}function Uh(u,c,h){return{instance:u,listener:c,currentTarget:h}}function qm(u,c){for(var h=c+"Capture",m=[];u!==null;){var b=u,_=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||_===null||(b=rh(u,h),b!=null&&m.unshift(Uh(u,b,_)),b=rh(u,c),b!=null&&m.push(Uh(u,b,_))),u.tag===3)return m;u=u.return}return[]}function df(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function T6(u,c,h,m,b){for(var _=c._reactName,$=[];h!==null&&h!==m;){var T=h,z=T.alternate,X=T.stateNode;if(T=T.tag,z!==null&&z===m)break;T!==5&&T!==26&&T!==27||X===null||(z=X,b?(X=rh(h,_),X!=null&&$.unshift(Uh(h,X,z))):b||(X=rh(h,_),X!=null&&$.push(Uh(h,X,z)))),h=h.return}$.length!==0&&u.push({event:c,listeners:$})}var BV=/\r\n?/g,LV=/\u0000|\uFFFD/g;function k6(u){return(typeof u=="string"?u:""+u).replace(BV,`
`).replace(LV,"")}function F6(u,c){return c=k6(c),k6(u)===c}function Hm(){}function Et(u,c,h,m,b,_){switch(h){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||zc(u,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&zc(u,""+m);break;case"className":Wp(u,"class",m);break;case"tabIndex":Wp(u,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Wp(u,h,m);break;case"style":NT(u,m,_);break;case"data":if(c!=="object"){Wp(u,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||h!=="href")){u.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(h);break}m=Kp(""+m),u.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){u.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(h==="formAction"?(c!=="input"&&Et(u,c,"name",b.name,b,null),Et(u,c,"formEncType",b.formEncType,b,null),Et(u,c,"formMethod",b.formMethod,b,null),Et(u,c,"formTarget",b.formTarget,b,null)):(Et(u,c,"encType",b.encType,b,null),Et(u,c,"method",b.method,b,null),Et(u,c,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(h);break}m=Kp(""+m),u.setAttribute(h,m);break;case"onClick":m!=null&&(u.onclick=Hm);break;case"onScroll":m!=null&&Ze("scroll",u);break;case"onScrollEnd":m!=null&&Ze("scrollend",u);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(i(60));u.innerHTML=h}}break;case"multiple":u.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":u.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){u.removeAttribute("xlink:href");break}h=Kp(""+m),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(h,""+m):u.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(h,""):u.removeAttribute(h);break;case"capture":case"download":m===!0?u.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(h,m):u.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?u.setAttribute(h,m):u.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?u.removeAttribute(h):u.setAttribute(h,m);break;case"popover":Ze("beforetoggle",u),Ze("toggle",u),Vp(u,"popover",m);break;case"xlinkActuate":vs(u,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":vs(u,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":vs(u,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":vs(u,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":vs(u,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":vs(u,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":vs(u,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":vs(u,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":vs(u,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Vp(u,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=pX.get(h)||h,Vp(u,h,m))}}function s_(u,c,h,m,b,_){switch(h){case"style":NT(u,m,_);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(i(60));u.innerHTML=h}}break;case"children":typeof m=="string"?zc(u,m):(typeof m=="number"||typeof m=="bigint")&&zc(u,""+m);break;case"onScroll":m!=null&&Ze("scroll",u);break;case"onScrollEnd":m!=null&&Ze("scrollend",u);break;case"onClick":m!=null&&(u.onclick=Hm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ST.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),c=h.slice(2,b?h.length-7:void 0),_=u[Mi]||null,_=_!=null?_[h]:null,typeof _=="function"&&u.removeEventListener(c,_,b),typeof m=="function")){typeof _!="function"&&_!==null&&(h in u?u[h]=null:u.hasAttribute(h)&&u.removeAttribute(h)),u.addEventListener(c,m,b);break e}h in u?u[h]=m:m===!0?u.setAttribute(h,""):Vp(u,h,m)}}}function jn(u,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",u),Ze("load",u);var m=!1,b=!1,_;for(_ in h)if(h.hasOwnProperty(_)){var $=h[_];if($!=null)switch(_){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:Et(u,c,_,$,h,null)}}b&&Et(u,c,"srcSet",h.srcSet,h,null),m&&Et(u,c,"src",h.src,h,null);return;case"input":Ze("invalid",u);var T=_=$=b=null,z=null,X=null;for(m in h)if(h.hasOwnProperty(m)){var re=h[m];if(re!=null)switch(m){case"name":b=re;break;case"type":$=re;break;case"checked":z=re;break;case"defaultChecked":X=re;break;case"value":_=re;break;case"defaultValue":T=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,c));break;default:Et(u,c,m,re,h,null)}}TT(u,_,T,z,X,$,b,!1),Qp(u);return;case"select":Ze("invalid",u),m=$=_=null;for(b in h)if(h.hasOwnProperty(b)&&(T=h[b],T!=null))switch(b){case"value":_=T;break;case"defaultValue":$=T;break;case"multiple":m=T;default:Et(u,c,b,T,h,null)}c=_,h=$,u.multiple=!!m,c!=null?jc(u,!!m,c,!1):h!=null&&jc(u,!!m,h,!0);return;case"textarea":Ze("invalid",u),_=b=m=null;for($ in h)if(h.hasOwnProperty($)&&(T=h[$],T!=null))switch($){case"value":m=T;break;case"defaultValue":b=T;break;case"children":_=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:Et(u,c,$,T,h,null)}FT(u,m,b,_),Qp(u);return;case"option":for(z in h)if(h.hasOwnProperty(z)&&(m=h[z],m!=null))switch(z){case"selected":u.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Et(u,c,z,m,h,null)}return;case"dialog":Ze("beforetoggle",u),Ze("toggle",u),Ze("cancel",u),Ze("close",u);break;case"iframe":case"object":Ze("load",u);break;case"video":case"audio":for(m=0;m<Lh.length;m++)Ze(Lh[m],u);break;case"image":Ze("error",u),Ze("load",u);break;case"details":Ze("toggle",u);break;case"embed":case"source":case"link":Ze("error",u),Ze("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in h)if(h.hasOwnProperty(X)&&(m=h[X],m!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:Et(u,c,X,m,h,null)}return;default:if(_2(c)){for(re in h)h.hasOwnProperty(re)&&(m=h[re],m!==void 0&&s_(u,c,re,m,h,void 0));return}}for(T in h)h.hasOwnProperty(T)&&(m=h[T],m!=null&&Et(u,c,T,m,h,null))}function UV(u,c,h,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,_=null,$=null,T=null,z=null,X=null,re=null;for(K in h){var oe=h[K];if(h.hasOwnProperty(K)&&oe!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":z=oe;default:m.hasOwnProperty(K)||Et(u,c,K,null,m,oe)}}for(var Z in m){var K=m[Z];if(oe=h[Z],m.hasOwnProperty(Z)&&(K!=null||oe!=null))switch(Z){case"type":_=K;break;case"name":b=K;break;case"checked":X=K;break;case"defaultChecked":re=K;break;case"value":$=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,c));break;default:K!==oe&&Et(u,c,Z,K,m,oe)}}x2(u,$,T,z,X,re,_,b);return;case"select":K=$=T=Z=null;for(_ in h)if(z=h[_],h.hasOwnProperty(_)&&z!=null)switch(_){case"value":break;case"multiple":K=z;default:m.hasOwnProperty(_)||Et(u,c,_,null,m,z)}for(b in m)if(_=m[b],z=h[b],m.hasOwnProperty(b)&&(_!=null||z!=null))switch(b){case"value":Z=_;break;case"defaultValue":T=_;break;case"multiple":$=_;default:_!==z&&Et(u,c,b,_,m,z)}c=T,h=$,m=K,Z!=null?jc(u,!!h,Z,!1):!!m!=!!h&&(c!=null?jc(u,!!h,c,!0):jc(u,!!h,h?[]:"",!1));return;case"textarea":K=Z=null;for(T in h)if(b=h[T],h.hasOwnProperty(T)&&b!=null&&!m.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:Et(u,c,T,null,m,b)}for($ in m)if(b=m[$],_=h[$],m.hasOwnProperty($)&&(b!=null||_!=null))switch($){case"value":Z=b;break;case"defaultValue":K=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:b!==_&&Et(u,c,$,b,m,_)}kT(u,Z,K);return;case"option":for(var Ne in h)if(Z=h[Ne],h.hasOwnProperty(Ne)&&Z!=null&&!m.hasOwnProperty(Ne))switch(Ne){case"selected":u.selected=!1;break;default:Et(u,c,Ne,null,m,Z)}for(z in m)if(Z=m[z],K=h[z],m.hasOwnProperty(z)&&Z!==K&&(Z!=null||K!=null))switch(z){case"selected":u.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:Et(u,c,z,Z,m,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in h)Z=h[ke],h.hasOwnProperty(ke)&&Z!=null&&!m.hasOwnProperty(ke)&&Et(u,c,ke,null,m,Z);for(X in m)if(Z=m[X],K=h[X],m.hasOwnProperty(X)&&Z!==K&&(Z!=null||K!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(137,c));break;default:Et(u,c,X,Z,m,K)}return;default:if(_2(c)){for(var _t in h)Z=h[_t],h.hasOwnProperty(_t)&&Z!==void 0&&!m.hasOwnProperty(_t)&&s_(u,c,_t,void 0,m,Z);for(re in m)Z=m[re],K=h[re],!m.hasOwnProperty(re)||Z===K||Z===void 0&&K===void 0||s_(u,c,re,Z,m,K);return}}for(var q in h)Z=h[q],h.hasOwnProperty(q)&&Z!=null&&!m.hasOwnProperty(q)&&Et(u,c,q,null,m,Z);for(oe in m)Z=m[oe],K=h[oe],!m.hasOwnProperty(oe)||Z===K||Z==null&&K==null||Et(u,c,oe,Z,m,K)}var o_=null,u_=null;function Gm(u){return u.nodeType===9?u:u.ownerDocument}function R6(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function N6(u,c){if(u===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&c==="foreignObject"?0:u}function l_(u,c){return u==="textarea"||u==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var c_=null;function PV(){var u=window.event;return u&&u.type==="popstate"?u===c_?!1:(c_=u,!0):(c_=null,!1)}var j6=typeof setTimeout=="function"?setTimeout:void 0,IV=typeof clearTimeout=="function"?clearTimeout:void 0,z6=typeof Promise=="function"?Promise:void 0,qV=typeof queueMicrotask=="function"?queueMicrotask:typeof z6<"u"?function(u){return z6.resolve(null).then(u).catch(HV)}:j6;function HV(u){setTimeout(function(){throw u})}function No(u){return u==="head"}function B6(u,c){var h=c,m=0,b=0;do{var _=h.nextSibling;if(u.removeChild(h),_&&_.nodeType===8)if(h=_.data,h==="/$"){if(0<m&&8>m){h=m;var $=u.ownerDocument;if(h&1&&Ph($.documentElement),h&2&&Ph($.body),h&4)for(h=$.head,Ph(h),$=h.firstChild;$;){var T=$.nextSibling,z=$.nodeName;$[nh]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&$.rel.toLowerCase()==="stylesheet"||h.removeChild($),$=T}}if(b===0){u.removeChild(_),Wh(c);return}b--}else h==="$"||h==="$?"||h==="$!"?b++:m=h.charCodeAt(0)-48;else m=0;h=_}while(h);Wh(c)}function f_(u){var c=u.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":f_(h),m2(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}u.removeChild(h)}}function GV(u,c,h,m){for(;u.nodeType===1;){var b=h;if(u.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(m){if(!u[nh])switch(c){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(_=u.getAttribute("rel"),_==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(_!==b.rel||u.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||u.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||u.getAttribute("title")!==(b.title==null?null:b.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(_=u.getAttribute("src"),(_!==(b.src==null?null:b.src)||u.getAttribute("type")!==(b.type==null?null:b.type)||u.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&_&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(c==="input"&&u.type==="hidden"){var _=b.name==null?null:""+b.name;if(b.type==="hidden"&&u.getAttribute("name")===_)return u}else return u;if(u=Kr(u.nextSibling),u===null)break}return null}function YV(u,c,h){if(c==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!h||(u=Kr(u.nextSibling),u===null))return null;return u}function d_(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function XV(u,c){var h=u.ownerDocument;if(u.data!=="$?"||h.readyState==="complete")c();else{var m=function(){c(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),u._reactRetry=m}}function Kr(u){for(;u!=null;u=u.nextSibling){var c=u.nodeType;if(c===1||c===3)break;if(c===8){if(c=u.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return u}var h_=null;function L6(u){u=u.previousSibling;for(var c=0;u;){if(u.nodeType===8){var h=u.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return u;c--}else h==="/$"&&c++}u=u.previousSibling}return null}function U6(u,c,h){switch(c=Gm(h),u){case"html":if(u=c.documentElement,!u)throw Error(i(452));return u;case"head":if(u=c.head,!u)throw Error(i(453));return u;case"body":if(u=c.body,!u)throw Error(i(454));return u;default:throw Error(i(451))}}function Ph(u){for(var c=u.attributes;c.length;)u.removeAttributeNode(c[0]);m2(u)}var Dr=new Map,P6=new Set;function Ym(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var ks=U.d;U.d={f:VV,r:WV,D:QV,C:ZV,L:KV,m:JV,X:tW,S:eW,M:nW};function VV(){var u=ks.f(),c=zm();return u||c}function WV(u){var c=kc(u);c!==null&&c.tag===5&&c.type==="form"?ok(c):ks.r(u)}var hf=typeof document>"u"?null:document;function I6(u,c,h){var m=hf;if(m&&typeof c=="string"&&c){var b=Er(c);b='link[rel="'+u+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),P6.has(b)||(P6.add(b),u={rel:u,crossOrigin:h,href:c},m.querySelector(b)===null&&(c=m.createElement("link"),jn(c,"link",u),_n(c),m.head.appendChild(c)))}}function QV(u){ks.D(u),I6("dns-prefetch",u,null)}function ZV(u,c){ks.C(u,c),I6("preconnect",u,c)}function KV(u,c,h){ks.L(u,c,h);var m=hf;if(m&&u&&c){var b='link[rel="preload"][as="'+Er(c)+'"]';c==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+Er(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+Er(h.imageSizes)+'"]')):b+='[href="'+Er(u)+'"]';var _=b;switch(c){case"style":_=gf(u);break;case"script":_=pf(u)}Dr.has(_)||(u=d({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:u,as:c},h),Dr.set(_,u),m.querySelector(b)!==null||c==="style"&&m.querySelector(Ih(_))||c==="script"&&m.querySelector(qh(_))||(c=m.createElement("link"),jn(c,"link",u),_n(c),m.head.appendChild(c)))}}function JV(u,c){ks.m(u,c);var h=hf;if(h&&u){var m=c&&typeof c.as=="string"?c.as:"script",b='link[rel="modulepreload"][as="'+Er(m)+'"][href="'+Er(u)+'"]',_=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=pf(u)}if(!Dr.has(_)&&(u=d({rel:"modulepreload",href:u},c),Dr.set(_,u),h.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(qh(_)))return}m=h.createElement("link"),jn(m,"link",u),_n(m),h.head.appendChild(m)}}}function eW(u,c,h){ks.S(u,c,h);var m=hf;if(m&&u){var b=Fc(m).hoistableStyles,_=gf(u);c=c||"default";var $=b.get(_);if(!$){var T={loading:0,preload:null};if($=m.querySelector(Ih(_)))T.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":c},h),(h=Dr.get(_))&&g_(u,h);var z=$=m.createElement("link");_n(z),jn(z,"link",u),z._p=new Promise(function(X,re){z.onload=X,z.onerror=re}),z.addEventListener("load",function(){T.loading|=1}),z.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Xm($,c,m)}$={type:"stylesheet",instance:$,count:1,state:T},b.set(_,$)}}}function tW(u,c){ks.X(u,c);var h=hf;if(h&&u){var m=Fc(h).hoistableScripts,b=pf(u),_=m.get(b);_||(_=h.querySelector(qh(b)),_||(u=d({src:u,async:!0},c),(c=Dr.get(b))&&p_(u,c),_=h.createElement("script"),_n(_),jn(_,"link",u),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(b,_))}}function nW(u,c){ks.M(u,c);var h=hf;if(h&&u){var m=Fc(h).hoistableScripts,b=pf(u),_=m.get(b);_||(_=h.querySelector(qh(b)),_||(u=d({src:u,async:!0,type:"module"},c),(c=Dr.get(b))&&p_(u,c),_=h.createElement("script"),_n(_),jn(_,"link",u),h.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},m.set(b,_))}}function q6(u,c,h,m){var b=(b=_e.current)?Ym(b):null;if(!b)throw Error(i(446));switch(u){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=gf(h.href),h=Fc(b).hoistableStyles,m=h.get(c),m||(m={type:"style",instance:null,count:0,state:null},h.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){u=gf(h.href);var _=Fc(b).hoistableStyles,$=_.get(u);if($||(b=b.ownerDocument||b,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(u,$),(_=b.querySelector(Ih(u)))&&!_._p&&($.instance=_,$.state.loading=5),Dr.has(u)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Dr.set(u,h),_||iW(b,u,h,$.state))),c&&m===null)throw Error(i(528,""));return $}if(c&&m!==null)throw Error(i(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=pf(h),h=Fc(b).hoistableScripts,m=h.get(c),m||(m={type:"script",instance:null,count:0,state:null},h.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,u))}}function gf(u){return'href="'+Er(u)+'"'}function Ih(u){return'link[rel="stylesheet"]['+u+"]"}function H6(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function iW(u,c,h,m){u.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=u.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),jn(c,"link",h),_n(c),u.head.appendChild(c))}function pf(u){return'[src="'+Er(u)+'"]'}function qh(u){return"script[async]"+u}function G6(u,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var m=u.querySelector('style[data-href~="'+Er(h.href)+'"]');if(m)return c.instance=m,_n(m),m;var b=d({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(u.ownerDocument||u).createElement("style"),_n(m),jn(m,"style",b),Xm(m,h.precedence,u),c.instance=m;case"stylesheet":b=gf(h.href);var _=u.querySelector(Ih(b));if(_)return c.state.loading|=4,c.instance=_,_n(_),_;m=H6(h),(b=Dr.get(b))&&g_(m,b),_=(u.ownerDocument||u).createElement("link"),_n(_);var $=_;return $._p=new Promise(function(T,z){$.onload=T,$.onerror=z}),jn(_,"link",m),c.state.loading|=4,Xm(_,h.precedence,u),c.instance=_;case"script":return _=pf(h.src),(b=u.querySelector(qh(_)))?(c.instance=b,_n(b),b):(m=h,(b=Dr.get(_))&&(m=d({},h),p_(m,b)),u=u.ownerDocument||u,b=u.createElement("script"),_n(b),jn(b,"link",m),u.head.appendChild(b),c.instance=b);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,Xm(m,h.precedence,u));return c.instance}function Xm(u,c,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,_=b,$=0;$<m.length;$++){var T=m[$];if(T.dataset.precedence===c)_=T;else if(_!==b)break}_?_.parentNode.insertBefore(u,_.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(u,c.firstChild))}function g_(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.title==null&&(u.title=c.title)}function p_(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.integrity==null&&(u.integrity=c.integrity)}var Vm=null;function Y6(u,c,h){if(Vm===null){var m=new Map,b=Vm=new Map;b.set(h,m)}else b=Vm,m=b.get(h),m||(m=new Map,b.set(h,m));if(m.has(u))return m;for(m.set(u,null),h=h.getElementsByTagName(u),b=0;b<h.length;b++){var _=h[b];if(!(_[nh]||_[qn]||u==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var $=_.getAttribute(c)||"";$=u+$;var T=m.get($);T?T.push(_):m.set($,[_])}}return m}function X6(u,c,h){u=u.ownerDocument||u,u.head.insertBefore(h,c==="title"?u.querySelector("head > title"):null)}function rW(u,c,h){if(h===1||c.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return u=c.disabled,typeof c.precedence=="string"&&u==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function V6(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var Hh=null;function aW(){}function sW(u,c,h){if(Hh===null)throw Error(i(475));var m=Hh;if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=gf(h.href),_=u.querySelector(Ih(b));if(_){u=_._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(m.count++,m=Wm.bind(m),u.then(m,m)),c.state.loading|=4,c.instance=_,_n(_);return}_=u.ownerDocument||u,h=H6(h),(b=Dr.get(b))&&g_(h,b),_=_.createElement("link"),_n(_);var $=_;$._p=new Promise(function(T,z){$.onload=T,$.onerror=z}),jn(_,"link",h),c.instance=_}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,u),(u=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=Wm.bind(m),u.addEventListener("load",c),u.addEventListener("error",c))}}function oW(){if(Hh===null)throw Error(i(475));var u=Hh;return u.stylesheets&&u.count===0&&m_(u,u.stylesheets),0<u.count?function(c){var h=setTimeout(function(){if(u.stylesheets&&m_(u,u.stylesheets),u.unsuspend){var m=u.unsuspend;u.unsuspend=null,m()}},6e4);return u.unsuspend=c,function(){u.unsuspend=null,clearTimeout(h)}}:null}function Wm(){if(this.count--,this.count===0){if(this.stylesheets)m_(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Qm=null;function m_(u,c){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Qm=new Map,c.forEach(uW,u),Qm=null,Wm.call(u))}function uW(u,c){if(!(c.state.loading&4)){var h=Qm.get(u);if(h)var m=h.get(null);else{h=new Map,Qm.set(u,h);for(var b=u.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<b.length;_++){var $=b[_];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(h.set($.dataset.precedence,$),m=$)}m&&h.set(null,m)}b=c.instance,$=b.getAttribute("data-precedence"),_=h.get($)||m,_===m&&h.set(null,b),h.set($,b),this.count++,m=Wm.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),_?_.parentNode.insertBefore(b,_.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(b,u.firstChild)),c.state.loading|=4}}var Gh={$$typeof:w,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function lW(u,c,h,m,b,_,$,T){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=d2(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=d2(0),this.hiddenUpdates=d2(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=_,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function W6(u,c,h,m,b,_,$,T,z,X,re,oe){return u=new lW(u,c,h,$,T,z,X,oe),c=1,_===!0&&(c|=24),_=er(3,null,null,c),u.current=_,_.stateNode=u,c=Z2(),c.refCount++,u.pooledCache=c,c.refCount++,_.memoizedState={element:m,isDehydrated:h,cache:c},tE(_),u}function Q6(u){return u?(u=Gc,u):Gc}function Z6(u,c,h,m,b,_){b=Q6(b),m.context===null?m.context=b:m.pendingContext=b,m=_o(c),m.payload={element:h},_=_===void 0?null:_,_!==null&&(m.callback=_),h=Ao(u,m,c),h!==null&&(ar(h,u,c),Eh(h,u,c))}function K6(u,c){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var h=u.retryLane;u.retryLane=h!==0&&h<c?h:c}}function y_(u,c){K6(u,c),(u=u.alternate)&&K6(u,c)}function J6(u){if(u.tag===13){var c=Hc(u,67108864);c!==null&&ar(c,u,67108864),y_(u,67108864)}}var Zm=!0;function cW(u,c,h,m){var b=F.T;F.T=null;var _=U.p;try{U.p=2,v_(u,c,h,m)}finally{U.p=_,F.T=b}}function fW(u,c,h,m){var b=F.T;F.T=null;var _=U.p;try{U.p=8,v_(u,c,h,m)}finally{U.p=_,F.T=b}}function v_(u,c,h,m){if(Zm){var b=b_(m);if(b===null)a_(u,c,m,Km,h),tF(u,m);else if(hW(b,u,c,h,m))m.stopPropagation();else if(tF(u,m),c&4&&-1<dW.indexOf(u)){for(;b!==null;){var _=kc(b);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var $=Xu(_.pendingLanes);if($!==0){var T=_;for(T.pendingLanes|=2,T.entangledLanes|=2;$;){var z=1<<31-Ki($);T.entanglements[1]|=z,$&=~z}$a(_),(mt&6)===0&&(Nm=nn()+500,Bh(0))}}break;case 13:T=Hc(_,2),T!==null&&ar(T,_,2),zm(),y_(_,2)}if(_=b_(m),_===null&&a_(u,c,m,Km,h),_===b)break;b=_}b!==null&&m.stopPropagation()}else a_(u,c,m,null,h)}}function b_(u){return u=S2(u),x_(u)}var Km=null;function x_(u){if(Km=null,u=Tc(u),u!==null){var c=a(u);if(c===null)u=null;else{var h=c.tag;if(h===13){if(u=s(c),u!==null)return u;u=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;u=null}else c!==u&&(u=null)}}return Km=u,null}function eF(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qp()){case gT:return 2;case pT:return 8;case Hp:case KY:return 32;case mT:return 268435456;default:return 32}default:return 32}}var E_=!1,jo=null,zo=null,Bo=null,Yh=new Map,Xh=new Map,Lo=[],dW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tF(u,c){switch(u){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":Bo=null;break;case"pointerover":case"pointerout":Yh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xh.delete(c.pointerId)}}function Vh(u,c,h,m,b,_){return u===null||u.nativeEvent!==_?(u={blockedOn:c,domEventName:h,eventSystemFlags:m,nativeEvent:_,targetContainers:[b]},c!==null&&(c=kc(c),c!==null&&J6(c)),u):(u.eventSystemFlags|=m,c=u.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),u)}function hW(u,c,h,m,b){switch(c){case"focusin":return jo=Vh(jo,u,c,h,m,b),!0;case"dragenter":return zo=Vh(zo,u,c,h,m,b),!0;case"mouseover":return Bo=Vh(Bo,u,c,h,m,b),!0;case"pointerover":var _=b.pointerId;return Yh.set(_,Vh(Yh.get(_)||null,u,c,h,m,b)),!0;case"gotpointercapture":return _=b.pointerId,Xh.set(_,Vh(Xh.get(_)||null,u,c,h,m,b)),!0}return!1}function nF(u){var c=Tc(u.target);if(c!==null){var h=a(c);if(h!==null){if(c=h.tag,c===13){if(c=s(h),c!==null){u.blockedOn=c,sX(u.priority,function(){if(h.tag===13){var m=rr();m=h2(m);var b=Hc(h,m);b!==null&&ar(b,h,m),y_(h,m)}});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){u.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Jm(u){if(u.blockedOn!==null)return!1;for(var c=u.targetContainers;0<c.length;){var h=b_(u.nativeEvent);if(h===null){h=u.nativeEvent;var m=new h.constructor(h.type,h);A2=m,h.target.dispatchEvent(m),A2=null}else return c=kc(h),c!==null&&J6(c),u.blockedOn=h,!1;c.shift()}return!0}function iF(u,c,h){Jm(u)&&h.delete(c)}function gW(){E_=!1,jo!==null&&Jm(jo)&&(jo=null),zo!==null&&Jm(zo)&&(zo=null),Bo!==null&&Jm(Bo)&&(Bo=null),Yh.forEach(iF),Xh.forEach(iF)}function e1(u,c){u.blockedOn===c&&(u.blockedOn=null,E_||(E_=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gW)))}var t1=null;function rF(u){t1!==u&&(t1=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){t1===u&&(t1=null);for(var c=0;c<u.length;c+=3){var h=u[c],m=u[c+1],b=u[c+2];if(typeof m!="function"){if(x_(m||h)===null)continue;break}var _=kc(h);_!==null&&(u.splice(c,3),c-=3,xE(_,{pending:!0,data:b,method:h.method,action:m},m,b))}}))}function Wh(u){function c(z){return e1(z,u)}jo!==null&&e1(jo,u),zo!==null&&e1(zo,u),Bo!==null&&e1(Bo,u),Yh.forEach(c),Xh.forEach(c);for(var h=0;h<Lo.length;h++){var m=Lo[h];m.blockedOn===u&&(m.blockedOn=null)}for(;0<Lo.length&&(h=Lo[0],h.blockedOn===null);)nF(h),h.blockedOn===null&&Lo.shift();if(h=(u.ownerDocument||u).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var b=h[m],_=h[m+1],$=b[Mi]||null;if(typeof _=="function")$||rF(h);else if($){var T=null;if(_&&_.hasAttribute("formAction")){if(b=_,$=_[Mi]||null)T=$.formAction;else if(x_(b)!==null)continue}else T=$.action;typeof T=="function"?h[m+1]=T:(h.splice(m,3),m-=3),rF(h)}}}function __(u){this._internalRoot=u}n1.prototype.render=__.prototype.render=function(u){var c=this._internalRoot;if(c===null)throw Error(i(409));var h=c.current,m=rr();Z6(h,m,u,c,null,null)},n1.prototype.unmount=__.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var c=u.containerInfo;Z6(u.current,2,null,u,null,null),zm(),c[Mc]=null}};function n1(u){this._internalRoot=u}n1.prototype.unstable_scheduleHydration=function(u){if(u){var c=ET();u={blockedOn:null,target:u,priority:c};for(var h=0;h<Lo.length&&c!==0&&c<Lo[h].priority;h++);Lo.splice(h,0,u),h===0&&nF(u)}};var aF=t.version;if(aF!=="19.1.1")throw Error(i(527,aF,"19.1.1"));U.findDOMNode=function(u){var c=u._reactInternals;if(c===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=l(c),u=u!==null?f(u):null,u=u===null?null:u.stateNode,u};var pW={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var i1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!i1.isDisabled&&i1.supportsFiber)try{Jd=i1.inject(pW),Zi=i1}catch{}}return Zh.createRoot=function(u,c){if(!r(u))throw Error(i(299));var h=!1,m="",b=Ek,_=_k,$=Ak,T=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(_=c.onCaughtError),c.onRecoverableError!==void 0&&($=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(T=c.unstable_transitionCallbacks)),c=W6(u,1,!1,null,null,h,m,b,_,$,T,null),u[Mc]=c.current,r_(u),new __(c)},Zh.hydrateRoot=function(u,c,h){if(!r(u))throw Error(i(299));var m=!1,b="",_=Ek,$=_k,T=Ak,z=null,X=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(_=h.onUncaughtError),h.onCaughtError!==void 0&&($=h.onCaughtError),h.onRecoverableError!==void 0&&(T=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(z=h.unstable_transitionCallbacks),h.formState!==void 0&&(X=h.formState)),c=W6(u,1,!0,c,h??null,m,b,_,$,T,z,X),c.context=Q6(null),h=c.current,m=rr(),m=h2(m),b=_o(m),b.callback=null,Ao(h,b,m),h=m,c.current.lanes=h,th(c,h),$a(c),u[Mc]=c.current,r_(u),new n1(c)},Zh.version="19.1.1",Zh}var pF;function wW(){if(pF)return w_.exports;pF=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),w_.exports=SW(),w_.exports}var OW=wW();const CW=/("(?:[^\\"]|\\.)*")|[:,]/g;function $_(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),i=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:r}=t;return(function a(s,o,l){s&&typeof s.toJSON=="function"&&(s=s.toJSON());const f=JSON.stringify(s,r);if(f===void 0)return f;const d=i-o.length-l;if(f.length<=d){const g=f.replace(CW,(p,y)=>y||`${p} `);if(g.length<=d)return g}if(r!=null&&(s=JSON.parse(f),r=void 0),typeof s=="object"&&s!==null){const g=o+n,p=[];let y=0,v,x;if(Array.isArray(s)){v="[",x="]";const{length:E}=s;for(;y<E;y++)p.push(a(s[y],g,y===E-1?0:1)||"null")}else{v="{",x="}";const E=Object.keys(s),{length:A}=E;for(;y<A;y++){const S=E[y],w=`${JSON.stringify(S)}: `,D=a(s[S],g,w.length+(y===A-1?0:1));D!==void 0&&p.push(w+D)}}if(p.length>0)return[v,n+p.join(`,
${g}`),x].join(`
${o}`)}return f})(e,"",0)}function Wi(e,t,n){return e.fields=t||[],e.fname=n,e}function Vt(e){return e==null?null:e.fname}function ti(e){return e==null?null:e.fields}function s7(e){return e.length===1?DW(e[0]):$W(e)}const DW=e=>function(t){return t[e]},$W=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function ne(e){throw Error(e)}function eb(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function f(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)f(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?f():s=o+1:l==="["?(o>s&&f(),r=s=o+1):l==="]"&&(r||ne("Access path missing open bracket: "+e),r>0&&f(),r=0,s=o+1)}return r&&ne("Access path missing closing bracket: "+e),i&&ne("Access path missing closing quote: "+e),o>s&&(o++,f()),t}function Lr(e,t,n){const i=eb(e);return e=i.length===1?i[0]:e,Wi((n&&n.get||s7)(i),[e],t||e)}const Vg=Lr("id"),Si=Wi(e=>e,[],"identity"),Zo=Wi(()=>0,[],"zero"),Od=Wi(()=>1,[],"one"),Ur=Wi(()=>!0,[],"true"),qo=Wi(()=>!1,[],"false");function MW(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const o7=0,qO=1,u7=2,l7=3,c7=4;function f7(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:MW,i=e||o7;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=qO&&n(t||"error","ERROR",arguments),this},warn(){return i>=u7&&n(t||"warn","WARN",arguments),this},info(){return i>=l7&&n(t||"log","INFO",arguments),this},debug(){return i>=c7&&n(t||"log","DEBUG",arguments),this}}}var Ee=Array.isArray;function je(e){return e===Object(e)}const mF=e=>e!=="__proto__";function tb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=TW(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;Wg(i,a,r[a],s)}return i},{})}function Wg(e,t,n,i){if(!mF(t))return;let r,a;if(je(n)&&!Ee(n)){a=je(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?Wg(a,r,n[r]):mF(r)&&(a[r]=n[r])}else e[t]=n}function TW(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function et(e){return e[e.length-1]}function Kn(e){return e==null||e===""?null:+e}const d7=e=>t=>e*Math.exp(t),h7=e=>t=>Math.log(e*t),g7=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),p7=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,vy=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function nb(e,t,n,i){const r=n(e[0]),a=n(et(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function m7(e,t){return nb(e,t,Kn,Si)}function y7(e,t){var n=Math.sign(e[0]);return nb(e,t,h7(n),d7(n))}function v7(e,t,n){return nb(e,t,vy(n),vy(1/n))}function b7(e,t,n){return nb(e,t,g7(n),p7(n))}function ib(e,t,n,i,r){const a=i(e[0]),s=i(et(e)),o=t!=null?i(t):(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function HO(e,t,n){return ib(e,t,n,Kn,Si)}function GO(e,t,n){const i=Math.sign(e[0]);return ib(e,t,n,h7(i),d7(i))}function by(e,t,n,i){return ib(e,t,n,vy(i),vy(1/i))}function YO(e,t,n,i){return ib(e,t,n,g7(i),p7(i))}function x7(e){return 1+~~(new Date(e).getMonth()/3)}function E7(e){return 1+~~(new Date(e).getUTCMonth()/3)}function De(e){return e!=null?Ee(e)?e:[e]:[]}function _7(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function He(e){return typeof e=="function"}const kW="descending";function XO(e,t,n){n=n||{},t=De(t)||[];const i=[],r=[],a={},s=n.comparator||FW;return De(e).forEach((o,l)=>{o!=null&&(i.push(t[l]===kW?-1:1),r.push(o=He(o)?o:Lr(o,null,n)),(ti(o)||[]).forEach(f=>a[f]=1))}),r.length===0?null:Wi(s(r,i),Object.keys(a))}const Cd=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),FW=(e,t)=>e.length===1?RW(e[0],t[0]):NW(e,t,e.length),RW=(e,t)=>function(n,i){return Cd(e(n),e(i))*t},NW=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=Cd(a(i),a(r));return s*t[o]});function ui(e){return He(e)?e:()=>e}function VO(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function Ie(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Va(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function A7(e,t){const n=e.length;let i=-1,r,a,s,o,l;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}return[o,l]}function Re(e,t){return Object.hasOwn(e,t)}const r1={};function Dd(e){let t={},n;function i(a){return Re(t,a)&&t[a]!==r1}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===r1&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=r1),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const l=t[o];l!==r1&&(!n||!n(l))&&(a[o]=l,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function S7(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let o=e[0],l=et(e),f;l<o&&(f=o,o=l,l=f),f=Math.abs(t-o);const d=Math.abs(l-t);return f<d&&f<=s?i:d<=s?r:a}function fe(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ie(i,n)}function Mf(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function WO(e){return typeof e=="boolean"}function su(e){return Object.prototype.toString.call(e)==="[object Date]"}function w7(e){return e&&He(e[Symbol.iterator])}function hu(e){return typeof e=="number"}function QO(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function tt(e){return typeof e=="string"}function ZO(e,t,n){e&&(e=t?De(e).map(o=>o.replace(/\\(.)/g,"$1")):De(e));const i=e&&e.length,r=n&&n.get||s7,a=o=>r(t?[o]:eb(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(l){return""+o(l)}}else{const o=e.map(a);s=function(l){let f=""+o[0](l),d=0;for(;++d<i;)f+="|"+o[d](l);return f}}return Wi(s,e,"key")}function O7(e,t){const n=e[0],i=et(e),r=+t;return r?r===1?i:n+r*(i-n):n}const jW=1e4;function C7(e){e=+e||jW;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,o)=>(++i>e&&(n=t,t={},i=1),t[s]=o);return r(),{clear:r,has:s=>Re(t,s)||Re(n,s),get:s=>Re(t,s)?t[s]:Re(n,s)?a(s,n[s]):void 0,set:(s,o)=>Re(t,s)?t[s]=o:a(s,o)}}function D7(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let o=0,l=0,f=0;for(;o<r&&l<a;++f)s[f]=e(t[o],n[l])>0?n[l++]:t[o++];for(;o<r;++o,++f)s[f]=t[o];for(;l<a;++l,++f)s[f]=n[l];return s}function A0(e,t){let n="";for(;--t>=0;)n+=e;return n}function $7(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?A0(r,s)+a:i==="center"?A0(r,~~(s/2))+a+A0(r,Math.ceil(s/2)):a+A0(r,s)}function Qg(e){return e&&et(e)-e[0]||0}function Ce(e){return Ee(e)?"["+e.map(Ce)+"]":je(e)||tt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function KO(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const zW=e=>hu(e)||su(e)?e:Date.parse(e);function JO(e,t){return t=t||zW,e==null||e===""?null:t(e)}function eC(e){return e==null||e===""?null:e+""}function ga(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function M7(e,t,n,i){const r=i??"…",a=e+"",s=a.length,o=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-o):n==="center"?a.slice(0,Math.ceil(o/2))+r+a.slice(s-~~(o/2)):a.slice(0,o)+r}function Yo(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var yF={},M_={},T_=34,Kh=10,k_=13;function T7(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function BW(e,t){var n=T7(e);return function(i,r){return t(n(i),r,e)}}function vF(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Ni(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function LW(e){return e<0?"-"+Ni(-e,6):e>9999?"+"+Ni(e,6):Ni(e,4)}function UW(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":LW(e.getUTCFullYear())+"-"+Ni(e.getUTCMonth()+1,2)+"-"+Ni(e.getUTCDate(),2)+(r?"T"+Ni(t,2)+":"+Ni(n,2)+":"+Ni(i,2)+"."+Ni(r,3)+"Z":i?"T"+Ni(t,2)+":"+Ni(n,2)+":"+Ni(i,2)+"Z":n||t?"T"+Ni(t,2)+":"+Ni(n,2)+"Z":"")}function PW(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(g,p){var y,v,x=r(g,function(E,A){if(y)return y(E,A-1);v=E,y=p?BW(E,p):T7(E)});return x.columns=v||[],x}function r(g,p){var y=[],v=g.length,x=0,E=0,A,S=v<=0,w=!1;g.charCodeAt(v-1)===Kh&&--v,g.charCodeAt(v-1)===k_&&--v;function D(){if(S)return M_;if(w)return w=!1,yF;var M,C=x,k;if(g.charCodeAt(C)===T_){for(;x++<v&&g.charCodeAt(x)!==T_||g.charCodeAt(++x)===T_;);return(M=x)>=v?S=!0:(k=g.charCodeAt(x++))===Kh?w=!0:k===k_&&(w=!0,g.charCodeAt(x)===Kh&&++x),g.slice(C+1,M-1).replace(/""/g,'"')}for(;x<v;){if((k=g.charCodeAt(M=x++))===Kh)w=!0;else if(k===k_)w=!0,g.charCodeAt(x)===Kh&&++x;else if(k!==n)continue;return g.slice(C,M)}return S=!0,g.slice(C,v)}for(;(A=D())!==M_;){for(var O=[];A!==yF&&A!==M_;)O.push(A),A=D();p&&(O=p(O,E++))==null||y.push(O)}return y}function a(g,p){return g.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function s(g,p){return p==null&&(p=vF(g)),[p.map(d).join(e)].concat(a(g,p)).join(`
`)}function o(g,p){return p==null&&(p=vF(g)),a(g,p).join(`
`)}function l(g){return g.map(f).join(`
`)}function f(g){return g.map(d).join(e)}function d(g){return g==null?"":g instanceof Date?UW(g):t.test(g+="")?'"'+g.replace(/"/g,'""')+'"':g}return{parse:i,parseRows:r,format:s,formatBody:o,formatRows:l,formatRow:f,formatValue:d}}function IW(e){return e}function qW(e){if(e==null)return IW;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(o,l){l||(t=n=0);var f=2,d=o.length,g=new Array(d);for(g[0]=(t+=o[0])*i+a,g[1]=(n+=o[1])*r+s;f<d;)g[f]=o[f],++f;return g}}function HW(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function GW(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return bF(e,n)})}:bF(e,t)}function bF(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=k7(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function k7(e,t){var n=qW(e.transform),i=e.arcs;function r(d,g){g.length&&g.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)g.push(n(p[y],y));d<0&&HW(g,v)}function a(d){return n(d)}function s(d){for(var g=[],p=0,y=d.length;p<y;++p)r(d[p],g);return g.length<2&&g.push(g[0]),g}function o(d){for(var g=s(d);g.length<4;)g.push(g[0]);return g}function l(d){return d.map(o)}function f(d){var g=d.type,p;switch(g){case"GeometryCollection":return{type:g,geometries:d.geometries.map(f)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=l(d.arcs);break;case"MultiPolygon":p=d.arcs.map(l);break;default:return null}return{type:g,coordinates:p}}return f(t)}function YW(e,t){var n={},i={},r={},a=[],s=-1;t.forEach(function(f,d){var g=e.arcs[f<0?~f:f],p;g.length<3&&!g[1][0]&&!g[1][1]&&(p=t[++s],t[s]=f,t[d]=p)}),t.forEach(function(f){var d=o(f),g=d[0],p=d[1],y,v;if(y=r[g])if(delete r[y.end],y.push(f),y.end=p,v=i[p]){delete i[v.start];var x=v===y?y:y.concat(v);i[x.start=y.start]=r[x.end=v.end]=x}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(f),y.start=g,v=r[g]){delete r[v.end];var E=v===y?y:v.concat(y);i[E.start=v.start]=r[E.end=y.end]=E}else i[y.start]=r[y.end]=y;else y=[f],i[y.start=g]=r[y.end=p]=y});function o(f){var d=e.arcs[f<0?~f:f],g=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],f<0?[p,g]:[g,p]}function l(f,d){for(var g in f){var p=f[g];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return l(r,i),l(i,r),t.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function XW(e){return k7(e,VW.apply(this,arguments))}function VW(e,t,n){var i,r,a;if(arguments.length>1)i=WW(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:YW(e,i)}}function WW(e,t,n){var i=[],r=[],a;function s(g){var p=g<0?~g:g;(r[p]||(r[p]=[])).push({i:g,g:a})}function o(g){g.forEach(s)}function l(g){g.forEach(o)}function f(g){g.forEach(l)}function d(g){switch(a=g,g.type){case"GeometryCollection":g.geometries.forEach(d);break;case"LineString":o(g.arcs);break;case"MultiLineString":case"Polygon":l(g.arcs);break;case"MultiPolygon":f(g.arcs);break}}return d(t),r.forEach(n==null?function(g){i.push(g[0].i)}:function(g){n(g[0].g,g[g.length-1].g)&&i.push(g[0].i)}),i}function Qs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function QW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $d(e){let t,n,i;e.length!==2?(t=Qs,n=(o,l)=>Qs(e(o),l),i=(o,l)=>e(o)-l):(t=e===Qs||e===QW?e:ZW,n=e,i=e);function r(o,l,f=0,d=o.length){if(f<d){if(t(l,l)!==0)return d;do{const g=f+d>>>1;n(o[g],l)<0?f=g+1:d=g}while(f<d)}return f}function a(o,l,f=0,d=o.length){if(f<d){if(t(l,l)!==0)return d;do{const g=f+d>>>1;n(o[g],l)<=0?f=g+1:d=g}while(f<d)}return f}function s(o,l,f=0,d=o.length){const g=r(o,l,f,d-1);return g>f&&i(o[g-1],l)>-i(o[g],l)?g-1:g}return{left:r,center:s,right:a}}function ZW(){return 0}function F7(e){return e===null?NaN:+e}function*KW(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const R7=$d(Qs),gu=R7.right,JW=R7.left;$d(F7).center;function eQ(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r));else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r))}if(n>1)return a/(n-1)}function tQ(e,t){const n=eQ(e,t);return n&&Math.sqrt(n)}class Ei{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],s=t+a,o=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);o&&(n[i++]=o),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,a=r-(s-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=s+r,r==i-s&&(s=i))}return s}}class xF extends Map{constructor(t,n=z7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(AS(this,t))}has(t){return super.has(AS(this,t))}set(t,n){return super.set(N7(this,t),n)}delete(t){return super.delete(j7(this,t))}}class xy extends Set{constructor(t,n=z7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(AS(this,t))}add(t){return super.add(N7(this,t))}delete(t){return super.delete(j7(this,t))}}function AS({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function N7({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function j7({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function z7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function nQ(e,t){return Array.from(t,n=>e[n])}function iQ(e=Qs){if(e===Qs)return B7;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function B7(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const rQ=Math.sqrt(50),aQ=Math.sqrt(10),sQ=Math.sqrt(2);function Ey(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=rQ?10:a>=aQ?5:a>=sQ?2:1;let o,l,f;return r<0?(f=Math.pow(10,-r)/s,o=Math.round(e*f),l=Math.round(t*f),o/f<e&&++o,l/f>t&&--l,f=-f):(f=Math.pow(10,r)*s,o=Math.round(e/f),l=Math.round(t/f),o*f<e&&++o,l*f>t&&--l),l<o&&.5<=n&&n<2?Ey(e,t,n*2):[o,l,f]}function SS(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,s]=i?Ey(t,e,n):Ey(e,t,n);if(!(a>=r))return[];const o=a-r+1,l=new Array(o);if(i)if(s<0)for(let f=0;f<o;++f)l[f]=(a-f)/-s;else for(let f=0;f<o;++f)l[f]=(a-f)*s;else if(s<0)for(let f=0;f<o;++f)l[f]=(r+f)/-s;else for(let f=0;f<o;++f)l[f]=(r+f)*s;return l}function wS(e,t,n){return t=+t,e=+e,n=+n,Ey(e,t,n)[2]}function pu(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?wS(t,e,n):wS(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Nl(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function OS(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function L7(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?B7:iQ(r);i>n;){if(i-n>600){const l=i-n+1,f=t-n+1,d=Math.log(l),g=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*g*(l-g)/l)*(f-l/2<0?-1:1),y=Math.max(n,Math.floor(t-f*g/l+p)),v=Math.min(i,Math.floor(t+(l-f)*g/l+p));L7(e,t,y,v,r)}const a=e[t];let s=n,o=i;for(Jh(e,n,t),r(e[i],a)>0&&Jh(e,n,i);s<o;){for(Jh(e,s,o),++s,--o;r(e[s],a)<0;)++s;for(;r(e[o],a)>0;)--o}r(e[n],a)===0?Jh(e,n,o):(++o,Jh(e,o,i)),o<=t&&(n=o+1),t<=o&&(i=o-1)}return e}function Jh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function CS(e,t,n){if(e=Float64Array.from(KW(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return OS(e);if(t>=1)return Nl(e);var i,r=(i-1)*t,a=Math.floor(r),s=Nl(L7(e,a).subarray(0,a+1)),o=OS(e.subarray(a+1));return s+(o-s)*(r-a)}}function U7(e,t,n=F7){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),s=+n(e[a],a,e),o=+n(e[a+1],a+1,e);return s+(o-s)*(r-a)}}function oQ(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function P7(e,t){return CS(e,.5,t)}function*uQ(e){for(const t of e)yield*t}function I7(e){return Array.from(uQ(e))}function cr(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function q7(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function lQ(e,...t){e=new xy(e),t=t.map(cQ);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function cQ(e){return e instanceof xy?e:new xy(e)}function fQ(...e){const t=new xy;for(const n of e)for(const i of n)t.add(i);return t}function dQ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _y(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Vf(e){return e=_y(Math.abs(e)),e?e[1]:NaN}function hQ(e,t){return function(n,i){for(var r=n.length,a=[],s=0,o=e[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),a.push(n.substring(r-=o,r+o)),!((l+=o+1)>i));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function gQ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var pQ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hl(e){if(!(t=pQ.exec(e)))throw new Error("invalid format: "+e);var t;return new tC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Hl.prototype=tC.prototype;function tC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}tC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function mQ(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var H7;function yQ(e,t){var n=_y(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(H7=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+_y(e,Math.max(0,t+a-1))[0]}function EF(e,t){var n=_y(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const _F={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:dQ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>EF(e*100,t),r:EF,s:yQ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function AF(e){return e}var SF=Array.prototype.map,wF=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function G7(e){var t=e.grouping===void 0||e.thousands===void 0?AF:hQ(SF.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?AF:gQ(SF.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function f(g){g=Hl(g);var p=g.fill,y=g.align,v=g.sign,x=g.symbol,E=g.zero,A=g.width,S=g.comma,w=g.precision,D=g.trim,O=g.type;O==="n"?(S=!0,O="g"):_F[O]||(w===void 0&&(w=12),D=!0,O="g"),(E||p==="0"&&y==="=")&&(E=!0,p="0",y="=");var M=x==="$"?n:x==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",C=x==="$"?i:/[%p]/.test(O)?s:"",k=_F[O],N=/[defgprs%]/.test(O);w=w===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function L(B){var V=M,G=C,P,j,F;if(O==="c")G=k(B)+G,B="";else{B=+B;var U=B<0||1/B<0;if(B=isNaN(B)?l:k(Math.abs(B),w),D&&(B=mQ(B)),U&&+B==0&&v!=="+"&&(U=!1),V=(U?v==="("?v:o:v==="-"||v==="("?"":v)+V,G=(O==="s"?wF[8+H7/3]:"")+G+(U&&v==="("?")":""),N){for(P=-1,j=B.length;++P<j;)if(F=B.charCodeAt(P),48>F||F>57){G=(F===46?r+B.slice(P+1):B.slice(P))+G,B=B.slice(0,P);break}}}S&&!E&&(B=t(B,1/0));var H=V.length+B.length+G.length,Q=H<A?new Array(A-H+1).join(p):"";switch(S&&E&&(B=t(Q+B,Q.length?A-G.length:1/0),Q=""),y){case"<":B=V+B+G+Q;break;case"=":B=V+Q+B+G;break;case"^":B=Q.slice(0,H=Q.length>>1)+V+B+G+Q.slice(H);break;default:B=Q+V+B+G;break}return a(B)}return L.toString=function(){return g+""},L}function d(g,p){var y=f((g=Hl(g),g.type="f",g)),v=Math.max(-8,Math.min(8,Math.floor(Vf(p)/3)))*3,x=Math.pow(10,-v),E=wF[8+v/3];return function(A){return y(x*A)+E}}return{format:f,formatPrefix:d}}var a1,rb,nC;vQ({thousands:",",grouping:[3],currency:["$",""]});function vQ(e){return a1=G7(e),rb=a1.format,nC=a1.formatPrefix,a1}function Y7(e){return Math.max(0,-Vf(Math.abs(e)))}function X7(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vf(t)/3)))*3-Vf(Math.abs(e)))}function V7(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Vf(t)-Vf(e))+1}const F_=new Date,R_=new Date;function bn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const s=r(a),o=r.ceil(a);return a-s<o-a?s:o},r.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,o)=>{const l=[];if(a=r.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let f;do l.push(f=new Date(+a)),t(a,o),e(a);while(f<a&&a<s);return l},r.filter=a=>bn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),n&&(r.count=(a,s)=>(F_.setTime(+a),R_.setTime(+s),e(F_),e(R_),Math.floor(n(F_,R_))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const Wf=bn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Wf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?bn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Wf);Wf.range;const Hs=1e3,Fr=Hs*60,Gs=Fr*60,io=Gs*24,iC=io*7,OF=io*30,N_=io*365,Ys=bn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Hs)},(e,t)=>(t-e)/Hs,e=>e.getUTCSeconds());Ys.range;const ab=bn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Hs)},(e,t)=>{e.setTime(+e+t*Fr)},(e,t)=>(t-e)/Fr,e=>e.getMinutes());ab.range;const sb=bn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Fr)},(e,t)=>(t-e)/Fr,e=>e.getUTCMinutes());sb.range;const ob=bn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Hs-e.getMinutes()*Fr)},(e,t)=>{e.setTime(+e+t*Gs)},(e,t)=>(t-e)/Gs,e=>e.getHours());ob.range;const ub=bn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Gs)},(e,t)=>(t-e)/Gs,e=>e.getUTCHours());ub.range;const Zs=bn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Fr)/io,e=>e.getDate()-1);Zs.range;const ou=bn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/io,e=>e.getUTCDate()-1);ou.range;const W7=bn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/io,e=>Math.floor(e/io));W7.range;function fc(e){return bn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Fr)/iC)}const Md=fc(0),Ay=fc(1),bQ=fc(2),xQ=fc(3),Qf=fc(4),EQ=fc(5),_Q=fc(6);Md.range;Ay.range;bQ.range;xQ.range;Qf.range;EQ.range;_Q.range;function dc(e){return bn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/iC)}const Td=dc(0),Sy=dc(1),AQ=dc(2),SQ=dc(3),Zf=dc(4),wQ=dc(5),OQ=dc(6);Td.range;Sy.range;AQ.range;SQ.range;Zf.range;wQ.range;OQ.range;const cg=bn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());cg.range;const fg=bn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());fg.range;const Wa=bn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Wa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:bn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Wa.range;const Qa=bn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Qa.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:bn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Qa.range;function Q7(e,t,n,i,r,a){const s=[[Ys,1,Hs],[Ys,5,5*Hs],[Ys,15,15*Hs],[Ys,30,30*Hs],[a,1,Fr],[a,5,5*Fr],[a,15,15*Fr],[a,30,30*Fr],[r,1,Gs],[r,3,3*Gs],[r,6,6*Gs],[r,12,12*Gs],[i,1,io],[i,2,2*io],[n,1,iC],[t,1,OF],[t,3,3*OF],[e,1,N_]];function o(f,d,g){const p=d<f;p&&([f,d]=[d,f]);const y=g&&typeof g.range=="function"?g:l(f,d,g),v=y?y.range(f,+d+1):[];return p?v.reverse():v}function l(f,d,g){const p=Math.abs(d-f)/g,y=$d(([,,E])=>E).right(s,p);if(y===s.length)return e.every(pu(f/N_,d/N_,g));if(y===0)return Wf.every(Math.max(pu(f,d,g),1));const[v,x]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(x)}return[o,l]}const[CQ,DQ]=Q7(Qa,fg,Td,W7,ub,sb),[$Q,MQ]=Q7(Wa,cg,Md,Zs,ob,ab),Un="year",Hi="quarter",ni="month",pn="week",Gi="date",Zn="day",Za="dayofyear",pr="hours",mr="minutes",Pr="seconds",pa="milliseconds",rC=[Un,Hi,ni,pn,Gi,Zn,Za,pr,mr,Pr,pa],j_=rC.reduce((e,t,n)=>(e[t]=1+n,e),{});function aC(e){const t=De(e).slice(),n={};return t.length||ne("Missing time unit."),t.forEach(r=>{Re(j_,r)?n[r]=1:ne(`Invalid time unit: ${r}.`)}),(n[pn]||n[Zn]?1:0)+(n[Hi]||n[ni]||n[Gi]?1:0)+(n[Za]?1:0)>1&&ne(`Incompatible time units: ${e}`),t.sort((r,a)=>j_[r]-j_[a]),t}const TQ={[Un]:"%Y ",[Hi]:"Q%q ",[ni]:"%b ",[Gi]:"%d ",[pn]:"W%U ",[Zn]:"%a ",[Za]:"%j ",[pr]:"%H:00",[mr]:"00:%M",[Pr]:":%S",[pa]:".%L",[`${Un}-${ni}`]:"%Y-%m ",[`${Un}-${ni}-${Gi}`]:"%Y-%m-%d ",[`${pr}-${mr}`]:"%H:%M"};function Z7(e,t){const n=Ie({},TQ,t),i=aC(e),r=i.length;let a="",s=0,o,l;for(s=0;s<r;)for(o=i.length;o>s;--o)if(l=i.slice(s,o).join("-"),n[l]!=null){a+=n[l],s=o;break}return a.trim()}const wl=new Date;function sC(e){return wl.setFullYear(e),wl.setMonth(0),wl.setDate(1),wl.setHours(0,0,0,0),wl}function K7(e){return ej(new Date(e))}function J7(e){return DS(new Date(e))}function ej(e){return Zs.count(sC(e.getFullYear())-1,e)}function DS(e){return Md.count(sC(e.getFullYear())-1,e)}function $S(e){return sC(e).getDay()}function kQ(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(-1,t,n,i,r,a,s);return o.setFullYear(e),o}return new Date(e,t,n,i,r,a,s)}function tj(e){return ij(new Date(e))}function nj(e){return MS(new Date(e))}function ij(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ou.count(t-1,e)}function MS(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Td.count(t-1,e)}function TS(e){return wl.setTime(Date.UTC(e,0,1)),wl.getUTCDay()}function FQ(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,i,r,a,s));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,i,r,a,s))}function rj(e,t,n,i,r){const a=t||1,s=et(e),o=(A,S,w)=>(w=w||A,RQ(n[w],i[w],A===s&&a,S)),l=new Date,f=ga(e),d=f[Un]?o(Un):ui(2012),g=f[ni]?o(ni):f[Hi]?o(Hi):Zo,p=f[pn]&&f[Zn]?o(Zn,1,pn+Zn):f[pn]?o(pn,1):f[Zn]?o(Zn,1):f[Gi]?o(Gi,1):f[Za]?o(Za,1):Od,y=f[pr]?o(pr):Zo,v=f[mr]?o(mr):Zo,x=f[Pr]?o(Pr):Zo,E=f[pa]?o(pa):Zo;return function(A){l.setTime(+A);const S=d(l);return r(S,g(l),p(l,S),y(l),v(l),x(l),E(l))}}function RQ(e,t,n,i){const r=n<=1?e:i?(a,s)=>i+n*Math.floor((e(a,s)-i)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(r(a,s),s):r}function Kf(e,t,n){return t+e*7-(n+6)%7}const NQ={[Un]:e=>e.getFullYear(),[Hi]:e=>Math.floor(e.getMonth()/3),[ni]:e=>e.getMonth(),[Gi]:e=>e.getDate(),[pr]:e=>e.getHours(),[mr]:e=>e.getMinutes(),[Pr]:e=>e.getSeconds(),[pa]:e=>e.getMilliseconds(),[Za]:e=>ej(e),[pn]:e=>DS(e),[pn+Zn]:(e,t)=>Kf(DS(e),e.getDay(),$S(t)),[Zn]:(e,t)=>Kf(1,e.getDay(),$S(t))},jQ={[Hi]:e=>3*e,[pn]:(e,t)=>Kf(e,0,$S(t))};function aj(e,t){return rj(e,t||1,NQ,jQ,kQ)}const zQ={[Un]:e=>e.getUTCFullYear(),[Hi]:e=>Math.floor(e.getUTCMonth()/3),[ni]:e=>e.getUTCMonth(),[Gi]:e=>e.getUTCDate(),[pr]:e=>e.getUTCHours(),[mr]:e=>e.getUTCMinutes(),[Pr]:e=>e.getUTCSeconds(),[pa]:e=>e.getUTCMilliseconds(),[Za]:e=>ij(e),[pn]:e=>MS(e),[Zn]:(e,t)=>Kf(1,e.getUTCDay(),TS(t)),[pn+Zn]:(e,t)=>Kf(MS(e),e.getUTCDay(),TS(t))},BQ={[Hi]:e=>3*e,[pn]:(e,t)=>Kf(e,0,TS(t))};function sj(e,t){return rj(e,t||1,zQ,BQ,FQ)}const LQ={[Un]:Wa,[Hi]:cg.every(3),[ni]:cg,[pn]:Md,[Gi]:Zs,[Zn]:Zs,[Za]:Zs,[pr]:ob,[mr]:ab,[Pr]:Ys,[pa]:Wf},UQ={[Un]:Qa,[Hi]:fg.every(3),[ni]:fg,[pn]:Td,[Gi]:ou,[Zn]:ou,[Za]:ou,[pr]:ub,[mr]:sb,[Pr]:Ys,[pa]:Wf};function kd(e){return LQ[e]}function Fd(e){return UQ[e]}function oj(e,t,n){return e?e.offset(t,n):void 0}function uj(e,t,n){return oj(kd(e),t,n)}function lj(e,t,n){return oj(Fd(e),t,n)}function cj(e,t,n,i){return e?e.range(t,n,i):void 0}function fj(e,t,n,i){return cj(kd(e),t,n,i)}function dj(e,t,n,i){return cj(Fd(e),t,n,i)}const S0=1e3,w0=S0*60,O0=w0*60,lb=O0*24,PQ=lb*7,CF=lb*30,kS=lb*365,hj=[Un,ni,Gi,pr,mr,Pr,pa],C0=hj.slice(0,-1),D0=C0.slice(0,-1),$0=D0.slice(0,-1),IQ=$0.slice(0,-1),qQ=[Un,pn],DF=[Un,ni],gj=[Un],e0=[[C0,1,S0],[C0,5,5*S0],[C0,15,15*S0],[C0,30,30*S0],[D0,1,w0],[D0,5,5*w0],[D0,15,15*w0],[D0,30,30*w0],[$0,1,O0],[$0,3,3*O0],[$0,6,6*O0],[$0,12,12*O0],[IQ,1,lb],[qQ,1,PQ],[DF,1,CF],[DF,3,3*CF],[gj,1,kS]];function pj(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(Qg(t))/n;let r=$d(o=>o[2]).right(e0,i),a,s;return r===e0.length?(a=gj,s=pu(t[0]/kS,t[1]/kS,n)):r?(r=e0[i/e0[r-1][2]<e0[r][2]/i?r-1:r],a=r[0],s=r[1]):(a=hj,s=Math.max(pu(t[0],t[1],n),1)),{units:a,step:s}}function z_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function B_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function t0(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function mj(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,f=n0(r),d=i0(r),g=n0(a),p=i0(a),y=n0(s),v=i0(s),x=n0(o),E=i0(o),A=n0(l),S=i0(l),w={a:U,A:H,b:Q,B:R,c:null,d:RF,e:RF,f:dZ,g:_Z,G:SZ,H:lZ,I:cZ,j:fZ,L:yj,m:hZ,M:gZ,p:W,q:ie,Q:zF,s:BF,S:pZ,u:mZ,U:yZ,V:vZ,w:bZ,W:xZ,x:null,X:null,y:EZ,Y:AZ,Z:wZ,"%":jF},D={a:se,A:ge,b:pe,B:_e,c:null,d:NF,e:NF,f:$Z,g:LZ,G:PZ,H:OZ,I:CZ,j:DZ,L:bj,m:MZ,M:TZ,p:It,q:ft,Q:zF,s:BF,S:kZ,u:FZ,U:RZ,V:NZ,w:jZ,W:zZ,x:null,X:null,y:BZ,Y:UZ,Z:IZ,"%":jF},O={a:L,A:B,b:V,B:G,c:P,d:kF,e:kF,f:aZ,g:TF,G:MF,H:FF,I:FF,j:tZ,L:rZ,m:eZ,M:nZ,p:N,q:JQ,Q:oZ,s:uZ,S:iZ,u:VQ,U:WQ,V:QQ,w:XQ,W:ZQ,x:j,X:F,y:TF,Y:MF,Z:KQ,"%":sZ};w.x=M(n,w),w.X=M(i,w),w.c=M(t,w),D.x=M(n,D),D.X=M(i,D),D.c=M(t,D);function M(me,ze){return function(Pe){var le=[],Qt=-1,rt=0,tn=me.length,En,nn,qp;for(Pe instanceof Date||(Pe=new Date(+Pe));++Qt<tn;)me.charCodeAt(Qt)===37&&(le.push(me.slice(rt,Qt)),(nn=$F[En=me.charAt(++Qt)])!=null?En=me.charAt(++Qt):nn=En==="e"?" ":"0",(qp=ze[En])&&(En=qp(Pe,nn)),le.push(En),rt=Qt+1);return le.push(me.slice(rt,Qt)),le.join("")}}function C(me,ze){return function(Pe){var le=t0(1900,void 0,1),Qt=k(le,me,Pe+="",0),rt,tn;if(Qt!=Pe.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(ze&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(rt=B_(t0(le.y,0,1)),tn=rt.getUTCDay(),rt=tn>4||tn===0?Sy.ceil(rt):Sy(rt),rt=ou.offset(rt,(le.V-1)*7),le.y=rt.getUTCFullYear(),le.m=rt.getUTCMonth(),le.d=rt.getUTCDate()+(le.w+6)%7):(rt=z_(t0(le.y,0,1)),tn=rt.getDay(),rt=tn>4||tn===0?Ay.ceil(rt):Ay(rt),rt=Zs.offset(rt,(le.V-1)*7),le.y=rt.getFullYear(),le.m=rt.getMonth(),le.d=rt.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),tn="Z"in le?B_(t0(le.y,0,1)).getUTCDay():z_(t0(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(tn+5)%7:le.w+le.U*7-(tn+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,B_(le)):z_(le)}}function k(me,ze,Pe,le){for(var Qt=0,rt=ze.length,tn=Pe.length,En,nn;Qt<rt;){if(le>=tn)return-1;if(En=ze.charCodeAt(Qt++),En===37){if(En=ze.charAt(Qt++),nn=O[En in $F?ze.charAt(Qt++):En],!nn||(le=nn(me,Pe,le))<0)return-1}else if(En!=Pe.charCodeAt(le++))return-1}return le}function N(me,ze,Pe){var le=f.exec(ze.slice(Pe));return le?(me.p=d.get(le[0].toLowerCase()),Pe+le[0].length):-1}function L(me,ze,Pe){var le=y.exec(ze.slice(Pe));return le?(me.w=v.get(le[0].toLowerCase()),Pe+le[0].length):-1}function B(me,ze,Pe){var le=g.exec(ze.slice(Pe));return le?(me.w=p.get(le[0].toLowerCase()),Pe+le[0].length):-1}function V(me,ze,Pe){var le=A.exec(ze.slice(Pe));return le?(me.m=S.get(le[0].toLowerCase()),Pe+le[0].length):-1}function G(me,ze,Pe){var le=x.exec(ze.slice(Pe));return le?(me.m=E.get(le[0].toLowerCase()),Pe+le[0].length):-1}function P(me,ze,Pe){return k(me,t,ze,Pe)}function j(me,ze,Pe){return k(me,n,ze,Pe)}function F(me,ze,Pe){return k(me,i,ze,Pe)}function U(me){return s[me.getDay()]}function H(me){return a[me.getDay()]}function Q(me){return l[me.getMonth()]}function R(me){return o[me.getMonth()]}function W(me){return r[+(me.getHours()>=12)]}function ie(me){return 1+~~(me.getMonth()/3)}function se(me){return s[me.getUTCDay()]}function ge(me){return a[me.getUTCDay()]}function pe(me){return l[me.getUTCMonth()]}function _e(me){return o[me.getUTCMonth()]}function It(me){return r[+(me.getUTCHours()>=12)]}function ft(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var ze=M(me+="",w);return ze.toString=function(){return me},ze},parse:function(me){var ze=C(me+="",!1);return ze.toString=function(){return me},ze},utcFormat:function(me){var ze=M(me+="",D);return ze.toString=function(){return me},ze},utcParse:function(me){var ze=C(me+="",!0);return ze.toString=function(){return me},ze}}}var $F={"-":"",_:" ",0:"0"},Fn=/^\s*\d+/,HQ=/^%/,GQ=/[\\^$*+?|[\]().{}]/g;function lt(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function YQ(e){return e.replace(GQ,"\\$&")}function n0(e){return new RegExp("^(?:"+e.map(YQ).join("|")+")","i")}function i0(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function XQ(e,t,n){var i=Fn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function VQ(e,t,n){var i=Fn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function WQ(e,t,n){var i=Fn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function QQ(e,t,n){var i=Fn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function ZQ(e,t,n){var i=Fn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function MF(e,t,n){var i=Fn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function TF(e,t,n){var i=Fn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function KQ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function JQ(e,t,n){var i=Fn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function eZ(e,t,n){var i=Fn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function kF(e,t,n){var i=Fn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function tZ(e,t,n){var i=Fn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function FF(e,t,n){var i=Fn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function nZ(e,t,n){var i=Fn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function iZ(e,t,n){var i=Fn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function rZ(e,t,n){var i=Fn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function aZ(e,t,n){var i=Fn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function sZ(e,t,n){var i=HQ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function oZ(e,t,n){var i=Fn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function uZ(e,t,n){var i=Fn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function RF(e,t){return lt(e.getDate(),t,2)}function lZ(e,t){return lt(e.getHours(),t,2)}function cZ(e,t){return lt(e.getHours()%12||12,t,2)}function fZ(e,t){return lt(1+Zs.count(Wa(e),e),t,3)}function yj(e,t){return lt(e.getMilliseconds(),t,3)}function dZ(e,t){return yj(e,t)+"000"}function hZ(e,t){return lt(e.getMonth()+1,t,2)}function gZ(e,t){return lt(e.getMinutes(),t,2)}function pZ(e,t){return lt(e.getSeconds(),t,2)}function mZ(e){var t=e.getDay();return t===0?7:t}function yZ(e,t){return lt(Md.count(Wa(e)-1,e),t,2)}function vj(e){var t=e.getDay();return t>=4||t===0?Qf(e):Qf.ceil(e)}function vZ(e,t){return e=vj(e),lt(Qf.count(Wa(e),e)+(Wa(e).getDay()===4),t,2)}function bZ(e){return e.getDay()}function xZ(e,t){return lt(Ay.count(Wa(e)-1,e),t,2)}function EZ(e,t){return lt(e.getFullYear()%100,t,2)}function _Z(e,t){return e=vj(e),lt(e.getFullYear()%100,t,2)}function AZ(e,t){return lt(e.getFullYear()%1e4,t,4)}function SZ(e,t){var n=e.getDay();return e=n>=4||n===0?Qf(e):Qf.ceil(e),lt(e.getFullYear()%1e4,t,4)}function wZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+lt(t/60|0,"0",2)+lt(t%60,"0",2)}function NF(e,t){return lt(e.getUTCDate(),t,2)}function OZ(e,t){return lt(e.getUTCHours(),t,2)}function CZ(e,t){return lt(e.getUTCHours()%12||12,t,2)}function DZ(e,t){return lt(1+ou.count(Qa(e),e),t,3)}function bj(e,t){return lt(e.getUTCMilliseconds(),t,3)}function $Z(e,t){return bj(e,t)+"000"}function MZ(e,t){return lt(e.getUTCMonth()+1,t,2)}function TZ(e,t){return lt(e.getUTCMinutes(),t,2)}function kZ(e,t){return lt(e.getUTCSeconds(),t,2)}function FZ(e){var t=e.getUTCDay();return t===0?7:t}function RZ(e,t){return lt(Td.count(Qa(e)-1,e),t,2)}function xj(e){var t=e.getUTCDay();return t>=4||t===0?Zf(e):Zf.ceil(e)}function NZ(e,t){return e=xj(e),lt(Zf.count(Qa(e),e)+(Qa(e).getUTCDay()===4),t,2)}function jZ(e){return e.getUTCDay()}function zZ(e,t){return lt(Sy.count(Qa(e)-1,e),t,2)}function BZ(e,t){return lt(e.getUTCFullYear()%100,t,2)}function LZ(e,t){return e=xj(e),lt(e.getUTCFullYear()%100,t,2)}function UZ(e,t){return lt(e.getUTCFullYear()%1e4,t,4)}function PZ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Zf(e):Zf.ceil(e),lt(e.getUTCFullYear()%1e4,t,4)}function IZ(){return"+0000"}function jF(){return"%"}function zF(e){return+e}function BF(e){return Math.floor(+e/1e3)}var mf,oC,Ej,uC,_j;qZ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function qZ(e){return mf=mj(e),oC=mf.format,Ej=mf.parse,uC=mf.utcFormat,_j=mf.utcParse,mf}function M0(e){const t={};return n=>t[n]||(t[n]=e(n))}function HZ(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=GZ(i,r);const s=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+s}}function GZ(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function Aj(e){const t=M0(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=Hl(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return HZ(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,s){s=Hl(s??",f");const o=pu(i,r,a),l=Math.max(Math.abs(i),Math.abs(r));let f;if(s.precision==null)switch(s.type){case"s":return isNaN(f=X7(o,l))||(s.precision=f),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(f=V7(o,l))||(s.precision=f-(s.type==="e"));break}case"f":case"%":{isNaN(f=Y7(o))||(s.precision=f-(s.type==="%")*2);break}}return t(s)}}}let FS;Sj();function Sj(){return FS=Aj({format:rb,formatPrefix:nC})}function wj(e){return Aj(G7(e))}function wy(e){return arguments.length?FS=wj(e):FS}function LF(e,t,n){n=n||{},je(n)||ne(`Invalid time multi-format specifier: ${n}`);const i=t(Pr),r=t(mr),a=t(pr),s=t(Gi),o=t(pn),l=t(ni),f=t(Hi),d=t(Un),g=e(n[pa]||".%L"),p=e(n[Pr]||":%S"),y=e(n[mr]||"%I:%M"),v=e(n[pr]||"%I %p"),x=e(n[Gi]||n[Zn]||"%a %d"),E=e(n[pn]||"%b %d"),A=e(n[ni]||"%B"),S=e(n[Hi]||"%B"),w=e(n[Un]||"%Y");return D=>(i(D)<D?g:r(D)<D?p:a(D)<D?y:s(D)<D?v:l(D)<D?o(D)<D?x:E:d(D)<D?f(D)<D?A:S:w)(D)}function Oj(e){const t=M0(e.format),n=M0(e.utcFormat);return{timeFormat:i=>tt(i)?t(i):LF(t,kd,i),utcFormat:i=>tt(i)?n(i):LF(n,Fd,i),timeParse:M0(e.parse),utcParse:M0(e.utcParse)}}let RS;Cj();function Cj(){return RS=Oj({format:oC,parse:Ej,utcFormat:uC,utcParse:_j})}function Dj(e){return Oj(mj(e))}function dg(e){return arguments.length?RS=Dj(e):RS}const NS=(e,t)=>Ie({},e,t);function $j(e,t){const n=e?wj(e):wy(),i=t?Dj(t):dg();return NS(n,i)}function lC(e,t){const n=arguments.length;return n&&n!==2&&ne("defaultLocale expects either zero or two arguments."),n?NS(wy(e),dg(t)):NS(wy(),dg())}function YZ(){return Sj(),Cj(),lC()}const XZ=/^(data:|([A-Za-z]+:)?\/\/)/,VZ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,WZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,UF="file://";function QZ(e,t){return n=>({options:n||{},sanitize:KZ,load:ZZ,fileAccess:!1,file:JZ(t),http:tK(e)})}async function ZZ(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function KZ(e,t){t=Ie({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,s;const o=VZ.test(e.replace(WZ,""));(e==null||typeof e!="string"||!o)&&ne("Sanitize failure, invalid URI: "+Ce(e));const l=XZ.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(r=e.startsWith(UF))||t.mode==="file"||t.mode!=="http"&&!l&&n,r?e=e.slice(UF.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function JZ(e){return e?t=>new Promise((n,i)=>{e.readFile(t,(r,a)=>{r?i(r):n(a)})}):eK}async function eK(){ne("No file system access.")}function tK(e){return e?async function(t,n){const i=Ie({},this.options.http,n),r=n&&n.response,a=await e(t,i);return a.ok?He(a[r])?a[r]():a.text():ne(a.status+""+a.statusText)}:nK}async function nK(){ne("No HTTP fetch method available.")}const iK=e=>e!=null&&e===e,rK=e=>e==="true"||e==="false"||e===!0||e===!1,aK=e=>!Number.isNaN(Date.parse(e)),Mj=e=>!Number.isNaN(+e)&&!(e instanceof Date),sK=e=>Mj(e)&&Number.isInteger(+e),jS={boolean:KO,integer:Kn,number:Kn,date:JO,string:eC,unknown:Si},s1=[rK,sK,Mj,aK],oK=["boolean","integer","number","date"];function Tj(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=s1.length,r=s1.map((a,s)=>s+1);for(let a=0,s=0,o,l;a<n;++a)for(l=t?e[a][t]:e[a],o=0;o<i;++o)if(r[o]&&iK(l)&&!s1[o](l)&&(r[o]=0,++s,s===s1.length))return"string";return oK[r.reduce((a,s)=>a===0?s:a,0)-1]}function kj(e,t){return t.reduce((n,i)=>(n[i]=Tj(e,i),n),{})}function PF(e){const t=function(n,i){const r={delimiter:e};return cC(n,i?Ie(i,r):r)};return t.responseType="text",t}function cC(e,t){return t.header&&(e=t.header.map(Ce).join(t.delimiter)+`
`+e),PW(t.delimiter).parse(e+"")}cC.responseType="text";function uK(e){return typeof Buffer=="function"&&He(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function fC(e,t){const n=t&&t.property?Lr(t.property):Si;return je(e)&&!uK(e)?lK(n(e),t):n(JSON.parse(e))}fC.responseType="json";function lK(e,t){return!Ee(e)&&w7(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const cK={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function Fj(e,t){let n,i,r,a;return e=fC(e,t),t&&t.feature?(n=GW,r=t.feature):t&&t.mesh?(n=XW,r=t.mesh,a=cK[t.filter]):ne("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):ne("Invalid TopoJSON object: "+r),i&&i.features||[i]}Fj.responseType="json";const G1={dsv:cC,csv:PF(","),tsv:PF("	"),json:fC,topojson:Fj};function dC(e,t){return arguments.length>1?(G1[e]=t,this):Re(G1,e)?G1[e]:null}function Rj(e){const t=dC(e);return t&&t.responseType||"text"}function Nj(e,t,n,i){t=t||{};const r=dC(t.type||"json");return r||ne("Unknown data format type: "+t.type),e=r(e,t),t.parse&&fK(e,t.parse,n,i),Re(e,"columns")&&delete e.columns,e}function fK(e,t,n,i){if(!e.length)return;const r=dg();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),s,o,l,f,d,g;t==="auto"&&(t=kj(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let x,E;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return x=v.split(/:(.+)?/,2),E=x[1],(E[0]==="'"&&E[E.length-1]==="'"||E[0]==='"'&&E[E.length-1]==='"')&&(E=E.slice(1,-1)),(x[0]==="utc"?i:n)(E);if(!jS[v])throw Error("Illegal format pattern: "+y+":"+v);return jS[v]});for(l=0,d=e.length,g=a.length;l<d;++l)for(s=e[l],f=0;f<g;++f)o=a[f],s[o]=p[f](s[o])}const cb=QZ(typeof fetch<"u"&&fetch,null);function fb(e){const t=e||Si,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}async function Y1(e,t){try{await t(e)}catch(n){e.error(n)}}const jj=Symbol("vega_id");let dK=1;function db(e){return!!(e&&we(e))}function we(e){return e[jj]}function zj(e,t){return e[jj]=t,e}function ht(e){const t=e===Object(e)?e:{data:e};return we(t)?t:zj(t,dK++)}function hC(e){return hb(e,ht({}))}function hb(e,t){for(const n in e)t[n]=e[n];return t}function Bj(e,t){return zj(t,we(e))}function hc(e,t){return e?t?(n,i)=>e(n,i)||we(t(n))-we(t(i)):(n,i)=>e(n,i)||we(n)-we(i):null}function Lj(e){return e&&e.constructor===gc}function gc(){const e=[],t=[],n=[],i=[],r=[];let a=null,s=!1;return{constructor:gc,insert(o){const l=De(o),f=l.length;for(let d=0;d<f;++d)e.push(l[d]);return this},remove(o){const l=He(o)?i:t,f=De(o),d=f.length;for(let g=0;g<d;++g)l.push(f[g]);return this},modify(o,l,f){const d={field:l,value:ui(f)};return He(o)?(d.filter=o,r.push(d)):(d.tuple=o,n.push(d)),this},encode(o,l){return He(o)?r.push({filter:o,field:l}):n.push({tuple:o,field:l}),this},clean(o){return a=o,this},reflow(){return s=!0,this},pulse(o,l){const f={},d={};let g,p,y,v,x,E;for(g=0,p=l.length;g<p;++g)f[we(l[g])]=1;for(g=0,p=t.length;g<p;++g)x=t[g],f[we(x)]=-1;for(g=0,p=i.length;g<p;++g)v=i[g],l.forEach(S=>{v(S)&&(f[we(S)]=-1)});for(g=0,p=e.length;g<p;++g)x=e[g],E=we(x),f[E]?f[E]=1:o.add.push(ht(e[g]));for(g=0,p=l.length;g<p;++g)x=l[g],f[we(x)]<0&&o.rem.push(x);function A(S,w,D){D?S[w]=D(S):o.encode=w,s||(d[we(S)]=S)}for(g=0,p=n.length;g<p;++g)y=n[g],x=y.tuple,v=y.field,E=f[we(x)],E>0&&(A(x,v,y.value),o.modifies(v));for(g=0,p=r.length;g<p;++g)y=r[g],v=y.filter,l.forEach(S=>{v(S)&&f[we(S)]>0&&A(S,y.field,y.value)}),o.modifies(y.field);if(s)o.mod=t.length||i.length?l.filter(S=>f[we(S)]>0):l.slice();else for(E in d)o.mod.push(d[E]);return(a||a==null&&(t.length||i.length))&&o.clean(!0),o}}}const X1="_:mod:_";function gb(){Object.defineProperty(this,X1,{writable:!0,value:{}})}gb.prototype={set(e,t,n,i){const r=this,a=r[e],s=r[X1];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||i)&&(r[e]=n,s[e]=Ee(n)?1+n.length:-1),r},modified(e,t){const n=this[X1];if(arguments.length){if(Ee(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[X1]={},this}};let hK=0;const gK="pulse",pK=new gb,mK=1,yK=2;function Ct(e,t,n,i){this.id=++hK,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function IF(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ct.prototype={targets(){return this._targets||(this._targets=fb(Vg))},set(e){return this.value!==e?(this.value=e,1):0},skip:IF(mK),modified:IF(yK),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new gb,r=this._argops=this._argops||[],a=[];let s,o,l,f;const d=(g,p,y)=>{y instanceof Ct?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:g,index:p})):i.set(g,p,y)};for(s in e)if(o=e[s],s===gK)De(o).forEach(g=>{g instanceof Ct?g!==this&&(g.targets().add(this),a.push(g)):ne("Pulse parameters must be operator instances.")}),this.source=o;else if(Ee(o))for(i.set(s,-1,Array(l=o.length)),f=0;f<l;++f)d(s,f,o[f]);else d(s,-1,o);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||pK,n=this._argops;let i,r,a,s;if(n){const o=n.length;for(r=0;r<o;++r)i=n[r],a=i.op,s=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,s);if(n.initonly){for(r=0;r<o;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function vK(e,t,n,i){let r=1,a;return e instanceof Ct?a=e:e&&e.prototype instanceof Ct?a=new e:He(e)?a=new Ct(null,e):(r=0,a=new Ct(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function bK(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let xK=0;function pb(e,t,n){this.id=++xK,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Ho(e,t,n){return new pb(e,t,n)}pb.prototype={_filter:Ur,_apply:Si,targets(){return this._targets||(this._targets=fb(Vg))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Ho(e);return this.targets().add(t),t},apply(e){const t=Ho(null,e);return this.targets().add(t),t},merge(){const e=Ho();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Ho();return this.targets().add(Ho(null,null,VO(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Ho(null,null,()=>n=!0)),t.targets().add(Ho(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Ur,this._targets=null}};function EK(e,t,n,i){const r=this,a=Ho(n,i),s=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=De(e);const l=o.length;for(let f=0;f<l;++f)o[f].addEventListener(t,s);return a}function _K(e,t){const n=this.locale();return Nj(e,t,n.timeParse,n.utcParse)}function AK(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function SK(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:Rj(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function wK(e,t,n){const i=this,r=i._pending||OK(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(Ur).insert(a.data||[])),r.done(),a}function OK(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const CK={skip:!0};function DK(e,t,n,i,r){return(e instanceof Ct?MK:$K)(this,e,t,n,i,r),this}function $K(e,t,n,i,r,a){const s=Ie({},a,CK);let o,l;He(n)||(n=ui(n)),i===void 0?o=f=>e.touch(n(f)):He(i)?(l=new Ct(null,i,r,!1),o=f=>{l.evaluate(f);const d=n(f),g=l.value;Lj(g)?e.pulse(d,g,a):e.update(d,g,s)}):o=f=>e.update(n(f),i,s),t.apply(o)}function MK(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const s=a||{},o=new Ct(null,TK(n,i),r,!1);o.modified(s.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function TK(e,t){return t=He(t)?t:ui(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function kK(e){e.rank=++this._rank}function FK(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&ne("Cycle detected in dataflow graph.")}const Oy={},Ra=1,Xo=2,zs=4,RK=Ra|Xo,qF=Ra|zs,yf=Ra|Xo|zs,HF=8,r0=16,GF=32,YF=64;function uu(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function L_(e,t){const n=[];return Yo(e,t,i=>n.push(i)),n}function XF(e,t){const n={};return e.visit(t,i=>{n[we(i)]=1}),i=>n[we(i)]?null:i}function o1(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}uu.prototype={StopPropagation:Oy,ADD:Ra,REM:Xo,MOD:zs,ADD_REM:RK,ADD_MOD:qF,ALL:yf,REFLOW:HF,SOURCE:r0,NO_SOURCE:GF,NO_FIELDS:YF,fork(e){return new uu(this.dataflow).init(this,e)},clone(){const e=this.fork(yf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(yf|r0)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new uu(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&YF)&&(n.fields=e.fields),t&Ra?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Xo?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&zs?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&GF?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||yf;return t&Ra&&this.add.length||t&Xo&&this.rem.length||t&zs&&this.mod.length},reflow(e){if(e)return this.fork(yf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(zs,XF(this,Ra))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Ee(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Ee(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ra&&(n.addF=o1(n.addF,t)),e&Xo&&(n.remF=o1(n.remF,t)),e&zs&&(n.modF=o1(n.modF,t)),e&r0&&(n.srcF=o1(n.srcF,t)),n},materialize(e){e=e||yf;const t=this;return e&Ra&&t.addF&&(t.add=L_(t.add,t.addF),t.addF=null),e&Xo&&t.remF&&(t.rem=L_(t.rem,t.remF),t.remF=null),e&zs&&t.modF&&(t.mod=L_(t.mod,t.modF),t.modF=null),e&r0&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&r0)return Yo(n.source,n.srcF,i),n;e&Ra&&Yo(n.add,n.addF,i),e&Xo&&Yo(n.rem,n.remF,i),e&zs&&Yo(n.mod,n.modF,i);const r=n.source;if(e&HF&&r){const a=n.add.length+n.mod.length;a===r.length||(a?Yo(r,XF(n,qF),i):Yo(r,n.srcF,i))}return n}};function gC(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const o=r.fields||(r.fields={});for(const l in s.fields)o[l]=1}s.changed(r.ADD)&&(a|=r.ADD),s.changed(r.REM)&&(a|=r.REM),s.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}fe(gC,uu,{fork(e){const t=new uu(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Ee(e)?e.some(i=>n[i]):n[e]:0},filter(){ne("MultiPulse does not support filtering.")},materialize(){ne("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function NK(e,t,n){const i=this,r=[];if(i._pulse)return Uj(i);if(i._pending&&await i._pending,t&&await Y1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new uu(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=fb(Vg);let s=0,o,l,f;try{for(;i._heap.size()>0;){if(o=i._heap.pop(),o.rank!==o.qrank){i._enqueue(o,!0);continue}l=o.run(i._getPulse(o,e)),l.then?l=await l:l.async&&(r.push(l.async),l=Oy),l!==Oy&&o._targets&&o._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${s} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((g,p)=>p.priority-g.priority);i._postrun=[];for(let g=0;g<d.length;++g)await Y1(i,d[g].callback)}return n&&await Y1(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(g=>{try{g(i)}catch(p){i.error(p)}})})),i}async function jK(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function zK(e,t,n){return this._pulse?Uj(this):(this.evaluate(e,t,n),this)}function BK(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function Uj(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function LK(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function UK(e,t){const n=e.source,i=this._clock;return n&&Ee(n)?new gC(this,i,n.map(r=>r.pulse),t):this._input[e.id]||PK(this._pulse,n&&n.pulse)}function PK(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Oy&&(e.source=t.source),e)}const pC={skip:!1,force:!1};function IK(e,t){const n=t||pC;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function qK(e,t,n){const i=n||pC;return(e.set(t)||i.force)&&this.touch(e,i),this}function HK(e,t,n){this.touch(e,n||pC);const i=new uu(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function GK(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Pj(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,YK(t,0,e)):i=n,i}}}function Pj(e,t,n,i){let r,a;const s=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(s,r)<0){e[n]=r,n=a;continue}break}return e[n]=s}function YK(e,t,n){const i=t,r=e.length,a=e[t];let s=(t<<1)+1,o;for(;s<r;)o=s+1,o<r&&n(e[s],e[o])>=0&&(s=o),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=a,Pj(e,i,t,n)}function Bf(){this.logger(f7()),this.logLevel(qO),this._clock=0,this._rank=0,this._locale=lC();try{this._loader=cb()}catch{}this._touched=fb(Vg),this._input={},this._pulse=null,this._heap=GK((e,t)=>e.qrank-t.qrank),this._postrun=[]}function a0(e){return function(){return this._log[e].apply(this,arguments)}}Bf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:a0("error"),warn:a0("warn"),info:a0("info"),debug:a0("debug"),logLevel:a0("level"),cleanThreshold:1e4,add:vK,connect:bK,rank:kK,rerank:FK,pulse:HK,touch:IK,update:qK,changeset:gc,ingest:AK,parse:_K,preload:wK,request:SK,events:EK,on:DK,evaluate:NK,run:zK,runAsync:jK,runAfter:BK,_enqueue:LK,_getPulse:UK};function J(e,t){Ct.call(this,e,null,t)}fe(J,Ct,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Jf={};function Ij(e){const t=qj(e);return t&&t.Definition||null}function qj(e){return e=e&&e.toLowerCase(),Re(Jf,e)?Jf[e]:null}function*Hj(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function mC(e,t,n){const i=Float64Array.from(Hj(e,n));return i.sort(Qs),t.map(r=>U7(i,r))}function yC(e,t){return mC(e,[.25,.5,.75],t)}function vC(e,t){const n=e.length,i=tQ(e,t),r=yC(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function Gj(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],s=e.extent[1],o,l,f,d,g,p;const y=e.span||s-a||Math.abs(a)||1;if(e.step)o=e.step;else if(e.steps){for(d=y/t,g=0,p=e.steps.length;g<p&&e.steps[g]<d;++g);o=e.steps[Math.max(0,g-1)]}else{for(l=Math.ceil(Math.log(t)/i),f=e.minstep||0,o=Math.max(f,Math.pow(n,Math.round(Math.log(y)/i)-l));Math.ceil(y/o)>t;)o*=n;for(g=0,p=r.length;g<p;++g)d=o/r[g],d>=f&&y/d<=t&&(o=d)}d=Math.log(o);const v=d>=0?0:~~(-d/i)+1,x=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/o+x)*o,a=a<d?d-o:d,s=Math.ceil(s/o)*o),{start:a,stop:s===a?a+o:s,step:o}}var Ir=Math.random;function XK(e){Ir=e}function Yj(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(Hj(e,i)),a=r.length,s=t;let o,l,f,d;for(f=0,d=Array(s);f<s;++f){for(o=0,l=0;l<a;++l)o+=r[~~(Ir()*a)];d[f]=o/a}return d.sort(Qs),[CS(d,n/2),CS(d,1-n/2)]}function Xj(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let s=0,o=1,l=i(e[0]),f=l,d=l+t,g;for(;o<r;++o){if(g=i(e[o]),g>=d){for(f=(l+f)/2;s<o;++s)a[s]=f;d=g+t,l=g}f=g}for(f=(l+f)/2;s<o;++s)a[s]=f;return n?VK(a,t+t/4):a}function VK(e,t){const n=e.length;let i=0,r=1,a,s;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(s=r+(i+a-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=a}return e}function WK(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function QK(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(s){return arguments.length?(n=s||0,r=i-n,a):n},max(s){return arguments.length?(i=s||0,r=i-n,a):i},sample(){return n+Math.floor(r*Ir())},pdf(s){return s===Math.floor(s)&&s>=n&&s<i?1/r:0},cdf(s){const o=Math.floor(s);return o<n?0:o>=i?1:(o-n+1)/r},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*r):NaN}};return a.min(e).max(t)}const Vj=Math.sqrt(2*Math.PI),ZK=Math.SQRT2;let s0=NaN;function mb(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(s0===s0)n=s0,s0=NaN;else{do n=Ir()*2-1,i=Ir()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,s0=i*a}return e+n*t}function bC(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*Vj)}function yb(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const s=Math.exp(-r*r/2);let o;r<7.07106781186547?(o=.0352624965998911*r+.700383064443688,o=o*r+6.37396220353165,o=o*r+33.912866078383,o=o*r+112.079291497871,o=o*r+221.213596169931,o=o*r+220.206867912376,a=s*o,o=.0883883476483184*r+1.75566716318264,o=o*r+16.064177579207,o=o*r+86.7807322029461,o=o*r+296.564248779674,o=o*r+637.333633378831,o=o*r+793.826512519948,o=o*r+440.413735824752,a=a/o):(o=r+.65,o=r+4/o,o=r+3/o,o=r+2/o,o=r+1/o,a=s/o/2.506628274631)}return i>0?1-a:a}function vb(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*ZK*KK(2*e-1)}function KK(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function xC(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>mb(n,i),pdf:a=>bC(a,n,i),cdf:a=>yb(a,n,i),icdf:a=>vb(a,n,i)};return r.mean(e).stdev(t)}function EC(e,t){const n=xC();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=vC(e)),r):t},sample(){return e[~~(Ir()*i)]+t*n.sample()},pdf(a){let s=0,o=0;for(;o<i;++o)s+=n.pdf((a-e[o])/t);return s/t/i},cdf(a){let s=0,o=0;for(;o<i;++o)s+=n.cdf((a-e[o])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function _C(e,t){return e=e||0,t=t??1,Math.exp(e+mb()*t)}function AC(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*Vj*e)}function SC(e,t,n){return yb(Math.log(e),t,n)}function wC(e,t,n){return Math.exp(vb(e,t,n))}function Wj(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>_C(n,i),pdf:a=>AC(a,n,i),cdf:a=>SC(a,n,i),icdf:a=>wC(a,n,i)};return r.mean(e).stdev(t)}function Qj(e,t){let n=0,i;function r(s){const o=[];let l=0,f;for(f=0;f<n;++f)l+=o[f]=s[f]==null?1:+s[f];for(f=0;f<n;++f)o[f]/=l;return o}const a={weights(s){return arguments.length?(i=r(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=Ir();let o=e[n-1],l=i[0],f=0;for(;f<n-1;l+=i[++f])if(s<l){o=e[f];break}return o.sample()},pdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].pdf(s);return o},cdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].cdf(s);return o},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function OC(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Ir()}function CC(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function DC(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function $C(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function Zj(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>OC(n,i),pdf:a=>CC(a,n,i),cdf:a=>DC(a,n,i),icdf:a=>$C(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function MC(e,t,n){let i=0,r=0;for(const a of e){const s=n(a);t(a)==null||s==null||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function Zg(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function bb(e,t,n,i){e=e.filter(y=>{let v=t(y),x=n(y);return v!=null&&(v=+v)>=v&&x!=null&&(x=+x)>=x}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),s=new Float64Array(r);let o=0,l=0,f=0,d,g,p;for(p of e)a[o]=d=+t(p),s[o]=g=+n(p),++o,l+=(d-l)/o,f+=(g-f)/o;for(o=0;o<r;++o)a[o]-=l,s[o]-=f;return[a,s,l,f]}function Kg(e,t,n,i){let r=-1,a,s;for(const o of e)a=t(o),s=n(o),a!=null&&(a=+a)>=a&&s!=null&&(s=+s)>=s&&i(a,s,++r)}function Rd(e,t,n,i,r){let a=0,s=0;return Kg(e,t,n,(o,l)=>{const f=l-r(o),d=l-i;a+=f*f,s+=d*d}),1-a/s}function TC(e,t,n){let i=0,r=0,a=0,s=0,o=0;Kg(e,t,n,(d,g)=>{++o,i+=(d-i)/o,r+=(g-r)/o,a+=(d*g-a)/o,s+=(d*d-s)/o});const l=Zg(i,r,a,s),f=d=>l[0]+l[1]*d;return{coef:l,predict:f,rSquared:Rd(e,t,n,r,f)}}function Kj(e,t,n){let i=0,r=0,a=0,s=0,o=0;Kg(e,t,n,(d,g)=>{++o,d=Math.log(d),i+=(d-i)/o,r+=(g-r)/o,a+=(d*g-a)/o,s+=(d*d-s)/o});const l=Zg(i,r,a,s),f=d=>l[0]+l[1]*Math.log(d);return{coef:l,predict:f,rSquared:Rd(e,t,n,r,f)}}function Jj(e,t,n){const[i,r,a,s]=bb(e,t,n);let o=0,l=0,f=0,d=0,g=0,p,y,v;Kg(e,t,n,(S,w)=>{p=i[g++],y=Math.log(w),v=p*w,o+=(w*y-o)/g,l+=(v-l)/g,f+=(v*y-f)/g,d+=(p*v-d)/g});const[x,E]=Zg(l/s,o/s,f/s,d/s),A=S=>Math.exp(x+E*(S-a));return{coef:[Math.exp(x-E*a),E],predict:A,rSquared:Rd(e,t,n,s,A)}}function ez(e,t,n){let i=0,r=0,a=0,s=0,o=0,l=0;Kg(e,t,n,(g,p)=>{const y=Math.log(g),v=Math.log(p);++l,i+=(y-i)/l,r+=(v-r)/l,a+=(y*v-a)/l,s+=(y*y-s)/l,o+=(p-o)/l});const f=Zg(i,r,a,s),d=g=>f[0]*Math.pow(g,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:Rd(e,t,n,o,d)}}function kC(e,t,n){const[i,r,a,s]=bb(e,t,n),o=i.length;let l=0,f=0,d=0,g=0,p=0,y,v,x,E;for(y=0;y<o;)v=i[y],x=r[y++],E=v*v,l+=(E-l)/y,f+=(E*v-f)/y,d+=(E*E-d)/y,g+=(v*x-g)/y,p+=(E*x-p)/y;const A=d-l*l,S=l*A-f*f,w=(p*l-g*f)/S,D=(g*A-p*f)/S,O=-w*l,M=C=>(C=C-a,w*C*C+D*C+O+s);return{coef:[O-D*a+w*a*a+s,D-2*w*a,w],predict:M,rSquared:Rd(e,t,n,s,M)}}function tz(e,t,n,i){if(i===0)return MC(e,t,n);if(i===1)return TC(e,t,n);if(i===2)return kC(e,t,n);const[r,a,s,o]=bb(e,t,n),l=r.length,f=[],d=[],g=i+1;let p,y,v,x,E;for(p=0;p<g;++p){for(v=0,x=0;v<l;++v)x+=Math.pow(r[v],p)*a[v];for(f.push(x),E=new Float64Array(g),y=0;y<g;++y){for(v=0,x=0;v<l;++v)x+=Math.pow(r[v],p+y);E[y]=x}d.push(E)}d.push(f);const A=eJ(d),S=w=>{w-=s;let D=o+A[0]+A[1]*w+A[2]*w*w;for(p=3;p<g;++p)D+=A[p]*Math.pow(w,p);return D};return{coef:JK(g,A,-s,o),predict:S,rSquared:Rd(e,t,n,o,S)}}function JK(e,t,n,i){const r=Array(e);let a,s,o,l;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],l=1,r[a]+=o,s=1;s<=a;++s)l*=(a+1-s)/s,r[a-s]+=o*Math.pow(n,s)*l;return r[0]+=i,r}function eJ(e){const t=e.length-1,n=[];let i,r,a,s,o;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(a=i;a<t+1;++a)o=e[a][i],e[a][i]=e[a][s],e[a][s]=o;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(o=0,a=r+1;a<t;++a)o+=e[a][r]*n[a];n[r]=(e[t][r]-o)/e[r][r]}return n}const VF=2,WF=1e-12;function nz(e,t,n,i){const[r,a,s,o]=bb(e,t,n,!0),l=r.length,f=Math.max(2,~~(i*l)),d=new Float64Array(l),g=new Float64Array(l),p=new Float64Array(l).fill(1);for(let y=-1;++y<=VF;){const v=[0,f-1];for(let E=0;E<l;++E){const A=r[E],S=v[0],w=v[1],D=A-r[S]>r[w]-A?S:w;let O=0,M=0,C=0,k=0,N=0;const L=1/Math.abs(r[D]-A||1);for(let G=S;G<=w;++G){const P=r[G],j=a[G],F=tJ(Math.abs(A-P)*L)*p[G],U=P*F;O+=F,M+=U,C+=j*F,k+=j*U,N+=P*U}const[B,V]=Zg(M/O,C/O,k/O,N/O);d[E]=B+V*A,g[E]=Math.abs(a[E]-d[E]),nJ(r,E+1,v)}if(y===VF)break;const x=P7(g);if(Math.abs(x)<WF)break;for(let E=0,A,S;E<l;++E)A=g[E]/(6*x),p[E]=A>=1?WF:(S=1-A*A)*S}return iJ(r,d,s,o)}function tJ(e){return(e=1-e*e*e)*e*e}function nJ(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function iJ(e,t,n,i){const r=e.length,a=[];let s=0,o=0,l=[],f;for(;s<r;++s)f=e[s]+n,l[0]===f?l[1]+=(t[s]-l[1])/++o:(o=0,l[1]+=i,l=[f,t[s]],a.push(l));return l[1]+=i,a}const rJ=.5*Math.PI/180;function xb(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=x=>[x,e(x)],a=t[0],s=t[1],o=s-a,l=o/i,f=[r(a)],d=[];if(n===i){for(let x=1;x<i;++x)f.push(r(a+x/n*o));return f.push(r(s)),f}else{d.push(r(s));for(let x=n;--x>0;)d.push(r(a+x/n*o))}let g=f[0],p=d[d.length-1];const y=1/o,v=aJ(g[1],d);for(;p;){const x=r((g[0]+p[0])/2);x[0]-g[0]>=l&&sJ(g,x,p,y,v)>rJ?d.push(x):(g=p,f.push(p),d.pop()),p=d[d.length-1]}return f}function aJ(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const s=t[a][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function sJ(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-s)}function oJ(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function zS(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:oJ(e)}function iz(e,t,n){return n||e+(t?"_"+t:"")}const U_=()=>{},uJ={init:U_,add:U_,rem:U_,idx:0},hg={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Jg=Object.keys(hg).filter(e=>e!=="__count__");function lJ(e,t){return(n,i)=>Ie({name:e,aggregate_param:i,out:n||e},uJ,t)}[...Jg,"__count__"].forEach(e=>{hg[e]=lJ(e,hg[e])});function rz(e,t,n){return hg[e](n,t)}function az(e,t){return e.idx-t.idx}function cJ(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=hg[r]())})};return e.forEach(n),Object.values(t).sort(az)}function fJ(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function dJ(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function hJ(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function gJ(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function sz(e,t){const n=t||Si,i=cJ(e),r=e.slice().sort(az);function a(s){this._ops=i,this._out=r,this.cell=s,this.init()}return a.prototype.init=fJ,a.prototype.add=dJ,a.prototype.rem=hJ,a.prototype.set=gJ,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function FC(e){this._key=e?Lr(e):we,this.reset()}const In=FC.prototype;In.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};In.add=function(e){this._add.push(e)};In.rem=function(e){this._rem.push(e)};In.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),s={};let o,l,f;for(o=0;o<r;++o)s[n(t[o])]=1;for(o=0,l=0;o<i;++o)s[n(f=e[o])]?s[n(f)]=0:a[l++]=f;return this._rem=[],this._add=a};In.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",Re(n,a)||(n[a]=1,++r);return r};In.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=A7(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};In.argmin=function(e){return this.extent(e)[0]||{}};In.argmax=function(e){return this.extent(e)[1]||{}};In.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};In.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};In.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=yC(this.values(),e),this._get=e),this._q};In.q1=function(e){return this.quartile(e)[0]};In.q2=function(e){return this.quartile(e)[1]};In.q3=function(e){return this.quartile(e)[2]};In.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=Yj(this.values(),1e3,.05,e),this._get=e),this._ci};In.ci0=function(e){return this.ci(e)[0]};In.ci1=function(e){return this.ci(e)[1]};function mu(e){J.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}mu.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Jg},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};fe(mu,J,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(o){let l,f,d,g;for(l in o)for(d=o[l].tuple,f=0;f<r;++f)i[f][g=d[n[f]]]=g}a(e._prev),a(t);function s(o,l,f){const d=n[f],g=i[f++];for(const p in g){const y=o?o+"|"+p:p;l[d]=g[p],f<r?s(y,l,f):t[y]||e.cell(y,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(S){const w=De(ti(S)),D=w.length;let O=0,M;for(;O<D;++O)i[M=w[O]]||(i[M]=1,t.push(M))}this._dims=De(e.groupby),this._dnames=this._dims.map(S=>{const w=Vt(S);return r(S),n.push(w),w}),this.cellkey=e.key?e.key:zS(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],o=e.aggregate_params||[null],l=e.as||[],f=a.length,d={};let g,p,y,v,x,E,A;for(f!==s.length&&ne("Unmatched number of fields and aggregate ops."),A=0;A<f;++A){if(g=a[A],p=s[A],y=o[A]||null,g==null&&p!=="count"&&ne("Null aggregate field specified."),x=Vt(g),E=iz(p,x,l[A]),n.push(E),p==="count"){this._counts.push(E);continue}v=d[x],v||(r(g),v=d[x]=[],v.field=g,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(rz(p,y,E))}return this._measures=this._measures.map(S=>sz(S,S.field)),Object.create(null)},cellkey:zS(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new FC),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let s=0;s<r;++s)a[n[s]]=i[s](e);return t?Bj(t.tuple,a):ht(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,s=e.rem,o=e.mod;let l,f,d,g;if(i)for(f in i)l=i[f],(!r||l.num)&&s.push(l.tuple);for(d=0,g=this._alen;d<g;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,g=this._mlen;d<g;++d)l=n[d],(l.num===0&&r?s:o).push(this.celltuple(l)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const pJ=1e-14;function RC(e){J.call(this,null,e)}RC.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};fe(RC,J,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,s=e.as||["bin0","bin1"],o=s[0],l=s[1];let f;return e.modified()?(t=t.reflow(!0),f=t.SOURCE):f=t.modified(ti(e.field))?t.ADD_MOD:t.ADD,t.visit(f,n?d=>{const g=i(d);d[o]=g,d[l]=g==null?null:r+a*(1+(g-r)/a)}:d=>d[o]=i(d)),t.modifies(n?s:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Gj(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,s,o;(s=e.anchor)!=null&&(o=s-(r+i*Math.floor((s-r)/i)),r+=o,a+=o);const l=function(f){let d=Kn(t(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(pJ+(d-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=Wi(l,ti(t),e.name||"bin_"+Vt(t))}});function oz(e,t,n){const i=e;let r=t||[],a=n||[],s={},o=0;return{add:l=>a.push(l),remove:l=>s[i(l)]=++o,size:()=>r.length,data:(l,f)=>(o&&(r=r.filter(d=>!s[i(d)]),s={},o=0),f&&l&&r.sort(l),a.length&&(r=l?D7(l,r,a.sort(l)):r.concat(a),a=[]),r)}}function NC(e){J.call(this,[],e)}NC.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};fe(NC,J,{transform(e,t){const n=t.fork(t.ALL),i=oz(we,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(hc(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function uz(e){Ct.call(this,null,mJ,e)}fe(uz,Ct);function mJ(e){return this.value&&!e.modified()?this.value:XO(e.fields,e.orders)}function jC(e){J.call(this,null,e)}jC.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function yJ(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}fe(jC,J,{transform(e,t){const n=g=>p=>{for(var y=yJ(o(p),e.case,a)||[],v,x=0,E=y.length;x<E;++x)s.test(v=y[x])||g(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,o=e.field,l=e.as||["text","count"],f=n(g=>r[g]=1+(r[g]||0)),d=n(g=>r[g]-=1);return i?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,d)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,l,f;for(o in n)l=i[o],f=n[o]||0,!l&&f?(i[o]=l=ht({}),l[r]=o,l[a]=f,s.add.push(l)):f===0?(l&&s.rem.push(l),n[o]=null,i[o]=null):l[a]!==f&&(l[a]=f,s.mod.push(l));return s.modifies(t)}});function zC(e){J.call(this,null,e)}zC.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};fe(zC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return s?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=vJ(o,r,a,e.filter||Ur)):n.mod=o,n.source=this.value,n.modifies(i)}});function vJ(e,t,n,i){for(var r=[],a={},s=e.length,o=0,l,f;o<s;++o)for(a[t]=f=e[o],l=0;l<s;++l)a[n]=e[l],i(a)&&(r.push(ht(a)),a={},a[t]=f);return r}const QF={kde:EC,mixture:Qj,normal:xC,lognormal:Wj,uniform:Zj},bJ="distributions",ZF="function",xJ="field";function lz(e,t){const n=e[ZF];Re(QF,n)||ne("Unknown distribution function: "+n);const i=QF[n]();for(const r in e)r===xJ?i.data((e.from||t()).map(e[r])):r===bJ?i[r](e[r].map(a=>lz(a,t))):typeof i[r]===ZF&&i[r](e[r]);return i}function BC(e){J.call(this,null,e)}const cz=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],EJ={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:cz},{name:"weights",type:"number",array:!0}]};BC.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:cz.concat(EJ)},{name:"as",type:"string",array:!0,default:["value","density"]}]};fe(BC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=lz(e.distribution,_J(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&ne("Invalid density method: "+s),!e.extent&&!i.data&&ne("Missing density extent parameter."),s=i[s];const o=e.as||["value","density"],l=e.extent||Va(i.data()),f=xb(s,l,r,a).map(d=>{const g={};return g[o[0]]=d[0],g[o[1]]=d[1],ht(g)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function _J(e){return()=>e.materialize(e.SOURCE).source}function fz(e,t){return e?e.map((n,i)=>t[i]||Vt(n)):null}function LC(e,t,n){const i=[],r=g=>g(l);let a,s,o,l,f,d;if(t==null)i.push(e.map(n));else for(a={},s=0,o=e.length;s<o;++s)l=e[s],f=t.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(l));return i}const dz="bin";function UC(e){J.call(this,null,e)}UC.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:dz}]};const AJ=(e,t)=>Qg(Va(e,t))/30;fe(UC,J,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=LC(t.source,e.groupby,Si),r=e.smooth||!1,a=e.field,s=e.step||AJ(n,a),o=hc((v,x)=>a(v)-a(x)),l=e.as||dz,f=i.length;let d=1/0,g=-1/0,p=0,y;for(;p<f;++p){const v=i[p].sort(o);y=-1;for(const x of Xj(v,s,r,a))x<d&&(d=x),x>g&&(g=x),v[++y][l]=x}return this.value={start:d,stop:g,step:s},t.reflow(!0).modifies(l)}});function hz(e){Ct.call(this,null,SJ,e),this.modified(!0)}fe(hz,Ct);function SJ(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Wi(n=>t(n,e),ti(t),Vt(t))}function PC(e){J.call(this,[void 0,void 0],e)}PC.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};fe(PC,J,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],s=n[1];if((r||a==null)&&(a=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,o=>{const l=Kn(i(o));l!=null&&(l<a&&(a=l),l>s&&(s=l))}),!Number.isFinite(a)||!Number.isFinite(s)){let o=Vt(i);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}});function IC(e,t){Ct.call(this,e),this.parent=t,this.count=0}fe(IC,Ct,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Eb(e){J.call(this,{},e),this._keys=Dd();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}fe(Eb,J,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=Re(r,e)&&r[e],s,o;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(o=i||(o=this._group[e])&&o.tuple,s=n.dataflow,a=new IC(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,o)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),o=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const f=we(l),d=a.get(f);d!==void 0&&(a.delete(f),o(d).rem(l))}),t.visit(t.ADD,l=>{const f=i(l);a.set(we(l),f),o(f).add(l)}),s||t.modified(i.fields)?t.visit(t.MOD,l=>{const f=we(l),d=a.get(f),g=i(l);d===g?o(g).mod(l):(a.set(f,g),o(d).rem(l),o(g).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{o(a.get(we(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const f=we(l),d=a.get(f),g=i(l);d!==g&&(a.set(f,g),o(d).rem(l),o(g).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function gz(e){Ct.call(this,null,wJ,e)}fe(gz,Ct);function wJ(e){return this.value&&!e.modified()?this.value:Ee(e.name)?De(e.name).map(t=>Lr(t)):Lr(e.name,e.as)}function qC(e){J.call(this,Dd(),e)}qC.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};fe(qC,J,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,s=r.rem,o=r.mod,l=e.expr;let f=!0;t.visit(t.REM,g=>{const p=we(g);i.has(p)?i.delete(p):s.push(g)}),t.visit(t.ADD,g=>{l(g,e)?a.push(g):i.set(we(g),1)});function d(g){const p=we(g),y=l(g,e),v=i.get(p);y&&v?(i.delete(p),a.push(g)):!y&&!v?(i.set(p,1),s.push(g)):f&&y&&!v&&o.push(g)}return t.visit(t.MOD,d),e.modified()&&(f=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function HC(e){J.call(this,[],e)}HC.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};fe(HC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=fz(i,e.as||[]),a=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const l=i.map(v=>v(o)),f=l.reduce((v,x)=>Math.max(v,x.length),0);let d=0,g,p,y;for(;d<f;++d){for(p=hC(o),g=0;g<s;++g)p[r[g]]=(y=l[g][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function GC(e){J.call(this,[],e)}GC.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};fe(GC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(Vt),a=e.as||["key","value"],s=a[0],o=a[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,f=>{for(let d=0,g;d<l;++d)g=hC(f),g[s]=r[d],g[o]=i[d](f),n.add.push(g)}),this.value=n.source=n.add,n.modifies(a)}});function YC(e){J.call(this,null,e)}YC.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};fe(YC,J,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,s=>s[i]=n(s,e))}});function pz(e){J.call(this,[],e)}fe(pz,J,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,s,o,l;if(a>0){for(s=[];--a>=0;)s.push(l=ht(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else o=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,r=r.slice(-a);return n.source=this.value=r,n}});const u1={value:"value",median:P7,mean:oQ,min:OS,max:Nl},OJ=[];function XC(e){J.call(this,[],e)}XC.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function CJ(e){var t=e.method||u1.value,n;if(u1[t]==null)ne("Unrecognized imputation method: "+t);else return t===u1.value?(n=e.value!==void 0?e.value:0,()=>n):u1[t]}function DJ(e){const t=e.field;return n=>n?t(n):NaN}fe(XC,J,{transform(e,t){var n=t.fork(t.ALL),i=CJ(e),r=DJ(e),a=Vt(e.field),s=Vt(e.key),o=(e.groupby||[]).map(Vt),l=$J(t.source,e.groupby,e.key,e.keyvals),f=[],d=this.value,g=l.domain.length,p,y,v,x,E,A,S,w,D,O;for(E=0,w=l.length;E<w;++E)for(p=l[E],v=p.values,y=NaN,S=0;S<g;++S)if(p[S]==null){for(x=l.domain[S],O={_impute:!0},A=0,D=v.length;A<D;++A)O[o[A]]=v[A];O[s]=x,O[a]=Number.isNaN(y)?y=i(p,r):y,f.push(ht(O))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function $J(e,t,n,i){var r=A=>A(E),a=[],s=i?i.slice():[],o={},l={},f,d,g,p,y,v,x,E;for(s.forEach((A,S)=>o[A]=S+1),p=0,x=e.length;p<x;++p)E=e[p],v=n(E),y=o[v]||(o[v]=s.push(v)),d=(f=t?t.map(r):OJ)+"",(g=l[d])||(g=l[d]=[],a.push(g),g.values=f),g[y-1]=E;return a.domain=s,a}function VC(e){mu.call(this,e)}VC.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Jg},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};fe(VC,mu,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{Ie(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function WC(e){J.call(this,null,e)}WC.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};fe(WC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=LC(i,e.groupby,e.field),a=(e.groupby||[]).map(Vt),s=e.bandwidth,o=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],f=[];let d=e.extent,g=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&ne("Invalid density method: "+o),e.resolve==="shared"&&(d||(d=Va(i,e.field)),g=p=e.steps||p),r.forEach(y=>{const v=EC(y,s)[o],x=e.counts?y.length:1,E=d||Va(y);xb(v,E,g,p).forEach(A=>{const S={};for(let w=0;w<a.length;++w)S[a[w]]=y.dims[w];S[l[0]]=A[0],S[l[1]]=A[1]*x,f.push(ht(S))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function mz(e){Ct.call(this,null,MJ,e)}fe(mz,Ct);function MJ(e){return this.value&&!e.modified()?this.value:ZO(e.fields,e.flat)}function yz(e){J.call(this,[],e),this._pending=null}fe(yz,J,{transform(e,t){const n=t.dataflow;return this._pending?P_(this,t,this._pending):TJ(e)?t.StopPropagation:e.values?P_(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=De(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>P_(this,t,De(i.data)))}});function TJ(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function P_(e,t,n){n.forEach(ht);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function QC(e){J.call(this,{},e)}QC.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};fe(QC,J,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),o=n.length;let l=s?t.SOURCE:t.ADD,f=t,d=e.as,g,p,y;return r?(p=r.length,o>1&&!d&&ne('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==o*p&&ne('The "as" parameter has too few output field names.'),d=d||r.map(Vt),g=function(v){for(var x=0,E=0,A,S;x<o;++x)if(S=i.get(n[x](v)),S==null)for(A=0;A<p;++A,++E)v[d[E]]=a;else for(A=0;A<p;++A,++E)v[d[E]]=r[A](S)}):(d||ne("Missing output field names."),g=function(v){for(var x=0,E;x<o;++x)E=i.get(n[x](v)),v[d[x]]=E??a}),s?f=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),l|=y?t.MOD:0),t.visit(l,g),f.modifies(d)}});function vz(e){Ct.call(this,null,kJ,e)}fe(vz,Ct);function kJ(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,s;for(a=0;a<n;++a)s=t[a],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function bz(e){Ct.call(this,null,FJ,e)}fe(bz,Ct);function FJ(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function xz(e){J.call(this,null,e)}fe(xz,J,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function ZC(e){mu.call(this,e)}ZC.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Jg,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};fe(ZC,mu,{_transform:mu.prototype.transform,transform(e,t){return this._transform(RJ(e,t),t)}});function RJ(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=ti(n).concat(ti(i)),s=jJ(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(o=>NJ(o,n,i,a)),as:s.map(o=>o+""),modified:e.modified.bind(e)}}function NJ(e,t,n,i){return Wi(r=>t(r)===e?n(r):NaN,i,e+"")}function jJ(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const s=e(a);i[s]||(i[s]=1,r.push(s))}),r.sort(Cd),t?r.slice(0,t):r}function Ez(e){Eb.call(this,e)}fe(Ez,Eb,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(we(a),n,t,a);return(e.modified("field")||i&&t.modified(ti(i)))&&ne("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const s=r(a);i(a).forEach(o=>s.mod(o))}),t.visit(t.ADD,a=>{const s=r(a);i(a).forEach(o=>s.add(ht(o)))}),t.visit(t.REM,a=>{const s=r(a);i(a).forEach(o=>s.rem(o))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function KC(e){J.call(this,null,e)}KC.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};fe(KC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=fz(e.fields,e.as||[]),a=i?(o,l)=>zJ(o,l,i,r):hb;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,o=>{const l=we(o);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,o=>{const l=a(o,ht({}));s[we(o)]=l,n.add.push(l)}),t.visit(t.MOD,o=>{n.mod.push(a(o,s[we(o)]))}),n}});function zJ(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function _z(e){J.call(this,null,e)}fe(_z,J,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function JC(e){J.call(this,null,e)}JC.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const BJ=1e-14;fe(JC,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=LC(r,e.groupby,e.field),s=(e.groupby||[]).map(Vt),o=[],l=e.step||.01,f=e.probs||cr(l/2,1-BJ,l),d=f.length;return a.forEach(g=>{const p=mC(g,f);for(let y=0;y<d;++y){const v={};for(let x=0;x<s.length;++x)v[s[x]]=g.dims[x];v[i[0]]=f[y],v[i[1]]=p[y],o.push(ht(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function Az(e){J.call(this,null,e)}fe(Az,J,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=we(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=hC(r);i[we(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[we(r)];for(const s in r)a[s]=r[s],n.modifies(s);n.mod.push(a)})),n}});function e3(e){J.call(this,[],e),this.count=0}e3.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};fe(e3,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,g)=>(d[we(g)]=1,d),{});let s=this.value,o=this.count,l=0;function f(d){let g,p;s.length<r?s.push(d):(p=~~((o+1)*Ir()),p<s.length&&p>=l&&(g=s[p],a[we(g)]&&n.rem.push(g),s[p]=d)),++o}if(t.rem.length&&(t.visit(t.REM,d=>{const g=we(d);a[g]&&(a[g]=-1,n.rem.push(d)),--o}),s=s.filter(d=>a[we(d)]!==-1)),(t.rem.length||i)&&s.length<r&&t.source&&(l=o=s.length,t.visit(t.SOURCE,d=>{a[we(d)]||f(d)}),l=-1),i&&s.length>r){const d=s.length-r;for(let g=0;g<d;++g)a[we(s[g])]=-1,n.rem.push(s[g]);s=s.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[we(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||l<0)&&(n.add=s.filter(d=>!a[we(d)])),this.count=o,this.value=n.source=s,n}});function t3(e){J.call(this,null,e)}t3.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};fe(t3,J,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=cr(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,ht(a)}),n.add=t.add.concat(this.value),n}});function Sz(e){J.call(this,null,e),this.modified(!0)}fe(Sz,J,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function n3(e){J.call(this,null,e)}const wz=["unit0","unit1"];n3.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:rC,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:wz}]};fe(n3,J,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?Fd:kd)(a.unit).offset,o=e.as||wz,l=o[0],f=o[1],d=a.step;let g=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ti(n)))&&(t=t.reflow(!0),y=t.SOURCE,g=1/0,p=-1/0),t.visit(y,v=>{const x=n(v);let E,A;x==null?(v[l]=null,i&&(v[f]=null)):(v[l]=E=A=a(x),i&&(v[f]=A=s(E,d)),E<g&&(g=E),A>p&&(p=A))}),a.start=g,a.stop=p,t.modifies(i?o:l)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:pj({extent:e.extent||Va(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=aC(i),s=this.value||{},o=(n?sj:aj)(a,r);return o.unit=et(a),o.units=a,o.step=r,o.start=s.start,o.stop=s.stop,this.value=o}});function Oz(e){J.call(this,Dd(),e)}fe(Oz,J,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=o=>r.set(i(o),o);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,o=>r.delete(i(o))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function Cz(e){J.call(this,null,e)}fe(Cz,J,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(hc(e.sort)):t.source).map(e.field))}});function LJ(e,t,n,i){const r=gg[e](t,n);return{init:r.init||Zo,update:function(a,s){s[i]=r.next(a)}}}const gg={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=gg.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ne("ntile num must be greater than zero.");const n=gg.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ne("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=UJ(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function UJ(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const PJ=Object.keys(gg);function Dz(e){const t=De(e.ops),n=De(e.fields),i=De(e.params),r=De(e.aggregate_params),a=De(e.as),s=this.outputs=[],o=this.windows=[],l={},f={},d=[],g=[];let p=!0;function y(v){De(ti(v)).forEach(x=>l[x]=1)}y(e.sort),t.forEach((v,x)=>{const E=n[x],A=i[x],S=r[x]||null,w=Vt(E),D=iz(v,w,a[x]);if(y(E),s.push(D),Re(gg,v))o.push(LJ(v,E,A,D));else{if(E==null&&v!=="count"&&ne("Null aggregate field specified."),v==="count"){d.push(D);return}p=!1;let O=f[w];O||(O=f[w]=[],O.field=E,g.push(O)),O.push(rz(v,S,D))}}),(d.length||g.length)&&(this.cell=IJ(g,d,p)),this.inputs=Object.keys(l)}const $z=Dz.prototype;$z.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};$z.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<a;++s)i[s].update(e,t)};function IJ(e,t,n){e=e.map(l=>sz(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](i);if(i.store)var o=i.data=new FC;return i.add=function(l){if(i.num+=1,!n){o&&o.add(l);for(let f=0;f<r;++f)a[f].add(a[f].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){o&&o.rem(l);for(let f=0;f<r;++f)a[f].rem(a[f].get(l),l)}},i.set=function(l){let f,d;for(o&&o.values(),f=0,d=t.length;f<d;++f)l[t[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(l)},i.init=function(){i.num=0,o&&o.reset();for(let l=0;l<r;++l)a[l].init()},i}function i3(e){J.call(this,{},e),this._mlen=0,this._mods=[]}i3.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:PJ.concat(Jg)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};fe(i3,J,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=hc(e.sort),r=zS(e.groupby),a=o=>this.group(r(o));let s=this.state;(!s||n)&&(s=this.state=new Dz(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,o=>a(o).add(o))):(t.visit(t.REM,o=>a(o).remove(o)),t.visit(t.ADD,o=>a(o).add(o)));for(let o=0,l=this._mlen;o<l;++o)qJ(this._mods[o],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=oz(we),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function qJ(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,s=i.frame||[null,0],o=e.data(n),l=o.length,f=a?$d(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||ui(-1)};t.init();for(let g=0;g<l;++g)HJ(d,s,g,l),a&&GJ(d,f),t.update(d,o[g])}function HJ(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function GJ(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,s=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<s&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const YJ=Object.freeze(Object.defineProperty({__proto__:null,aggregate:mu,bin:RC,collect:NC,compare:uz,countpattern:jC,cross:zC,density:BC,dotbin:UC,expression:hz,extent:PC,facet:Eb,field:gz,filter:qC,flatten:HC,fold:GC,formula:YC,generate:pz,impute:XC,joinaggregate:VC,kde:WC,key:mz,load:yz,lookup:QC,multiextent:vz,multivalues:bz,params:xz,pivot:ZC,prefacet:Ez,project:KC,proxy:_z,quantile:JC,relay:Az,sample:e3,sequence:t3,sieve:Sz,subflow:IC,timeunit:n3,tupleindex:Oz,values:Cz,window:i3},Symbol.toStringTag,{value:"Module"}));function gt(e){return function(){return e}}const KF=Math.abs,Yn=Math.atan2,fl=Math.cos,XJ=Math.max,I_=Math.min,Ma=Math.sin,Tl=Math.sqrt,Vn=1e-12,ed=Math.PI,Cy=ed/2,Mz=2*ed;function VJ(e){return e>1?0:e<-1?ed:Math.acos(e)}function JF(e){return e>=1?Cy:e<=-1?-Cy:Math.asin(e)}const BS=Math.PI,LS=2*BS,_l=1e-6,WJ=LS-_l;function Tz(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function QJ(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Tz;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let r3=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Tz:QJ(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=i-t,f=r-n,d=s-t,g=o-n,p=d*d+g*g;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>_l)if(!(Math.abs(g*l-f*d)>_l)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-s,v=r-o,x=l*l+f*f,E=y*y+v*v,A=Math.sqrt(x),S=Math.sqrt(p),w=a*Math.tan((BS-Math.acos((x+p-E)/(2*A*S)))/2),D=w/S,O=w/A;Math.abs(D-1)>_l&&this._append`L${t+D*d},${n+D*g}`,this._append`A${a},${a},0,0,${+(g*y>d*v)},${this._x1=t+O*l},${this._y1=n+O*f}`}}arc(t,n,i,r,a,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(r),l=i*Math.sin(r),f=t+o,d=n+l,g=1^s,p=s?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>_l||Math.abs(this._y1-d)>_l)&&this._append`L${f},${d}`,i&&(p<0&&(p=p%LS+LS),p>WJ?this._append`A${i},${i},0,1,${g},${t-o},${n-l}A${i},${i},0,1,${g},${this._x1=f},${this._y1=d}`:p>_l&&this._append`A${i},${i},0,${+(p>=BS)},${g},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function _b(){return new r3}_b.prototype=r3.prototype;function Ab(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new r3(t)}function ZJ(e){return e.innerRadius}function KJ(e){return e.outerRadius}function JJ(e){return e.startAngle}function eee(e){return e.endAngle}function tee(e){return e&&e.padAngle}function nee(e,t,n,i,r,a,s,o){var l=n-e,f=i-t,d=s-r,g=o-a,p=g*l-d*f;if(!(p*p<Vn))return p=(d*(t-a)-g*(e-r))/p,[e+p*l,t+p*f]}function l1(e,t,n,i,r,a,s){var o=e-n,l=t-i,f=(s?a:-a)/Tl(o*o+l*l),d=f*l,g=-f*o,p=e+d,y=t+g,v=n+d,x=i+g,E=(p+v)/2,A=(y+x)/2,S=v-p,w=x-y,D=S*S+w*w,O=r-a,M=p*x-v*y,C=(w<0?-1:1)*Tl(XJ(0,O*O*D-M*M)),k=(M*w-S*C)/D,N=(-M*S-w*C)/D,L=(M*w+S*C)/D,B=(-M*S+w*C)/D,V=k-E,G=N-A,P=L-E,j=B-A;return V*V+G*G>P*P+j*j&&(k=L,N=B),{cx:k,cy:N,x01:-d,y01:-g,x11:k*(r/O-1),y11:N*(r/O-1)}}function iee(){var e=ZJ,t=KJ,n=gt(0),i=null,r=JJ,a=eee,s=tee,o=null,l=Ab(f);function f(){var d,g,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-Cy,x=a.apply(this,arguments)-Cy,E=KF(x-v),A=x>v;if(o||(o=d=l()),y<p&&(g=y,y=p,p=g),!(y>Vn))o.moveTo(0,0);else if(E>Mz-Vn)o.moveTo(y*fl(v),y*Ma(v)),o.arc(0,0,y,v,x,!A),p>Vn&&(o.moveTo(p*fl(x),p*Ma(x)),o.arc(0,0,p,x,v,A));else{var S=v,w=x,D=v,O=x,M=E,C=E,k=s.apply(this,arguments)/2,N=k>Vn&&(i?+i.apply(this,arguments):Tl(p*p+y*y)),L=I_(KF(y-p)/2,+n.apply(this,arguments)),B=L,V=L,G,P;if(N>Vn){var j=JF(N/p*Ma(k)),F=JF(N/y*Ma(k));(M-=j*2)>Vn?(j*=A?1:-1,D+=j,O-=j):(M=0,D=O=(v+x)/2),(C-=F*2)>Vn?(F*=A?1:-1,S+=F,w-=F):(C=0,S=w=(v+x)/2)}var U=y*fl(S),H=y*Ma(S),Q=p*fl(O),R=p*Ma(O);if(L>Vn){var W=y*fl(w),ie=y*Ma(w),se=p*fl(D),ge=p*Ma(D),pe;if(E<ed)if(pe=nee(U,H,se,ge,W,ie,Q,R)){var _e=U-pe[0],It=H-pe[1],ft=W-pe[0],me=ie-pe[1],ze=1/Ma(VJ((_e*ft+It*me)/(Tl(_e*_e+It*It)*Tl(ft*ft+me*me)))/2),Pe=Tl(pe[0]*pe[0]+pe[1]*pe[1]);B=I_(L,(p-Pe)/(ze-1)),V=I_(L,(y-Pe)/(ze+1))}else B=V=0}C>Vn?V>Vn?(G=l1(se,ge,U,H,y,V,A),P=l1(W,ie,Q,R,y,V,A),o.moveTo(G.cx+G.x01,G.cy+G.y01),V<L?o.arc(G.cx,G.cy,V,Yn(G.y01,G.x01),Yn(P.y01,P.x01),!A):(o.arc(G.cx,G.cy,V,Yn(G.y01,G.x01),Yn(G.y11,G.x11),!A),o.arc(0,0,y,Yn(G.cy+G.y11,G.cx+G.x11),Yn(P.cy+P.y11,P.cx+P.x11),!A),o.arc(P.cx,P.cy,V,Yn(P.y11,P.x11),Yn(P.y01,P.x01),!A))):(o.moveTo(U,H),o.arc(0,0,y,S,w,!A)):o.moveTo(U,H),!(p>Vn)||!(M>Vn)?o.lineTo(Q,R):B>Vn?(G=l1(Q,R,W,ie,p,-B,A),P=l1(U,H,se,ge,p,-B,A),o.lineTo(G.cx+G.x01,G.cy+G.y01),B<L?o.arc(G.cx,G.cy,B,Yn(G.y01,G.x01),Yn(P.y01,P.x01),!A):(o.arc(G.cx,G.cy,B,Yn(G.y01,G.x01),Yn(G.y11,G.x11),!A),o.arc(0,0,p,Yn(G.cy+G.y11,G.cx+G.x11),Yn(P.cy+P.y11,P.cx+P.x11),A),o.arc(P.cx,P.cy,B,Yn(P.y11,P.x11),Yn(P.y01,P.x01),!A))):o.arc(0,0,p,O,D,A)}if(o.closePath(),d)return o=null,d+""||null}return f.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,g=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-ed/2;return[fl(g)*d,Ma(g)*d]},f.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:gt(+d),f):e},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:gt(+d),f):t},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:gt(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:gt(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:gt(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:gt(+d),f):a},f.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:gt(+d),f):s},f.context=function(d){return arguments.length?(o=d??null,f):o},f}function kz(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Fz(e){this._context=e}Fz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function a3(e){return new Fz(e)}function Rz(e){return e[0]}function Nz(e){return e[1]}function jz(e,t){var n=gt(!0),i=null,r=a3,a=null,s=Ab(o);e=typeof e=="function"?e:e===void 0?Rz:gt(e),t=typeof t=="function"?t:t===void 0?Nz:gt(t);function o(l){var f,d=(l=kz(l)).length,g,p=!1,y;for(i==null&&(a=r(y=s())),f=0;f<=d;++f)!(f<d&&n(g=l[f],f,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(g,f,l),+t(g,f,l));if(y)return a=null,y+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:gt(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:gt(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:gt(!!l),o):n},o.curve=function(l){return arguments.length?(r=l,i!=null&&(a=r(i)),o):r},o.context=function(l){return arguments.length?(l==null?i=a=null:a=r(i=l),o):i},o}function zz(e,t,n){var i=null,r=gt(!0),a=null,s=a3,o=null,l=Ab(f);e=typeof e=="function"?e:e===void 0?Rz:gt(+e),t=typeof t=="function"?t:gt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Nz:gt(+n);function f(g){var p,y,v,x=(g=kz(g)).length,E,A=!1,S,w=new Array(x),D=new Array(x);for(a==null&&(o=s(S=l())),p=0;p<=x;++p){if(!(p<x&&r(E=g[p],p,g))===A)if(A=!A)y=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=y;--v)o.point(w[v],D[v]);o.lineEnd(),o.areaEnd()}A&&(w[p]=+e(E,p,g),D[p]=+t(E,p,g),o.point(i?+i(E,p,g):w[p],n?+n(E,p,g):D[p]))}if(S)return o=null,S+""||null}function d(){return jz().defined(r).curve(s).context(a)}return f.x=function(g){return arguments.length?(e=typeof g=="function"?g:gt(+g),i=null,f):e},f.x0=function(g){return arguments.length?(e=typeof g=="function"?g:gt(+g),f):e},f.x1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:gt(+g),f):i},f.y=function(g){return arguments.length?(t=typeof g=="function"?g:gt(+g),n=null,f):t},f.y0=function(g){return arguments.length?(t=typeof g=="function"?g:gt(+g),f):t},f.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:gt(+g),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(i).y(t)},f.defined=function(g){return arguments.length?(r=typeof g=="function"?g:gt(!!g),f):r},f.curve=function(g){return arguments.length?(s=g,a!=null&&(o=s(a)),f):s},f.context=function(g){return arguments.length?(g==null?a=o=null:o=s(a=g),f):a},f}const ree={draw(e,t){const n=Tl(t/ed);e.moveTo(n,0),e.arc(0,0,n,0,Mz)}};function aee(e,t){let n=null,i=Ab(r);e=typeof e=="function"?e:gt(e||ree),t=typeof t=="function"?t:gt(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:gt(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:gt(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function yu(){}function Dy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Sb(e){this._context=e}Sb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function see(e){return new Sb(e)}function Bz(e){this._context=e}Bz.prototype={areaStart:yu,areaEnd:yu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Dy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oee(e){return new Bz(e)}function Lz(e){this._context=e}Lz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Dy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uee(e){return new Lz(e)}function Uz(e,t){this._basis=new Sb(e),this._beta=t}Uz.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,s=t[n]-r,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(i+l*a),this._beta*t[o]+(1-this._beta)*(r+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const lee=(function e(t){function n(i){return t===1?new Sb(i):new Uz(i,t)}return n.beta=function(i){return e(+i)},n})(.85);function $y(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function s3(e,t){this._context=e,this._k=(1-t)/6}s3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:$y(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:$y(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const cee=(function e(t){function n(i){return new s3(i,t)}return n.tension=function(i){return e(+i)},n})(0);function o3(e,t){this._context=e,this._k=(1-t)/6}o3.prototype={areaStart:yu,areaEnd:yu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:$y(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const fee=(function e(t){function n(i){return new o3(i,t)}return n.tension=function(i){return e(+i)},n})(0);function u3(e,t){this._context=e,this._k=(1-t)/6}u3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$y(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const dee=(function e(t){function n(i){return new u3(i,t)}return n.tension=function(i){return e(+i)},n})(0);function l3(e,t,n){var i=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>Vn){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Vn){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*f+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,s,e._x2,e._y2)}function Pz(e,t){this._context=e,this._alpha=t}Pz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:l3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const hee=(function e(t){function n(i){return t?new Pz(i,t):new s3(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function Iz(e,t){this._context=e,this._alpha=t}Iz.prototype={areaStart:yu,areaEnd:yu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:l3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const gee=(function e(t){function n(i){return t?new Iz(i,t):new o3(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function qz(e,t){this._context=e,this._alpha=t}qz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:l3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const pee=(function e(t){function n(i){return t?new qz(i,t):new u3(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function Hz(e){this._context=e}Hz.prototype={areaStart:yu,areaEnd:yu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function mee(e){return new Hz(e)}function e4(e){return e<0?-1:1}function t4(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),o=(a*r+s*i)/(i+r);return(e4(a)+e4(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function n4(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function q_(e,t,n){var i=e._x0,r=e._y0,a=e._x1,s=e._y1,o=(a-i)/3;e._context.bezierCurveTo(i+o,r+o*t,a-o,s-o*n,a,s)}function My(e){this._context=e}My.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:q_(this,this._t0,n4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,q_(this,n4(this,n=t4(this,e,t)),n);break;default:q_(this,this._t0,n=t4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Gz(e){this._context=new Yz(e)}(Gz.prototype=Object.create(My.prototype)).point=function(e,t){My.prototype.point.call(this,t,e)};function Yz(e){this._context=e}Yz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function yee(e){return new My(e)}function vee(e){return new Gz(e)}function Xz(e){this._context=e}Xz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=i4(e),r=i4(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function i4(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function bee(e){return new Xz(e)}function wb(e,t){this._context=e,this._t=t}wb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function xee(e){return new wb(e,.5)}function Eee(e){return new wb(e,0)}function _ee(e){return new wb(e,1)}function lu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Aee=()=>typeof Image<"u"?Image:null;function rs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Tu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const US=Symbol("implicit");function c3(){var e=new xF,t=[],n=[],i=US;function r(a){let s=e.get(a);if(s===void 0){if(i!==US)return i;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new xF;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return c3(t,n).unknown(i)},rs.apply(r,arguments),r}function Nd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ep(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function ku(){}var Gl=.7,td=1/Gl,Lf="\\s*([+-]?\\d+)\\s*",pg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ia="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",See=/^#([0-9a-f]{3,8})$/,wee=new RegExp(`^rgb\\(${Lf},${Lf},${Lf}\\)$`),Oee=new RegExp(`^rgb\\(${Ia},${Ia},${Ia}\\)$`),Cee=new RegExp(`^rgba\\(${Lf},${Lf},${Lf},${pg}\\)$`),Dee=new RegExp(`^rgba\\(${Ia},${Ia},${Ia},${pg}\\)$`),$ee=new RegExp(`^hsl\\(${pg},${Ia},${Ia}\\)$`),Mee=new RegExp(`^hsla\\(${pg},${Ia},${Ia},${pg}\\)$`),r4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Nd(ku,mg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:a4,formatHex:a4,formatHex8:Tee,formatHsl:kee,formatRgb:s4,toString:s4});function a4(){return this.rgb().formatHex()}function Tee(){return this.rgb().formatHex8()}function kee(){return Vz(this).formatHsl()}function s4(){return this.rgb().formatRgb()}function mg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=See.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?o4(t):n===3?new Cn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?c1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?c1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wee.exec(e))?new Cn(t[1],t[2],t[3],1):(t=Oee.exec(e))?new Cn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Cee.exec(e))?c1(t[1],t[2],t[3],t[4]):(t=Dee.exec(e))?c1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=$ee.exec(e))?c4(t[1],t[2]/100,t[3]/100,1):(t=Mee.exec(e))?c4(t[1],t[2]/100,t[3]/100,t[4]):r4.hasOwnProperty(e)?o4(r4[e]):e==="transparent"?new Cn(NaN,NaN,NaN,0):null}function o4(e){return new Cn(e>>16&255,e>>8&255,e&255,1)}function c1(e,t,n,i){return i<=0&&(e=t=n=NaN),new Cn(e,t,n,i)}function f3(e){return e instanceof ku||(e=mg(e)),e?(e=e.rgb(),new Cn(e.r,e.g,e.b,e.opacity)):new Cn}function vu(e,t,n,i){return arguments.length===1?f3(e):new Cn(e,t,n,i??1)}function Cn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Nd(Cn,vu,ep(ku,{brighter(e){return e=e==null?td:Math.pow(td,e),new Cn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gl:Math.pow(Gl,e),new Cn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Cn(jl(this.r),jl(this.g),jl(this.b),Ty(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:u4,formatHex:u4,formatHex8:Fee,formatRgb:l4,toString:l4}));function u4(){return`#${kl(this.r)}${kl(this.g)}${kl(this.b)}`}function Fee(){return`#${kl(this.r)}${kl(this.g)}${kl(this.b)}${kl((isNaN(this.opacity)?1:this.opacity)*255)}`}function l4(){const e=Ty(this.opacity);return`${e===1?"rgb(":"rgba("}${jl(this.r)}, ${jl(this.g)}, ${jl(this.b)}${e===1?")":`, ${e})`}`}function Ty(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function jl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kl(e){return e=jl(e),(e<16?"0":"")+e.toString(16)}function c4(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new sa(e,t,n,i)}function Vz(e){if(e instanceof sa)return new sa(e.h,e.s,e.l,e.opacity);if(e instanceof ku||(e=mg(e)),!e)return new sa;if(e instanceof sa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,o=a-r,l=(a+r)/2;return o?(t===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-t)/o+2:s=(t-n)/o+4,o/=l<.5?a+r:2-a-r,s*=60):o=l>0&&l<1?0:s,new sa(s,o,l,e.opacity)}function ky(e,t,n,i){return arguments.length===1?Vz(e):new sa(e,t,n,i??1)}function sa(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Nd(sa,ky,ep(ku,{brighter(e){return e=e==null?td:Math.pow(td,e),new sa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gl:Math.pow(Gl,e),new sa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new Cn(H_(e>=240?e-240:e+120,r,i),H_(e,r,i),H_(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new sa(f4(this.h),f1(this.s),f1(this.l),Ty(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ty(this.opacity);return`${e===1?"hsl(":"hsla("}${f4(this.h)}, ${f1(this.s)*100}%, ${f1(this.l)*100}%${e===1?")":`, ${e})`}`}}));function f4(e){return e=(e||0)%360,e<0?e+360:e}function f1(e){return Math.max(0,Math.min(1,e||0))}function H_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Wz=Math.PI/180,Qz=180/Math.PI,Fy=18,Zz=.96422,Kz=1,Jz=.82521,eB=4/29,Uf=6/29,tB=3*Uf*Uf,Ree=Uf*Uf*Uf;function nB(e){if(e instanceof qa)return new qa(e.l,e.a,e.b,e.opacity);if(e instanceof Xs)return iB(e);e instanceof Cn||(e=f3(e));var t=V_(e.r),n=V_(e.g),i=V_(e.b),r=G_((.2225045*t+.7168786*n+.0606169*i)/Kz),a,s;return t===n&&n===i?a=s=r:(a=G_((.4360747*t+.3850649*n+.1430804*i)/Zz),s=G_((.0139322*t+.0971045*n+.7141733*i)/Jz)),new qa(116*r-16,500*(a-r),200*(r-s),e.opacity)}function Ry(e,t,n,i){return arguments.length===1?nB(e):new qa(e,t,n,i??1)}function qa(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Nd(qa,Ry,ep(ku,{brighter(e){return new qa(this.l+Fy*(e??1),this.a,this.b,this.opacity)},darker(e){return new qa(this.l-Fy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Zz*Y_(t),e=Kz*Y_(e),n=Jz*Y_(n),new Cn(X_(3.1338561*t-1.6168667*e-.4906146*n),X_(-.9787684*t+1.9161415*e+.033454*n),X_(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function G_(e){return e>Ree?Math.pow(e,1/3):e/tB+eB}function Y_(e){return e>Uf?e*e*e:tB*(e-eB)}function X_(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function V_(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Nee(e){if(e instanceof Xs)return new Xs(e.h,e.c,e.l,e.opacity);if(e instanceof qa||(e=nB(e)),e.a===0&&e.b===0)return new Xs(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Qz;return new Xs(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Ny(e,t,n,i){return arguments.length===1?Nee(e):new Xs(e,t,n,i??1)}function Xs(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function iB(e){if(isNaN(e.h))return new qa(e.l,0,0,e.opacity);var t=e.h*Wz;return new qa(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Nd(Xs,Ny,ep(ku,{brighter(e){return new Xs(this.h,this.c,this.l+Fy*(e??1),this.opacity)},darker(e){return new Xs(this.h,this.c,this.l-Fy*(e??1),this.opacity)},rgb(){return iB(this).rgb()}}));var rB=-.14861,d3=1.78277,h3=-.29227,Ob=-.90649,yg=1.97294,d4=yg*Ob,h4=yg*d3,g4=d3*h3-Ob*rB;function jee(e){if(e instanceof zl)return new zl(e.h,e.s,e.l,e.opacity);e instanceof Cn||(e=f3(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(g4*i+d4*t-h4*n)/(g4+d4-h4),a=i-r,s=(yg*(n-r)-h3*a)/Ob,o=Math.sqrt(s*s+a*a)/(yg*r*(1-r)),l=o?Math.atan2(s,a)*Qz-120:NaN;return new zl(l<0?l+360:l,o,r,e.opacity)}function PS(e,t,n,i){return arguments.length===1?jee(e):new zl(e,t,n,i??1)}function zl(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Nd(zl,PS,ep(ku,{brighter(e){return e=e==null?td:Math.pow(td,e),new zl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gl:Math.pow(Gl,e),new zl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Wz,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new Cn(255*(t+n*(rB*i+d3*r)),255*(t+n*(h3*i+Ob*r)),255*(t+n*(yg*i)),this.opacity)}}));function aB(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}function sB(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,o=i<t-1?e[i+2]:2*a-r;return aB((n-i/t)*t,s,r,a,o)}}function oB(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],o=e[(i+2)%t];return aB((n-i/t)*t,r,a,s,o)}}const Cb=e=>()=>e;function uB(e,t){return function(n){return e+n*t}}function zee(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function Db(e,t){var n=t-e;return n?uB(e,n>180||n<-180?n-360*Math.round(n/360):n):Cb(isNaN(e)?t:e)}function Bee(e){return(e=+e)==1?Dn:function(t,n){return n-t?zee(t,n,e):Cb(isNaN(t)?n:t)}}function Dn(e,t){var n=t-e;return n?uB(e,n):Cb(isNaN(e)?t:e)}const IS=(function e(t){var n=Bee(t);function i(r,a){var s=n((r=vu(r)).r,(a=vu(a)).r),o=n(r.g,a.g),l=n(r.b,a.b),f=Dn(r.opacity,a.opacity);return function(d){return r.r=s(d),r.g=o(d),r.b=l(d),r.opacity=f(d),r+""}}return i.gamma=e,i})(1);function lB(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=vu(t[s]),i[s]=o.r||0,r[s]=o.g||0,a[s]=o.b||0;return i=e(i),r=e(r),a=e(a),o.opacity=1,function(l){return o.r=i(l),o.g=r(l),o.b=a(l),o+""}}}var Lee=lB(sB),Uee=lB(oB);function g3(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function cB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Pee(e,t){return(cB(t)?g3:fB)(e,t)}function fB(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=Fu(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function dB(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function ra(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hB(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Fu(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var qS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,W_=new RegExp(qS.source,"g");function Iee(e){return function(){return e}}function qee(e){return function(t){return e(t)+""}}function gB(e,t){var n=qS.lastIndex=W_.lastIndex=0,i,r,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(i=qS.exec(e))&&(r=W_.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:ra(i,r)})),n=W_.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?qee(l[0].x):Iee(t):(t=l.length,function(f){for(var d=0,g;d<t;++d)o[(g=l[d]).i]=g.x(f);return o.join("")})}function Fu(e,t){var n=typeof t,i;return t==null||n==="boolean"?Cb(t):(n==="number"?ra:n==="string"?(i=mg(t))?(t=i,IS):gB:t instanceof mg?IS:t instanceof Date?dB:cB(t)?g3:Array.isArray(t)?fB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?hB:ra)(e,t)}function Hee(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Gee(e,t){var n=Db(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function tp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var p4=180/Math.PI,HS={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pB(e,t,n,i,r,a){var s,o,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*p4,skewX:Math.atan(l)*p4,scaleX:s,scaleY:o}}var d1;function Yee(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?HS:pB(t.a,t.b,t.c,t.d,t.e,t.f)}function Xee(e){return e==null||(d1||(d1=document.createElementNS("http://www.w3.org/2000/svg","g")),d1.setAttribute("transform",e),!(e=d1.transform.baseVal.consolidate()))?HS:(e=e.matrix,pB(e.a,e.b,e.c,e.d,e.e,e.f))}function mB(e,t,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,g,p,y,v){if(f!==g||d!==p){var x=y.push("translate(",null,t,null,n);v.push({i:x-4,x:ra(f,g)},{i:x-2,x:ra(d,p)})}else(g||p)&&y.push("translate("+g+t+p+n)}function s(f,d,g,p){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),p.push({i:g.push(r(g)+"rotate(",null,i)-2,x:ra(f,d)})):d&&g.push(r(g)+"rotate("+d+i)}function o(f,d,g,p){f!==d?p.push({i:g.push(r(g)+"skewX(",null,i)-2,x:ra(f,d)}):d&&g.push(r(g)+"skewX("+d+i)}function l(f,d,g,p,y,v){if(f!==g||d!==p){var x=y.push(r(y)+"scale(",null,",",null,")");v.push({i:x-4,x:ra(f,g)},{i:x-2,x:ra(d,p)})}else(g!==1||p!==1)&&y.push(r(y)+"scale("+g+","+p+")")}return function(f,d){var g=[],p=[];return f=e(f),d=e(d),a(f.translateX,f.translateY,d.translateX,d.translateY,g,p),s(f.rotate,d.rotate,g,p),o(f.skewX,d.skewX,g,p),l(f.scaleX,f.scaleY,d.scaleX,d.scaleY,g,p),f=d=null,function(y){for(var v=-1,x=p.length,E;++v<x;)g[(E=p[v]).i]=E.x(y);return g.join("")}}}var Vee=mB(Yee,"px, ","px)","deg)"),Wee=mB(Xee,", ",")",")"),Qee=1e-12;function m4(e){return((e=Math.exp(e))+1/e)/2}function Zee(e){return((e=Math.exp(e))-1/e)/2}function Kee(e){return((e=Math.exp(2*e))-1)/(e+1)}const Jee=(function e(t,n,i){function r(a,s){var o=a[0],l=a[1],f=a[2],d=s[0],g=s[1],p=s[2],y=d-o,v=g-l,x=y*y+v*v,E,A;if(x<Qee)A=Math.log(p/f)/t,E=function(C){return[o+C*y,l+C*v,f*Math.exp(t*C*A)]};else{var S=Math.sqrt(x),w=(p*p-f*f+i*x)/(2*f*n*S),D=(p*p-f*f-i*x)/(2*p*n*S),O=Math.log(Math.sqrt(w*w+1)-w),M=Math.log(Math.sqrt(D*D+1)-D);A=(M-O)/t,E=function(C){var k=C*A,N=m4(O),L=f/(n*S)*(N*Kee(t*k+O)-Zee(O));return[o+L*y,l+L*v,f*N/m4(t*k+O)]}}return E.duration=A*1e3*t/Math.SQRT2,E}return r.rho=function(a){var s=Math.max(.001,+a),o=s*s,l=o*o;return e(s,o,l)},r})(Math.SQRT2,2,4);function yB(e){return function(t,n){var i=e((t=ky(t)).h,(n=ky(n)).h),r=Dn(t.s,n.s),a=Dn(t.l,n.l),s=Dn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.s=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const ete=yB(Db);var tte=yB(Dn);function nte(e,t){var n=Dn((e=Ry(e)).l,(t=Ry(t)).l),i=Dn(e.a,t.a),r=Dn(e.b,t.b),a=Dn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=a(s),e+""}}function vB(e){return function(t,n){var i=e((t=Ny(t)).h,(n=Ny(n)).h),r=Dn(t.c,n.c),a=Dn(t.l,n.l),s=Dn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.c=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const ite=vB(Db);var rte=vB(Dn);function bB(e){return(function t(n){n=+n;function i(r,a){var s=e((r=PS(r)).h,(a=PS(a)).h),o=Dn(r.s,a.s),l=Dn(r.l,a.l),f=Dn(r.opacity,a.opacity);return function(d){return r.h=s(d),r.s=o(d),r.l=l(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=t,i})(1)}const ate=bB(Db);var ste=bB(Dn);function p3(e,t){t===void 0&&(t=e,e=Fu);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[o](s-o)}}function ote(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const ute=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Fu,interpolateArray:Pee,interpolateBasis:sB,interpolateBasisClosed:oB,interpolateCubehelix:ate,interpolateCubehelixLong:ste,interpolateDate:dB,interpolateDiscrete:Hee,interpolateHcl:ite,interpolateHclLong:rte,interpolateHsl:ete,interpolateHslLong:tte,interpolateHue:Gee,interpolateLab:nte,interpolateNumber:ra,interpolateNumberArray:g3,interpolateObject:hB,interpolateRgb:IS,interpolateRgbBasis:Lee,interpolateRgbBasisClosed:Uee,interpolateRound:tp,interpolateString:gB,interpolateTransformCss:Vee,interpolateTransformSvg:Wee,interpolateZoom:Jee,piecewise:p3,quantize:ote},Symbol.toStringTag,{value:"Module"}));function lte(e){return function(){return e}}function GS(e){return+e}var y4=[0,1];function Ii(e){return e}function YS(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:lte(isNaN(t)?NaN:.5)}function cte(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function fte(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=YS(r,i),a=n(s,a)):(i=YS(i,r),a=n(a,s)),function(o){return a(i(o))}}function dte(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=YS(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(o){var l=gu(e,o,1,i)-1;return a[l](r[l](o))}}function np(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function $b(){var e=y4,t=y4,n=Fu,i,r,a,s=Ii,o,l,f;function d(){var p=Math.min(e.length,t.length);return s!==Ii&&(s=cte(e[0],e[p-1])),o=p>2?dte:fte,l=f=null,g}function g(p){return p==null||isNaN(p=+p)?a:(l||(l=o(e.map(i),t,n)))(i(s(p)))}return g.invert=function(p){return s(r((f||(f=o(t,e.map(i),ra)))(p)))},g.domain=function(p){return arguments.length?(e=Array.from(p,GS),d()):e.slice()},g.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},g.rangeRound=function(p){return t=Array.from(p),n=tp,d()},g.clamp=function(p){return arguments.length?(s=p?!0:Ii,d()):s!==Ii},g.interpolate=function(p){return arguments.length?(n=p,d()):n},g.unknown=function(p){return arguments.length?(a=p,g):a},function(p,y){return i=p,r=y,d()}}function xB(){return $b()(Ii,Ii)}function EB(e,t,n,i){var r=pu(e,t,n),a;switch(i=Hl(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=X7(r,s))&&(i.precision=a),nC(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=V7(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=Y7(r))&&(i.precision=a-(i.type==="%")*2);break}}return rb(i)}function pc(e){var t=e.domain;return e.ticks=function(n){var i=t();return SS(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return EB(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,s=i[r],o=i[a],l,f,d=10;for(o<s&&(f=s,s=o,o=f,f=r,r=a,a=f);d-- >0;){if(f=wS(s,o,n),f===l)return i[r]=s,i[a]=o,t(i);if(f>0)s=Math.floor(s/f)*f,o=Math.ceil(o/f)*f;else if(f<0)s=Math.ceil(s*f)/f,o=Math.floor(o*f)/f;else break;l=f}return e},e}function _B(){var e=xB();return e.copy=function(){return np(e,_B())},rs.apply(e,arguments),pc(e)}function AB(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,GS),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return AB(e).unknown(t)},e=arguments.length?Array.from(e,GS):[0,1],pc(n)}function SB(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),e[n]=t.floor(r),e[i]=t.ceil(a),e}function v4(e){return Math.log(e)}function b4(e){return Math.exp(e)}function hte(e){return-Math.log(-e)}function gte(e){return-Math.exp(-e)}function pte(e){return isFinite(e)?+("1e"+e):e<0?0:e}function mte(e){return e===10?pte:e===Math.E?Math.exp:t=>Math.pow(e,t)}function yte(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function x4(e){return(t,n)=>-e(-t,n)}function m3(e){const t=e(v4,b4),n=t.domain;let i=10,r,a;function s(){return r=yte(i),a=mte(i),n()[0]<0?(r=x4(r),a=x4(a),e(hte,gte)):e(v4,b4),t}return t.base=function(o){return arguments.length?(i=+o,s()):i},t.domain=function(o){return arguments.length?(n(o),s()):n()},t.ticks=o=>{const l=n();let f=l[0],d=l[l.length-1];const g=d<f;g&&([f,d]=[d,f]);let p=r(f),y=r(d),v,x;const E=o==null?10:+o;let A=[];if(!(i%1)&&y-p<E){if(p=Math.floor(p),y=Math.ceil(y),f>0){for(;p<=y;++p)for(v=1;v<i;++v)if(x=p<0?v/a(-p):v*a(p),!(x<f)){if(x>d)break;A.push(x)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(x=p>0?v/a(-p):v*a(p),!(x<f)){if(x>d)break;A.push(x)}A.length*2<E&&(A=SS(f,d,E))}else A=SS(p,y,Math.min(y-p,E)).map(a);return g?A.reverse():A},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Hl(l)).precision==null&&(l.trim=!0),l=rb(l)),o===1/0)return l;const f=Math.max(1,i*o/t.ticks().length);return d=>{let g=d/a(Math.round(r(d)));return g*i<i-.5&&(g*=i),g<=f?l(d):""}},t.nice=()=>n(SB(n(),{floor:o=>a(Math.floor(r(o))),ceil:o=>a(Math.ceil(r(o)))})),t}function wB(){const e=m3($b()).domain([1,10]);return e.copy=()=>np(e,wB()).base(e.base()),rs.apply(e,arguments),e}function E4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function _4(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function y3(e){var t=1,n=e(E4(t),_4(t));return n.constant=function(i){return arguments.length?e(E4(t=+i),_4(t)):t},pc(n)}function OB(){var e=y3($b());return e.copy=function(){return np(e,OB()).constant(e.constant())},rs.apply(e,arguments)}function A4(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function vte(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function bte(e){return e<0?-e*e:e*e}function v3(e){var t=e(Ii,Ii),n=1;function i(){return n===1?e(Ii,Ii):n===.5?e(vte,bte):e(A4(n),A4(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},pc(t)}function b3(){var e=v3($b());return e.copy=function(){return np(e,b3()).exponent(e.exponent())},rs.apply(e,arguments),e}function xte(){return b3.apply(null,arguments).exponent(.5)}function CB(){var e=[],t=[],n=[],i;function r(){var s=0,o=Math.max(1,t.length);for(n=new Array(o-1);++s<o;)n[s-1]=U7(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?i:t[gu(n,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Qs),r()},a.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return CB().domain(e).range(t).unknown(i)},rs.apply(a,arguments)}function DB(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function s(l){return l!=null&&l<=l?r[gu(i,l,0,n)]:a}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,o()):r.slice()},s.invertExtent=function(l){var f=r.indexOf(l);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return DB().domain([e,t]).range(r).unknown(a)},rs.apply(pc(s),arguments)}function $B(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[gu(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return $B().domain(e).range(t).unknown(n)},rs.apply(r,arguments)}function Ete(e){return new Date(e)}function _te(e){return e instanceof Date?+e:+new Date(+e)}function x3(e,t,n,i,r,a,s,o,l,f){var d=xB(),g=d.invert,p=d.domain,y=f(".%L"),v=f(":%S"),x=f("%I:%M"),E=f("%I %p"),A=f("%a %d"),S=f("%b %d"),w=f("%B"),D=f("%Y");function O(M){return(l(M)<M?y:o(M)<M?v:s(M)<M?x:a(M)<M?E:i(M)<M?r(M)<M?A:S:n(M)<M?w:D)(M)}return d.invert=function(M){return new Date(g(M))},d.domain=function(M){return arguments.length?p(Array.from(M,_te)):p().map(Ete)},d.ticks=function(M){var C=p();return e(C[0],C[C.length-1],M??10)},d.tickFormat=function(M,C){return C==null?O:f(C)},d.nice=function(M){var C=p();return(!M||typeof M.range!="function")&&(M=t(C[0],C[C.length-1],M??10)),M?p(SB(C,M)):d},d.copy=function(){return np(d,x3(e,t,n,i,r,a,s,o,l,f))},d}function Ate(){return rs.apply(x3($Q,MQ,Wa,cg,Md,Zs,ob,ab,Ys,oC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Ste(){return rs.apply(x3(CQ,DQ,Qa,fg,Td,ou,ub,sb,Ys,uC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Mb(){var e=0,t=1,n,i,r,a,s=Ii,o=!1,l;function f(g){return g==null||isNaN(g=+g)?l:s(r===0?.5:(g=(a(g)-n)*r,o?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t]=g,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(g){return arguments.length?(o=!!g,f):o},f.interpolator=function(g){return arguments.length?(s=g,f):s};function d(g){return function(p){var y,v;return arguments.length?([y,v]=p,s=g(y,v),f):[s(0),s(1)]}}return f.range=d(Fu),f.rangeRound=d(tp),f.unknown=function(g){return arguments.length?(l=g,f):l},function(g){return a=g,n=g(e),i=g(t),r=n===i?0:1/(i-n),f}}function Ru(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function E3(){var e=pc(Mb()(Ii));return e.copy=function(){return Ru(e,E3())},Tu.apply(e,arguments)}function MB(){var e=m3(Mb()).domain([1,10]);return e.copy=function(){return Ru(e,MB()).base(e.base())},Tu.apply(e,arguments)}function TB(){var e=y3(Mb());return e.copy=function(){return Ru(e,TB()).constant(e.constant())},Tu.apply(e,arguments)}function _3(){var e=v3(Mb());return e.copy=function(){return Ru(e,_3()).exponent(e.exponent())},Tu.apply(e,arguments)}function wte(){return _3.apply(null,arguments).exponent(.5)}function Tb(){var e=0,t=.5,n=1,i=1,r,a,s,o,l,f=Ii,d,g=!1,p;function y(x){return isNaN(x=+x)?p:(x=.5+((x=+d(x))-a)*(i*x<i*a?o:l),f(g?Math.max(0,Math.min(1,x)):x))}y.domain=function(x){return arguments.length?([e,t,n]=x,r=d(e=+e),a=d(t=+t),s=d(n=+n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(x){return arguments.length?(g=!!x,y):g},y.interpolator=function(x){return arguments.length?(f=x,y):f};function v(x){return function(E){var A,S,w;return arguments.length?([A,S,w]=E,f=p3(x,[A,S,w]),y):[f(0),f(.5),f(1)]}}return y.range=v(Fu),y.rangeRound=v(tp),y.unknown=function(x){return arguments.length?(p=x,y):p},function(x){return d=x,r=x(e),a=x(t),s=x(n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function kB(){var e=pc(Tb()(Ii));return e.copy=function(){return Ru(e,kB())},Tu.apply(e,arguments)}function FB(){var e=m3(Tb()).domain([.1,1,10]);return e.copy=function(){return Ru(e,FB()).base(e.base())},Tu.apply(e,arguments)}function RB(){var e=y3(Tb());return e.copy=function(){return Ru(e,RB()).constant(e.constant())},Tu.apply(e,arguments)}function A3(){var e=v3(Tb());return e.copy=function(){return Ru(e,A3()).exponent(e.exponent())},Tu.apply(e,arguments)}function Ote(){return A3.apply(null,arguments).exponent(.5)}function as(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Cte=as("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Dte=as("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),$te=as("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Mte=as("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Tte=as("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),kte=as("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Fte=as("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Rte=as("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Nte=as("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),jte=as("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function S3(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const zte="identity",nd="linear",ro="log",ip="pow",rp="sqrt",kb="symlog",Yl="time",Xl="utc",Ha="sequential",jd="diverging",id="quantile",Fb="quantize",Rb="threshold",w3="ordinal",XS="point",NB="band",O3="bin-ordinal",xn="continuous",ap="discrete",sp="discretizing",Vr="interpolating",C3="temporal";function Bte(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function Lte(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,s,o,l,f;for(r<i&&(o=i,i=r,r=o),l=0,f=n.length;l<f;++l)n[l]>=i&&n[l]<=r&&(a<0&&(a=l),s=l);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function D3(){const e=c3().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,s=!1,o=0,l=0,f=.5;delete e.unknown;function d(){const g=t().length,p=i[1]<i[0],y=i[1-p],v=S3(g,o,l);let x=i[p-0];r=(y-x)/(v||1),s&&(r=Math.floor(r)),x+=(y-x-r*(g-o))*f,a=r*(1-o),s&&(x=Math.round(x),a=Math.round(a));const E=cr(g).map(A=>x+r*A);return n(p?E.reverse():E)}return e.domain=function(g){return arguments.length?(t(g),d()):t()},e.range=function(g){return arguments.length?(i=[+g[0],+g[1]],d()):i.slice()},e.rangeRound=function(g){return i=[+g[0],+g[1]],s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(g){return arguments.length?(s=!!g,d()):s},e.padding=function(g){return arguments.length?(l=Math.max(0,Math.min(1,g)),o=l,d()):o},e.paddingInner=function(g){return arguments.length?(o=Math.max(0,Math.min(1,g)),d()):o},e.paddingOuter=function(g){return arguments.length?(l=Math.max(0,Math.min(1,g)),d()):l},e.align=function(g){return arguments.length?(f=Math.max(0,Math.min(1,g)),d()):f},e.invertRange=function(g){if(g[0]==null||g[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let x=+g[0],E=+g[1],A,S,w;if(!(x!==x||E!==E)&&(E<x&&(w=x,x=E,E=w),!(E<y[0]||x>i[1-p])))return A=Math.max(0,gu(y,x)-1),S=x===E?A:gu(y,E)-1,x-y[A]>a+1e-10&&++A,p&&(w=A,A=v-S,S=v-w),A>S?void 0:t().slice(A,S+1)},e.invert=function(g){const p=e.invertRange([g,g]);return p&&p[0]},e.copy=function(){return D3().domain(t()).range(i).round(s).paddingInner(o).paddingOuter(l).align(f)},d()}function jB(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return jB(t())},e}function Ute(){return jB(D3().paddingInner(1))}var Pte=Array.prototype.map;function Ite(e){return Pte.call(e,Kn)}const qte=Array.prototype.slice;function zB(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(gu(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=Ite(i),n):e.slice()},n.range=function(i){return arguments.length?(t=qte.call(i),n):t.slice()},n.tickFormat=function(i,r){return EB(e[0],et(e),i??10,r)},n.copy=function(){return zB().domain(n.domain()).range(n.range())},n}const jy=new Map,BB=Symbol("vega_scale");function LB(e){return e[BB]=!0,e}function S4(e){return e&&e[BB]===!0}function Hte(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?Bte(a):a.invertExtent?Lte(a):void 0),a.type=e,LB(a)};return i.metadata=ga(De(n)),i}function ct(e,t,n){return arguments.length>1?(jy.set(e,Hte(e,t,n)),this):UB(e)?jy.get(e):void 0}ct(zte,AB);ct(nd,_B,xn);ct(ro,wB,[xn,ro]);ct(ip,b3,xn);ct(rp,xte,xn);ct(kb,OB,xn);ct(Yl,Ate,[xn,C3]);ct(Xl,Ste,[xn,C3]);ct(Ha,E3,[xn,Vr]);ct(`${Ha}-${nd}`,E3,[xn,Vr]);ct(`${Ha}-${ro}`,MB,[xn,Vr,ro]);ct(`${Ha}-${ip}`,_3,[xn,Vr]);ct(`${Ha}-${rp}`,wte,[xn,Vr]);ct(`${Ha}-${kb}`,TB,[xn,Vr]);ct(`${jd}-${nd}`,kB,[xn,Vr]);ct(`${jd}-${ro}`,FB,[xn,Vr,ro]);ct(`${jd}-${ip}`,A3,[xn,Vr]);ct(`${jd}-${rp}`,Ote,[xn,Vr]);ct(`${jd}-${kb}`,RB,[xn,Vr]);ct(id,CB,[sp,id]);ct(Fb,DB,sp);ct(Rb,$B,sp);ct(O3,zB,[ap,sp]);ct(w3,c3,ap);ct(NB,D3,ap);ct(XS,Ute,ap);function UB(e){return jy.has(e)}function mc(e,t){const n=jy.get(e);return n&&n.metadata[t]}function $3(e){return mc(e,xn)}function rd(e){return mc(e,ap)}function VS(e){return mc(e,sp)}function PB(e){return mc(e,ro)}function Gte(e){return mc(e,C3)}function IB(e){return mc(e,Vr)}function qB(e){return mc(e,id)}const Yte=["clamp","base","constant","exponent"];function HB(e,t){const n=t[0],i=et(t)-n;return function(r){return e(n+r*i)}}function Nb(e,t,n){return p3(M3(t||"rgb",n),e)}function GB(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function YB(e,t,n){const i=n-t;let r,a,s;return!i||!Number.isFinite(i)?ui(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),s=ct(a)().domain([t,n]).range([0,1]),Yte.forEach(o=>e[o]?s[o](e[o]()):0),s)}function M3(e,t){const n=ute[Xte(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Xte(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Vte={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Wte={accent:Dte,category10:Cte,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:$te,observable10:Mte,paired:Tte,pastel1:kte,pastel2:Fte,set1:Rte,set2:Nte,set3:jte,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function XB(e){if(Ee(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function VB(e,t){for(const n in e)T3(n,t(e[n]))}const w4={};VB(Wte,XB);VB(Vte,e=>Nb(XB(e)));function T3(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(w4[e]=t,this):w4[e]}const V1="symbol",Qte="discrete",Zte="gradient",Kte=e=>Ee(e)?e.map(t=>String(t)):String(e),Jte=(e,t)=>e[1]-t[1],ene=(e,t)=>t[1]-e[1];function k3(e,t,n){let i;return hu(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Qg(e.domain())/n||1)+1))),je(t)&&(i=t.step,t=t.interval),tt(t)&&(t=e.type===Yl?kd(t):e.type==Xl?Fd(t):ne("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function WB(e,t,n){let i=e.range(),r=i[0],a=et(i),s=Jte;if(r>a&&(i=a,a=r,r=i,s=ene),r=Math.floor(r),a=Math.ceil(a),t=t.map(o=>[o,e(o)]).filter(o=>r<=o[1]&&o[1]<=a).sort(s).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],et(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,f)=>!(f%2));t.length<3&&(t=o)}return t}function F3(e,t){return e.bins?WB(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function QB(e,t,n,i,r,a){const s=t.type;let o=Kte;if(s===Yl||r===Yl)o=e.timeFormat(i);else if(s===Xl||r===Xl)o=e.utcFormat(i);else if(PB(s)){const l=e.formatFloat(i);if(a||t.bins)o=l;else{const f=ZB(t,n,!1);o=d=>f(d)?l(d):""}}else if(t.tickFormat){const l=t.domain();o=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(o=e.format(i));return o}function ZB(e,t,n){const i=F3(e,t),r=e.base(),a=Math.log(r),s=Math.max(1,r*t/i.length),o=l=>{let f=l/Math.pow(r,Math.round(Math.log(l)/a));return f*r<r-.5&&(f*=r),f<=s};return n?i.filter(o):o}const WS={[id]:"quantiles",[Fb]:"thresholds",[Rb]:"domain"},KB={[id]:"quantiles",[Fb]:"domain"};function JB(e,t){return e.bins?ine(e.bins):e.type===ro?ZB(e,t,!0):WS[e.type]?nne(e[WS[e.type]]()):F3(e,t)}function tne(e,t,n){const i=t[KB[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],s;for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,30,n)}function nne(e){const t=[-1/0].concat(e);return t.max=1/0,t}function ine(e){const t=e.slice(0,-1);return t.max=et(e),t}const rne=e=>WS[e.type]||e.bins;function eL(e,t,n,i,r,a,s){const o=KB[t.type]&&a!==Yl&&a!==Xl?tne(e,t,r):QB(e,t,n,r,a,s);return i===V1&&rne(t)?ane(o):i===Qte?sne(o):one(o)}const ane=e=>(t,n,i)=>{const r=O4(i[n+1],O4(i.max,1/0)),a=C4(t,e),s=C4(r,e);return a&&s?a+" – "+s:s?"< "+s:"≥ "+a},O4=(e,t)=>e??t,sne=e=>(t,n)=>n?e(t):null,one=e=>t=>e(t),C4=(e,t)=>Number.isFinite(e)?t(e):null;function une(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+et(t),a=r-i;if(e.type===Rb){const s=n?a/n:.1;i-=s,r+=s,a=r-i}return s=>(s-i)/a}function lne(e,t,n,i){const r=i||t.type;return tt(n)&&Gte(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===Yl?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===Xl?e.utcFormat("%A, %d %B %Y, %X UTC"):eL(e,t,5,null,n,i,!0)}function tL(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=lne(e,t,n.format,n.formatType);if(VS(t.type)){const a=JB(t).slice(1).map(r),s=a.length;return`${s} boundar${s===1?"y":"ies"}: ${a.join(", ")}`}else if(rd(t.type)){const a=t.domain(),s=a.length,o=s>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${s} value${s===1?"":"s"}: ${o}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(et(a))}`}}let nL=0;function cne(){nL=0}const zy="p_";function R3(e){return e&&e.gradient}function iL(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?zy:"";return r||(r=e.id="gradient_"+nL++,i==="radial"?(e.x1=Ta(e.x1,.5),e.y1=Ta(e.y1,.5),e.r1=Ta(e.r1,0),e.x2=Ta(e.x2,.5),e.y2=Ta(e.y2,.5),e.r2=Ta(e.r2,.5),a=zy):(e.x1=Ta(e.x1,0),e.y1=Ta(e.y1,0),e.x2=Ta(e.x2,1),e.y2=Ta(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function Ta(e,t){return e??t}function rL(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const D4={basis:{curve:see},"basis-closed":{curve:oee},"basis-open":{curve:uee},bundle:{curve:lee,tension:"beta",value:.85},cardinal:{curve:cee,tension:"tension",value:0},"cardinal-open":{curve:dee,tension:"tension",value:0},"cardinal-closed":{curve:fee,tension:"tension",value:0},"catmull-rom":{curve:hee,tension:"alpha",value:.5},"catmull-rom-closed":{curve:gee,tension:"alpha",value:.5},"catmull-rom-open":{curve:pee,tension:"alpha",value:.5},linear:{curve:a3},"linear-closed":{curve:mee},monotone:{horizontal:vee,vertical:yee},natural:{curve:bee},step:{curve:xee},"step-after":{curve:_ee},"step-before":{curve:Eee}};function N3(e,t,n){var i=Re(D4,e)&&D4[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const fne={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},dne=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,hne=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,gne=/^((\s+,?\s*)|(,\s*))/,pne=/^[01]/;function ad(e){const t=[];return(e.match(dne)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),s=fne[a],o=mne(a,s,i.slice(1).trim()),l=o.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...o.slice(0,s)]),l!==s){a==="m"&&(r=r==="M"?"L":"l");for(let f=s;f<l;f+=s)t.push([r,...o.slice(f,f+s)])}}),t}function mne(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const s=e==="a"&&(a===3||a===4)?pne:hne,o=n.slice(r).match(s);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");r+=o[0].length,i.push(+o[0]);const l=n.slice(r).match(gne);l!==null&&(r+=l[0].length)}return i}const bu=Math.PI/180,yne=1e-14,Ol=Math.PI/2,ja=Math.PI*2,vf=Math.sqrt(3)/2;var Q_={},Z_={},aL=[].join;function vne(e,t,n,i,r,a,s,o,l){const f=aL.call(arguments);if(Q_[f])return Q_[f];const d=s*bu,g=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(o-e)*.5+g*(l-t)*.5,v=p*(l-t)*.5-g*(o-e)*.5;let x=y*y/(n*n)+v*v/(i*i);x>1&&(x=Math.sqrt(x),n*=x,i*=x);const E=p/n,A=g/n,S=-g/i,w=p/i,D=E*o+A*l,O=S*o+w*l,M=E*e+A*t,C=S*e+w*t;let N=1/((M-D)*(M-D)+(C-O)*(C-O))-.25;N<0&&(N=0);let L=Math.sqrt(N);a==r&&(L=-L);const B=.5*(D+M)-L*(C-O),V=.5*(O+C)+L*(M-D),G=Math.atan2(O-V,D-B);let j=Math.atan2(C-V,M-B)-G;j<0&&a===1?j+=ja:j>0&&a===0&&(j-=ja);const F=Math.ceil(Math.abs(j/(Ol+.001))),U=[];for(let H=0;H<F;++H){const Q=G+H*j/F,R=G+(H+1)*j/F;U[H]=[B,V,Q,R,n,i,g,p]}return Q_[f]=U}function bne(e){const t=aL.call(e);if(Z_[t])return Z_[t];var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],f=e[7];const d=f*s,g=-l*o,p=l*s,y=f*o,v=Math.cos(r),x=Math.sin(r),E=Math.cos(a),A=Math.sin(a),S=.5*(a-r),w=Math.sin(S*.5),D=8/3*w*w/Math.sin(S),O=n+v-D*x,M=i+x+D*v,C=n+E,k=i+A,N=C+D*A,L=k-D*E;return Z_[t]=[d*O+g*M,p*O+y*M,d*N+g*L,p*N+y*L,d*C+g*k,p*C+y*k]}const $r=["l",0,0,0,0,0,0,0];function xne(e,t,n){const i=$r[0]=e[0];if(i==="a"||i==="A")$r[1]=t*e[1],$r[2]=n*e[2],$r[3]=e[3],$r[4]=e[4],$r[5]=e[5],$r[6]=t*e[6],$r[7]=n*e[7];else if(i==="h"||i==="H")$r[1]=t*e[1];else if(i==="v"||i==="V")$r[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)$r[r]=(r%2==1?t:n)*e[r];return $r}function vg(e,t,n,i,r,a){var s,o=null,l=0,f=0,d=0,g=0,p,y,v,x,E=0,A=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var S=0,w=t.length;S<w;++S){switch(s=t[S],(r!==1||a!==1)&&(s=xne(s,r,a)),s[0]){case"l":l+=s[1],f+=s[2],e.lineTo(l+n,f+i);break;case"L":l=s[1],f=s[2],e.lineTo(l+n,f+i);break;case"h":l+=s[1],e.lineTo(l+n,f+i);break;case"H":l=s[1],e.lineTo(l+n,f+i);break;case"v":f+=s[1],e.lineTo(l+n,f+i);break;case"V":f=s[1],e.lineTo(l+n,f+i);break;case"m":l+=s[1],f+=s[2],E=l,A=f,e.moveTo(l+n,f+i);break;case"M":l=s[1],f=s[2],E=l,A=f,e.moveTo(l+n,f+i);break;case"c":p=l+s[5],y=f+s[6],d=l+s[3],g=f+s[4],e.bezierCurveTo(l+s[1]+n,f+s[2]+i,d+n,g+i,p+n,y+i),l=p,f=y;break;case"C":l=s[5],f=s[6],d=s[3],g=s[4],e.bezierCurveTo(s[1]+n,s[2]+i,d+n,g+i,l+n,f+i);break;case"s":p=l+s[3],y=f+s[4],d=2*l-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,l+s[1]+n,f+s[2]+i,p+n,y+i),d=l+s[1],g=f+s[2],l=p,f=y;break;case"S":p=s[3],y=s[4],d=2*l-d,g=2*f-g,e.bezierCurveTo(d+n,g+i,s[1]+n,s[2]+i,p+n,y+i),l=p,f=y,d=s[1],g=s[2];break;case"q":p=l+s[3],y=f+s[4],d=l+s[1],g=f+s[2],e.quadraticCurveTo(d+n,g+i,p+n,y+i),l=p,f=y;break;case"Q":p=s[3],y=s[4],e.quadraticCurveTo(s[1]+n,s[2]+i,p+n,y+i),l=p,f=y,d=s[1],g=s[2];break;case"t":p=l+s[1],y=f+s[2],o[0].match(/[QqTt]/)===null?(d=l,g=f):o[0]==="t"?(d=2*l-v,g=2*f-x):o[0]==="q"&&(d=2*l-d,g=2*f-g),v=d,x=g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),l=p,f=y,d=l+s[1],g=f+s[2];break;case"T":p=s[1],y=s[2],d=2*l-d,g=2*f-g,e.quadraticCurveTo(d+n,g+i,p+n,y+i),l=p,f=y;break;case"a":$4(e,l+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+f+i]),l+=s[6],f+=s[7];break;case"A":$4(e,l+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),l=s[6],f=s[7];break;case"z":case"Z":l=E,f=A,e.closePath();break}o=s}}function $4(e,t,n,i){const r=vne(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const s=bne(r[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const M4=.5773502691896257,T4={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,ja)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=vf*n,r=i-n*M4,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=vf*n,r=i-n*M4;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=vf*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=vf*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=vf*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=vf*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function sL(e){return Re(T4,e)?T4[e]:Ene(e)}var K_={};function Ene(e){if(!Re(K_,e)){const t=ad(e);K_[e]={draw:function(n,i){vg(n,t,0,0,Math.sqrt(i)/2)}}}return K_[e]}const Po=.448084975506;function _ne(e){return e.x}function Ane(e){return e.y}function Sne(e){return e.width}function wne(e){return e.height}function Fs(e){return typeof e=="function"?e:()=>+e}function h1(e,t,n){return Math.max(t,Math.min(e,n))}function oL(){var e=_ne,t=Ane,n=Sne,i=wne,r=Fs(0),a=r,s=r,o=r,l=null;function f(d,g,p){var y,v=g??+e.call(this,d),x=p??+t.call(this,d),E=+n.call(this,d),A=+i.call(this,d),S=Math.min(E,A)/2,w=h1(+r.call(this,d),0,S),D=h1(+a.call(this,d),0,S),O=h1(+s.call(this,d),0,S),M=h1(+o.call(this,d),0,S);if(l||(l=y=_b()),w<=0&&D<=0&&O<=0&&M<=0)l.rect(v,x,E,A);else{var C=v+E,k=x+A;l.moveTo(v+w,x),l.lineTo(C-D,x),l.bezierCurveTo(C-Po*D,x,C,x+Po*D,C,x+D),l.lineTo(C,k-M),l.bezierCurveTo(C,k-Po*M,C-Po*M,k,C-M,k),l.lineTo(v+O,k),l.bezierCurveTo(v+Po*O,k,v,k-Po*O,v,k-O),l.lineTo(v,x+w),l.bezierCurveTo(v,x+Po*w,v+Po*w,x,v+w,x),l.closePath()}if(y)return l=null,y+""||null}return f.x=function(d){return arguments.length?(e=Fs(d),f):e},f.y=function(d){return arguments.length?(t=Fs(d),f):t},f.width=function(d){return arguments.length?(n=Fs(d),f):n},f.height=function(d){return arguments.length?(i=Fs(d),f):i},f.cornerRadius=function(d,g,p,y){return arguments.length?(r=Fs(d),a=g!=null?Fs(g):r,o=p!=null?Fs(p):r,s=y!=null?Fs(y):a,f):r},f.context=function(d){return arguments.length?(l=d??null,f):l},f}function uL(){var e,t,n,i,r=null,a,s,o,l;function f(g,p,y){const v=y/2;if(a){var x=o-p,E=g-s;if(x||E){var A=Math.hypot(x,E),S=(x/=A)*l,w=(E/=A)*l,D=Math.atan2(E,x);r.moveTo(s-S,o-w),r.lineTo(g-x*v,p-E*v),r.arc(g,p,v,D-Math.PI,D),r.lineTo(s+S,o+w),r.arc(s,o,l,D,D+Math.PI)}else r.arc(g,p,v,0,ja);r.closePath()}else a=1;s=g,o=p,l=v}function d(g){var p,y=g.length,v,x=!1,E;for(r==null&&(r=E=_b()),p=0;p<=y;++p)!(p<y&&i(v=g[p],p,g))===x&&(x=!x)&&(a=0),x&&f(+e(v,p,g),+t(v,p,g),+n(v,p,g));if(E)return r=null,E+""||null}return d.x=function(g){return arguments.length?(e=g,d):e},d.y=function(g){return arguments.length?(t=g,d):t},d.size=function(g){return arguments.length?(n=g,d):n},d.defined=function(g){return arguments.length?(i=g,d):i},d.context=function(g){return arguments.length?(g==null?r=null:r=g,d):r},d}function op(e,t){return e??t}const up=e=>e.x||0,lp=e=>e.y||0,One=e=>e.width||0,Cne=e=>e.height||0,Dne=e=>(e.x||0)+(e.width||0),$ne=e=>(e.y||0)+(e.height||0),Mne=e=>e.startAngle||0,Tne=e=>e.endAngle||0,kne=e=>e.padAngle||0,Fne=e=>e.innerRadius||0,Rne=e=>e.outerRadius||0,Nne=e=>e.cornerRadius||0,jne=e=>op(e.cornerRadiusTopLeft,e.cornerRadius)||0,zne=e=>op(e.cornerRadiusTopRight,e.cornerRadius)||0,Bne=e=>op(e.cornerRadiusBottomRight,e.cornerRadius)||0,Lne=e=>op(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Une=e=>op(e.size,64),Pne=e=>e.size||1,jb=e=>e.defined!==!1,Ine=e=>sL(e.shape||"circle"),qne=iee().startAngle(Mne).endAngle(Tne).padAngle(kne).innerRadius(Fne).outerRadius(Rne).cornerRadius(Nne),Hne=zz().x(up).y1(lp).y0($ne).defined(jb),Gne=zz().y(lp).x1(up).x0(Dne).defined(jb),Yne=jz().x(up).y(lp).defined(jb),Xne=oL().x(up).y(lp).width(One).height(Cne).cornerRadius(jne,zne,Bne,Lne),Vne=aee().type(Ine).size(Une),Wne=uL().x(up).y(lp).defined(jb).size(Pne);function j3(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Qne(e,t){return qne.context(e)(t)}function Zne(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?Gne:Hne).curve(N3(i,n.orient,n.tension)).context(e)(t)}function Kne(e,t){const n=t[0],i=n.interpolate||"linear";return Yne.curve(N3(i,n.orient,n.tension)).context(e)(t)}function zd(e,t,n,i){return Xne.context(e)(t,n,i)}function Jne(e,t){return(t.mark.shape||t.shape).context(e)(t)}function eie(e,t){return Vne.context(e)(t)}function tie(e,t){return Wne.context(e)(t)}var lL=1;function cL(){lL=1}function z3(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+lL++),s=r.clipping[a]||(r.clipping[a]={id:a});return He(i)?s.path=i(null):j3(n)?s.path=zd(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function on(e){this.clear(),e&&this.union(e)}on.prototype={clone(){return new on(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:s}=this,o=Math.cos(e),l=Math.sin(e),f=t-t*o+n*l,d=n-t*l-n*o;return[o*i-l*r+f,l*i+o*r+d,o*i-l*s+f,l*i+o*s+d,o*a-l*r+f,l*a+o*r+d,o*a-l*s+f,l*a+o*s+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function zb(e){this.mark=e,this.bounds=this.bounds||new on}function Bb(e){zb.call(this,e),this.items=this.items||[]}fe(Bb,zb);class fL{constructor(t){this._pending=0,this._loader=t||cb()}pending(){return this._pending}sanitizeURL(t){const n=this;return k4(n),n._loader.sanitize(t,{context:"href"}).then(i=>(o0(n),i)).catch(()=>(o0(n),null))}loadImage(t){const n=this,i=Aee();return k4(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const s=new i,o=Re(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>o0(n),s.onerror=()=>o0(n),s.src=a,s}).catch(r=>(o0(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function k4(e){e._pending+=1}function o0(e){e._pending-=1}function oo(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?nie(t,i):0))}return e}function nie(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const iie=ja-1e-8;let Lb,W1,Q1,Fl,QS,Z1,ZS,KS;const Ko=(e,t)=>Lb.add(e,t),K1=(e,t)=>Ko(W1=e,Q1=t),F4=e=>Ko(e,Lb.y1),R4=e=>Ko(Lb.x1,e),Cl=(e,t)=>QS*e+ZS*t,Dl=(e,t)=>Z1*e+KS*t,J_=(e,t)=>Ko(Cl(e,t),Dl(e,t)),eA=(e,t)=>K1(Cl(e,t),Dl(e,t));function cp(e,t){return Lb=e,t?(Fl=t*bu,QS=KS=Math.cos(Fl),Z1=Math.sin(Fl),ZS=-Z1):(QS=KS=1,Fl=Z1=ZS=0),rie}const rie={beginPath(){},closePath(){},moveTo:eA,lineTo:eA,rect(e,t,n,i){Fl?(J_(e+n,t),J_(e+n,t+i),J_(e,t+i),eA(e,t)):(Ko(e+n,t+i),K1(e,t))},quadraticCurveTo(e,t,n,i){const r=Cl(e,t),a=Dl(e,t),s=Cl(n,i),o=Dl(n,i);N4(W1,r,s,F4),N4(Q1,a,o,R4),K1(s,o)},bezierCurveTo(e,t,n,i,r,a){const s=Cl(e,t),o=Dl(e,t),l=Cl(n,i),f=Dl(n,i),d=Cl(r,a),g=Dl(r,a);j4(W1,s,l,d,F4),j4(Q1,o,f,g,R4),K1(d,g)},arc(e,t,n,i,r,a){if(i+=Fl,r+=Fl,W1=n*Math.cos(r)+e,Q1=n*Math.sin(r)+t,Math.abs(r-i)>iie)Ko(e-n,t-n),Ko(e+n,t+n);else{const s=f=>Ko(n*Math.cos(f)+e,n*Math.sin(f)+t);let o,l;if(s(i),s(r),r!==i)if(i=i%ja,i<0&&(i+=ja),r=r%ja,r<0&&(r+=ja),r<i&&(a=!a,o=i,i=r,r=o),a)for(r-=ja,o=i-i%Ol,l=0;l<4&&o>r;++l,o-=Ol)s(o);else for(o=i-i%Ol+Ol,l=0;l<4&&o<r;++l,o=o+Ol)s(o)}}};function N4(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function j4(e,t,n,i,r){const a=i-e+3*t-3*n,s=e+n-2*t,o=e-t;let l=0,f=0,d;Math.abs(a)>yne?(d=s*s+o*a,d>=0&&(d=Math.sqrt(d),l=(-s+d)/a,f=(-s-d)/a)):l=.5*o/s,0<l&&l<1&&r(z4(l,e,t,n,i)),0<f&&f<1&&r(z4(f,e,t,n,i))}function z4(e,t,n,i,r){const a=1-e,s=a*a,o=e*e;return s*a*t+3*s*e*n+3*a*o*i+o*e*r}var cu=(cu=lu(1,1))?cu.getContext("2d"):null;const JS=new on;function B3(e){return function(t,n){if(!cu)return!0;e(cu,t),JS.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:s}=JS;for(let o=r;o<=s;++o)for(let l=i;l<=a;++l)if(cu.isPointInPath(l,o))return!0;return!1}}function L3(e,t){return t.contains(e.x||0,e.y||0)}function dL(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(JS.set(n,i,n+r,i+a))}function hL(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return Tf(t,n,i,r,a)}function Tf(e,t,n,i,r){const{x1:a,y1:s,x2:o,y2:l}=e,f=i-t,d=r-n;let g=0,p=1,y,v,x,E;for(E=0;E<4;++E){if(E===0&&(y=-f,v=-(a-t)),E===1&&(y=f,v=o-t),E===2&&(y=-d,v=-(s-n)),E===3&&(y=d,v=l-n),Math.abs(y)<1e-10&&v<0)return!1;if(x=v/y,y<0){if(x>p)return!1;x>g&&(g=x)}else if(y>0){if(x<g)return!1;x<p&&(p=x)}}return!0}function sd(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ea(e,t){return e??t}function B4(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function aie(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+ea(t.x1,.5)*i,n.y1+ea(t.y1,.5)*r,Math.max(i,r)*ea(t.r1,0),n.x1+ea(t.x2,.5)*i,n.y1+ea(t.y2,.5)*r,Math.max(i,r)*ea(t.r2,.5));else{const s=ea(t.x1,0),o=ea(t.y1,0),l=ea(t.x2,1),f=ea(t.y2,0);if(s===l||o===f||i===r)a=e.createLinearGradient(n.x1+s*i,n.y1+o*r,n.x1+l*i,n.y1+f*r);else{const d=lu(Math.ceil(i),Math.ceil(r)),g=d.getContext("2d");return g.scale(i,r),g.fillStyle=B4(g.createLinearGradient(s,o,l,f),t.stops),g.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return B4(a,t.stops)}function gL(e,t,n){return R3(n)?aie(e,n,t.bounds):n}function By(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=gL(e,t,t.fill),!0):!1}var sie=[];function od(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=gL(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||sie),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function oie(e,t){return e.zindex-t.zindex||e.index-t.index}function U3(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(oie)}function ma(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=U3(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function Ly(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=U3(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function P3(e){return function(t,n,i){ma(n,r=>{(!i||i.intersects(r.bounds))&&pL(e,t,r,r)})}}function uie(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&pL(e,t,n.items[0],n.items)}}function pL(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(sd(t,n),n.fill&&By(t,n,r)&&t.fill(),n.stroke&&od(t,n,r)&&t.stroke()))}function Ub(e){return e=e||Ur,function(t,n,i,r,a,s){return i*=t.pixelRatio,r*=t.pixelRatio,Ly(n,o=>{const l=o.bounds;if(!(l&&!l.contains(a,s)||!l)&&e(t,o,i,r,a,s))return o})}}function fp(e,t){return function(n,i,r,a){var s=Array.isArray(i)?i[0]:i,o=t??s.fill,l=s.stroke&&n.isPointInStroke,f,d;return l&&(f=s.strokeWidth,d=s.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),e(n,i)?!1:o&&n.isPointInPath(r,a)||l&&n.isPointInStroke(r,a)}}function I3(e){return Ub(fp(e))}function Bl(e,t){return"translate("+e+","+t+")"}function q3(e){return"rotate("+e+")"}function lie(e,t){return"scale("+e+","+t+")"}function mL(e){return Bl(e.x||0,e.y||0)}function cie(e){return Bl(e.x||0,e.y||0)+(e.angle?" "+q3(e.angle):"")}function fie(e){return Bl(e.x||0,e.y||0)+(e.angle?" "+q3(e.angle):"")+(e.scaleX||e.scaleY?" "+lie(e.scaleX||1,e.scaleY||1):"")}function H3(e,t,n){function i(s,o){s("transform",cie(o)),s("d",t(null,o))}function r(s,o){return t(cp(s,o.angle),o),oo(s,o).translate(o.x||0,o.y||0)}function a(s,o){var l=o.x||0,f=o.y||0,d=o.angle||0;s.translate(l,f),d&&s.rotate(d*=bu),s.beginPath(),t(s,o),d&&s.rotate(-d),s.translate(-l,-f)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:P3(a),pick:I3(a),isect:n||B3(a)}}var die=H3("arc",Qne);function hie(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,s,o;--r>=0;)e[r].defined!==!1&&(o=Math.abs(e[r][i]-n),o<a&&(a=o,s=e[r]));return s}function gie(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,s;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],s=r*r+a*a,s<n))return e[i];return null}function pie(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function G3(e,t,n){function i(l,f){var d=f.mark.items;d.length&&l("d",t(null,d))}function r(l,f){var d=f.items;return d.length===0?l:(t(cp(l),d),oo(l,d[0]))}function a(l,f){l.beginPath(),t(l,f)}const s=fp(a);function o(l,f,d,g,p,y){var v=f.items,x=f.bounds;return!v||!v.length||x&&!x.contains(p,y)?null:(d*=l.pixelRatio,g*=l.pixelRatio,s(l,v,d,g)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:uie(a),pick:o,isect:L3,tip:n}}var mie=G3("area",Zne,hie);function yie(e,t){var n=t.clip;e.save(),He(n)?(e.beginPath(),n(e),e.clip()):yL(e,t.group)}function yL(e,t){e.beginPath(),j3(t)?zd(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function vL(e){const t=ea(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function vie(e,t){e("transform",mL(t))}function bL(e,t){const n=vL(t);e("d",zd(null,t,n,n))}function bie(e,t){e("class","background"),e("aria-hidden",!0),bL(e,t)}function xie(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?bL(e,t):e("d","")}function Eie(e,t,n){const i=t.clip?z3(n,t,t):null;e("clip-path",i)}function _ie(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),oo(e,t),e.translate(t.x||0,t.y||0)}function bg(e,t,n,i){const r=vL(t);e.beginPath(),zd(e,t,(n||0)+r,(i||0)+r)}const Aie=fp(bg),Sie=fp(bg,!1),wie=fp(bg,!0);function Oie(e,t,n,i){ma(t,r=>{const a=r.x||0,s=r.y||0,o=r.strokeForeground,l=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&l&&(bg(e,r,a,s),sd(e,r),r.fill&&By(e,r,l)&&e.fill(),r.stroke&&!o&&od(e,r,l)&&e.stroke()),e.save(),e.translate(a,s),r.clip&&yL(e,r),n&&n.translate(-a,-s),ma(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(e,f,n,i)}),n&&n.translate(a,s),e.restore(),o&&r.stroke&&l&&(bg(e,r,a,s),sd(e,r),od(e,r,l)&&e.stroke())})}function Cie(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const s=n*e.pixelRatio,o=i*e.pixelRatio;return Ly(t,l=>{let f,d,g;const p=l.bounds;if(p&&!p.contains(r,a))return;d=l.x||0,g=l.y||0;const y=d+(l.width||0),v=g+(l.height||0),x=l.clip;if(x&&(r<d||r>y||a<g||a>v))return;if(e.save(),e.translate(d,g),d=r-d,g=a-g,x&&j3(l)&&!wie(e,l,s,o))return e.restore(),null;const E=l.strokeForeground,A=t.interactive!==!1;return A&&E&&l.stroke&&Sie(e,l,s,o)?(e.restore(),l):(f=Ly(l,S=>Die(S,d,g)?this.pick(S,n,i,d,g):null),!f&&A&&(l.fill||!E&&l.stroke)&&Aie(e,l,s,o)&&(f=l),e.restore(),f||null)})}function Die(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var $ie={type:"group",tag:"g",nested:!1,attr:vie,bound:_ie,draw:Oie,pick:Cie,isect:dL,content:Eie,background:bie,foreground:xie},xg={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Y3(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function X3(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function V3(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Pb(e,t){return e==="center"?t/2:e==="right"?t:0}function Ib(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function Mie(e,t,n){const i=Y3(t,n),r=X3(t,i),a=V3(t,i),s=(t.x||0)-Pb(t.align,r),o=(t.y||0)-Ib(t.baseline,a),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",l,xg["xmlns:xlink"],"xlink:href"),e("transform",Bl(s,o)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function Tie(e,t){const n=t.image,i=X3(t,n),r=V3(t,n),a=(t.x||0)-Pb(t.align,i),s=(t.y||0)-Ib(t.baseline,r);return e.set(a,s,a+i,s+r)}function kie(e,t,n){ma(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=Y3(i,this);let a=X3(i,r),s=V3(i,r);if(a===0||s===0)return;let o=(i.x||0)-Pb(i.align,a),l=(i.y||0)-Ib(i.baseline,s),f,d,g,p;i.aspect!==!1&&(d=r.width/r.height,g=i.width/i.height,d===d&&g===g&&d!==g&&(g<d?(p=a/d,l+=(s-p)/2,s=p):(p=s*d,o+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(sd(e,i),e.globalAlpha=(f=i.opacity)!=null?f:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,o,l,a,s))})}var Fie={type:"image",tag:"image",nested:!1,attr:Mie,bound:Tie,draw:kie,pick:Ub(),isect:Ur,get:Y3,xOffset:Pb,yOffset:Ib},Rie=G3("line",Kne,gie);function Nie(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",fie(t)),e("d",t.path)}function J1(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,s=t.scaleY||1,o=(t.angle||0)*bu,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=ad(n)).path=n),o&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(o),vg(e,l,0,0,a,s),e.rotate(-o),e.translate(-i,-r)):vg(e,l,i,r,a,s)}function jie(e,t){return J1(cp(e,t.angle),t)?e.set(0,0,0,0):oo(e,t,!0)}var zie={type:"path",tag:"path",nested:!1,attr:Nie,bound:jie,draw:P3(J1),pick:I3(J1),isect:B3(J1)};function Bie(e,t){e("d",zd(null,t))}function Lie(e,t){var n,i;return oo(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function L4(e,t){e.beginPath(),zd(e,t)}var Uie={type:"rect",tag:"path",nested:!1,attr:Bie,bound:Lie,draw:P3(L4),pick:I3(L4),isect:dL};function Pie(e,t){e("transform",mL(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Iie(e,t){var n,i;return oo(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function xL(e,t,n){var i,r,a,s;return t.stroke&&od(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,s),!0):!1}function qie(e,t,n){ma(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&xL(e,i,r)&&(sd(e,i),e.stroke())}})}function Hie(e,t,n,i){return e.isPointInStroke?xL(e,t,1)&&e.isPointInStroke(n,i):!1}var Gie={type:"rule",tag:"line",nested:!1,attr:Pie,bound:Iie,draw:qie,pick:Ub(Hie),isect:hL},Yie=H3("shape",Jne),Xie=H3("symbol",eie,L3);const U4=C7();var dr={height:ss,measureWidth:W3,estimateWidth:Uy,width:Uy,canvas:EL};EL(!0);function EL(e){dr.width=e&&cu?W3:Uy}function Uy(e,t){return _L(Eu(e,t),ss(e))}function _L(e,t){return~~(.8*e.length*t)}function W3(e,t){return ss(e)<=0||!(t=Eu(e,t))?0:AL(t,qb(e))}function AL(e,t){const n=`(${t}) ${e}`;let i=U4.get(n);return i===void 0&&(cu.font=t,i=cu.measureText(e).width,U4.set(n,i)),i}function ss(e){return e.fontSize!=null?+e.fontSize||0:11}function xu(e){return e.lineHeight!=null?e.lineHeight:ss(e)+2}function Vie(e){return Ee(e)?e.length>1?e:e[0]:e}function dp(e){return Vie(e.lineBreak&&e.text&&!Ee(e.text)?e.text.split(e.lineBreak):e.text)}function Q3(e){const t=dp(e);return(Ee(t)?t.length-1:0)*xu(e)}function Eu(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Qie(e,n):n}function Wie(e){if(dr.width===W3){const t=qb(e);return n=>AL(n,t)}else if(dr.width===Uy){const t=ss(e);return n=>_L(n,t)}else return t=>dr.width(e,t)}function Qie(e,t){var n=+e.limit,i=Wie(e);if(i(t)<n)return t;var r=e.ellipsis||"…",a=e.dir==="rtl",s=0,o=t.length,l;if(n-=i(r),a){for(;s<o;)l=s+o>>>1,i(t.slice(l))>n?s=l+1:o=l;return r+t.slice(s)}else{for(;s<o;)l=1+(s+o>>>1),i(t.slice(0,l))<n?s=l:o=l-1;return t.slice(0,s)+r}}function hp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function qb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ss(e)+"px "+hp(e,t)}function Z3(e){var t=e.baseline,n=ss(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*xu(e):t==="line-bottom"?.29*n-.5*xu(e):0)}const Zie={left:"start",center:"middle",right:"end"},V0=new on;function Hb(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-Ol,t+=i*Math.cos(r),n+=i*Math.sin(r)),V0.x1=t,V0.y1=n,V0}function Kie(e,t){var n=t.dx||0,i=(t.dy||0)+Z3(t),r=Hb(t),a=r.x1,s=r.y1,o=t.angle||0,l;e("text-anchor",Zie[t.align]||"start"),o?(l=Bl(a,s)+" "+q3(o),(n||i)&&(l+=" "+Bl(n,i))):l=Bl(a+n,s+i),e("transform",l)}function K3(e,t,n){var i=dr.height(t),r=t.align,a=Hb(t),s=a.x1,o=a.y1,l=t.dx||0,f=(t.dy||0)+Z3(t)-Math.round(.8*i),d=dp(t),g;if(Ee(d)?(i+=xu(t)*(d.length-1),g=d.reduce((p,y)=>Math.max(p,dr.width(t,y)),0)):g=dr.width(t,d),r==="center"?l-=g/2:r==="right"&&(l-=g),e.set(l+=s,f+=o,l+g,f+i),t.angle&&!n)e.rotate(t.angle*bu,s,o);else if(n===2)return e.rotatedPoints(t.angle*bu,s,o);return e}function Jie(e,t,n){ma(t,i=>{var r=i.opacity==null?1:i.opacity,a,s,o,l,f,d,g;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=qb(i),e.textAlign=i.align||"left",a=Hb(i),s=a.x1,o=a.y1,i.angle&&(e.save(),e.translate(s,o),e.rotate(i.angle*bu),s=o=0),s+=i.dx||0,o+=(i.dy||0)+Z3(i),d=dp(i),sd(e,i),Ee(d))for(f=xu(i),l=0;l<d.length;++l)g=Eu(i,d[l]),i.fill&&By(e,i,r)&&e.fillText(g,s,o),i.stroke&&od(e,i,r)&&e.strokeText(g,s,o),o+=f;else g=Eu(i,d),i.fill&&By(e,i,r)&&e.fillText(g,s,o),i.stroke&&od(e,i,r)&&e.strokeText(g,s,o);i.angle&&e.restore()}})}function ere(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=Hb(t),o=s.x1,l=s.y1,f=K3(V0,t,1),d=-t.angle*bu,g=Math.cos(d),p=Math.sin(d),y=g*r-p*a+(o-g*o+p*l),v=p*r+g*a+(l-p*o-g*l);return f.contains(y,v)}function tre(e,t){const n=K3(V0,e,2);return Tf(t,n[0],n[1],n[2],n[3])||Tf(t,n[0],n[1],n[4],n[5])||Tf(t,n[4],n[5],n[6],n[7])||Tf(t,n[2],n[3],n[6],n[7])}var nre={type:"text",tag:"text",nested:!1,attr:Kie,bound:K3,draw:Jie,pick:Ub(ere),isect:tre},ire=G3("trail",tie,pie),yr={arc:die,area:mie,group:$ie,image:Fie,line:Rie,path:zie,rect:Uie,rule:Gie,shape:Yie,symbol:Xie,text:nre,trail:ire};function ew(e,t,n){var i=yr[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new on),e,n)}var P4={mark:null};function SL(e,t,n){var i=yr[e.marktype],r=i.bound,a=e.items,s=a&&a.length,o,l,f,d;if(i.nested)return s?f=a[0]:(P4.mark=e,f=P4),d=ew(f,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new on,s)for(o=0,l=a.length;o<l;++o)t.union(ew(a[o],r,n));return e.bounds=t}const rre=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function wL(e,t){return JSON.stringify(e,rre,t)}function OL(e){const t=typeof e=="string"?JSON.parse(e):e;return CL(t)}function CL(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&CL(n[r]);return t&&SL(e),e}class DL{constructor(t){arguments.length?this.root=OL(t):(this.root=I4({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Bb(this.root)])}toJSON(t){return wL(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=I4(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function I4(e,t){const n={bounds:new on,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Jo(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function J3(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function gn(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=Jo(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Tr(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function $L(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Gb(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function are(e,t,n,i){var r=e&&e.mark,a,s;if(r&&(a=yr[r.marktype]).tip){for(s=Gb(t,n),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(r.items,s)}return e}let eD=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||cb(),this._tooltip=n||sre}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),s=Jo(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=are(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,s=a.width(),o=a.height();let l=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,f+=t.y||0;return{x:l,y:f,width:s,height:o,left:l,top:f,right:l+s,bottom:f+o}}};function sre(e,t,n,i){e.element().setAttribute("title",i||"")}class gp{constructor(t){this._el=null,this._bgcolor=null,this._loader=new fL(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(s=>{s&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const ore="keydown",ure="keypress",lre="keyup",ML="dragenter",ey="dragleave",TL="dragover",tw="pointerdown",cre="pointerup",Py="pointermove",ty="pointerout",kL="pointerover",nw="mousedown",fre="mouseup",FL="mousemove",Iy="mouseout",RL="mouseover",qy="click",dre="dblclick",hre="wheel",NL="mousewheel",Hy="touchstart",Gy="touchmove",Yy="touchend",gre=[ore,ure,lre,ML,ey,TL,tw,cre,Py,ty,kL,nw,fre,FL,Iy,RL,qy,dre,hre,NL,Hy,Gy,Yy],iw=Py,W0=Iy,rw=qy;class pp extends eD{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=gre,this.pointermove=H4([Py,FL],[kL,RL],[ty,Iy]),this.dragover=H4([TL],[ML],[ey]),this.pointerout=G4([ty,Iy]),this.dragleave=G4([ey])}initialize(t,n,i){return this._canvas=t&&J3(t,"canvas"),[qy,nw,tw,Py,ty,ey].forEach(r=>q4(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(NL,t)}pointerdown(t){this._down=this._active,this.fire(tw,t)}mousedown(t){this._down=this._active,this.fire(nw,t)}click(t){this._down===this._active&&(this.fire(qy,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Hy,t,!0)}touchmove(t){this.fire(Gy,t,!0)}touchend(t){this.fire(Yy,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===rw&&r&&r.href?this.handleHref(n,r,r.href):(t===iw||t===W0)&&this.handleTooltip(n,r,t!==W0),a)for(let s=0,o=a.length;s<o;++s)a[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(q4(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=Gb(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const s=this.context();return yr[t.marktype].pick.call(this,s,t,n,i,r,a)}}const pre=e=>e===Hy||e===Gy||e===Yy?[Hy,Gy,Yy]:[e];function q4(e,t){pre(t).forEach(n=>mre(e,n))}function mre(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function T0(e,t,n){t.forEach(i=>e.fire(i,n))}function H4(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?T0(this,e,i):((!r||!r.exit)&&T0(this,n,i),this._active=a,T0(this,t,i),T0(this,e,i))}}function G4(e){return function(t){T0(this,e,t),this._active=null}}function yre(){return typeof window<"u"&&window.devicePixelRatio||1}function vre(e,t,n,i,r,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),l=s?yre():r;e.width=t*l,e.height=n*l;for(const f in a)o[f]=a[f];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=l,o.setTransform(l,0,0,l,l*i[0],l*i[1]),e}class Xy extends gp{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new on,this._tempb=new on}initialize(t,n,i,r,a,s){return this._options=s||{},this._canvas=this._options.externalContext?null:lu(1,1,this._options.type),t&&this._canvas&&(Tr(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)vre(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||ne("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,s=this._height,o=this._dirty,l=bre(r,a,s);i.save();const f=this._redraw||o.empty()?(this._redraw=!1,l.expand(1)):xre(i,l.intersect(o),r);return this.clear(-r[0],-r[1],a,s),this.draw(i,t,f,n),i.restore(),o.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=yr[n.marktype];n.clip&&yie(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,s=this.context();a.type!=="pdf"&&!a.externalContext&&s.clearRect(t,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const bre=(e,t,n)=>new on().set(0,0,t,n).translate(-e[0],-e[1]);function xre(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class jL extends eD{constructor(t,n){super(t,n);const i=this;i._hrefHandler=tA(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=tA(i,(r,a)=>{i.handleTooltip(r,a,r.type!==W0)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(rw,this._hrefHandler),r.removeEventListener(iw,this._tooltipHandler),r.removeEventListener(W0,this._tooltipHandler)),this._svg=r=t&&J3(t,"svg"),r&&(r.addEventListener(rw,this._hrefHandler),r.addEventListener(iw,this._tooltipHandler),r.addEventListener(W0,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:tA(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const tA=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},zL="aria-hidden",tD="aria-label",nD="role",iD="aria-roledescription",BL="graphics-object",rD="graphics-symbol",LL=(e,t,n)=>({[nD]:e,[iD]:t,[tD]:n||void 0}),Ere=ga(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Y4={axis:{desc:"axis",caption:Sre},legend:{desc:"legend",caption:wre},"title-text":{desc:"title",caption:e=>`Title text '${V4(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${V4(e)}'`}},X4={ariaRole:nD,ariaRoleDescription:iD,description:tD};function UL(e,t){const n=t.aria===!1;if(e(zL,n||void 0),n||t.description==null)for(const i in X4)e(X4[i],void 0);else{const i=t.mark.marktype;e(tD,t.description),e(nD,t.ariaRole||(i==="group"?BL:rD)),e(iD,t.ariaRoleDescription||`${i} mark`)}}function PL(e){return e.aria===!1?{[zL]:!0}:Ere[e.role]?null:Y4[e.role]?Are(e,Y4[e.role]):_re(e)}function _re(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return LL(n?BL:rD,`${t} mark container`,e.description)}function Are(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return LL(t.role||rD,t.desc,n.description||i(n))}catch{return null}}function V4(e){return De(e.text).join(" ")}function Sre(e){const t=e.datum,n=e.orient,i=t.title?IL(e):null,r=e.context,a=r.scales[t.scale].value,s=r.dataflow.locale(),o=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${rd(o)?"discrete":o} scale with ${tL(s,a,e)}`}function wre(e){const t=e.datum,n=t.title?IL(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),s=e.context,o=s.scales[r[a[0]]].value,l=s.dataflow.locale();return Cre(i)+(n?` titled '${n}'`:"")+` for ${Ore(a)} with ${tL(l,o,e)}`}function IL(e){try{return De(et(e.items).items[0].text).join(" ")}catch{return null}}function Ore(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+et(e)}function Cre(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const qL=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Dre=e=>qL(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function aD(){let e="",t="",n="";const i=[],r=()=>t=n="",a=l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)},s=(l,f)=>(f!=null&&(t+=` ${l}="${Dre(f)}"`),o),o={open(l){a(l),t="<"+l;for(var f=arguments.length,d=new Array(f>1?f-1:0),g=1;g<f;g++)d[g-1]=arguments[g];for(const p of d)for(const y in p)s(y,p[y]);return o},close(){const l=i.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,r(),o},attr:s,text:l=>(n+=qL(l),o),toString:()=>e};return o}const HL=e=>GL(aD(),e)+"";function GL(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):GL(e,i)}return e.close()}const Vy={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Wy={blend:"mix-blend-mode"},YL={fill:"none","stroke-miterlimit":10},u0=0,W4="http://www.w3.org/2000/xmlns/",hn=xg.xmlns;class sD extends gp{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=gn(t,0,"svg",hn),this._svg.setAttributeNS(W4,"xmlns",hn),this._svg.setAttributeNS(W4,"xmlns:xlink",xg["xmlns:xlink"]),this._svg.setAttribute("version",xg.version),this._svg.setAttribute("class","marks"),Tr(t,1),this._root=gn(this._svg,u0,"g",hn),eu(this._root,YL),Tr(this._svg,u0+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(eu(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=gn(t,u0,"rect",hn),eu(i,{width:this._width,height:this._height,fill:n}));const r=HL(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Tr(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,s,o,l,f;for(o=0,l=t.length;o<l;++o)if(i=t[o],r=i.mark,r.marktype!==a&&(a=r.marktype,s=yr[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,Q4(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(s,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,Q4(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,s=n.marktype,o=yr[s],l=n.interactive===!1?"none":null,f=o.tag==="g",d=Z4(n,t,i,"g",a);if(s!=="group"&&r!=null&&!r.includes(s))return Tr(d,0),n._svg;d.setAttribute("class",$L(n));const g=PL(n);for(const x in g)hi(d,x,g[x]);f||hi(d,"pointer-events",l),hi(d,"clip-path",n.clip?z3(this,n,n.group):null);let p=null,y=0;const v=x=>{const E=this.isDirty(x),A=Z4(x,d,p,o.tag,a);E&&(this._update(o,A,x),f&&Tre(this,A,x,r)),p=A,++y};return o.nested?n.items.length&&v(n.items[0]):ma(n,v),Tr(d,y),d}_update(t,n,i){Vs=n,Qn=n.__values__,UL(Q0,i),t.attr(Q0,i,this);const r=Fre[t.type];r&&r.call(this,t,n,i),Vs&&this.style(Vs,i)}style(t,n){if(n!=null){for(const i in Vy){let r=i==="font"?hp(n):n[i];if(r===Qn[i])continue;const a=Vy[i];r==null?t.removeAttribute(a):(R3(r)&&(r=iL(r,this._defs.gradient,XL())),t.setAttribute(a,r+"")),Qn[i]=r}for(const i in Wy)ny(t,Wy[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=gn(t,u0+1,"defs",hn)),r=$re(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=gn(t,u0+1,"defs",hn)),r=Mre(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Tr(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Q4(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function $re(e,t,n){let i,r,a;if(t.gradient==="radial"){let s=gn(e,n++,"pattern",hn);eu(s,{id:zy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=gn(s,0,"rect",hn),eu(s,{width:1,height:1,fill:`url(${XL()}#${t.id})`}),e=gn(e,n++,"radialGradient",hn),eu(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=gn(e,n++,"linearGradient",hn),eu(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=gn(e,i,"stop",hn),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Tr(e,i),n}function Mre(e,t,n){let i;return e=gn(e,n,"clipPath",hn),e.setAttribute("id",t.id),t.path?(i=gn(e,0,"path",hn),i.setAttribute("d",t.path)):(i=gn(e,0,"rect",hn),eu(i,{x:0,y:0,width:t.width,height:t.height})),Tr(e,1),n+1}function Tre(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;ma(n,s=>{r=e.mark(t,s,r,i),++a}),Tr(t,1+a)}function Z4(e,t,n,i,r){let a=e._svg,s;if(!a&&(s=t.ownerDocument,a=Jo(s,i,hn),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const o=Jo(s,"path",hn);a.appendChild(o),o.__data__=e;const l=Jo(s,"g",hn);a.appendChild(l),l.__data__=e;const f=Jo(s,"path",hn);a.appendChild(f),f.__data__=e,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||kre(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function kre(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Vs=null,Qn=null;const Fre={group(e,t,n){const i=Vs=t.childNodes[2];Qn=i.__values__,e.foreground(Q0,n,this),Qn=t.__values__,Vs=t.childNodes[1],e.content(Q0,n,this);const r=Vs=t.childNodes[0];e.background(Q0,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==Qn.events&&(hi(i,"pointer-events",a),hi(r,"pointer-events",a),Qn.events=a),n.strokeForeground&&n.stroke){const s=n.fill;hi(i,"display",null),this.style(r,n),hi(r,"stroke",null),s&&(n.fill=null),Qn=i.__values__,this.style(i,n),s&&(n.fill=s),Vs=null}else hi(i,"display","none")},image(e,t,n){n.smooth===!1?(ny(t,"image-rendering","optimizeSpeed"),ny(t,"image-rendering","pixelated")):ny(t,"image-rendering",null)},text(e,t,n){const i=dp(n);let r,a,s,o;Ee(i)?(a=i.map(l=>Eu(n,l)),r=a.join(`
`),r!==Qn.text&&(Tr(t,0),s=t.ownerDocument,o=xu(n),a.forEach((l,f)=>{const d=Jo(s,"tspan",hn);d.__data__=n,d.textContent=l,f&&(d.setAttribute("x",0),d.setAttribute("dy",o)),t.appendChild(d)}),Qn.text=r)):(a=Eu(n,i),a!==Qn.text&&(t.textContent=a,Qn.text=a)),hi(t,"font-family",hp(n)),hi(t,"font-size",ss(n)+"px"),hi(t,"font-style",n.fontStyle),hi(t,"font-variant",n.fontVariant),hi(t,"font-weight",n.fontWeight)}};function Q0(e,t,n){t!==Qn[e]&&(n?Rre(Vs,e,t,n):hi(Vs,e,t),Qn[e]=t)}function ny(e,t,n){n!==Qn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Qn[t]=n)}function eu(e,t){for(const n in t)hi(e,n,t[n])}function hi(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Rre(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function XL(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class VL extends gp{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=aD();n.open("svg",Ie({},xg,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",YL,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=yr[n.marktype],r=i.tag,a=[UL,i.attr];t.open("g",{class:$L(n),"clip-path":n.clip?z3(this,n,n.group):null},PL(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=o=>{const l=this.href(o);if(l&&t.open("a",l),t.open(r,this.attr(n,o,a,r!=="g"?r:null)),r==="text"){const f=dp(o);if(Ee(f)){const d={x:0,dy:xu(o)};for(let g=0;g<f.length;++g)t.open("tspan",g?d:null).text(Eu(o,f[g])).close()}else t.text(Eu(o,f))}else if(r==="g"){const f=o.strokeForeground,d=o.fill,g=o.stroke;f&&g&&(o.stroke=null),t.open("path",this.attr(n,o,i.background,"bgrect")).close(),t.open("g",this.attr(n,o,i.content)),ma(o,p=>this.mark(t,p)),t.close(),f&&g?(d&&(o.fill=null),o.stroke=g,t.open("path",this.attr(n,o,i.foreground,"bgrect")).close(),d&&(o.fill=d)):t.open("path",this.attr(n,o,i.foreground,"bgfore")).close()}t.close(),l&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):ma(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},s=(o,l,f,d)=>{a[d||o]=l};return Array.isArray(i)?i.forEach(o=>o(s,n,this)):i(s,n,this),r&&Nre(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const s=n[a],o=s.stops;s.gradient==="radial"?(t.open("pattern",{id:zy+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:a,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<o.length;++l)t.open("stop",{offset:o[l].offset,"stop-color":o[l].color}).close();t.close()}for(const a in i){const s=i[a];t.open("clipPath",{id:a}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function Nre(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=hp(t),e["font-size"]=ss(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in Vy){let o=t[s];const l=Vy[s];o==="transparent"&&(l==="fill"||l==="stroke")||o!=null&&(R3(o)&&(o=iL(o,r.gradient,"")),e[l]=o)}for(const s in Wy){const o=t[s];o!=null&&(a=a||[],a.push(`${Wy[s]}: ${o};`))}return a&&(e.style=a.join(" ")),e}const na={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function jre(e){na.svgMarkTypes=e.svgMarkTypes??["text"],na.svgOnTop=e.svgOnTop??!0,na.debug=e.debug??!1}class aw extends gp{constructor(t){super(t),this._svgRenderer=new sD(t),this._canvasRenderer=new Xy(t)}initialize(t,n,i,r,a){this._root_el=gn(t,0,"div");const s=gn(this._root_el,0,"div"),o=gn(this._root_el,1,"div");return this._root_el.style.position="relative",na.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=na.svgOnTop?o:s,this._canvasEl=na.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return na.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!na.svgMarkTypes.includes(a));this._svgRenderer.render(t,na.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return na.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class WL extends pp{constructor(t,n){super(t,n)}initialize(t,n,i){const r=gn(gn(t,0,"div"),na.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const QL="canvas",ZL="hybrid",KL="png",JL="svg",eU="none",tu={Canvas:QL,PNG:KL,SVG:JL,Hybrid:ZL,None:eU},Vl={};Vl[QL]=Vl[KL]={renderer:Xy,headless:Xy,handler:pp};Vl[JL]={renderer:sD,headless:VL,handler:jL};Vl[ZL]={renderer:aw,headless:aw,handler:WL};Vl[eU]={};function Yb(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Vl[e]=t,this):Vl[e]}function tU(e,t,n){const i=[],r=new on().union(t),a=e.marktype;return a?nU(e,r,n,i):a==="group"?iU(e,r,n,i):ne("Intersect scene must be mark node or group item.")}function nU(e,t,n,i){if(zre(e,t,n)){const r=e.items,a=e.marktype,s=r.length;let o=0;if(a==="group")for(;o<s;++o)iU(r[o],t,n,i);else for(const l=yr[a].isect;o<s;++o){const f=r[o];rU(f,t,l)&&i.push(f)}}return i}function zre(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function iU(e,t,n,i){n&&n(e.mark)&&rU(e,t,yr.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const s=e.x||0,o=e.y||0;t.translate(-s,-o);for(let l=0;l<a;++l)nU(r[l],t,n,i);t.translate(s,o)}return i}function rU(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const nA=new on;function aU(e){const t=e.clip;if(He(t))t(cp(nA.clear()));else if(t)nA.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(nA)}const Bre=1e-9;function oD(e,t,n){return e===t?!0:n==="path"?sU(e,t):e instanceof Date&&t instanceof Date?+e==+t:hu(e)&&hu(t)?Math.abs(e-t)<=Bre:!e||!t||!je(e)&&!je(t)?e==t:Lre(e,t)}function sU(e,t){return oD(ad(e),ad(t))}function Lre(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!oD(e[r],t[r],r))return!1;return typeof e==typeof t}function Ure(){cL(),cne()}const ud="top",oa="left",ua="right",_u="bottom",Pre="top-left",Ire="top-right",qre="bottom-left",Hre="bottom-right",uD="start",sw="middle",gi="end",Gre="x",Yre="y",Xb="group",lD="axis",cD="title",Xre="frame",Vre="scope",fD="legend",oU="row-header",uU="row-footer",lU="row-title",cU="column-header",fU="column-footer",dU="column-title",Wre="padding",Qre="symbol",hU="fit",gU="fit-x",pU="fit-y",Zre="pad",dD="none",g1="all",ow="each",hD="flush",nu="column",iu="row";function mU(e){J.call(this,null,e)}fe(mU,J,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=yr[r],s=a.bound;let o=i.bounds,l;if(a.nested)i.items.length&&n.dirty(i.items[0]),o=p1(i,s),i.items.forEach(f=>{f.bounds.clear().union(o)});else if(r===Xb||e.modified())switch(t.visit(t.MOD,f=>n.dirty(f)),o.clear(),i.items.forEach(f=>o.union(p1(f,s))),i.role){case lD:case fD:case cD:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,f=>{o.union(p1(f,s))}),t.visit(t.MOD,f=>{l=l||o.alignsWith(f.bounds),n.dirty(f),o.union(p1(f,s))}),l&&(o.clear(),i.items.forEach(f=>o.union(f.bounds)));return aU(i),t.modifies("bounds")}});function p1(e,t,n){return t(e.bounds.clear(),e,n)}const K4=":vega_identifier:";function gD(e){J.call(this,0,e)}gD.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};fe(gD,J,{transform(e,t){const n=Kre(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function Kre(e){return e._signals[K4]||(e._signals[K4]=e.add(0))}function yU(e){J.call(this,null,e)}fe(yU,J,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Jre(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===Xb?Bb:zb;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Jre(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function vU(e){J.call(this,null,e)}const J4={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!bU(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},bU=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),eR=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(bU(r,a=e[n].bounds,t))return!0},eae=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},tae=(e,t,n)=>{var i=e.range(),r=new on;return t===ud||t===_u?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},tR=e=>(e.forEach(t=>t.opacity=1),e),nR=(e,t)=>e.reflow(t.modified()).modifies("opacity");fe(vU,J,{transform(e,t){const n=J4[e.method]||J4.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,s;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(tR(r),t=nR(t,e)),t;if(r=r.filter(eae),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=tR(r),t=nR(t,e),a.length>=3&&eR(a,i)){do a=n(a,i);while(a.length>=3&&eR(a,i));a.length<3&&!et(r).opacity&&(a.length>1&&(et(a).opacity=0),et(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=tae(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{s(l)||(l.opacity=0)}));const o=a[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&o.union(l.bounds)}),t}});function xU(e){J.call(this,null,e)}fe(xU,J,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Wn=new on;function kf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function nae(e){var t=e.items[0].orient;return t===oa||t===ua}function iae(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function rae(e,t,n,i){var r=t.items[0],a=r.datum,s=r.translate!=null?r.translate:.5,o=r.orient,l=iae(a),f=r.range,d=r.offset,g=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[l[2]].items[0],x=r.titlePadding,E=r.bounds,A=v&&Q3(v),S=0,w=0,D,O;switch(Wn.clear().union(E),E.clear(),(D=l[0])>-1&&E.union(r.items[D].bounds),(D=l[1])>-1&&E.union(r.items[D].bounds),o){case ud:S=g||0,w=-d,O=Math.max(p,Math.min(y,-E.y1)),E.add(0,-O).add(f,0),v&&m1(e,v,O,x,A,0,-1,E);break;case oa:S=-d,w=g||0,O=Math.max(p,Math.min(y,-E.x1)),E.add(-O,0).add(0,f),v&&m1(e,v,O,x,A,1,-1,E);break;case ua:S=n+d,w=g||0,O=Math.max(p,Math.min(y,E.x2)),E.add(0,0).add(O,f),v&&m1(e,v,O,x,A,1,1,E);break;case _u:S=g||0,w=i+d,O=Math.max(p,Math.min(y,E.y2)),E.add(0,0).add(f,O),v&&m1(e,v,O,x,0,0,1,E);break;default:S=r.x,w=r.y}return oo(E.translate(S,w),r),kf(r,"x",S+s)|kf(r,"y",w+s)&&(r.bounds=Wn,e.dirty(r),r.bounds=E,e.dirty(r)),r.mark.bounds.clear().union(E)}function m1(e,t,n,i,r,a,s,o){const l=t.bounds;if(t.auto){const f=s*(n+r+i);let d=0,g=0;e.dirty(t),a?d=(t.x||0)-(t.x=f):g=(t.y||0)-(t.y=f),t.mark.bounds.clear().union(l.translate(-d,-g)),e.dirty(t)}o.union(l)}const iR=(e,t)=>Math.floor(Math.min(e,t)),rR=(e,t)=>Math.ceil(Math.max(e,t));function aae(e){var t=e.items,n=t.length,i=0,r,a;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===Xb)switch(r.role){case lD:case fD:case cD:break;case oU:s.rowheaders.push(...a);break;case uU:s.rowfooters.push(...a);break;case cU:s.colheaders.push(...a);break;case fU:s.colfooters.push(...a);break;case lU:s.rowtitle=a[0];break;case dU:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}function sae(e){return new on().set(0,0,e.width||0,e.height||0)}function oae(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function jt(e,t,n){const i=je(e)?e[t]:e;return i??(n!==void 0?n:0)}function aR(e){return e<0?Math.ceil(-e):0}function EU(e,t,n){var i=!n.nodirty,r=n.bounds===hD?sae:oae,a=Wn.set(0,0,0,0),s=jt(n.align,nu),o=jt(n.align,iu),l=jt(n.padding,nu),f=jt(n.padding,iu),d=n.columns||t.length,g=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),x=0,E=Array(p),A=Array(g),S=0,w=Array(p),D=Array(p),O=Array(p),M,C,k,N,L,B,V,G,P,j,F;for(C=0;C<d;++C)v[C]=0;for(C=0;C<g;++C)A[C]=0;for(C=0;C<p;++C)B=t[C],L=O[C]=r(B),B.x=B.x||0,w[C]=0,B.y=B.y||0,D[C]=0,k=C%d,N=~~(C/d),x=Math.max(x,V=Math.ceil(L.x2)),S=Math.max(S,G=Math.ceil(L.y2)),v[k]=Math.max(v[k],V),A[N]=Math.max(A[N],G),y[C]=l+aR(L.x1),E[C]=f+aR(L.y1),i&&e.dirty(t[C]);for(C=0;C<p;++C)C%d===0&&(y[C]=0),C<d&&(E[C]=0);if(s===ow)for(k=1;k<d;++k){for(F=0,C=k;C<p;C+=d)F<y[C]&&(F=y[C]);for(C=k;C<p;C+=d)y[C]=F+v[k-1]}else if(s===g1){for(F=0,C=0;C<p;++C)C%d&&F<y[C]&&(F=y[C]);for(C=0;C<p;++C)C%d&&(y[C]=F+x)}else for(s=!1,k=1;k<d;++k)for(C=k;C<p;C+=d)y[C]+=v[k-1];if(o===ow)for(N=1;N<g;++N){for(F=0,C=N*d,M=C+d;C<M;++C)F<E[C]&&(F=E[C]);for(C=N*d;C<M;++C)E[C]=F+A[N-1]}else if(o===g1){for(F=0,C=d;C<p;++C)F<E[C]&&(F=E[C]);for(C=d;C<p;++C)E[C]=F+S}else for(o=!1,N=1;N<g;++N)for(C=N*d,M=C+d;C<M;++C)E[C]+=A[N-1];for(P=0,C=0;C<p;++C)P=y[C]+(C%d?P:0),w[C]+=P-t[C].x;for(k=0;k<d;++k)for(j=0,C=k;C<p;C+=d)j+=E[C],D[C]+=j-t[C].y;if(s&&jt(n.center,nu)&&g>1)for(C=0;C<p;++C)L=s===g1?x:v[C%d],P=L-O[C].x2-t[C].x-w[C],P>0&&(w[C]+=P/2);if(o&&jt(n.center,iu)&&d!==1)for(C=0;C<p;++C)L=o===g1?S:A[~~(C/d)],j=L-O[C].y2-t[C].y-D[C],j>0&&(D[C]+=j/2);for(C=0;C<p;++C)a.union(O[C].translate(w[C],D[C]));switch(P=jt(n.anchor,Gre),j=jt(n.anchor,Yre),jt(n.anchor,nu)){case gi:P-=a.width();break;case sw:P-=a.width()/2}switch(jt(n.anchor,iu)){case gi:j-=a.height();break;case sw:j-=a.height()/2}for(P=Math.round(P),j=Math.round(j),a.clear(),C=0;C<p;++C)t[C].mark.bounds.clear();for(C=0;C<p;++C)B=t[C],B.x+=w[C]+=P,B.y+=D[C]+=j,a.union(B.mark.bounds.union(B.bounds.translate(w[C],D[C]))),i&&e.dirty(B);return a}function uae(e,t,n){var i=aae(t),r=i.marks,a=n.bounds===hD?lae:cae,s=n.offset,o=n.columns||r.length,l=o<=0?1:Math.ceil(r.length/o),f=l*o,d,g,p,y,v,x,E;const A=EU(e,r,n);A.empty()&&A.set(0,0,0,0),i.rowheaders&&(x=jt(n.headerBand,iu,null),d=y1(e,i.rowheaders,r,o,l,-jt(s,"rowHeader"),iR,0,a,"x1",0,o,1,x)),i.colheaders&&(x=jt(n.headerBand,nu,null),g=y1(e,i.colheaders,r,o,o,-jt(s,"columnHeader"),iR,1,a,"y1",0,1,o,x)),i.rowfooters&&(x=jt(n.footerBand,iu,null),p=y1(e,i.rowfooters,r,o,l,jt(s,"rowFooter"),rR,0,a,"x2",o-1,o,1,x)),i.colfooters&&(x=jt(n.footerBand,nu,null),y=y1(e,i.colfooters,r,o,o,jt(s,"columnFooter"),rR,1,a,"y2",f-o,1,o,x)),i.rowtitle&&(v=jt(n.titleAnchor,iu),E=jt(s,"rowTitle"),E=v===gi?p+E:d-E,x=jt(n.titleBand,iu,.5),sR(e,i.rowtitle,E,0,A,x)),i.coltitle&&(v=jt(n.titleAnchor,nu),E=jt(s,"columnTitle"),E=v===gi?y+E:g-E,x=jt(n.titleBand,nu,.5),sR(e,i.coltitle,E,1,A,x))}function lae(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function cae(e,t){return e.bounds[t]}function y1(e,t,n,i,r,a,s,o,l,f,d,g,p,y){var v=n.length,x=0,E=0,A,S,w,D,O,M,C,k,N;if(!v)return x;for(A=d;A<v;A+=g)n[A]&&(x=s(x,l(n[A],f)));if(!t.length)return x;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),x+=a,S=0,D=t.length;S<D;++S)e.dirty(t[S]),t[S].mark.bounds.clear();for(A=d,S=0,D=t.length;S<D;++S,A+=g){for(M=t[S],O=M.mark.bounds,w=A;w>=0&&(C=n[w])==null;w-=p);o?(k=y==null?C.x:Math.round(C.bounds.x1+y*C.bounds.width()),N=x):(k=x,N=y==null?C.y:Math.round(C.bounds.y1+y*C.bounds.height())),O.union(M.bounds.translate(k-(M.x||0),N-(M.y||0))),M.x=k,M.y=N,e.dirty(M),E=s(E,O[f])}return E}function sR(e,t,n,i,r,a){if(t){e.dirty(t);var s=n,o=n;i?s=Math.round(r.x1+a*r.width()):o=Math.round(r.y1+a*r.height()),t.bounds.translate(s-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=o,e.dirty(t)}}function fae(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function dae(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function hae(e,t,n,i,r,a,s){const o=fae(n,t),l=dae(e,o("offset",0)),f=o("anchor",uD),d=f===gi?1:f===sw?.5:0,g={align:ow,bounds:o("bounds",hD),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case oa:g.anchor={x:Math.floor(i.x1)-l,column:gi,y:d*(s||i.height()+2*i.y1),row:f};break;case ua:g.anchor={x:Math.ceil(i.x2)+l,y:d*(s||i.height()+2*i.y1),row:f};break;case ud:g.anchor={y:Math.floor(r.y1)-l,row:gi,x:d*(a||r.width()+2*r.x1),column:f};break;case _u:g.anchor={y:Math.ceil(r.y2)+l,x:d*(a||r.width()+2*r.x1),column:f};break;case Pre:g.anchor={x:l,y:l};break;case Ire:g.anchor={x:a-l,y:l,column:gi};break;case qre:g.anchor={x:l,y:s-l,row:gi};break;case Hre:g.anchor={x:a-l,y:s-l,column:gi,row:gi};break}return g}function gae(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,s=n.x,o=n.y,l,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),mae(e,n,n.items[0].items[0]),a=pae(n,a),l=2*n.padding,f=2*n.padding,a.empty()||(l=Math.ceil(a.width()+l),f=Math.ceil(a.height()+f)),i.type===Qre&&yae(n.items[0].items[0].items[0].items),r!==dD&&(n.x=s=0,n.y=o=0),n.width=l,n.height=f,oo(a.set(s,o,s+l,o+f),n),n.mark.bounds.clear().union(a),n}function pae(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function mae(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&l0(e,n,r,a);else{var s=t.items[1].items[0],o=s.anchor,l=t.titlePadding||0,f=i-s.x,d=i-s.y;switch(s.orient){case oa:r+=Math.ceil(s.bounds.width())+l;break;case ua:case _u:break;default:a+=s.bounds.height()+l}switch((r||a)&&l0(e,n,r,a),s.orient){case oa:d+=bf(t,n,s,o,1,1);break;case ua:f+=bf(t,n,s,gi,0,0)+l,d+=bf(t,n,s,o,1,1);break;case _u:f+=bf(t,n,s,o,0,0),d+=bf(t,n,s,gi,-1,0,1)+l;break;default:f+=bf(t,n,s,o,0,0)}(f||d)&&l0(e,s,f,d),(f=Math.round(s.bounds.x1-i))<0&&(l0(e,n,-f,0),l0(e,s,-f,0))}}function bf(e,t,n,i,r,a,s){const o=e.datum.type!=="symbol",l=n.datum.vgrad,f=o&&(a||!l)&&!s?t.items[0]:t,d=f.bounds[r?"y2":"x2"]-e.padding,g=l&&a?d:0,p=l&&a?0:d,y=r<=0?0:Q3(n);return Math.round(i===uD?g:i===gi?p-y:.5*(d-y))}function l0(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function yae(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function vae(e,t,n,i,r){var a=t.items[0],s=a.frame,o=a.orient,l=a.anchor,f=a.offset,d=a.padding,g=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=o===oa||o===ua?i:n,v=0,x=0,E=0,A=0,S=0,w;if(s!==Xb?o===oa?(v=r.y2,y=r.y1):o===ua?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):o===oa&&(v=i,y=0),w=l===uD?v:l===gi?y:(v+y)/2,p&&p.text){switch(o){case ud:case _u:S=g.bounds.height()+d;break;case oa:A=g.bounds.width()+d;break;case ua:A=-g.bounds.width()-d;break}Wn.clear().union(p.bounds),Wn.translate(A-(p.x||0),S-(p.y||0)),kf(p,"x",A)|kf(p,"y",S)&&(e.dirty(p),p.bounds.clear().union(Wn),p.mark.bounds.clear().union(Wn),e.dirty(p)),Wn.clear().union(p.bounds)}else Wn.clear();switch(Wn.union(g.bounds),o){case ud:x=w,E=r.y1-Wn.height()-f;break;case oa:x=r.x1-Wn.width()-f,E=w;break;case ua:x=r.x2+Wn.width()+f,E=w;break;case _u:x=w,E=r.y2+f;break;default:x=a.x,E=a.y}return kf(a,"x",x)|kf(a,"y",E)&&(Wn.translate(x,E),e.dirty(a),a.bounds.clear().union(Wn),t.bounds.clear().union(Wn),e.dirty(a)),a.bounds}function _U(e){J.call(this,null,e)}fe(_U,J,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&uae(n,i,e.layout),xae(n,i,e)}),bae(e.mark.group)?t.reflow():t}});function bae(e){return e&&e.mark.role!=="legend-entry"}function xae(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=new on().set(0,0,r,a),o=s.clone(),l=s.clone(),f=[],d,g,p,y,v,x;for(v=0,x=i.length;v<x;++v)switch(g=i[v],g.role){case lD:y=nae(g)?o:l,y.union(rae(e,g,r,a));break;case cD:d=g;break;case fD:f.push(gae(e,g));break;case Xre:case Vre:case oU:case uU:case lU:case cU:case fU:case dU:o.union(g.bounds),l.union(g.bounds);break;default:s.union(g.bounds)}if(f.length){const E={};f.forEach(A=>{p=A.orient||ua,p!==dD&&(E[p]||(E[p]=[])).push(A)});for(const A in E){const S=E[A];EU(e,S,hae(S,A,n.legends,o,l,r,a))}f.forEach(A=>{const S=A.bounds;if(S.equals(A._bounds)||(A.bounds=A._bounds,e.dirty(A),A.bounds=S,e.dirty(A)),n.autosize&&(n.autosize.type===hU||n.autosize.type===gU||n.autosize.type===pU))switch(A.orient){case oa:case ua:s.add(S.x1,0).add(S.x2,0);break;case ud:case _u:s.add(0,S.y1).add(0,S.y2)}else s.union(S)})}s.union(o).union(l),d&&s.union(vae(e,d,r,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),Eae(e,t,s,n)}function Eae(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let s=e._width,o=e._height,l=Math.max(0,t.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),g=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-l)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===Wre){const v=e.padding();s-=v.left+v.right,o-=v.top+v.bottom}a===dD?(f=0,g=0,l=s,d=o):a===hU?(l=Math.max(0,s-f-p),d=Math.max(0,o-g-y)):a===gU?(l=Math.max(0,s-f-p),o=d+g+y):a===pU?(s=l+f+p,d=Math.max(0,o-g-y)):a===Zre&&(s=l+f+p,o=d+g+y),e._resizeView(s,o,l,d,[f,g],r.resize)}const _ae=Object.freeze(Object.defineProperty({__proto__:null,bound:mU,identifier:gD,mark:yU,overlap:vU,render:xU,viewlayout:_U},Symbol.toStringTag,{value:"Module"}));function AU(e){J.call(this,null,e)}fe(AU,J,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,o=k3(a,s,e.minstep),l=e.format||QB(n,a,o,e.formatSpecifier,e.formatType,!!e.values),f=e.values?WB(a,e.values,o):F3(a,o);return r&&(i.rem=r),r=f.map((d,g)=>ht({index:g/(f.length-1||1),value:d,label:l(d)})),e.extra&&r.length&&r.push(ht({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function SU(e){J.call(this,null,e)}function Aae(){return ht({})}function Sae(e){const t=Dd().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}fe(SU,J,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||Aae,a=e.key||we,s=this.value;return Ee(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(a))&&ne("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=Sae(a)),t.visit(t.ADD,o=>{const l=a(o);let f=s.get(l);f?f.exit?(s.empty--,i.add.push(f)):i.mod.push(f):(f=r(o),s.set(l,f),i.add.push(f)),f.datum=o,f.exit=!1}),t.visit(t.MOD,o=>{const l=a(o),f=s.get(l);f&&(f.datum=o,i.mod.push(f))}),t.visit(t.REM,o=>{const l=a(o),f=s.get(l);o===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function wU(e){J.call(this,null,e)}fe(wU,J,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(Ee(a))if(n.changed()||a.every(g=>r[g]))a=a[0],n.encode=null;else return t.StopPropagation;var s=a==="enter",o=r.update||qo,l=r.enter||qo,f=r.exit||qo,d=(a&&!s?r[a]:o)||qo;if(t.changed(t.ADD)&&(t.visit(t.ADD,g=>{l(g,e),o(g,e)}),n.modifies(l.output),n.modifies(o.output),d!==qo&&d!==o&&(t.visit(t.ADD,g=>{d(g,e)}),n.modifies(d.output))),t.changed(t.REM)&&f!==qo&&(t.visit(t.REM,g=>{f(g,e)}),n.modifies(f.output)),s||d!==qo){const g=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(g,p=>{const y=l(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(l.output)):t.visit(g,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function OU(e){J.call(this,[],e)}fe(OU,J,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||V1,s=e.scale,o=+e.limit,l=k3(s,e.count==null?5:e.count,e.minstep),f=!!e.values||a===V1,d=e.format||eL(n,s,l,a,e.formatSpecifier,e.formatType,f),g=e.values||JB(s,l),p,y,v,x,E;return r&&(i.rem=r),a===V1?(o&&g.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=g.slice(0,o-1),E=!0):r=g,He(v=e.size)?(!e.values&&s(r[0])===0&&(r=r.slice(1)),x=r.reduce((A,S)=>Math.max(A,v(S,e)),0)):v=ui(x=v||8),r=r.map((A,S)=>ht({index:S,label:d(A,S,r),value:A,offset:x,size:v(A,e)})),E&&(E=g[r.length],r.push(ht({index:r.length,label:`…${g.length-r.length} entries`,value:E,offset:x,size:v(E,e)})))):a===Zte?(p=s.domain(),y=YB(s,p[0],et(p)),g.length<3&&!e.values&&p[0]!==et(p)&&(g=[p[0],et(p)]),r=g.map((A,S)=>ht({index:S,label:d(A,S,g),value:A,perc:y(A)}))):(v=g.length-1,y=une(s),r=g.map((A,S)=>ht({index:S,label:d(A,S,g),value:A,perc:S?y(A):0,perc2:S===v?1:y(g[S+1])}))),i.source=r,i.add=r,this.value=r,i}});const wae=e=>e.source.x,Oae=e=>e.source.y,Cae=e=>e.target.x,Dae=e=>e.target.y;function pD(e){J.call(this,{},e)}pD.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};fe(pD,J,{transform(e,t){var n=e.sourceX||wae,i=e.sourceY||Oae,r=e.targetX||Cae,a=e.targetY||Dae,s=e.as||"path",o=e.orient||"vertical",l=e.shape||"line",f=oR.get(l+"-"+o)||oR.get(l);return f||ne("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[s]=f(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(s)}});const CU=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,$ae=(e,t,n,i)=>CU(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),DU=(e,t,n,i)=>{var r=n-e,a=i-t,s=Math.hypot(r,a)/2,o=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+o+" 0 1 "+n+","+i},Mae=(e,t,n,i)=>DU(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),$U=(e,t,n,i)=>{const r=n-e,a=i-t,s=.2*(r+a),o=.2*(a-r);return"M"+e+","+t+"C"+(e+s)+","+(t+o)+" "+(n+o)+","+(i-s)+" "+n+","+i},Tae=(e,t,n,i)=>$U(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),kae=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,Fae=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,Rae=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*o+"L"+i*s+","+i*o},Nae=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},jae=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},zae=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*a+"C"+l*r+","+l*a+" "+l*s+","+l*o+" "+i*s+","+i*o},oR=Dd({line:CU,"line-radial":$ae,arc:DU,"arc-radial":Mae,curve:$U,"curve-radial":Tae,"orthogonal-horizontal":kae,"orthogonal-vertical":Fae,"orthogonal-radial":Rae,"diagonal-horizontal":Nae,"diagonal-vertical":jae,"diagonal-radial":zae});function mD(e){J.call(this,null,e)}mD.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};fe(mD,J,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||Od,s=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,f=l.map(a),d=f.length,g=s,p=(o-s)/q7(f),y=cr(d),v,x,E;for(e.sort&&y.sort((A,S)=>f[A]-f[S]),v=0;v<d;++v)E=f[y[v]],x=l[y[v]],x[i]=g,x[r]=g+=E*p;return this.value=f,t.reflow(e.modified()).modifies(n)}});const Bae=5;function Lae(e){const t=e.type;return!e.bins&&(t===nd||t===ip||t===rp)}function MU(e){return $3(e)&&e!==Ha}const Uae=ga(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function TU(e){J.call(this,null,e),this.modified(!0)}fe(TU,J,{transform(e,t){var n=t.dataflow,i=this.value,r=Pae(e);(!i||r!==i.type)&&(this.value=i=ct(r)());for(r in e)if(!Uae[r]){if(r==="padding"&&MU(i.type))continue;He(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return Xae(i,e,Yae(i,e,qae(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Pae(e){var t=e.type,n="",i;return t===Ha?Ha+"-"+nd:(Iae(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Ha+"-":i===3?jd+"-":""),(n+t||nd).toLowerCase())}function Iae(e){const t=e.type;return $3(t)&&t!==Yl&&t!==Xl&&(e.scheme||e.range&&e.range.length&&e.range.every(tt))}function qae(e,t,n){const i=Hae(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,s=t.zero||t.zero===void 0&&Lae(e),o,l;if(!r)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[o]<0&&(r[o]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[o]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const f=l>r[o]?o+1:l<r[0]?0:o;f!==o&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(f,0,l)}return MU(a)&&t.padding&&r[0]!==et(r)&&(r=Gae(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(kU(a,r,n)),a===w3&&e.unknown(t.domainImplicit?US:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&k3(e,t.nice)||null),r.length}function Hae(e,t,n){return t?(e.domain(kU(e.type,t,n)),t.length):-1}function Gae(e,t,n,i,r,a){var s=Math.abs(et(n)-n[0]),o=s/(s-2*i),l=e===ro?GO(t,null,o):e===rp?by(t,null,o,.5):e===ip?by(t,null,o,r||1):e===kb?YO(t,null,o,a||1):HO(t,null,o);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function kU(e,t,n){if(PB(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+Ce(t))}return t}function Yae(e,t,n){let i=t.bins;if(i&&!Ee(i)){const r=e.domain(),a=r[0],s=et(r),o=i.step;let l=i.start==null?a:i.start,f=i.stop==null?s:i.stop;o||ne("Scale bins parameter missing step property."),l<a&&(l=o*Math.ceil(a/o)),f>s&&(f=o*Math.floor(s/o)),i=cr(l,f+o/2,o)}return i?e.bins=i:e.bins&&delete e.bins,e.type===O3&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function Xae(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=Vae(i,t,n);else if(t.scheme&&(a=Wae(i,t,n),He(a))){if(e.interpolator)return e.interpolator(a);ne(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&IB(i))return e.interpolator(Nb(uw(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(M3(t.interpolate,t.interpolateGamma)):He(e.round)?e.round(r):He(e.rangeRound)&&e.interpolate(r?tp:Fu),a&&e.range(uw(a,t.reverse))}function Vae(e,t,n){e!==NB&&e!==XS&&ne("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===XS?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*S3(n,r,i)]}function Wae(e,t,n){var i=t.schemeExtent,r,a;return Ee(t.scheme)?a=Nb(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=T3(r),a||ne(`Unrecognized scheme name: ${t.scheme}`)),n=e===Rb?n+1:e===O3?n-1:e===id||e===Fb?+t.schemeCount||Bae:n,IB(e)?uR(a,i,t.reverse):He(a)?GB(uR(a,i),n):e===w3?a:a.slice(0,n)}function uR(e,t,n){return He(e)&&(t||n)?HB(e,uw(t||[0,1],n)):e}function uw(e,t){return t?e.slice().reverse():e}function FU(e){J.call(this,null,e)}fe(FU,J,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(hc(e.sort)),this.modified(n),t}});const lR="zero",RU="center",NU="normalize",jU=["y0","y1"];function yD(e){J.call(this,null,e)}yD.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:lR,values:[lR,RU,NU]},{name:"as",type:"string",array:!0,length:2,default:jU}]};fe(yD,J,{transform(e,t){var n=e.as||jU,i=n[0],r=n[1],a=hc(e.sort),s=e.field||Od,o=e.offset===RU?Qae:e.offset===NU?Zae:Kae,l,f,d,g;for(l=Jae(t.source,e.groupby,a,s),f=0,d=l.length,g=l.max;f<d;++f)o(l[f],g,s,i,r);return t.reflow(e.modified()).modifies(n)}});function Qae(e,t,n,i,r){for(var a=(t-e.sum)/2,s=e.length,o=0,l;o<s;++o)l=e[o],l[i]=a,l[r]=a+=Math.abs(n(l))}function Zae(e,t,n,i,r){for(var a=1/e.sum,s=0,o=e.length,l=0,f=0,d;l<o;++l)d=e[l],d[i]=s,d[r]=s=a*(f+=Math.abs(n(d)))}function Kae(e,t,n,i,r){for(var a=0,s=0,o=e.length,l=0,f,d;l<o;++l)d=e[l],f=+n(d),f<0?(d[i]=s,d[r]=s+=f):(d[i]=a,d[r]=a+=f)}function Jae(e,t,n,i){var r=[],a=x=>x(d),s,o,l,f,d,g,p,y,v;if(t==null)r.push(e.slice());else for(s={},o=0,l=e.length;o<l;++o)d=e[o],g=t.map(a),p=s[g],p||(s[g]=p=[],r.push(p)),p.push(d);for(g=0,v=0,f=r.length;g<f;++g){for(p=r[g],o=0,y=0,l=p.length;o<l;++o)y+=Math.abs(i(p[o]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const ese=Object.freeze(Object.defineProperty({__proto__:null,axisticks:AU,datajoin:SU,encode:wU,legendentries:OU,linkpath:pD,pie:mD,scale:TU,sortitems:FU,stack:yD},Symbol.toStringTag,{value:"Module"}));var Me=1e-6,Qy=1e-12,We=Math.PI,Xt=We/2,Zy=We/4,wi=We*2,Jt=180/We,Xe=We/180,Je=Math.abs,Bd=Math.atan,qr=Math.atan2,Te=Math.cos,v1=Math.ceil,zU=Math.exp,lw=Math.hypot,Ky=Math.log,iA=Math.pow,Oe=Math.sin,Rr=Math.sign||function(e){return e>0?1:e<0?-1:0},Oi=Math.sqrt,vD=Math.tan;function BU(e){return e>1?0:e<-1?We:Math.acos(e)}function Yi(e){return e>1?Xt:e<-1?-Xt:Math.asin(e)}function zn(){}function Jy(e,t){e&&fR.hasOwnProperty(e.type)&&fR[e.type](e,t)}var cR={Feature:function(e,t){Jy(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Jy(n[i].geometry,t)}},fR={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){cw(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)cw(n[i],t,0)},Polygon:function(e,t){dR(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)dR(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Jy(n[i],t)}};function cw(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function dR(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)cw(e[n],t,1);t.polygonEnd()}function Is(e,t){e&&cR.hasOwnProperty(e.type)?cR[e.type](e,t):Jy(e,t)}var ev=new Ei,tv=new Ei,LU,UU,fw,dw,hw,Ka={point:zn,lineStart:zn,lineEnd:zn,polygonStart:function(){ev=new Ei,Ka.lineStart=tse,Ka.lineEnd=nse},polygonEnd:function(){var e=+ev;tv.add(e<0?wi+e:e),this.lineStart=this.lineEnd=this.point=zn},sphere:function(){tv.add(wi)}};function tse(){Ka.point=ise}function nse(){PU(LU,UU)}function ise(e,t){Ka.point=PU,LU=e,UU=t,e*=Xe,t*=Xe,fw=e,dw=Te(t=t/2+Zy),hw=Oe(t)}function PU(e,t){e*=Xe,t*=Xe,t=t/2+Zy;var n=e-fw,i=n>=0?1:-1,r=i*n,a=Te(t),s=Oe(t),o=hw*s,l=dw*a+o*Te(r),f=o*i*Oe(r);ev.add(qr(f,l)),fw=e,dw=a,hw=s}function rse(e){return tv=new Ei,Is(e,Ka),tv*2}function nv(e){return[qr(e[1],e[0]),Yi(e[2])]}function Wl(e){var t=e[0],n=e[1],i=Te(n);return[i*Te(t),i*Oe(t),Oe(n)]}function b1(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ld(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function rA(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function x1(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function iv(e){var t=Oi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ut,Bi,Gt,ur,Al,IU,qU,Pf,Z0,Vo,ao,Bs={point:gw,lineStart:hR,lineEnd:gR,polygonStart:function(){Bs.point=GU,Bs.lineStart=ase,Bs.lineEnd=sse,Z0=new Ei,Ka.polygonStart()},polygonEnd:function(){Ka.polygonEnd(),Bs.point=gw,Bs.lineStart=hR,Bs.lineEnd=gR,ev<0?(Ut=-(Gt=180),Bi=-(ur=90)):Z0>Me?ur=90:Z0<-Me&&(Bi=-90),ao[0]=Ut,ao[1]=Gt},sphere:function(){Ut=-(Gt=180),Bi=-(ur=90)}};function gw(e,t){Vo.push(ao=[Ut=e,Gt=e]),t<Bi&&(Bi=t),t>ur&&(ur=t)}function HU(e,t){var n=Wl([e*Xe,t*Xe]);if(Pf){var i=ld(Pf,n),r=[i[1],-i[0],0],a=ld(r,i);iv(a),a=nv(a);var s=e-Al,o=s>0?1:-1,l=a[0]*Jt*o,f,d=Je(s)>180;d^(o*Al<l&&l<o*e)?(f=a[1]*Jt,f>ur&&(ur=f)):(l=(l+360)%360-180,d^(o*Al<l&&l<o*e)?(f=-a[1]*Jt,f<Bi&&(Bi=f)):(t<Bi&&(Bi=t),t>ur&&(ur=t))),d?e<Al?or(Ut,e)>or(Ut,Gt)&&(Gt=e):or(e,Gt)>or(Ut,Gt)&&(Ut=e):Gt>=Ut?(e<Ut&&(Ut=e),e>Gt&&(Gt=e)):e>Al?or(Ut,e)>or(Ut,Gt)&&(Gt=e):or(e,Gt)>or(Ut,Gt)&&(Ut=e)}else Vo.push(ao=[Ut=e,Gt=e]);t<Bi&&(Bi=t),t>ur&&(ur=t),Pf=n,Al=e}function hR(){Bs.point=HU}function gR(){ao[0]=Ut,ao[1]=Gt,Bs.point=gw,Pf=null}function GU(e,t){if(Pf){var n=e-Al;Z0.add(Je(n)>180?n+(n>0?360:-360):n)}else IU=e,qU=t;Ka.point(e,t),HU(e,t)}function ase(){Ka.lineStart()}function sse(){GU(IU,qU),Ka.lineEnd(),Je(Z0)>Me&&(Ut=-(Gt=180)),ao[0]=Ut,ao[1]=Gt,Pf=null}function or(e,t){return(t-=e)<0?t+360:t}function ose(e,t){return e[0]-t[0]}function pR(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function use(e){var t,n,i,r,a,s,o;if(ur=Gt=-(Ut=Bi=1/0),Vo=[],Is(e,Bs),n=Vo.length){for(Vo.sort(ose),t=1,i=Vo[0],a=[i];t<n;++t)r=Vo[t],pR(i,r[0])||pR(i,r[1])?(or(i[0],r[1])>or(i[0],i[1])&&(i[1]=r[1]),or(r[0],i[1])>or(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(o=or(i[1],r[0]))>s&&(s=o,Ut=r[0],Gt=i[1])}return Vo=ao=null,Ut===1/0||Bi===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ut,Bi],[Gt,ur]]}var k0,rv,av,sv,ov,uv,lv,cv,pw,mw,yw,YU,XU,pi,mi,yi,la={sphere:zn,point:bD,lineStart:mR,lineEnd:yR,polygonStart:function(){la.lineStart=fse,la.lineEnd=dse},polygonEnd:function(){la.lineStart=mR,la.lineEnd=yR}};function bD(e,t){e*=Xe,t*=Xe;var n=Te(t);mp(n*Te(e),n*Oe(e),Oe(t))}function mp(e,t,n){++k0,av+=(e-av)/k0,sv+=(t-sv)/k0,ov+=(n-ov)/k0}function mR(){la.point=lse}function lse(e,t){e*=Xe,t*=Xe;var n=Te(t);pi=n*Te(e),mi=n*Oe(e),yi=Oe(t),la.point=cse,mp(pi,mi,yi)}function cse(e,t){e*=Xe,t*=Xe;var n=Te(t),i=n*Te(e),r=n*Oe(e),a=Oe(t),s=qr(Oi((s=mi*a-yi*r)*s+(s=yi*i-pi*a)*s+(s=pi*r-mi*i)*s),pi*i+mi*r+yi*a);rv+=s,uv+=s*(pi+(pi=i)),lv+=s*(mi+(mi=r)),cv+=s*(yi+(yi=a)),mp(pi,mi,yi)}function yR(){la.point=bD}function fse(){la.point=hse}function dse(){VU(YU,XU),la.point=bD}function hse(e,t){YU=e,XU=t,e*=Xe,t*=Xe,la.point=VU;var n=Te(t);pi=n*Te(e),mi=n*Oe(e),yi=Oe(t),mp(pi,mi,yi)}function VU(e,t){e*=Xe,t*=Xe;var n=Te(t),i=n*Te(e),r=n*Oe(e),a=Oe(t),s=mi*a-yi*r,o=yi*i-pi*a,l=pi*r-mi*i,f=lw(s,o,l),d=Yi(f),g=f&&-d/f;pw.add(g*s),mw.add(g*o),yw.add(g*l),rv+=d,uv+=d*(pi+(pi=i)),lv+=d*(mi+(mi=r)),cv+=d*(yi+(yi=a)),mp(pi,mi,yi)}function gse(e){k0=rv=av=sv=ov=uv=lv=cv=0,pw=new Ei,mw=new Ei,yw=new Ei,Is(e,la);var t=+pw,n=+mw,i=+yw,r=lw(t,n,i);return r<Qy&&(t=uv,n=lv,i=cv,rv<Me&&(t=av,n=sv,i=ov),r=lw(t,n,i),r<Qy)?[NaN,NaN]:[qr(n,t)*Jt,Yi(i/r)*Jt]}function vw(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function bw(e,t){return Je(e)>We&&(e-=Math.round(e/wi)*wi),[e,t]}bw.invert=bw;function WU(e,t,n){return(e%=wi)?t||n?vw(bR(e),xR(t,n)):bR(e):t||n?xR(t,n):bw}function vR(e){return function(t,n){return t+=e,Je(t)>We&&(t-=Math.round(t/wi)*wi),[t,n]}}function bR(e){var t=vR(e);return t.invert=vR(-e),t}function xR(e,t){var n=Te(e),i=Oe(e),r=Te(t),a=Oe(t);function s(o,l){var f=Te(l),d=Te(o)*f,g=Oe(o)*f,p=Oe(l),y=p*n+d*i;return[qr(g*r-y*a,d*n-p*i),Yi(y*r+g*a)]}return s.invert=function(o,l){var f=Te(l),d=Te(o)*f,g=Oe(o)*f,p=Oe(l),y=p*r-g*a;return[qr(g*r+p*a,d*n+y*i),Yi(y*n-d*i)]},s}function pse(e){e=WU(e[0]*Xe,e[1]*Xe,e.length>2?e[2]*Xe:0);function t(n){return n=e(n[0]*Xe,n[1]*Xe),n[0]*=Jt,n[1]*=Jt,n}return t.invert=function(n){return n=e.invert(n[0]*Xe,n[1]*Xe),n[0]*=Jt,n[1]*=Jt,n},t}function mse(e,t,n,i,r,a){if(n){var s=Te(t),o=Oe(t),l=i*n;r==null?(r=t+i*wi,a=t-l/2):(r=ER(s,r),a=ER(s,a),(i>0?r<a:r>a)&&(r+=i*wi));for(var f,d=r;i>0?d>a:d<a;d-=l)f=nv([s,-o*Te(d),-o*Oe(d)]),e.point(f[0],f[1])}}function ER(e,t){t=Wl(t),t[0]-=e,iv(t);var n=BU(-t[1]);return((-t[2]<0?-n:n)+wi-Me)%wi}function QU(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:zn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function iy(e,t){return Je(e[0]-t[0])<Me&&Je(e[1]-t[1])<Me}function E1(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ZU(e,t,n,i,r){var a=[],s=[],o,l;if(e.forEach(function(v){if(!((x=v.length-1)<=0)){var x,E=v[0],A=v[x],S;if(iy(E,A)){if(!E[2]&&!A[2]){for(r.lineStart(),o=0;o<x;++o)r.point((E=v[o])[0],E[1]);r.lineEnd();return}A[0]+=2*Me}a.push(S=new E1(E,v,null,!0)),s.push(S.o=new E1(E,null,S,!1)),a.push(S=new E1(A,v,null,!1)),s.push(S.o=new E1(A,null,S,!0))}}),!!a.length){for(s.sort(t),_R(a),_R(s),o=0,l=s.length;o<l;++o)s[o].e=n=!n;for(var f=a[0],d,g;;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(o=0,l=d.length;o<l;++o)r.point((g=d[o])[0],g[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,o=d.length-1;o>=0;--o)r.point((g=d[o])[0],g[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function _R(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function aA(e){return Je(e[0])<=We?e[0]:Rr(e[0])*((Je(e[0])+We)%wi-We)}function yse(e,t){var n=aA(t),i=t[1],r=Oe(i),a=[Oe(n),-Te(n),0],s=0,o=0,l=new Ei;r===1?i=Xt+Me:r===-1&&(i=-Xt-Me);for(var f=0,d=e.length;f<d;++f)if(p=(g=e[f]).length)for(var g,p,y=g[p-1],v=aA(y),x=y[1]/2+Zy,E=Oe(x),A=Te(x),S=0;S<p;++S,v=D,E=M,A=C,y=w){var w=g[S],D=aA(w),O=w[1]/2+Zy,M=Oe(O),C=Te(O),k=D-v,N=k>=0?1:-1,L=N*k,B=L>We,V=E*M;if(l.add(qr(V*N*Oe(L),A*C+V*Te(L))),s+=B?k+N*wi:k,B^v>=n^D>=n){var G=ld(Wl(y),Wl(w));iv(G);var P=ld(a,G);iv(P);var j=(B^k>=0?-1:1)*Yi(P[2]);(i>j||i===j&&(G[0]||G[1]))&&(o+=B^k>=0?1:-1)}}return(s<-Me||s<Me&&l<-Qy)^o&1}function KU(e,t,n,i){return function(r){var a=t(r),s=QU(),o=t(s),l=!1,f,d,g,p={point:y,lineStart:x,lineEnd:E,polygonStart:function(){p.point=A,p.lineStart=S,p.lineEnd=w,d=[],f=[]},polygonEnd:function(){p.point=y,p.lineStart=x,p.lineEnd=E,d=I7(d);var D=yse(f,i);d.length?(l||(r.polygonStart(),l=!0),ZU(d,bse,D,n,r)):D&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y(D,O){e(D,O)&&r.point(D,O)}function v(D,O){a.point(D,O)}function x(){p.point=v,a.lineStart()}function E(){p.point=y,a.lineEnd()}function A(D,O){g.push([D,O]),o.point(D,O)}function S(){o.lineStart(),g=[]}function w(){A(g[0][0],g[0][1]),o.lineEnd();var D=o.clean(),O=s.result(),M,C=O.length,k,N,L;if(g.pop(),f.push(g),g=null,!!C){if(D&1){if(N=O[0],(k=N.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),M=0;M<k;++M)r.point((L=N[M])[0],L[1]);r.lineEnd()}return}C>1&&D&2&&O.push(O.pop().concat(O.shift())),d.push(O.filter(vse))}}return p}}function vse(e){return e.length>1}function bse(e,t){return((e=e.x)[0]<0?e[1]-Xt-Me:Xt-e[1])-((t=t.x)[0]<0?t[1]-Xt-Me:Xt-t[1])}const AR=KU(function(){return!0},xse,_se,[-We,-Xt]);function xse(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,s){var o=a>0?We:-We,l=Je(a-t);Je(l-We)<Me?(e.point(t,n=(n+s)/2>0?Xt:-Xt),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(a,n),r=0):i!==o&&l>=We&&(Je(t-i)<Me&&(t-=i*Me),Je(a-o)<Me&&(a-=o*Me),n=Ese(t,n,a,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),r=0),e.point(t=a,n=s),i=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function Ese(e,t,n,i){var r,a,s=Oe(e-n);return Je(s)>Me?Bd((Oe(t)*(a=Te(i))*Oe(n)-Oe(i)*(r=Te(t))*Oe(e))/(r*a*s)):(t+i)/2}function _se(e,t,n,i){var r;if(e==null)r=n*Xt,i.point(-We,r),i.point(0,r),i.point(We,r),i.point(We,0),i.point(We,-r),i.point(0,-r),i.point(-We,-r),i.point(-We,0),i.point(-We,r);else if(Je(e[0]-t[0])>Me){var a=e[0]<t[0]?We:-We;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Ase(e){var t=Te(e),n=2*Xe,i=t>0,r=Je(t)>Me;function a(d,g,p,y){mse(y,e,n,p,d,g)}function s(d,g){return Te(d)*Te(g)>t}function o(d){var g,p,y,v,x;return{lineStart:function(){v=y=!1,x=1},point:function(E,A){var S=[E,A],w,D=s(E,A),O=i?D?0:f(E,A):D?f(E+(E<0?We:-We),A):0;if(!g&&(v=y=D)&&d.lineStart(),D!==y&&(w=l(g,S),(!w||iy(g,w)||iy(S,w))&&(S[2]=1)),D!==y)x=0,D?(d.lineStart(),w=l(S,g),d.point(w[0],w[1])):(w=l(g,S),d.point(w[0],w[1],2),d.lineEnd()),g=w;else if(r&&g&&i^D){var M;!(O&p)&&(M=l(S,g,!0))&&(x=0,i?(d.lineStart(),d.point(M[0][0],M[0][1]),d.point(M[1][0],M[1][1]),d.lineEnd()):(d.point(M[1][0],M[1][1]),d.lineEnd(),d.lineStart(),d.point(M[0][0],M[0][1],3)))}D&&(!g||!iy(g,S))&&d.point(S[0],S[1]),g=S,y=D,p=O},lineEnd:function(){y&&d.lineEnd(),g=null},clean:function(){return x|(v&&y)<<1}}}function l(d,g,p){var y=Wl(d),v=Wl(g),x=[1,0,0],E=ld(y,v),A=b1(E,E),S=E[0],w=A-S*S;if(!w)return!p&&d;var D=t*A/w,O=-t*S/w,M=ld(x,E),C=x1(x,D),k=x1(E,O);rA(C,k);var N=M,L=b1(C,N),B=b1(N,N),V=L*L-B*(b1(C,C)-1);if(!(V<0)){var G=Oi(V),P=x1(N,(-L-G)/B);if(rA(P,C),P=nv(P),!p)return P;var j=d[0],F=g[0],U=d[1],H=g[1],Q;F<j&&(Q=j,j=F,F=Q);var R=F-j,W=Je(R-We)<Me,ie=W||R<Me;if(!W&&H<U&&(Q=U,U=H,H=Q),ie?W?U+H>0^P[1]<(Je(P[0]-j)<Me?U:H):U<=P[1]&&P[1]<=H:R>We^(j<=P[0]&&P[0]<=F)){var se=x1(N,(-L+G)/B);return rA(se,C),[P,nv(se)]}}}function f(d,g){var p=i?e:We-e,y=0;return d<-p?y|=1:d>p&&(y|=2),g<-p?y|=4:g>p&&(y|=8),y}return KU(s,o,a,i?[0,-e]:[-We,e-We])}function Sse(e,t,n,i,r,a){var s=e[0],o=e[1],l=t[0],f=t[1],d=0,g=1,p=l-s,y=f-o,v;if(v=n-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<g&&(g=v)}else if(p>0){if(v>g)return;v>d&&(d=v)}if(v=r-s,!(!p&&v<0)){if(v/=p,p<0){if(v>g)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<g&&(g=v)}if(v=i-o,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<g&&(g=v)}else if(y>0){if(v>g)return;v>d&&(d=v)}if(v=a-o,!(!y&&v<0)){if(v/=y,y<0){if(v>g)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<g&&(g=v)}return d>0&&(e[0]=s+d*p,e[1]=o+d*y),g<1&&(t[0]=s+g*p,t[1]=o+g*y),!0}}}}}var F0=1e9,_1=-F0;function JU(e,t,n,i){function r(f,d){return e<=f&&f<=n&&t<=d&&d<=i}function a(f,d,g,p){var y=0,v=0;if(f==null||(y=s(f,g))!==(v=s(d,g))||l(f,d)<0^g>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+g+4)%4)!==v);else p.point(d[0],d[1])}function s(f,d){return Je(f[0]-e)<Me?d>0?0:3:Je(f[0]-n)<Me?d>0?2:1:Je(f[1]-t)<Me?d>0?1:0:d>0?3:2}function o(f,d){return l(f.x,d.x)}function l(f,d){var g=s(f,1),p=s(d,1);return g!==p?g-p:g===0?d[1]-f[1]:g===1?f[0]-d[0]:g===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,g=QU(),p,y,v,x,E,A,S,w,D,O,M,C={point:k,lineStart:V,lineEnd:G,polygonStart:L,polygonEnd:B};function k(j,F){r(j,F)&&d.point(j,F)}function N(){for(var j=0,F=0,U=y.length;F<U;++F)for(var H=y[F],Q=1,R=H.length,W=H[0],ie,se,ge=W[0],pe=W[1];Q<R;++Q)ie=ge,se=pe,W=H[Q],ge=W[0],pe=W[1],se<=i?pe>i&&(ge-ie)*(i-se)>(pe-se)*(e-ie)&&++j:pe<=i&&(ge-ie)*(i-se)<(pe-se)*(e-ie)&&--j;return j}function L(){d=g,p=[],y=[],M=!0}function B(){var j=N(),F=M&&j,U=(p=I7(p)).length;(F||U)&&(f.polygonStart(),F&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),U&&ZU(p,o,j,a,f),f.polygonEnd()),d=f,p=y=v=null}function V(){C.point=P,y&&y.push(v=[]),O=!0,D=!1,S=w=NaN}function G(){p&&(P(x,E),A&&D&&g.rejoin(),p.push(g.result())),C.point=k,D&&d.lineEnd()}function P(j,F){var U=r(j,F);if(y&&v.push([j,F]),O)x=j,E=F,A=U,O=!1,U&&(d.lineStart(),d.point(j,F));else if(U&&D)d.point(j,F);else{var H=[S=Math.max(_1,Math.min(F0,S)),w=Math.max(_1,Math.min(F0,w))],Q=[j=Math.max(_1,Math.min(F0,j)),F=Math.max(_1,Math.min(F0,F))];Sse(H,Q,e,t,n,i)?(D||(d.lineStart(),d.point(H[0],H[1])),d.point(Q[0],Q[1]),U||d.lineEnd(),M=!1):U&&(d.lineStart(),d.point(j,F),M=!1)}S=j,w=F,D=U}return C}}function SR(e,t,n){var i=cr(e,t-Me,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function wR(e,t,n){var i=cr(e,t-Me,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function wse(){var e,t,n,i,r,a,s,o,l=10,f=l,d=90,g=360,p,y,v,x,E=2.5;function A(){return{type:"MultiLineString",coordinates:S()}}function S(){return cr(v1(i/d)*d,n,d).map(v).concat(cr(v1(o/g)*g,s,g).map(x)).concat(cr(v1(t/l)*l,e,l).filter(function(w){return Je(w%d)>Me}).map(p)).concat(cr(v1(a/f)*f,r,f).filter(function(w){return Je(w%g)>Me}).map(y))}return A.lines=function(){return S().map(function(w){return{type:"LineString",coordinates:w}})},A.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(x(s).slice(1),v(n).reverse().slice(1),x(o).reverse().slice(1))]}},A.extent=function(w){return arguments.length?A.extentMajor(w).extentMinor(w):A.extentMinor()},A.extentMajor=function(w){return arguments.length?(i=+w[0][0],n=+w[1][0],o=+w[0][1],s=+w[1][1],i>n&&(w=i,i=n,n=w),o>s&&(w=o,o=s,s=w),A.precision(E)):[[i,o],[n,s]]},A.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],a=+w[0][1],r=+w[1][1],t>e&&(w=t,t=e,e=w),a>r&&(w=a,a=r,r=w),A.precision(E)):[[t,a],[e,r]]},A.step=function(w){return arguments.length?A.stepMajor(w).stepMinor(w):A.stepMinor()},A.stepMajor=function(w){return arguments.length?(d=+w[0],g=+w[1],A):[d,g]},A.stepMinor=function(w){return arguments.length?(l=+w[0],f=+w[1],A):[l,f]},A.precision=function(w){return arguments.length?(E=+w,p=SR(a,r,90),y=wR(t,e,E),v=SR(o,s,90),x=wR(i,n,E),A):E},A.extentMajor([[-180,-90+Me],[180,90-Me]]).extentMinor([[-180,-80-Me],[180,80+Me]])}const Eg=e=>e;var sA=new Ei,xw=new Ei,eP,tP,Ew,_w,qs={point:zn,lineStart:zn,lineEnd:zn,polygonStart:function(){qs.lineStart=Ose,qs.lineEnd=Dse},polygonEnd:function(){qs.lineStart=qs.lineEnd=qs.point=zn,sA.add(Je(xw)),xw=new Ei},result:function(){var e=sA/2;return sA=new Ei,e}};function Ose(){qs.point=Cse}function Cse(e,t){qs.point=nP,eP=Ew=e,tP=_w=t}function nP(e,t){xw.add(_w*e-Ew*t),Ew=e,_w=t}function Dse(){nP(eP,tP)}var cd=1/0,fv=cd,_g=-cd,dv=_g,hv={point:$se,lineStart:zn,lineEnd:zn,polygonStart:zn,polygonEnd:zn,result:function(){var e=[[cd,fv],[_g,dv]];return _g=dv=-(fv=cd=1/0),e}};function $se(e,t){e<cd&&(cd=e),e>_g&&(_g=e),t<fv&&(fv=t),t>dv&&(dv=t)}var Aw=0,Sw=0,R0=0,gv=0,pv=0,Ff=0,ww=0,Ow=0,N0=0,iP,rP,za,Ba,kr={point:Ql,lineStart:OR,lineEnd:CR,polygonStart:function(){kr.lineStart=kse,kr.lineEnd=Fse},polygonEnd:function(){kr.point=Ql,kr.lineStart=OR,kr.lineEnd=CR},result:function(){var e=N0?[ww/N0,Ow/N0]:Ff?[gv/Ff,pv/Ff]:R0?[Aw/R0,Sw/R0]:[NaN,NaN];return Aw=Sw=R0=gv=pv=Ff=ww=Ow=N0=0,e}};function Ql(e,t){Aw+=e,Sw+=t,++R0}function OR(){kr.point=Mse}function Mse(e,t){kr.point=Tse,Ql(za=e,Ba=t)}function Tse(e,t){var n=e-za,i=t-Ba,r=Oi(n*n+i*i);gv+=r*(za+e)/2,pv+=r*(Ba+t)/2,Ff+=r,Ql(za=e,Ba=t)}function CR(){kr.point=Ql}function kse(){kr.point=Rse}function Fse(){aP(iP,rP)}function Rse(e,t){kr.point=aP,Ql(iP=za=e,rP=Ba=t)}function aP(e,t){var n=e-za,i=t-Ba,r=Oi(n*n+i*i);gv+=r*(za+e)/2,pv+=r*(Ba+t)/2,Ff+=r,r=Ba*e-za*t,ww+=r*(za+e),Ow+=r*(Ba+t),N0+=r*3,Ql(za=e,Ba=t)}function sP(e){this._context=e}sP.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,wi);break}}},result:zn};var Cw=new Ei,oA,oP,uP,j0,z0,Ag={point:zn,lineStart:function(){Ag.point=Nse},lineEnd:function(){oA&&lP(oP,uP),Ag.point=zn},polygonStart:function(){oA=!0},polygonEnd:function(){oA=null},result:function(){var e=+Cw;return Cw=new Ei,e}};function Nse(e,t){Ag.point=lP,oP=j0=e,uP=z0=t}function lP(e,t){j0-=e,z0-=t,Cw.add(Oi(j0*j0+z0*z0)),j0=e,z0=t}let DR,mv,$R,MR;class TR{constructor(t){this._append=t==null?cP:jse(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==$R||this._append!==mv){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,$R=i,mv=this._append,MR=this._,this._=r}this._+=MR;break}}}result(){const t=this._;return this._="",t.length?t:null}}function cP(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function jse(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return cP;if(t!==DR){const n=10**t;DR=t,mv=function(r){let a=1;this._+=r[0];for(const s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return mv}function fP(e,t){let n=3,i=4.5,r,a;function s(o){return o&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),Is(o,r(a))),a.result()}return s.area=function(o){return Is(o,r(qs)),qs.result()},s.measure=function(o){return Is(o,r(Ag)),Ag.result()},s.bounds=function(o){return Is(o,r(hv)),hv.result()},s.centroid=function(o){return Is(o,r(kr)),kr.result()},s.projection=function(o){return arguments.length?(r=o==null?(e=null,Eg):(e=o).stream,s):e},s.context=function(o){return arguments.length?(a=o==null?(t=null,new TR(n)):new sP(t=o),typeof i!="function"&&a.pointRadius(i),s):t},s.pointRadius=function(o){return arguments.length?(i=typeof o=="function"?o:(a.pointRadius(+o),+o),s):i},s.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const l=Math.floor(o);if(!(l>=0))throw new RangeError(`invalid digits: ${o}`);n=l}return t===null&&(a=new TR(n)),s},s.projection(e).digits(n).context(t)}function Vb(e){return function(t){var n=new Dw;for(var i in e)n[i]=e[i];return n.stream=t,n}}function Dw(){}Dw.prototype={constructor:Dw,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function xD(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Is(n,e.stream(hv)),t(hv.result()),i!=null&&e.clipExtent(i),e}function Wb(e,t,n){return xD(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),o=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,l])},n)}function ED(e,t,n){return Wb(e,[[0,0],t],n)}function _D(e,t,n){return xD(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),s=(r-a*(i[1][0]+i[0][0]))/2,o=-a*i[0][1];e.scale(150*a).translate([s,o])},n)}function AD(e,t,n){return xD(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),s=-a*i[0][0],o=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,o])},n)}var kR=16,zse=Te(30*Xe);function FR(e,t){return+t?Lse(e,t):Bse(e)}function Bse(e){return Vb({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Lse(e,t){function n(i,r,a,s,o,l,f,d,g,p,y,v,x,E){var A=f-i,S=d-r,w=A*A+S*S;if(w>4*t&&x--){var D=s+p,O=o+y,M=l+v,C=Oi(D*D+O*O+M*M),k=Yi(M/=C),N=Je(Je(M)-1)<Me||Je(a-g)<Me?(a+g)/2:qr(O,D),L=e(N,k),B=L[0],V=L[1],G=B-i,P=V-r,j=S*G-A*P;(j*j/w>t||Je((A*G+S*P)/w-.5)>.3||s*p+o*y+l*v<zse)&&(n(i,r,a,s,o,l,B,V,N,D/=C,O/=C,M,x,E),E.point(B,V),n(B,V,N,D,O,M,f,d,g,p,y,v,x,E))}}return function(i){var r,a,s,o,l,f,d,g,p,y,v,x,E={point:A,lineStart:S,lineEnd:D,polygonStart:function(){i.polygonStart(),E.lineStart=O},polygonEnd:function(){i.polygonEnd(),E.lineStart=S}};function A(k,N){k=e(k,N),i.point(k[0],k[1])}function S(){g=NaN,E.point=w,i.lineStart()}function w(k,N){var L=Wl([k,N]),B=e(k,N);n(g,p,d,y,v,x,g=B[0],p=B[1],d=k,y=L[0],v=L[1],x=L[2],kR,i),i.point(g,p)}function D(){E.point=A,i.lineEnd()}function O(){S(),E.point=M,E.lineEnd=C}function M(k,N){w(r=k,N),a=g,s=p,o=y,l=v,f=x,E.point=w}function C(){n(g,p,d,y,v,x,a,s,r,o,l,f,kR,i),E.lineEnd=D,D()}return E}}var Use=Vb({point:function(e,t){this.stream.point(e*Xe,t*Xe)}});function Pse(e){return Vb({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function Ise(e,t,n,i,r){function a(s,o){return s*=i,o*=r,[t+e*s,n-e*o]}return a.invert=function(s,o){return[(s-t)/e*i,(n-o)/e*r]},a}function RR(e,t,n,i,r,a){if(!a)return Ise(e,t,n,i,r);var s=Te(a),o=Oe(a),l=s*e,f=o*e,d=s/e,g=o/e,p=(o*n-s*t)/e,y=(o*t+s*n)/e;function v(x,E){return x*=i,E*=r,[l*x-f*E+t,n-f*x-l*E]}return v.invert=function(x,E){return[i*(d*x-g*E+p),r*(y-g*x-d*E)]},v}function os(e){return dP(function(){return e})()}function dP(e){var t,n=150,i=480,r=250,a=0,s=0,o=0,l=0,f=0,d,g=0,p=1,y=1,v=null,x=AR,E=null,A,S,w,D=Eg,O=.5,M,C,k,N,L;function B(j){return k(j[0]*Xe,j[1]*Xe)}function V(j){return j=k.invert(j[0],j[1]),j&&[j[0]*Jt,j[1]*Jt]}B.stream=function(j){return N&&L===j?N:N=Use(Pse(d)(x(M(D(L=j)))))},B.preclip=function(j){return arguments.length?(x=j,v=void 0,P()):x},B.postclip=function(j){return arguments.length?(D=j,E=A=S=w=null,P()):D},B.clipAngle=function(j){return arguments.length?(x=+j?Ase(v=j*Xe):(v=null,AR),P()):v*Jt},B.clipExtent=function(j){return arguments.length?(D=j==null?(E=A=S=w=null,Eg):JU(E=+j[0][0],A=+j[0][1],S=+j[1][0],w=+j[1][1]),P()):E==null?null:[[E,A],[S,w]]},B.scale=function(j){return arguments.length?(n=+j,G()):n},B.translate=function(j){return arguments.length?(i=+j[0],r=+j[1],G()):[i,r]},B.center=function(j){return arguments.length?(a=j[0]%360*Xe,s=j[1]%360*Xe,G()):[a*Jt,s*Jt]},B.rotate=function(j){return arguments.length?(o=j[0]%360*Xe,l=j[1]%360*Xe,f=j.length>2?j[2]%360*Xe:0,G()):[o*Jt,l*Jt,f*Jt]},B.angle=function(j){return arguments.length?(g=j%360*Xe,G()):g*Jt},B.reflectX=function(j){return arguments.length?(p=j?-1:1,G()):p<0},B.reflectY=function(j){return arguments.length?(y=j?-1:1,G()):y<0},B.precision=function(j){return arguments.length?(M=FR(C,O=j*j),P()):Oi(O)},B.fitExtent=function(j,F){return Wb(B,j,F)},B.fitSize=function(j,F){return ED(B,j,F)},B.fitWidth=function(j,F){return _D(B,j,F)},B.fitHeight=function(j,F){return AD(B,j,F)};function G(){var j=RR(n,0,0,p,y,g).apply(null,t(a,s)),F=RR(n,i-j[0],r-j[1],p,y,g);return d=WU(o,l,f),C=vw(t,F),k=vw(d,C),M=FR(C,O),P()}function P(){return N=L=null,B}return function(){return t=e.apply(this,arguments),B.invert=t.invert&&V,G()}}function SD(e){var t=0,n=We/3,i=dP(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*Xe,n=a[1]*Xe):[t*Jt,n*Jt]},r}function qse(e){var t=Te(e);function n(i,r){return[i*t,Oe(r)/t]}return n.invert=function(i,r){return[i/t,Yi(r*t)]},n}function Hse(e,t){var n=Oe(e),i=(n+Oe(t))/2;if(Je(i)<Me)return qse(e);var r=1+n*(2*i-n),a=Oi(r)/i;function s(o,l){var f=Oi(r-2*i*Oe(l))/i;return[f*Oe(o*=i),a-f*Te(o)]}return s.invert=function(o,l){var f=a-l,d=qr(o,Je(f))*Rr(f);return f*i<0&&(d-=We*Rr(o)*Rr(f)),[d/i,Yi((r-(o*o+f*f)*i*i)/(2*i))]},s}function yv(){return SD(Hse).scale(155.424).center([0,33.6442])}function hP(){return yv().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Gse(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Yse(){var e,t,n=hP(),i,r=yv().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=yv().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,f={point:function(p,y){l=[p,y]}};function d(p){var y=p[0],v=p[1];return l=null,i.point(y,v),l||(a.point(y,v),l)||(o.point(y,v),l)}d.invert=function(p){var y=n.scale(),v=n.translate(),x=(p[0]-v[0])/y,E=(p[1]-v[1])/y;return(E>=.12&&E<.234&&x>=-.425&&x<-.214?r:E>=.166&&E<.234&&x>=-.214&&x<-.115?s:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=Gse([n.stream(t=p),r.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),s.precision(p),g()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],x=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,x-.238*y],[v+.455*y,x+.238*y]]).stream(f),a=r.translate([v-.307*y,x+.201*y]).clipExtent([[v-.425*y+Me,x+.12*y+Me],[v-.214*y-Me,x+.234*y-Me]]).stream(f),o=s.translate([v-.205*y,x+.212*y]).clipExtent([[v-.214*y+Me,x+.166*y+Me],[v-.115*y-Me,x+.234*y-Me]]).stream(f),g()},d.fitExtent=function(p,y){return Wb(d,p,y)},d.fitSize=function(p,y){return ED(d,p,y)},d.fitWidth=function(p,y){return _D(d,p,y)},d.fitHeight=function(p,y){return AD(d,p,y)};function g(){return e=t=null,d}return d.scale(1070)}function gP(e){return function(t,n){var i=Te(t),r=Te(n),a=e(i*r);return a===1/0?[2,0]:[a*r*Oe(t),a*Oe(n)]}}function yp(e){return function(t,n){var i=Oi(t*t+n*n),r=e(i),a=Oe(r),s=Te(r);return[qr(t*a,i*s),Yi(i&&n*a/i)]}}var pP=gP(function(e){return Oi(2/(1+e))});pP.invert=yp(function(e){return 2*Yi(e/2)});function Xse(){return os(pP).scale(124.75).clipAngle(180-.001)}var mP=gP(function(e){return(e=BU(e))&&e/Oe(e)});mP.invert=yp(function(e){return e});function Vse(){return os(mP).scale(79.4188).clipAngle(180-.001)}function Qb(e,t){return[e,Ky(vD((Xt+t)/2))]}Qb.invert=function(e,t){return[e,2*Bd(zU(t))-Xt]};function Wse(){return yP(Qb).scale(961/wi)}function yP(e){var t=os(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,s=null,o,l,f;t.scale=function(g){return arguments.length?(i(g),d()):i()},t.translate=function(g){return arguments.length?(r(g),d()):r()},t.center=function(g){return arguments.length?(n(g),d()):n()},t.clipExtent=function(g){return arguments.length?(g==null?s=o=l=f=null:(s=+g[0][0],o=+g[0][1],l=+g[1][0],f=+g[1][1]),d()):s==null?null:[[s,o],[l,f]]};function d(){var g=We*i(),p=t(pse(t.rotate()).invert([0,0]));return a(s==null?[[p[0]-g,p[1]-g],[p[0]+g,p[1]+g]]:e===Qb?[[Math.max(p[0]-g,s),o],[Math.min(p[0]+g,l),f]]:[[s,Math.max(p[1]-g,o)],[l,Math.min(p[1]+g,f)]])}return d()}function A1(e){return vD((Xt+e)/2)}function Qse(e,t){var n=Te(e),i=e===t?Oe(e):Ky(n/Te(t))/Ky(A1(t)/A1(e)),r=n*iA(A1(e),i)/i;if(!i)return Qb;function a(s,o){r>0?o<-Xt+Me&&(o=-Xt+Me):o>Xt-Me&&(o=Xt-Me);var l=r/iA(A1(o),i);return[l*Oe(i*s),r-l*Te(i*s)]}return a.invert=function(s,o){var l=r-o,f=Rr(i)*Oi(s*s+l*l),d=qr(s,Je(l))*Rr(l);return l*i<0&&(d-=We*Rr(s)*Rr(l)),[d/i,2*Bd(iA(r/f,1/i))-Xt]},a}function Zse(){return SD(Qse).scale(109.5).parallels([30,30])}function vv(e,t){return[e,t]}vv.invert=vv;function Kse(){return os(vv).scale(152.63)}function Jse(e,t){var n=Te(e),i=e===t?Oe(e):(n-Te(t))/(t-e),r=n/i+e;if(Je(i)<Me)return vv;function a(s,o){var l=r-o,f=i*s;return[l*Oe(f),r-l*Te(f)]}return a.invert=function(s,o){var l=r-o,f=qr(s,Je(l))*Rr(l);return l*i<0&&(f-=We*Rr(s)*Rr(l)),[f/i,r-Rr(i)*Oi(s*s+l*l)]},a}function eoe(){return SD(Jse).scale(131.154).center([0,13.9389])}var K0=1.340264,J0=-.081106,eg=893e-6,tg=.003796,bv=Oi(3)/2,toe=12;function vP(e,t){var n=Yi(bv*Oe(t)),i=n*n,r=i*i*i;return[e*Te(n)/(bv*(K0+3*J0*i+r*(7*eg+9*tg*i))),n*(K0+J0*i+r*(eg+tg*i))]}vP.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,s,o,l;a<toe&&(o=n*(K0+J0*i+r*(eg+tg*i))-t,l=K0+3*J0*i+r*(7*eg+9*tg*i),n-=s=o/l,i=n*n,r=i*i*i,!(Je(s)<Qy));++a);return[bv*e*(K0+3*J0*i+r*(7*eg+9*tg*i))/Te(n),Yi(Oe(n)/bv)]};function noe(){return os(vP).scale(177.158)}function bP(e,t){var n=Te(t),i=Te(e)*n;return[n*Oe(e)/i,Oe(t)/i]}bP.invert=yp(Bd);function ioe(){return os(bP).scale(144.049).clipAngle(60)}function roe(){var e=1,t=0,n=0,i=1,r=1,a=0,s,o,l=null,f,d,g,p=1,y=1,v=Vb({point:function(D,O){var M=w([D,O]);this.stream.point(M[0],M[1])}}),x=Eg,E,A;function S(){return p=e*i,y=e*r,E=A=null,w}function w(D){var O=D[0]*p,M=D[1]*y;if(a){var C=M*s-O*o;O=O*s+M*o,M=C}return[O+t,M+n]}return w.invert=function(D){var O=D[0]-t,M=D[1]-n;if(a){var C=M*s+O*o;O=O*s-M*o,M=C}return[O/p,M/y]},w.stream=function(D){return E&&A===D?E:E=v(x(A=D))},w.postclip=function(D){return arguments.length?(x=D,l=f=d=g=null,S()):x},w.clipExtent=function(D){return arguments.length?(x=D==null?(l=f=d=g=null,Eg):JU(l=+D[0][0],f=+D[0][1],d=+D[1][0],g=+D[1][1]),S()):l==null?null:[[l,f],[d,g]]},w.scale=function(D){return arguments.length?(e=+D,S()):e},w.translate=function(D){return arguments.length?(t=+D[0],n=+D[1],S()):[t,n]},w.angle=function(D){return arguments.length?(a=D%360*Xe,o=Oe(a),s=Te(a),S()):a*Jt},w.reflectX=function(D){return arguments.length?(i=D?-1:1,S()):i<0},w.reflectY=function(D){return arguments.length?(r=D?-1:1,S()):r<0},w.fitExtent=function(D,O){return Wb(w,D,O)},w.fitSize=function(D,O){return ED(w,D,O)},w.fitWidth=function(D,O){return _D(w,D,O)},w.fitHeight=function(D,O){return AD(w,D,O)},w}function xP(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}xP.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(Je(r)>Me&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function aoe(){return os(xP).scale(175.295)}function EP(e,t){return[Te(t)*Oe(e),Oe(t)]}EP.invert=yp(Yi);function soe(){return os(EP).scale(249.5).clipAngle(90+Me)}function _P(e,t){var n=Te(t),i=1+Te(e)*n;return[n*Oe(e)/i,Oe(t)/i]}_P.invert=yp(function(e){return 2*Bd(e)});function ooe(){return os(_P).scale(250).clipAngle(142)}function AP(e,t){return[Ky(vD((Xt+t)/2)),-e]}AP.invert=function(e,t){return[-t,2*Bd(zU(e))-Xt]};function uoe(){var e=yP(AP),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var loe=Math.abs,$w=Math.cos,xv=Math.sin,coe=1e-6,SP=Math.PI,Mw=SP/2,NR=foe(2);function jR(e){return e>1?Mw:e<-1?-Mw:Math.asin(e)}function foe(e){return e>0?Math.sqrt(e):0}function doe(e,t){var n=e*xv(t),i=30,r;do t-=r=(t+xv(t)-n)/(1+$w(t));while(loe(r)>coe&&--i>0);return t/2}function hoe(e,t,n){function i(r,a){return[e*r*$w(a=doe(n,a)),t*xv(a)]}return i.invert=function(r,a){return a=jR(a/t),[r/(e*$w(a)),jR((2*a+xv(2*a))/n)]},i}var goe=hoe(NR/Mw,NR,SP);function poe(){return os(goe).scale(169.529)}const moe=fP(),Tw=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function yoe(e,t){return function n(){const i=t();return i.type=e,i.path=fP().projection(i),i.copy=i.copy||function(){const r=n();return Tw.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},LB(i)}}function wD(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Ev[e]=yoe(e,t),this):Ev[e]||null}function wP(e){return e&&e.path||moe}const Ev={albers:hP,albersusa:Yse,azimuthalequalarea:Xse,azimuthalequidistant:Vse,conicconformal:Zse,conicequalarea:yv,conicequidistant:eoe,equalEarth:noe,equirectangular:Kse,gnomonic:ioe,identity:roe,mercator:Wse,mollweide:poe,naturalEarth1:aoe,orthographic:soe,stereographic:ooe,transversemercator:uoe};for(const e in Ev)wD(e,Ev[e]);function voe(){}const Rs=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function OP(){var e=1,t=1,n=o;function i(l,f){return f.map(d=>r(l,d))}function r(l,f){var d=[],g=[];return a(l,f,p=>{n(p,l,f),boe(p)>0?d.push([p]):g.push(p)}),g.forEach(p=>{for(var y=0,v=d.length,x;y<v;++y)if(xoe((x=d[y])[0],p)!==-1){x.push(p);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(l,f,d){var g=[],p=[],y,v,x,E,A,S;for(y=v=-1,E=l[0]>=f,Rs[E<<1].forEach(w);++y<e-1;)x=E,E=l[y+1]>=f,Rs[x|E<<1].forEach(w);for(Rs[E<<0].forEach(w);++v<t-1;){for(y=-1,E=l[v*e+e]>=f,A=l[v*e]>=f,Rs[E<<1|A<<2].forEach(w);++y<e-1;)x=E,E=l[v*e+e+y+1]>=f,S=A,A=l[v*e+y+1]>=f,Rs[x|E<<1|A<<2|S<<3].forEach(w);Rs[E|A<<3].forEach(w)}for(y=-1,A=l[v*e]>=f,Rs[A<<2].forEach(w);++y<e-1;)S=A,A=l[v*e+y+1]>=f,Rs[A<<2|S<<3].forEach(w);Rs[A<<3].forEach(w);function w(D){var O=[D[0][0]+y,D[0][1]+v],M=[D[1][0]+y,D[1][1]+v],C=s(O),k=s(M),N,L;(N=p[C])?(L=g[k])?(delete p[N.end],delete g[L.start],N===L?(N.ring.push(M),d(N.ring)):g[N.start]=p[L.end]={start:N.start,end:L.end,ring:N.ring.concat(L.ring)}):(delete p[N.end],N.ring.push(M),p[N.end=k]=N):(N=g[k])?(L=p[C])?(delete g[N.start],delete p[L.end],N===L?(N.ring.push(M),d(N.ring)):g[L.start]=p[N.end]={start:L.start,end:N.end,ring:L.ring.concat(N.ring)}):(delete g[N.start],N.ring.unshift(O),g[N.start=C]=N):g[C]=p[k]={start:C,end:k,ring:[O,M]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function o(l,f,d){l.forEach(g=>{var p=g[0],y=g[1],v=p|0,x=y|0,E,A=f[x*e+v];p>0&&p<e&&v===p&&(E=f[x*e+v-1],g[0]=p+(d-E)/(A-E)-.5),y>0&&y<t&&x===y&&(E=f[(x-1)*e+v],g[1]=y+(d-E)/(A-E)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var f=Math.floor(l[0]),d=Math.floor(l[1]);return f>=0&&d>=0||ne("invalid size"),e=f,t=d,i},i.smooth=function(l){return arguments.length?(n=l?o:voe,i):n===o},i}function boe(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function xoe(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Eoe(e,t[n]))return r;return 0}function Eoe(e,t){for(var n=t[0],i=t[1],r=-1,a=0,s=e.length,o=s-1;a<s;o=a++){var l=e[a],f=l[0],d=l[1],g=e[o],p=g[0],y=g[1];if(_oe(l,g,t))return 0;d>i!=y>i&&n<(p-f)*(i-d)/(y-d)+f&&(r=-r)}return r}function _oe(e,t,n){var i;return Aoe(e,t,n)&&Soe(e[i=+(e[0]===t[0])],n[i],t[i])}function Aoe(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Soe(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function CP(e,t,n){return function(i){var r=Va(i),a=n?Math.min(r[0],0):r[0],s=r[1],o=s-a,l=t?pu(a,s,e):o/(e+1);return cr(a+l,s,l)}}function OD(e){J.call(this,null,e)}OD.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};fe(OD,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||Si,a=OP().smooth(e.smooth!==!1),s=e.thresholds||woe(i,r,e),o=e.as===null?null:e.as||"contour",l=[];return i.forEach(f=>{const d=r(f),g=a.size([d.width,d.height])(d.values,Ee(s)?s:s(d.values));Ooe(g,d,f,e),g.forEach(p=>{l.push(hb(f,ht(o!=null?{[o]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function woe(e,t,n){const i=CP(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Nl(t(r).values)))}function Ooe(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(He(r)&&(r=r(n,i)),He(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const s=(hu(r)?r:r[0])||1,o=(hu(r)?r:r[1])||1,l=a&&a[0]||0,f=a&&a[1]||0;e.forEach(DP(t,s,o,l,f))}function DP(e,t,n,i,r){const a=e.x1||0,s=e.y1||0,o=t*n<0;function l(g){g.forEach(f)}function f(g){o&&g.reverse(),g.forEach(d)}function d(g){g[0]=(g[0]-a)*t+i,g[1]=(g[1]-s)*n+r}return function(g){return g.coordinates.forEach(l),g}}function zR(e,t,n){const i=e>=0?e:vC(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function uA(e){return He(e)?e:ui(+e)}function $P(){var e=l=>l[0],t=l=>l[1],n=Od,i=[-1,-1],r=960,a=500,s=2;function o(l,f){const d=zR(i[0],l,e)>>s,g=zR(i[1],l,t)>>s,p=d?d+2:0,y=g?g+2:0,v=2*p+(r>>s),x=2*y+(a>>s),E=new Float32Array(v*x),A=new Float32Array(v*x);let S=E;l.forEach(D=>{const O=p+(+e(D)>>s),M=y+(+t(D)>>s);O>=0&&O<v&&M>=0&&M<x&&(E[O+M*v]+=+n(D))}),d>0&&g>0?(xf(v,x,E,A,d),Ef(v,x,A,E,g),xf(v,x,E,A,d),Ef(v,x,A,E,g),xf(v,x,E,A,d),Ef(v,x,A,E,g)):d>0?(xf(v,x,E,A,d),xf(v,x,A,E,d),xf(v,x,E,A,d),S=A):g>0&&(Ef(v,x,E,A,g),Ef(v,x,A,E,g),Ef(v,x,E,A,g),S=A);const w=f?Math.pow(2,-2*s):1/q7(S);for(let D=0,O=v*x;D<O;++D)S[D]*=w;return{values:S,scale:1<<s,width:v,height:x,x1:p,y1:y,x2:p+(r>>s),y2:y+(a>>s)}}return o.x=function(l){return arguments.length?(e=uA(l),o):e},o.y=function(l){return arguments.length?(t=uA(l),o):t},o.weight=function(l){return arguments.length?(n=uA(l),o):n},o.size=function(l){if(!arguments.length)return[r,a];var f=+l[0],d=+l[1];return f>=0&&d>=0||ne("invalid size"),r=f,a=d,o},o.cellSize=function(l){return arguments.length?((l=+l)>=1||ne("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),o):1<<s},o.bandwidth=function(l){return arguments.length?(l=De(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&ne("invalid bandwidth"),i=l,o):i},o}function xf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<t;++s)for(let o=0,l=0;o<e+r;++o)o<e&&(l+=n[o+s*e]),o>=r&&(o>=a&&(l-=n[o-a+s*e]),i[o-r+s*e]=l/Math.min(o+1,e-1+a-o,a))}function Ef(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<e;++s)for(let o=0,l=0;o<t+r;++o)o<t&&(l+=n[s+o*e]),o>=r&&(o>=a&&(l-=n[s+(o-a)*e]),i[s+(o-r)*e]=l/Math.min(o+1,t-1+a-o,a))}function CD(e){J.call(this,null,e)}CD.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Coe=["x","y","weight","size","cellSize","bandwidth"];function MP(e,t){return Coe.forEach(n=>t[n]!=null?e[n](t[n]):0),e}fe(CD,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=Doe(i,e.groupby),a=(e.groupby||[]).map(Vt),s=MP($P(),e),o=e.as||"grid",l=[];function f(d,g){for(let p=0;p<a.length;++p)d[a[p]]=g[p];return d}return l=r.map(d=>ht(f({[o]:s(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function Doe(e,t){var n=[],i=d=>d(o),r,a,s,o,l,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),f=r[l],f||(r[l]=f=[],f.dims=l,n.push(f)),f.push(o);return n}function DD(e){J.call(this,null,e)}DD.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};fe(DD,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=OP().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||CP(e.count||10,e.nice,!!r),s=e.size,o,l;return r||(r=t.materialize(t.SOURCE).source,o=MP($P(),e)(r,!0),l=DP(o,o.scale||1,o.scale||1,0,0),s=[o.width,o.height],r=o.values),a=Ee(a)?a:a(r),r=i.size(s)(r,a),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(ht),n}});const kw="Feature",$D="FeatureCollection",$oe="MultiPoint";function MD(e){J.call(this,null,e)}MD.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};fe(MD,J,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],s=r&&r[1],o=e.geojson||!r&&Si,l=t.ADD,f;f=e.modified()||t.changed(t.REM)||t.modified(ti(o))||a&&t.modified(ti(a))||s&&t.modified(ti(s)),(!this.value||f)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),o&&t.visit(l,d=>n.push(o(d))),a&&s&&(t.visit(l,d=>{var g=a(d),p=s(d);g!=null&&p!=null&&(g=+g)===g&&(p=+p)===p&&i.push([g,p])}),n=n.concat({type:kw,geometry:{type:$oe,coordinates:i}})),this.value={type:$D,features:n}}});function TD(e){J.call(this,null,e)}TD.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};fe(TD,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||Si,a=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=wP(e.projection),n.materialize().reflow()):s=r===Si||t.modified(r.fields)?n.ADD_MOD:n.ADD;const o=Moe(i,e.pointRadius);return n.visit(s,l=>l[a]=i(r(l))),i.pointRadius(o),n.modifies(a)}});function Moe(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function kD(e){J.call(this,null,e)}kD.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};fe(kD,J,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],s=a[0],o=a[1],l;function f(d){const g=n([i(d),r(d)]);g?(d[s]=g[0],d[o]=g[1]):(d[s]=void 0,d[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,f):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,f)),t.modifies(a)}});function FD(e){J.call(this,null,e)}FD.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};fe(FD,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=Toe(wP(e.projection),e.field||Lr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[r]=i),n.modifies(r)}});function Toe(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(a),s};return i.context=r=>(e.context(r),i),i}function RD(e){J.call(this,[],e),this.generator=wse()}RD.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};fe(RD,J,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)He(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(Bj(n[0],r)):t.add.push(ht(r)),n[0]=r,t}});function ND(e){J.call(this,null,e)}ND.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};fe(ND,J,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||Si,a=Foe(e.opacity,e),s=koe(e.color,e),o=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?Nl(n.map(f=>Nl(r(f).values))):0};return n.forEach(f=>{const d=r(f),g=Ie({},f,l);i||(g.$max=Nl(d.values||[])),f[o]=Roe(d,g,s.dep?s:ui(s(g)),a.dep?a:ui(a(g)))}),t.reflow(!0).modifies(o)}});function koe(e,t){let n;return He(e)?(n=i=>vu(e(i,t)),n.dep=TP(e)):n=ui(vu(e||"#888")),n}function Foe(e,t){let n;return He(e)?(n=i=>e(i,t),n.dep=TP(e)):e?n=ui(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function TP(e){if(!He(e))return!1;const t=ga(ti(e));return t.$x||t.$y||t.$value||t.$max}function Roe(e,t,n,i){const r=e.width,a=e.height,s=e.x1||0,o=e.y1||0,l=e.x2||r,f=e.y2||a,d=e.values,g=d?E=>d[E]:Zo,p=lu(l-s,f-o),y=p.getContext("2d"),v=y.getImageData(0,0,l-s,f-o),x=v.data;for(let E=o,A=0;E<f;++E){t.$y=E-o;for(let S=s,w=E*r;S<l;++S,A+=4){t.$x=S-s,t.$value=g(S+w);const D=n(t);x[A+0]=D.r,x[A+1]=D.g,x[A+2]=D.b,x[A+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function kP(e){J.call(this,null,e),this.modified(!0)}fe(kP,J,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=joe(e.type),Tw.forEach(i=>{e[i]!=null&&BR(n,i,e[i])})):Tw.forEach(i=>{e.modified(i)&&BR(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&Noe(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Noe(e,t){const n=zoe(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function joe(e){const t=wD((e||"mercator").toLowerCase());return t||ne("Unrecognized projection type: "+e),t()}function BR(e,t,n){He(e[t])&&e[t](n)}function zoe(e){return e=De(e),e.length===1?e[0]:{type:$D,features:e.reduce((t,n)=>t.concat(Boe(n)),[])}}function Boe(e){return e.type===$D?e.features:De(e).filter(t=>t!=null).map(t=>t.type===kw?t:{type:kw,geometry:t})}const Loe=Object.freeze(Object.defineProperty({__proto__:null,contour:DD,geojson:MD,geopath:TD,geopoint:kD,geoshape:FD,graticule:RD,heatmap:ND,isocontour:OD,kde2d:CD,projection:kP},Symbol.toStringTag,{value:"Module"}));function Uoe(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,s=n.length,o,l=0,f=0;for(a=0;a<s;++a)o=n[a],l+=o.x,f+=o.y;for(l=(l/s-e)*i,f=(f/s-t)*i,a=0;a<s;++a)o=n[a],o.x-=l,o.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function Poe(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return FP(this.cover(t,n),t,n,e)}function FP(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,s={data:i},o=e._x0,l=e._y0,f=e._x1,d=e._y1,g,p,y,v,x,E,A,S;if(!a)return e._root=s,e;for(;a.length;)if((x=t>=(g=(o+f)/2))?o=g:f=g,(E=n>=(p=(l+d)/2))?l=p:d=p,r=a,!(a=a[A=E<<1|x]))return r[A]=s,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return s.next=a,r?r[A]=s:e._root=s,e;do r=r?r[A]=new Array(4):e._root=new Array(4),(x=t>=(g=(o+f)/2))?o=g:f=g,(E=n>=(p=(l+d)/2))?l=p:d=p;while((A=E<<1|x)===(S=(v>=p)<<1|y>=g));return r[S]=a,r[A]=s,e}function Ioe(e){var t,n,i=e.length,r,a,s=new Array(i),o=new Array(i),l=1/0,f=1/0,d=-1/0,g=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,o[n]=a,r<l&&(l=r),r>d&&(d=r),a<f&&(f=a),a>g&&(g=a));if(l>d||f>g)return this;for(this.cover(l,f).cover(d,g),n=0;n<i;++n)FP(this,s[n],o[n],e[n]);return this}function qoe(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s=r-n||1,o=this._root,l,f;n>e||e>=r||i>t||t>=a;)switch(f=(t<i)<<1|e<n,l=new Array(4),l[f]=o,o=l,s*=2,f){case 0:r=n+s,a=i+s;break;case 1:n=r-s,a=i+s;break;case 2:r=n+s,i=a-s;break;case 3:n=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function Hoe(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Goe(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function bi(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Yoe(e,t,n){var i,r=this._x0,a=this._y0,s,o,l,f,d=this._x1,g=this._y1,p=[],y=this._root,v,x;for(y&&p.push(new bi(y,r,a,d,g)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,g=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(s=v.x0)>d||(o=v.y0)>g||(l=v.x1)<r||(f=v.y1)<a))if(y.length){var E=(s+l)/2,A=(o+f)/2;p.push(new bi(y[3],E,A,l,f),new bi(y[2],s,A,E,f),new bi(y[1],E,o,l,A),new bi(y[0],s,o,E,A)),(x=(t>=A)<<1|e>=E)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-x],p[p.length-1-x]=v)}else{var S=e-+this._x.call(null,y.data),w=t-+this._y.call(null,y.data),D=S*S+w*w;if(D<n){var O=Math.sqrt(n=D);r=e-O,a=t-O,d=e+O,g=t+O,i=y.data}}return i}function Xoe(e){if(isNaN(d=+this._x.call(null,e))||isNaN(g=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,s=this._x0,o=this._y0,l=this._x1,f=this._y1,d,g,p,y,v,x,E,A;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(s+l)/2))?s=p:l=p,(x=g>=(y=(o+f)/2))?o=y:f=y,t=n,!(n=n[E=x<<1|v]))return this;if(!n.length)break;(t[E+1&3]||t[E+2&3]||t[E+3&3])&&(i=t,A=E)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[E]=a:delete t[E],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[A]=n:this._root=n),this):(this._root=a,this)}function Voe(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Woe(){return this._root}function Qoe(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Zoe(e){var t=[],n,i=this._root,r,a,s,o,l;for(i&&t.push(new bi(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,o=n.x1,l=n.y1)&&i.length){var f=(a+o)/2,d=(s+l)/2;(r=i[3])&&t.push(new bi(r,f,d,o,l)),(r=i[2])&&t.push(new bi(r,a,d,f,l)),(r=i[1])&&t.push(new bi(r,f,s,o,d)),(r=i[0])&&t.push(new bi(r,a,s,f,d))}return this}function Koe(e){var t=[],n=[],i;for(this._root&&t.push(new bi(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,s=i.x0,o=i.y0,l=i.x1,f=i.y1,d=(s+l)/2,g=(o+f)/2;(a=r[0])&&t.push(new bi(a,s,o,d,g)),(a=r[1])&&t.push(new bi(a,d,o,l,g)),(a=r[2])&&t.push(new bi(a,s,g,d,f)),(a=r[3])&&t.push(new bi(a,d,g,l,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Joe(e){return e[0]}function eue(e){return arguments.length?(this._x=e,this):this._x}function tue(e){return e[1]}function nue(e){return arguments.length?(this._y=e,this):this._y}function jD(e,t,n){var i=new zD(t??Joe,n??tue,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function zD(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function LR(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Di=jD.prototype=zD.prototype;Di.copy=function(){var e=new zD(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=LR(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=LR(i));return e};Di.add=Poe;Di.addAll=Ioe;Di.cover=qoe;Di.data=Hoe;Di.extent=Goe;Di.find=Yoe;Di.remove=Xoe;Di.removeAll=Voe;Di.root=Woe;Di.size=Qoe;Di.visit=Zoe;Di.visitAfter=Koe;Di.x=eue;Di.y=nue;function xi(e){return function(){return e}}function ru(e){return(e()-.5)*1e-6}function iue(e){return e.x+e.vx}function rue(e){return e.y+e.vy}function aue(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=xi(e==null?1:+e));function s(){for(var f,d=t.length,g,p,y,v,x,E,A=0;A<a;++A)for(g=jD(t,iue,rue).visitAfter(o),f=0;f<d;++f)p=t[f],x=n[p.index],E=x*x,y=p.x+p.vx,v=p.y+p.vy,g.visit(S);function S(w,D,O,M,C){var k=w.data,N=w.r,L=x+N;if(k){if(k.index>p.index){var B=y-k.x-k.vx,V=v-k.y-k.vy,G=B*B+V*V;G<L*L&&(B===0&&(B=ru(i),G+=B*B),V===0&&(V=ru(i),G+=V*V),G=(L-(G=Math.sqrt(G)))/G*r,p.vx+=(B*=G)*(L=(N*=N)/(E+N)),p.vy+=(V*=G)*L,k.vx-=B*(L=1-L),k.vy-=V*L)}return}return D>y+L||M<y-L||O>v+L||C<v-L}}function o(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function l(){if(t){var f,d=t.length,g;for(n=new Array(d),f=0;f<d;++f)g=t[f],n[g.index]=+e(g,f,t)}}return s.initialize=function(f,d){t=f,i=d,l()},s.iterations=function(f){return arguments.length?(a=+f,s):a},s.strength=function(f){return arguments.length?(r=+f,s):r},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:xi(+f),l(),s):e},s}function sue(e){return e.index}function UR(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function oue(e){var t=sue,n=g,i,r=xi(30),a,s,o,l,f,d=1;e==null&&(e=[]);function g(E){return 1/Math.min(o[E.source.index],o[E.target.index])}function p(E){for(var A=0,S=e.length;A<d;++A)for(var w=0,D,O,M,C,k,N,L;w<S;++w)D=e[w],O=D.source,M=D.target,C=M.x+M.vx-O.x-O.vx||ru(f),k=M.y+M.vy-O.y-O.vy||ru(f),N=Math.sqrt(C*C+k*k),N=(N-a[w])/N*E*i[w],C*=N,k*=N,M.vx-=C*(L=l[w]),M.vy-=k*L,O.vx+=C*(L=1-L),O.vy+=k*L}function y(){if(s){var E,A=s.length,S=e.length,w=new Map(s.map((O,M)=>[t(O,M,s),O])),D;for(E=0,o=new Array(A);E<S;++E)D=e[E],D.index=E,typeof D.source!="object"&&(D.source=UR(w,D.source)),typeof D.target!="object"&&(D.target=UR(w,D.target)),o[D.source.index]=(o[D.source.index]||0)+1,o[D.target.index]=(o[D.target.index]||0)+1;for(E=0,l=new Array(S);E<S;++E)D=e[E],l[E]=o[D.source.index]/(o[D.source.index]+o[D.target.index]);i=new Array(S),v(),a=new Array(S),x()}}function v(){if(s)for(var E=0,A=e.length;E<A;++E)i[E]=+n(e[E],E,e)}function x(){if(s)for(var E=0,A=e.length;E<A;++E)a[E]=+r(e[E],E,e)}return p.initialize=function(E,A){s=E,f=A,y()},p.links=function(E){return arguments.length?(e=E,y(),p):e},p.id=function(E){return arguments.length?(t=E,p):t},p.iterations=function(E){return arguments.length?(d=+E,p):d},p.strength=function(E){return arguments.length?(n=typeof E=="function"?E:xi(+E),v(),p):n},p.distance=function(E){return arguments.length?(r=typeof E=="function"?E:xi(+E),x(),p):r},p}var uue={value:()=>{}};function RP(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ry(n)}function ry(e){this._=e}function lue(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ry.prototype=RP.prototype={constructor:ry,on:function(e,t){var n=this._,i=lue(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=cue(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=PR(n[r],e.name,t);else if(t==null)for(r in n)n[r]=PR(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ry(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function cue(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function PR(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=uue,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var fd=0,B0=0,c0=0,NP=1e3,_v,L0,Av=0,Zl=0,Zb=0,Sg=typeof performance=="object"&&performance.now?performance:Date,jP=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function BD(){return Zl||(jP(fue),Zl=Sg.now()+Zb)}function fue(){Zl=0}function Sv(){this._call=this._time=this._next=null}Sv.prototype=zP.prototype={constructor:Sv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?BD():+n)+(t==null?0:+t),!this._next&&L0!==this&&(L0?L0._next=this:_v=this,L0=this),this._call=e,this._time=n,Fw()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fw())}};function zP(e,t,n){var i=new Sv;return i.restart(e,t,n),i}function due(){BD(),++fd;for(var e=_v,t;e;)(t=Zl-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fd}function IR(){Zl=(Av=Sg.now())+Zb,fd=B0=0;try{due()}finally{fd=0,gue(),Zl=0}}function hue(){var e=Sg.now(),t=e-Av;t>NP&&(Zb-=t,Av=e)}function gue(){for(var e,t=_v,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:_v=n);L0=e,Fw(i)}function Fw(e){if(!fd){B0&&(B0=clearTimeout(B0));var t=e-Zl;t>24?(e<1/0&&(B0=setTimeout(IR,e-Sg.now()-Zb)),c0&&(c0=clearInterval(c0))):(c0||(Av=Sg.now(),c0=setInterval(hue,NP)),fd=1,jP(IR))}}function pue(e,t,n){var i=new Sv,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,s,o){s=+s,o=o==null?BD():+o,i._restart(function l(f){f+=r,i._restart(l,r+=s,o),a(f)},s,o)},i.restart(e,t,n),i)}const mue=1664525,yue=1013904223,qR=4294967296;function vue(){let e=1;return()=>(e=(mue*e+yue)%qR)/qR}function bue(e){return e.x}function xue(e){return e.y}var Eue=10,_ue=Math.PI*(3-Math.sqrt(5));function Aue(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,o=new Map,l=zP(g),f=RP("tick","end"),d=vue();e==null&&(e=[]);function g(){p(),f.call("tick",t),n<i&&(l.stop(),f.call("end",t))}function p(x){var E,A=e.length,S;x===void 0&&(x=1);for(var w=0;w<x;++w)for(n+=(a-n)*r,o.forEach(function(D){D(n)}),E=0;E<A;++E)S=e[E],S.fx==null?S.x+=S.vx*=s:(S.x=S.fx,S.vx=0),S.fy==null?S.y+=S.vy*=s:(S.y=S.fy,S.vy=0);return t}function y(){for(var x=0,E=e.length,A;x<E;++x){if(A=e[x],A.index=x,A.fx!=null&&(A.x=A.fx),A.fy!=null&&(A.y=A.fy),isNaN(A.x)||isNaN(A.y)){var S=Eue*Math.sqrt(.5+x),w=x*_ue;A.x=S*Math.cos(w),A.y=S*Math.sin(w)}(isNaN(A.vx)||isNaN(A.vy))&&(A.vx=A.vy=0)}}function v(x){return x.initialize&&x.initialize(e,d),x}return y(),t={tick:p,restart:function(){return l.restart(g),t},stop:function(){return l.stop(),t},nodes:function(x){return arguments.length?(e=x,y(),o.forEach(v),t):e},alpha:function(x){return arguments.length?(n=+x,t):n},alphaMin:function(x){return arguments.length?(i=+x,t):i},alphaDecay:function(x){return arguments.length?(r=+x,t):+r},alphaTarget:function(x){return arguments.length?(a=+x,t):a},velocityDecay:function(x){return arguments.length?(s=1-x,t):1-s},randomSource:function(x){return arguments.length?(d=x,o.forEach(v),t):d},force:function(x,E){return arguments.length>1?(E==null?o.delete(x):o.set(x,v(E)),t):o.get(x)},find:function(x,E,A){var S=0,w=e.length,D,O,M,C,k;for(A==null?A=1/0:A*=A,S=0;S<w;++S)C=e[S],D=x-C.x,O=E-C.y,M=D*D+O*O,M<A&&(k=C,A=M);return k},on:function(x,E){return arguments.length>1?(f.on(x,E),t):f.on(x)}}}function Sue(){var e,t,n,i,r=xi(-30),a,s=1,o=1/0,l=.81;function f(y){var v,x=e.length,E=jD(e,bue,xue).visitAfter(g);for(i=y,v=0;v<x;++v)t=e[v],E.visit(p)}function d(){if(e){var y,v=e.length,x;for(a=new Array(v),y=0;y<v;++y)x=e[y],a[x.index]=+r(x,y,e)}}function g(y){var v=0,x,E,A=0,S,w,D;if(y.length){for(S=w=D=0;D<4;++D)(x=y[D])&&(E=Math.abs(x.value))&&(v+=x.value,A+=E,S+=E*x.x,w+=E*x.y);y.x=S/A,y.y=w/A}else{x=y,x.x=x.data.x,x.y=x.data.y;do v+=a[x.data.index];while(x=x.next)}y.value=v}function p(y,v,x,E){if(!y.value)return!0;var A=y.x-t.x,S=y.y-t.y,w=E-v,D=A*A+S*S;if(w*w/l<D)return D<o&&(A===0&&(A=ru(n),D+=A*A),S===0&&(S=ru(n),D+=S*S),D<s&&(D=Math.sqrt(s*D)),t.vx+=A*y.value*i/D,t.vy+=S*y.value*i/D),!0;if(y.length||D>=o)return;(y.data!==t||y.next)&&(A===0&&(A=ru(n),D+=A*A),S===0&&(S=ru(n),D+=S*S),D<s&&(D=Math.sqrt(s*D)));do y.data!==t&&(w=a[y.data.index]*i/D,t.vx+=A*w,t.vy+=S*w);while(y=y.next)}return f.initialize=function(y,v){e=y,n=v,d()},f.strength=function(y){return arguments.length?(r=typeof y=="function"?y:xi(+y),d(),f):r},f.distanceMin=function(y){return arguments.length?(s=y*y,f):Math.sqrt(s)},f.distanceMax=function(y){return arguments.length?(o=y*y,f):Math.sqrt(o)},f.theta=function(y){return arguments.length?(l=y*y,f):Math.sqrt(l)},f}function wue(e){var t=xi(.1),n,i,r;typeof e!="function"&&(e=xi(e==null?0:+e));function a(o){for(var l=0,f=n.length,d;l<f;++l)d=n[l],d.vx+=(r[l]-d.x)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:xi(+o),s(),a):t},a.x=function(o){return arguments.length?(e=typeof o=="function"?o:xi(+o),s(),a):e},a}function Oue(e){var t=xi(.1),n,i,r;typeof e!="function"&&(e=xi(e==null?0:+e));function a(o){for(var l=0,f=n.length,d;l<f;++l)d=n[l],d.vy+=(r[l]-d.y)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:xi(+o),s(),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:xi(+o),s(),a):e},a}const HR={center:Uoe,collide:aue,nbody:Sue,link:oue,x:wue,y:Oue},U0="forces",Rw=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Cue=["static","iterations"],BP=["x","y","vx","vy"];function LD(e){J.call(this,null,e)}LD.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:BP}]};fe(LD,J,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(Rw),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&LP(n,e,0,t)):(this.value=n=$ue(t.source,e),n.on("tick",Due(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(Cue)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,l=0,f=o.length,d;l<f;++l)if(d=o[l],!(d.name!==U0||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,s;r<a;++r)if(i[r].name==="links"&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(BP)}});function Due(e,t){return()=>e.touch(t).run()}function $ue(e,t){const n=Aue(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),LP(n,t,!0).on("end",()=>a=!0)}function LP(e,t,n,i){var r=De(t.forces),a,s,o,l;for(a=0,s=Rw.length;a<s;++a)o=Rw[a],o!==U0&&t.modified(o)&&e[o](t[o]);for(a=0,s=r.length;a<s;++a)l=U0+a,o=n||t.modified(U0,a)?Tue(r[a]):i&&Mue(r[a],i)?e.force(l):null,o&&e.force(l,o);for(s=e.numForces||0;a<s;++a)e.force(U0+a,null);return e.numForces=r.length,e}function Mue(e,t){var n,i;for(n in e)if(He(i=e[n])&&t.modified(ti(i)))return 1;return 0}function Tue(e){var t,n;Re(HR,e.force)||ne("Unrecognized force: "+e.force),t=HR[e.force]();for(n in e)He(t[n])&&kue(t[n],e[n],e);return t}function kue(e,t,n){e(He(t)?i=>t(i,n):t)}const Fue=Object.freeze(Object.defineProperty({__proto__:null,force:LD},Symbol.toStringTag,{value:"Module"}));function Rue(e,t){return e.parent===t.parent?1:2}function Nue(e){return e.reduce(jue,0)/e.length}function jue(e,t){return e+t.x}function zue(e){return 1+e.reduce(Bue,0)}function Bue(e,t){return Math.max(e,t.y)}function Lue(e){for(var t;t=e.children;)e=t[0];return e}function Uue(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Pue(){var e=Rue,t=1,n=1,i=!1;function r(a){var s,o=0;a.eachAfter(function(p){var y=p.children;y?(p.x=Nue(y),p.y=zue(y)):(p.x=s?o+=e(p,s):0,p.y=0,s=p)});var l=Lue(a),f=Uue(a),d=l.x-e(l,f)/2,g=f.x+e(f,l)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(g-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function Iue(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function que(){return this.eachAfter(Iue)}function Hue(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Gue(e,t){for(var n=this,i=[n],r,a,s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function Yue(e,t){for(var n=this,i=[n],r=[],a,s,o,l=-1;n=i.pop();)if(r.push(n),a=n.children)for(s=0,o=a.length;s<o;++s)i.push(a[s]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function Xue(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Vue(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function Wue(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Que(e){for(var t=this,n=Zue(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Zue(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Kue(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Jue(){return Array.from(this)}function ele(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function tle(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*nle(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function UD(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=ale)):t===void 0&&(t=rle);for(var n=new dd(e),i,r=[n],a,s,o,l;i=r.pop();)if((s=t(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,o=l-1;o>=0;--o)r.push(a=s[o]=new dd(s[o])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(UP)}function ile(){return UD(this).eachBefore(sle)}function rle(e){return e.children}function ale(e){return Array.isArray(e)?e[1]:null}function sle(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function UP(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function dd(e){this.data=e,this.depth=this.height=0,this.parent=null}dd.prototype=UD.prototype={constructor:dd,count:que,each:Hue,eachAfter:Yue,eachBefore:Gue,find:Xue,sum:Vue,sort:Wue,path:Que,ancestors:Kue,descendants:Jue,leaves:ele,links:tle,copy:ile,[Symbol.iterator]:nle};function ay(e){return e==null?null:PP(e)}function PP(e){if(typeof e!="function")throw new Error;return e}function $l(){return 0}function Df(e){return function(){return e}}const ole=1664525,ule=1013904223,GR=4294967296;function lle(){let e=1;return()=>(e=(ole*e+ule)%GR)/GR}function cle(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fle(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function dle(e,t){for(var n=0,i=(e=fle(Array.from(e),t)).length,r=[],a,s;n<i;)a=e[n],s&&IP(s,a)?++n:(s=gle(r=hle(r,a)),n=0);return s}function hle(e,t){var n,i;if(lA(t,e))return[t];for(n=0;n<e.length;++n)if(S1(t,e[n])&&lA(P0(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(S1(P0(e[n],e[i]),t)&&S1(P0(e[n],t),e[i])&&S1(P0(e[i],t),e[n])&&lA(qP(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function S1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function IP(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function lA(e,t){for(var n=0;n<t.length;++n)if(!IP(e,t[n]))return!1;return!0}function gle(e){switch(e.length){case 1:return ple(e[0]);case 2:return P0(e[0],e[1]);case 3:return qP(e[0],e[1],e[2])}}function ple(e){return{x:e.x,y:e.y,r:e.r}}function P0(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,s=t.y,o=t.r,l=a-n,f=s-i,d=o-r,g=Math.sqrt(l*l+f*f);return{x:(n+a+l/g*d)/2,y:(i+s+f/g*d)/2,r:(g+r+o)/2}}function qP(e,t,n){var i=e.x,r=e.y,a=e.r,s=t.x,o=t.y,l=t.r,f=n.x,d=n.y,g=n.r,p=i-s,y=i-f,v=r-o,x=r-d,E=l-a,A=g-a,S=i*i+r*r-a*a,w=S-s*s-o*o+l*l,D=S-f*f-d*d+g*g,O=y*v-p*x,M=(v*D-x*w)/(O*2)-i,C=(x*E-v*A)/O,k=(y*w-p*D)/(O*2)-r,N=(p*A-y*E)/O,L=C*C+N*N-1,B=2*(a+M*C+k*N),V=M*M+k*k-a*a,G=-(Math.abs(L)>1e-6?(B+Math.sqrt(B*B-4*L*V))/(2*L):V/B);return{x:i+M+C*G,y:r+k+N*G,r:G}}function YR(e,t,n){var i=e.x-t.x,r,a,s=e.y-t.y,o,l,f=i*i+s*s;f?(a=t.r+n.r,a*=a,l=e.r+n.r,l*=l,a>l?(r=(f+l-a)/(2*f),o=Math.sqrt(Math.max(0,l/f-r*r)),n.x=e.x-r*i-o*s,n.y=e.y-r*s+o*i):(r=(f+a-l)/(2*f),o=Math.sqrt(Math.max(0,a/f-r*r)),n.x=t.x+r*i-o*s,n.y=t.y+r*s+o*i)):(n.x=t.x+n.r,n.y=t.y)}function XR(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function VR(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function w1(e){this._=e,this.next=null,this.previous=null}function mle(e,t){if(!(a=(e=cle(e)).length))return 0;var n,i,r,a,s,o,l,f,d,g,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;YR(i,n,r=e[2]),n=new w1(n),i=new w1(i),r=new w1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<a;++l){YR(n._,i._,r=e[l]),r=new w1(r),f=i.next,d=n.previous,g=i._.r,p=n._.r;do if(g<=p){if(XR(f._,r._)){i=f,n.next=i,i.previous=n,--l;continue e}g+=f._.r,f=f.next}else{if(XR(d._,r._)){n=d,n.next=i,i.previous=n,--l;continue e}p+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=VR(n);(r=r.next)!==i;)(o=VR(r))<s&&(n=r,s=o);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=dle(n,t),l=0;l<a;++l)n=e[l],n.x-=r.x,n.y-=r.y;return r.r}function yle(e){return Math.sqrt(e.value)}function vle(){var e=null,t=1,n=1,i=$l;function r(a){const s=lle();return a.x=t/2,a.y=n/2,e?a.eachBefore(WR(e)).eachAfter(cA(i,.5,s)).eachBefore(QR(1)):a.eachBefore(WR(yle)).eachAfter(cA($l,1,s)).eachAfter(cA(i,a.r/Math.min(t,n),s)).eachBefore(QR(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=ay(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:Df(+a),r):i},r}function WR(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function cA(e,t,n){return function(i){if(r=i.children){var r,a,s=r.length,o=e(i)*t||0,l;if(o)for(a=0;a<s;++a)r[a].r+=o;if(l=mle(r,n),o)for(a=0;a<s;++a)r[a].r-=o;i.r=l+o}}}function QR(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function HP(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function vp(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,f=e.value&&(i-t)/e.value;++o<l;)s=a[o],s.y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*f}function ble(){var e=1,t=1,n=0,i=!1;function r(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/o,s.eachBefore(a(t,o)),i&&s.eachBefore(HP),s}function a(s,o){return function(l){l.children&&vp(l,l.x0,s*(l.depth+1)/o,l.x1,s*(l.depth+2)/o);var f=l.x0,d=l.y0,g=l.x1-n,p=l.y1-n;g<f&&(f=g=(f+g)/2),p<d&&(d=p=(d+p)/2),l.x0=f,l.y0=d,l.x1=g,l.y1=p}}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r}var xle={depth:-1},ZR={},fA={};function Ele(e){return e.id}function _le(e){return e.parentId}function KR(){var e=Ele,t=_le,n;function i(r){var a=Array.from(r),s=e,o=t,l,f,d,g,p,y,v,x,E=new Map;if(n!=null){const A=a.map((D,O)=>Ale(n(D,O,r))),S=A.map(JR),w=new Set(A).add("");for(const D of S)w.has(D)||(w.add(D),A.push(D),S.push(JR(D)),a.push(fA));s=(D,O)=>A[O],o=(D,O)=>S[O]}for(d=0,l=a.length;d<l;++d)f=a[d],y=a[d]=new dd(f),(v=s(f,d,r))!=null&&(v+="")&&(x=y.id=v,E.set(x,E.has(x)?ZR:y)),(v=o(f,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<l;++d)if(y=a[d],v=y.parent){if(p=E.get(v),!p)throw new Error("missing: "+v);if(p===ZR)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(g)throw new Error("multiple roots");g=y}if(!g)throw new Error("no root");if(n!=null){for(;g.data===fA&&g.children.length===1;)g=g.children[0],--l;for(let A=a.length-1;A>=0&&(y=a[A],y.data===fA);--A)y.data=null}if(g.parent=xle,g.eachBefore(function(A){A.depth=A.parent.depth+1,--l}).eachBefore(UP),g.parent=null,l>0)throw new Error("cycle");return g}return i.id=function(r){return arguments.length?(e=ay(r),i):e},i.parentId=function(r){return arguments.length?(t=ay(r),i):t},i.path=function(r){return arguments.length?(n=ay(r),i):n},i}function Ale(e){e=`${e}`;let t=e.length;return Nw(e,t-1)&&!Nw(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function JR(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Nw(e,t););return e.slice(0,t)}function Nw(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Sle(e,t){return e.parent===t.parent?1:2}function dA(e){var t=e.children;return t?t[0]:e.t}function hA(e){var t=e.children;return t?t[t.length-1]:e.t}function wle(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Ole(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function Cle(e,t,n){return e.a.parent===t.parent?e.a:n}function sy(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}sy.prototype=Object.create(dd.prototype);function Dle(e){for(var t=new sy(e,0),n,i=[t],r,a,s,o;n=i.pop();)if(a=n._.children)for(n.children=new Array(o=a.length),s=o-1;s>=0;--s)i.push(r=n.children[s]=new sy(a[s],s)),r.parent=n;return(t.parent=new sy(null,0)).children=[t],t}function $le(){var e=Sle,t=1,n=1,i=null;function r(f){var d=Dle(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(s),i)f.eachBefore(l);else{var g=f,p=f,y=f;f.eachBefore(function(S){S.x<g.x&&(g=S),S.x>p.x&&(p=S),S.depth>y.depth&&(y=S)});var v=g===p?1:e(g,p)/2,x=v-g.x,E=t/(p.x+v+x),A=n/(y.depth||1);f.eachBefore(function(S){S.x=(S.x+x)*E,S.y=S.depth*A})}return f}function a(f){var d=f.children,g=f.parent.children,p=f.i?g[f.i-1]:null;if(d){Ole(f);var y=(d[0].z+d[d.length-1].z)/2;p?(f.z=p.z+e(f._,p._),f.m=f.z-y):f.z=y}else p&&(f.z=p.z+e(f._,p._));f.parent.A=o(f,p,f.parent.A||g[0])}function s(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function o(f,d,g){if(d){for(var p=f,y=f,v=d,x=p.parent.children[0],E=p.m,A=y.m,S=v.m,w=x.m,D;v=hA(v),p=dA(p),v&&p;)x=dA(x),y=hA(y),y.a=f,D=v.z+S-p.z-E+e(v._,p._),D>0&&(wle(Cle(v,f,g),f,D),E+=D,A+=D),S+=v.m,E+=p.m,w+=x.m,A+=y.m;v&&!hA(y)&&(y.t=v,y.m+=S-A),p&&!dA(x)&&(x.t=p,x.m+=E-w,g=f)}return g}function l(f){f.x*=t,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(e=f,r):e},r.size=function(f){return arguments.length?(i=!1,t=+f[0],n=+f[1],r):i?null:[t,n]},r.nodeSize=function(f){return arguments.length?(i=!0,t=+f[0],n=+f[1],r):i?[t,n]:null},r}function Kb(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,f=e.value&&(r-n)/e.value;++o<l;)s=a[o],s.x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*f}var GP=(1+Math.sqrt(5))/2;function YP(e,t,n,i,r,a){for(var s=[],o=t.children,l,f,d=0,g=0,p=o.length,y,v,x=t.value,E,A,S,w,D,O,M;d<p;){y=r-n,v=a-i;do E=o[g++].value;while(!E&&g<p);for(A=S=E,O=Math.max(v/y,y/v)/(x*e),M=E*E*O,D=Math.max(S/M,M/A);g<p;++g){if(E+=f=o[g].value,f<A&&(A=f),f>S&&(S=f),M=E*E*O,w=Math.max(S/M,M/A),w>D){E-=f;break}D=w}s.push(l={value:E,dice:y<v,children:o.slice(d,g)}),l.dice?vp(l,n,i,r,x?i+=v*E/x:a):Kb(l,n,i,x?n+=y*E/x:r,a),x-=E,d=g}return s}const XP=(function e(t){function n(i,r,a,s,o){YP(t,i,r,a,s,o)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(GP);function Mle(){var e=XP,t=!1,n=1,i=1,r=[0],a=$l,s=$l,o=$l,l=$l,f=$l;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(g),r=[0],t&&p.eachBefore(HP),p}function g(p){var y=r[p.depth],v=p.x0+y,x=p.y0+y,E=p.x1-y,A=p.y1-y;E<v&&(v=E=(v+E)/2),A<x&&(x=A=(x+A)/2),p.x0=v,p.y0=x,p.x1=E,p.y1=A,p.children&&(y=r[p.depth+1]=a(p)/2,v+=f(p)-y,x+=s(p)-y,E-=o(p)-y,A-=l(p)-y,E<v&&(v=E=(v+E)/2),A<x&&(x=A=(x+A)/2),e(p,v,x,E,A))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=PP(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:Df(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:Df(+p),d):s},d.paddingRight=function(p){return arguments.length?(o=typeof p=="function"?p:Df(+p),d):o},d.paddingBottom=function(p){return arguments.length?(l=typeof p=="function"?p:Df(+p),d):l},d.paddingLeft=function(p){return arguments.length?(f=typeof p=="function"?p:Df(+p),d):f},d}function Tle(e,t,n,i,r){var a=e.children,s,o=a.length,l,f=new Array(o+1);for(f[0]=l=s=0;s<o;++s)f[s+1]=l+=a[s].value;d(0,o,e.value,t,n,i,r);function d(g,p,y,v,x,E,A){if(g>=p-1){var S=a[g];S.x0=v,S.y0=x,S.x1=E,S.y1=A;return}for(var w=f[g],D=y/2+w,O=g+1,M=p-1;O<M;){var C=O+M>>>1;f[C]<D?O=C+1:M=C}D-f[O-1]<f[O]-D&&g+1<O&&--O;var k=f[O]-w,N=y-k;if(E-v>A-x){var L=y?(v*N+E*k)/y:E;d(g,O,k,v,x,L,A),d(O,p,N,L,x,E,A)}else{var B=y?(x*N+A*k)/y:A;d(g,O,k,v,x,E,B),d(O,p,N,v,B,E,A)}}}function kle(e,t,n,i,r){(e.depth&1?Kb:vp)(e,t,n,i,r)}const Fle=(function e(t){function n(i,r,a,s,o){if((l=i._squarify)&&l.ratio===t)for(var l,f,d,g,p=-1,y,v=l.length,x=i.value;++p<v;){for(f=l[p],d=f.children,g=f.value=0,y=d.length;g<y;++g)f.value+=d[g].value;f.dice?vp(f,r,a,s,x?a+=(o-a)*f.value/x:o):Kb(f,r,a,x?r+=(s-r)*f.value/x:s,o),x-=f.value}else i._squarify=l=YP(t,i,r,a,s,o),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(GP);function jw(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function PD(e){J.call(this,null,e)}PD.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Rle=e=>e.values;fe(PD,J,{transform(e,t){t.source||ne("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(s=>{s.children&&db(s.data)&&r.rem.push(s.data)}),this.value=a=UD({values:De(e.keys).reduce((s,o)=>(s.key(o),s),Nle()).entries(r.source)},Rle),n&&a.each(s=>{s.children&&(s=ht(s.data),r.add.push(s),r.source.push(s))}),jw(a,we,we)),r.source.root=a,r}});function Nle(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const s=r.length,o=e[a++],l={},f={};let d=-1,g,p,y;for(;++d<s;)g=o(p=r[d])+"",(y=l[g])?y.push(p):l[g]=[p];for(g in l)f[g]=n(l[g],a);return f}function i(r,a){if(++a>e.length)return r;const s=[];for(const o in r)s.push({key:o,values:i(r[o],a)});return s}return t}function uo(e){J.call(this,null,e)}const jle=(e,t)=>e.parent===t.parent?1:2;fe(uo,J,{transform(e,t){(!t.source||!t.source.root)&&ne(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(hc(e.sort,s=>s.data)),zle(n,this.params,e),n.separation&&n.separation(e.separation!==!1?jle:Od);try{this.value=n(r)}catch(s){ne(s)}return r.each(s=>Ble(s,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function zle(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function Ble(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const zw=["x","y","r","depth","children"];function ID(e){uo.call(this,e)}ID.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:zw.length,default:zw}]};fe(ID,uo,{layout:vle,params:["radius","size","padding"],fields:zw});const Bw=["x0","y0","x1","y1","depth","children"];function qD(e){uo.call(this,e)}qD.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Bw.length,default:Bw}]};fe(qD,uo,{layout:ble,params:["size","round","padding"],fields:Bw});function HD(e){J.call(this,null,e)}HD.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};fe(HD,J,{transform(e,t){t.source||ne("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?jw(KR().id(e.key).parentId(e.parentKey)(r.source),e.key,Ur):jw(KR()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const e8={tidy:$le,cluster:Pue},Lw=["x","y","depth","children"];function GD(e){uo.call(this,e)}GD.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Lw.length,default:Lw}]};fe(GD,uo,{layout(e){const t=e||"tidy";if(Re(e8,t))return e8[t]();ne("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Lw});function YD(e){J.call(this,[],e)}YD.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};fe(YD,J,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||ne("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>a[we(s)]=1),i.each(s=>{const o=s.data,l=s.parent&&s.parent.data;l&&a[we(o)]&&a[we(l)]&&r.add.push(ht({source:l,target:o}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[we(s)]=1),n.forEach(s=>{(a[we(s.source)]||a[we(s.target)])&&r.mod.push(s)})),r}});const t8={binary:Tle,dice:vp,slice:Kb,slicedice:kle,squarify:XP,resquarify:Fle},Uw=["x0","y0","x1","y1","depth","children"];function XD(e){uo.call(this,e)}XD.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Uw.length,default:Uw}]};fe(XD,uo,{layout(){const e=Mle();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Re(t8,t)?e.tile(t8[t]):ne("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:Uw});const Lle=Object.freeze(Object.defineProperty({__proto__:null,nest:PD,pack:ID,partition:qD,stratify:HD,tree:GD,treelinks:YD,treemap:XD},Symbol.toStringTag,{value:"Module"})),gA=4278190080;function Ule(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function Ple(e,t,n,i,r){const a=e.width,s=e.height,o=i||r,l=lu(a,s).getContext("2d"),f=lu(a,s).getContext("2d"),d=o&&lu(a,s).getContext("2d");n.forEach(k=>oy(l,k,!1)),oy(f,t,!1),o&&oy(d,t,!0);const g=pA(l,a,s),p=pA(f,a,s),y=o&&pA(d,a,s),v=e.bitmap(),x=o&&e.bitmap();let E,A,S,w,D,O,M,C;for(A=0;A<s;++A)for(E=0;E<a;++E)D=A*a+E,O=g[D]&gA,C=p[D]&gA,M=o&&y[D]&gA,(O||M||C)&&(S=e(E),w=e(A),!r&&(O||C)&&v.set(S,w),o&&(O||M)&&x.set(S,w));return[v,x]}function pA(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function oy(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>oy(e,a.items,n))}):yr[i].draw(e,{items:n?t.map(Ile):t})}function Ile(e){const t=hb(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ns=5,fi=31,wg=32,Wo=new Uint32Array(wg+1),aa=new Uint32Array(wg+1);aa[0]=0;Wo[0]=~aa[0];for(let e=1;e<=wg;++e)aa[e]=aa[e-1]<<1|1,Wo[e]=~aa[e];function qle(e,t){const n=new Uint32Array(~~((e*t+wg)/wg));function i(a,s){n[a]|=s}function r(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const o=s*e+a;return n[o>>>Ns]&1<<(o&fi)},set:(a,s)=>{const o=s*e+a;i(o>>>Ns,1<<(o&fi))},clear:(a,s)=>{const o=s*e+a;r(o>>>Ns,~(1<<(o&fi)))},getRange:(a,s,o,l)=>{let f=l,d,g,p,y;for(;f>=s;--f)if(d=f*e+a,g=f*e+o,p=d>>>Ns,y=g>>>Ns,p===y){if(n[p]&Wo[d&fi]&aa[(g&fi)+1])return!0}else{if(n[p]&Wo[d&fi]||n[y]&aa[(g&fi)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,s,o,l)=>{let f,d,g,p,y;for(;s<=l;++s)if(f=s*e+a,d=s*e+o,g=f>>>Ns,p=d>>>Ns,g===p)i(g,Wo[f&fi]&aa[(d&fi)+1]);else for(i(g,Wo[f&fi]),i(p,aa[(d&fi)+1]),y=g+1;y<p;++y)i(y,4294967295)},clearRange:(a,s,o,l)=>{let f,d,g,p,y;for(;s<=l;++s)if(f=s*e+a,d=s*e+o,g=f>>>Ns,p=d>>>Ns,g===p)r(g,aa[f&fi]|Wo[(d&fi)+1]);else for(r(g,aa[f&fi]),r(p,Wo[(d&fi)+1]),y=g+1;y<p;++y)r(y,0)},outOfBounds:(a,s,o,l)=>a<0||s<0||l>=t||o>=e}}function Hle(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),s=o=>~~((o+n)/i);return s.invert=o=>o*i-n,s.bitmap=()=>qle(r,a),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}function Gle(e,t,n,i){const r=e.width,a=e.height;return function(s){const o=s.datum.datum.items[i].items,l=o.length,f=s.datum.fontSize,d=dr.width(s.datum,s.datum.text);let g=0,p,y,v,x,E,A,S;for(let w=0;w<l;++w)p=o[w].x,v=o[w].y,y=o[w].x2===void 0?p:o[w].x2,x=o[w].y2===void 0?v:o[w].y2,E=(p+y)/2,A=(v+x)/2,S=Math.abs(y-p+x-v),S>=g&&(g=S,s.x=E,s.y=A);return E=d/2,A=f/2,p=s.x-E,y=s.x+E,v=s.y-A,x=s.y+A,s.align="center",p<0&&y<=r?s.align="left":0<=p&&r<y&&(s.align="right"),s.baseline="middle",v<0&&x<=a?s.baseline="top":0<=v&&a<x&&(s.baseline="bottom"),!0}}function wv(e,t,n,i,r,a){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>a}function au(e,t,n,i,r,a,s,o){const l=r*a/(i*2),f=e(t-l),d=e(t+l),g=e(n-(a=a/2)),p=e(n+a);return s.outOfBounds(f,g,d,p)||s.getRange(f,g,d,p)||o&&o.getRange(f,g,d,p)}function Yle(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1];function l(f,d,g,p,y){const v=e.invert(f),x=e.invert(d);let E=g,A=a,S;if(!wv(v,x,p,y,r,a)&&!au(e,v,x,y,p,E,s,o)&&!au(e,v,x,y,p,y,s,null)){for(;A-E>=1;)S=(E+A)/2,au(e,v,x,y,p,S,s,o)?A=S:E=S;if(E>g)return[v,x,E,!0]}}return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=dr.width(f.datum,f.datum.text);let v=n?p:0,x=!1,E=!1,A=0,S,w,D,O,M,C,k,N,L,B,V,G,P,j,F,U,H;for(let Q=0;Q<g;++Q){for(S=d[Q].x,D=d[Q].y,w=d[Q].x2===void 0?S:d[Q].x2,O=d[Q].y2===void 0?D:d[Q].y2,S>w&&(H=S,S=w,w=H),D>O&&(H=D,D=O,O=H),L=e(S),V=e(w),B=~~((L+V)/2),G=e(D),j=e(O),P=~~((G+j)/2),k=B;k>=L;--k)for(N=P;N>=G;--N)U=l(k,N,v,y,p),U&&([f.x,f.y,v,x]=U);for(k=B;k<=V;++k)for(N=P;N<=j;++N)U=l(k,N,v,y,p),U&&([f.x,f.y,v,x]=U);!x&&!n&&(F=Math.abs(w-S+O-D),M=(S+w)/2,C=(D+O)/2,F>=A&&!wv(M,C,y,p,r,a)&&!au(e,M,C,p,y,p,s,null)&&(A=F,f.x=M,f.y=C,E=!0))}return x||E?(M=y/2,C=p/2,s.setRange(e(f.x-M),e(f.y-C),e(f.x+M),e(f.y+C)),f.align="center",f.baseline="middle",!0):!1}}const Xle=[-1,-1,1,1],Vle=[-1,1,-1,1];function Wle(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=e.bitmap();return function(f){const d=f.datum.datum.items[i].items,g=d.length,p=f.datum.fontSize,y=dr.width(f.datum,f.datum.text),v=[];let x=n?p:0,E=!1,A=!1,S=0,w,D,O,M,C,k,N,L,B,V,G,P;for(let j=0;j<g;++j){for(w=d[j].x,O=d[j].y,D=d[j].x2===void 0?w:d[j].x2,M=d[j].y2===void 0?O:d[j].y2,v.push([e((w+D)/2),e((O+M)/2)]);v.length;)if([N,L]=v.pop(),!(s.get(N,L)||o.get(N,L)||l.get(N,L))){l.set(N,L);for(let F=0;F<4;++F)C=N+Xle[F],k=L+Vle[F],l.outOfBounds(C,k,C,k)||v.push([C,k]);if(C=e.invert(N),k=e.invert(L),B=x,V=a,!wv(C,k,y,p,r,a)&&!au(e,C,k,p,y,B,s,o)&&!au(e,C,k,p,y,p,s,null)){for(;V-B>=1;)G=(B+V)/2,au(e,C,k,p,y,G,s,o)?V=G:B=G;B>x&&(f.x=C,f.y=k,x=B,E=!0)}}!E&&!n&&(P=Math.abs(D-w+M-O),C=(w+D)/2,k=(O+M)/2,P>=S&&!wv(C,k,y,p,r,a)&&!au(e,C,k,p,y,p,s,null)&&(S=P,f.x=C,f.y=k,A=!0))}return E||A?(C=y/2,k=p/2,s.setRange(e(f.x-C),e(f.y-k),e(f.x+C),e(f.y+k)),f.align="center",f.baseline="middle",!0):!1}}const Qle=["right","center","left"],Zle=["bottom","middle","top"];function Kle(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=i.length;return function(f){const d=f.boundary,g=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=f.textWidth??0,y,v,x,E,A,S,w,D,O,M,C,k,N,L,B;for(let V=0;V<l;++V){if(y=(n[V]&3)-1,v=(n[V]>>>2&3)-1,x=y===0&&v===0||i[V]<0,E=y&&v?Math.SQRT1_2:1,A=i[V]<0?-1:1,S=d[1+y]+i[V]*y*E,C=d[4+v]+A*g*v/2+i[V]*v*E,D=C-g/2,O=C+g/2,k=e(S),L=e(D),B=e(O),!p)if(n8(k,k,L,B,s,o,S,S,D,O,d,x))p=dr.width(f.datum,f.datum.text);else continue;if(M=S+A*p*y/2,S=M-p/2,w=M+p/2,k=e(S),N=e(w),n8(k,N,L,B,s,o,S,w,D,O,d,x))return f.x=y?y*A<0?w:S:M,f.y=v?v*A<0?O:D:C,f.align=Qle[y*A+1],f.baseline=Zle[v*A+1],s.setRange(k,L,N,B),!0}return!1}}function n8(e,t,n,i,r,a,s,o,l,f,d,g){return!(r.outOfBounds(e,n,t,i)||(g&&a||r).getRange(e,n,t,i))}const mA=0,yA=4,vA=8,bA=0,xA=1,EA=2,Jle={"top-left":mA+bA,top:mA+xA,"top-right":mA+EA,left:yA+bA,middle:yA+xA,right:yA+EA,"bottom-left":vA+bA,bottom:vA+xA,"bottom-right":vA+EA},ece={naive:Gle,"reduced-search":Yle,floodfill:Wle};function tce(e,t,n,i,r,a,s,o,l,f,d){if(!e.length)return e;const g=Math.max(i.length,r.length),p=nce(i,g),y=ice(r,g),v=rce(e[0].datum),x=v==="group"&&e[0].datum.items[l].marktype,E=x==="area",A=ace(v,x,o,l),S=f===null||f===1/0,w=E&&d==="naive";let D=-1,O=-1;const M=e.map(L=>{const B=S?dr.width(L,L.text):void 0;return D=Math.max(D,B),O=Math.max(O,L.fontSize),{datum:L,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:A(L),textWidth:B}});f=f===null||f===1/0?Math.max(D,O)+Math.max(...i):f;const C=Hle(t[0],t[1],f);let k;if(!w){n&&M.sort((V,G)=>n(V.datum,G.datum));let L=!1;for(let V=0;V<y.length&&!L;++V)L=y[V]===5||p[V]<0;const B=(v&&s||E)&&e.map(V=>V.datum);k=a.length||B?Ple(C,B||[],a,L,E):Ule(C,s&&M)}const N=E?ece[d](C,k,s,l):Kle(C,k,y,p);return M.forEach(L=>L.opacity=+N(L)),M}function nce(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function ice(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=Jle[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function rce(e){return e&&e.mark&&e.mark.marktype}function ace(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const s=a.datum.items[i].items;return r(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}const Pw=["x","y","opacity","align","baseline"],VP=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function VD(e){J.call(this,null,e)}VD.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:VP},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Pw.length,default:Pw}]};fe(VD,J,{transform(e,t){function n(a){const s=e[a];return He(s)&&t.modified(s.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ne("Size parameter should be specified as a [width, height] array.");const r=e.as||Pw;return tce(t.materialize(t.SOURCE).source||[],e.size,e.sort,De(e.offset==null?1:e.offset),De(e.anchor||VP),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[r[0]]=a.x,s[r[1]]=a.y,s[r[2]]=a.opacity,s[r[3]]=a.align,s[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const sce=Object.freeze(Object.defineProperty({__proto__:null,label:VD},Symbol.toStringTag,{value:"Module"}));function WP(e,t){var n=[],i=function(d){return d(o)},r,a,s,o,l,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),f=r[l],f||(r[l]=f=[],f.dims=l,n.push(f)),f.push(o);return n}function WD(e){J.call(this,null,e)}WD.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};fe(WD,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=WP(i,e.groupby),a=(e.groupby||[]).map(Vt),s=a.length,o=e.as||[Vt(e.x),Vt(e.y)],l=[];r.forEach(f=>{nz(f,e.x,e.y,e.bandwidth||.3).forEach(d=>{const g={};for(let p=0;p<s;++p)g[a[p]]=f.dims[p];g[o[0]]=d[0],g[o[1]]=d[1],l.push(ht(g))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const Iw={constant:MC,linear:TC,log:Kj,exp:Jj,pow:ez,quad:kC,poly:tz},oce=(e,t)=>e==="poly"?t:e==="quad"?2:1;function QD(e){J.call(this,null,e)}QD.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Iw)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};fe(QD,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=WP(i,e.groupby),a=(e.groupby||[]).map(Vt),s=e.method||"linear",o=e.order==null?3:e.order,l=oce(s,o),f=e.as||[Vt(e.x),Vt(e.y)],d=Iw[s],g=[];let p=e.extent;Re(Iw,s)||ne("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const x=d(y,e.x,e.y,o);if(e.params){g.push(ht({keys:y.dims,coef:x.coef,rSquared:x.rSquared}));return}const E=p||Va(y,e.x),A=S=>{const w={};for(let D=0;D<a.length;++D)w[a[D]]=y.dims[D];w[f[0]]=S[0],w[f[1]]=S[1],g.push(ht(w))};s==="linear"||s==="constant"?E.forEach(S=>A([S,x.predict(S)])):xb(x.predict,E,25,200).forEach(A)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=g}return n}});const uce=Object.freeze(Object.defineProperty({__proto__:null,loess:WD,regression:QD},Symbol.toStringTag,{value:"Module"})),Ks=11102230246251565e-32,Xn=134217729,lce=(3+8*Ks)*Ks;function _A(e,t,n,i,r){let a,s,o,l,f=t[0],d=i[0],g=0,p=0;d>f==d>-f?(a=f,f=t[++g]):(a=d,d=i[++p]);let y=0;if(g<e&&p<n)for(d>f==d>-f?(s=f+a,o=a-(s-f),f=t[++g]):(s=d+a,o=a-(s-d),d=i[++p]),a=s,o!==0&&(r[y++]=o);g<e&&p<n;)d>f==d>-f?(s=a+f,l=s-a,o=a-(s-l)+(f-l),f=t[++g]):(s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p]),a=s,o!==0&&(r[y++]=o);for(;g<e;)s=a+f,l=s-a,o=a-(s-l)+(f-l),f=t[++g],a=s,o!==0&&(r[y++]=o);for(;p<n;)s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p],a=s,o!==0&&(r[y++]=o);return(a!==0||y===0)&&(r[y++]=a),y}function cce(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function bp(e){return new Float64Array(e)}const fce=(3+16*Ks)*Ks,dce=(2+12*Ks)*Ks,hce=(9+64*Ks)*Ks*Ks,_f=bp(4),i8=bp(8),r8=bp(12),a8=bp(16),di=bp(4);function gce(e,t,n,i,r,a,s){let o,l,f,d,g,p,y,v,x,E,A,S,w,D,O,M,C,k;const N=e-r,L=n-r,B=t-a,V=i-a;D=N*V,p=Xn*N,y=p-(p-N),v=N-y,p=Xn*V,x=p-(p-V),E=V-x,O=v*E-(D-y*x-v*x-y*E),M=B*L,p=Xn*B,y=p-(p-B),v=B-y,p=Xn*L,x=p-(p-L),E=L-x,C=v*E-(M-y*x-v*x-y*E),A=O-C,g=O-A,_f[0]=O-(A+g)+(g-C),S=D+A,g=S-D,w=D-(S-g)+(A-g),A=w-M,g=w-A,_f[1]=w-(A+g)+(g-M),k=S+A,g=k-S,_f[2]=S-(k-g)+(A-g),_f[3]=k;let G=cce(4,_f),P=dce*s;if(G>=P||-G>=P||(g=e-N,o=e-(N+g)+(g-r),g=n-L,f=n-(L+g)+(g-r),g=t-B,l=t-(B+g)+(g-a),g=i-V,d=i-(V+g)+(g-a),o===0&&l===0&&f===0&&d===0)||(P=hce*s+lce*Math.abs(G),G+=N*d+V*o-(B*f+L*l),G>=P||-G>=P))return G;D=o*V,p=Xn*o,y=p-(p-o),v=o-y,p=Xn*V,x=p-(p-V),E=V-x,O=v*E-(D-y*x-v*x-y*E),M=l*L,p=Xn*l,y=p-(p-l),v=l-y,p=Xn*L,x=p-(p-L),E=L-x,C=v*E-(M-y*x-v*x-y*E),A=O-C,g=O-A,di[0]=O-(A+g)+(g-C),S=D+A,g=S-D,w=D-(S-g)+(A-g),A=w-M,g=w-A,di[1]=w-(A+g)+(g-M),k=S+A,g=k-S,di[2]=S-(k-g)+(A-g),di[3]=k;const j=_A(4,_f,4,di,i8);D=N*d,p=Xn*N,y=p-(p-N),v=N-y,p=Xn*d,x=p-(p-d),E=d-x,O=v*E-(D-y*x-v*x-y*E),M=B*f,p=Xn*B,y=p-(p-B),v=B-y,p=Xn*f,x=p-(p-f),E=f-x,C=v*E-(M-y*x-v*x-y*E),A=O-C,g=O-A,di[0]=O-(A+g)+(g-C),S=D+A,g=S-D,w=D-(S-g)+(A-g),A=w-M,g=w-A,di[1]=w-(A+g)+(g-M),k=S+A,g=k-S,di[2]=S-(k-g)+(A-g),di[3]=k;const F=_A(j,i8,4,di,r8);D=o*d,p=Xn*o,y=p-(p-o),v=o-y,p=Xn*d,x=p-(p-d),E=d-x,O=v*E-(D-y*x-v*x-y*E),M=l*f,p=Xn*l,y=p-(p-l),v=l-y,p=Xn*f,x=p-(p-f),E=f-x,C=v*E-(M-y*x-v*x-y*E),A=O-C,g=O-A,di[0]=O-(A+g)+(g-C),S=D+A,g=S-D,w=D-(S-g)+(A-g),A=w-M,g=w-A,di[1]=w-(A+g)+(g-M),k=S+A,g=k-S,di[2]=S-(k-g)+(A-g),di[3]=k;const U=_A(F,r8,4,di,a8);return a8[U-1]}function O1(e,t,n,i,r,a){const s=(t-a)*(n-r),o=(e-r)*(i-a),l=s-o,f=Math.abs(s+o);return Math.abs(l)>=fce*f?l:-gce(e,t,n,i,r,a,f)}const s8=Math.pow(2,-52),C1=new Uint32Array(512);class Ov{static from(t,n=bce,i=xce){const r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){const o=t[s];a[2*s]=n(o),a[2*s+1]=i(o)}return new Ov(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,s=t.length>>1;let o=1/0,l=1/0,f=-1/0,d=-1/0;for(let N=0;N<s;N++){const L=t[2*N],B=t[2*N+1];L<o&&(o=L),B<l&&(l=B),L>f&&(f=L),B>d&&(d=B),this._ids[N]=N}const g=(o+f)/2,p=(l+d)/2;let y,v,x;for(let N=0,L=1/0;N<s;N++){const B=AA(g,p,t[2*N],t[2*N+1]);B<L&&(y=N,L=B)}const E=t[2*y],A=t[2*y+1];for(let N=0,L=1/0;N<s;N++){if(N===y)continue;const B=AA(E,A,t[2*N],t[2*N+1]);B<L&&B>0&&(v=N,L=B)}let S=t[2*v],w=t[2*v+1],D=1/0;for(let N=0;N<s;N++){if(N===y||N===v)continue;const L=yce(E,A,S,w,t[2*N],t[2*N+1]);L<D&&(x=N,D=L)}let O=t[2*x],M=t[2*x+1];if(D===1/0){for(let B=0;B<s;B++)this._dists[B]=t[2*B]-t[0]||t[2*B+1]-t[1];Rf(this._ids,this._dists,0,s-1);const N=new Uint32Array(s);let L=0;for(let B=0,V=-1/0;B<s;B++){const G=this._ids[B],P=this._dists[G];P>V&&(N[L++]=G,V=P)}this.hull=N.subarray(0,L),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(O1(E,A,S,w,O,M)<0){const N=v,L=S,B=w;v=x,S=O,w=M,x=N,O=L,M=B}const C=vce(E,A,S,w,O,M);this._cx=C.x,this._cy=C.y;for(let N=0;N<s;N++)this._dists[N]=AA(t[2*N],t[2*N+1],C.x,C.y);Rf(this._ids,this._dists,0,s-1),this._hullStart=y;let k=3;i[y]=n[x]=v,i[v]=n[y]=x,i[x]=n[v]=y,r[y]=0,r[v]=1,r[x]=2,a.fill(-1),a[this._hashKey(E,A)]=y,a[this._hashKey(S,w)]=v,a[this._hashKey(O,M)]=x,this.trianglesLen=0,this._addTriangle(y,v,x,-1,-1,-1);for(let N=0,L,B;N<this._ids.length;N++){const V=this._ids[N],G=t[2*V],P=t[2*V+1];if(N>0&&Math.abs(G-L)<=s8&&Math.abs(P-B)<=s8||(L=G,B=P,V===y||V===v||V===x))continue;let j=0;for(let R=0,W=this._hashKey(G,P);R<this._hashSize&&(j=a[(W+R)%this._hashSize],!(j!==-1&&j!==i[j]));R++);j=n[j];let F=j,U;for(;U=i[F],O1(G,P,t[2*F],t[2*F+1],t[2*U],t[2*U+1])>=0;)if(F=U,F===j){F=-1;break}if(F===-1)continue;let H=this._addTriangle(F,V,i[F],-1,-1,r[F]);r[V]=this._legalize(H+2),r[F]=H,k++;let Q=i[F];for(;U=i[Q],O1(G,P,t[2*Q],t[2*Q+1],t[2*U],t[2*U+1])<0;)H=this._addTriangle(Q,V,U,r[V],-1,r[Q]),r[V]=this._legalize(H+2),i[Q]=Q,k--,Q=U;if(F===j)for(;U=n[F],O1(G,P,t[2*U],t[2*U+1],t[2*F],t[2*F+1])<0;)H=this._addTriangle(U,V,F,-1,r[F],r[U]),this._legalize(H+2),r[U]=H,i[F]=F,k--,F=U;this._hullStart=n[V]=F,i[F]=n[Q]=V,i[V]=Q,a[this._hashKey(G,P)]=V,a[this._hashKey(t[2*F],t[2*F+1])]=F}this.hull=new Uint32Array(k);for(let N=0,L=this._hullStart;N<k;N++)this.hull[N]=L,L=i[L];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(pce(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,s=0;for(;;){const o=i[t],l=t-t%3;if(s=l+(t+2)%3,o===-1){if(a===0)break;t=C1[--a];continue}const f=o-o%3,d=l+(t+1)%3,g=f+(o+2)%3,p=n[s],y=n[t],v=n[d],x=n[g];if(mce(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*x],r[2*x+1])){n[t]=x,n[o]=p;const A=i[g];if(A===-1){let w=this._hullStart;do{if(this._hullTri[w]===g){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,A),this._link(o,i[s]),this._link(s,g);const S=f+(o+1)%3;a<C1.length&&(C1[a++]=S)}else{if(a===0)break;t=C1[--a]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,s){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=i,this._link(o,r),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function pce(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function AA(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function mce(e,t,n,i,r,a,s,o){const l=e-s,f=t-o,d=n-s,g=i-o,p=r-s,y=a-o,v=l*l+f*f,x=d*d+g*g,E=p*p+y*y;return l*(g*E-x*y)-f*(d*E-x*p)+v*(d*y-g*p)<0}function yce(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,f=a-t,d=s*s+o*o,g=l*l+f*f,p=.5/(s*f-o*l),y=(f*d-o*g)*p,v=(s*g-l*d)*p;return y*y+v*v}function vce(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,f=a-t,d=s*s+o*o,g=l*l+f*f,p=.5/(s*f-o*l),y=e+(f*d-o*g)*p,v=t+(s*g-l*d)*p;return{x:y,y:v}}function Rf(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],s=t[a];let o=r-1;for(;o>=n&&t[e[o]]>s;)e[o+1]=e[o--];e[o+1]=a}else{const r=n+i>>1;let a=n+1,s=i;f0(e,r,a),t[e[n]]>t[e[i]]&&f0(e,n,i),t[e[a]]>t[e[i]]&&f0(e,a,i),t[e[n]]>t[e[a]]&&f0(e,n,a);const o=e[a],l=t[o];for(;;){do a++;while(t[e[a]]<l);do s--;while(t[e[s]]>l);if(s<a)break;f0(e,a,s)}e[n+1]=e[s],e[s]=o,i-a+1>=s-n?(Rf(e,t,a,i),Rf(e,t,n,s-1)):(Rf(e,t,n,s-1),Rf(e,t,a,i))}}function f0(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function bce(e){return e[0]}function xce(e){return e[1]}const o8=1e-6;class Rl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>o8||Math.abs(this._y1-a)>o8)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class qw{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Ece=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let x=0,E=0,A=i.length,S,w;x<A;x+=3,E+=2){const D=i[x]*2,O=i[x+1]*2,M=i[x+2]*2,C=t[D],k=t[D+1],N=t[O],L=t[O+1],B=t[M],V=t[M+1],G=N-C,P=L-k,j=B-C,F=V-k,U=(G*F-P*j)*2;if(Math.abs(U)<1e-9){if(a===void 0){a=s=0;for(const Q of n)a+=t[Q*2],s+=t[Q*2+1];a/=n.length,s/=n.length}const H=1e9*Math.sign((a-C)*F-(s-k)*j);S=(C+B)/2-H*F,w=(k+V)/2+H*j}else{const H=1/U,Q=G*G+P*P,R=j*j+F*F;S=C+(F*Q-P*R)*H,w=k+(G*R-j*Q)*H}o[E]=S,o[E+1]=w}let l=n[n.length-1],f,d=l*4,g,p=t[2*l],y,v=t[2*l+1];r.fill(0);for(let x=0;x<n.length;++x)l=n[x],f=d,g=p,y=v,d=l*4,p=t[2*l],v=t[2*l+1],r[f+2]=r[d]=y-v,r[f+3]=r[d+1]=p-g}render(t){const n=t==null?t=new Rl:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let d=0,g=i.length;d<g;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,x=s[y],E=s[y+1],A=s[v],S=s[v+1];this._renderSegment(x,E,A,S,t)}let l,f=a[a.length-1];for(let d=0;d<a.length;++d){l=f,f=a[d];const g=Math.floor(r[f]/3)*2,p=s[g],y=s[g+1],v=l*4,x=this._project(p,y,o[v+2],o[v+3]);x&&this._renderSegment(p,y,x[0],x[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Rl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Rl:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new qw;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let s;const o=this._regioncode(t,n),l=this._regioncode(i,r);o===0&&l===0?(a.moveTo(t,n),a.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,o,l))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,s=n.length;a<s;a+=2)for(let o=0,l=r.length;o<l;o+=2)if(n[a]===r[o]&&n[a+1]===r[o+1]&&n[(a+2)%s]===r[(o+l-2)%l]&&n[(a+3)%s]===r[(o+l-1)%l]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,s=i[t];if(s===-1)return null;const o=[];let l=s;do{const f=Math.floor(l/3);if(o.push(n[f*2],n[f*2+1]),l=l%3===2?l-2:l+1,a[l]!==t)break;l=r[l]}while(l!==s&&l!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,s,o=n[i-2],l=n[i-1],f,d=this._regioncode(o,l),g,p=0;for(let y=0;y<i;y+=2)if(a=o,s=l,o=n[y],l=n[y+1],f=d,d=this._regioncode(o,l),f===0&&d===0)g=p,p=0,r?r.push(o,l):r=[o,l];else{let v,x,E,A,S;if(f===0){if((v=this._clipSegment(a,s,o,l,f,d))===null)continue;[x,E,A,S]=v}else{if((v=this._clipSegment(o,l,a,s,d,f))===null)continue;[A,S,x,E]=v,g=p,p=this._edgecode(x,E),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(x,E):r=[x,E]}g=p,p=this._edgecode(A,S),g&&p&&this._edge(t,g,p,r,r.length),r?r.push(A,S):r=[A,S]}if(r)g=p,p=this._edgecode(r[0],r[1]),g&&p&&this._edge(t,g,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,s){const o=a<s;for(o&&([t,n,i,r,a,s]=[i,r,t,n,s,a]);;){if(a===0&&s===0)return o?[i,r,t,n]:[t,n,i,r];if(a&s)return null;let l,f,d=a||s;d&8?(l=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(l=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),a?(t=l,n=f,a=this._regioncode(t,n)):(i=l,r=f,s=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,s){let o=Array.from(n),l;if((l=this._project(o[0],o[1],i,r))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(l[0],l[1]),o=this._clipFinite(t,o))for(let f=0,d=o.length,g,p=this._edgecode(o[d-2],o[d-1]);f<d;f+=2)g=p,p=this._edgecode(o[f],o[f+1]),g&&p&&(f=this._edge(t,g,p,o,f),d=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,i,r,a){for(;n!==i;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin;break}(r[a]!==s||r[a+1]!==o)&&this.contains(t,s,o)&&(r.splice(a,0,s,o),a+=2)}return a}_project(t,n,i,r){let a=1/0,s,o,l;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<a&&(l=this.ymin,o=t+(a=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<a&&(l=this.ymax,o=t+(a=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<a&&(o=this.xmax,l=n+(a=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<a&&(o=this.xmin,l=n+(a=s)*r)}return[o,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const _ce=2*Math.PI,Af=Math.pow;function Ace(e){return e[0]}function Sce(e){return e[1]}function wce(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function Oce(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class ZD{static from(t,n=Ace,i=Sce,r){return new ZD("length"in t?Cce(t,n,i,r):Float64Array.from(Dce(t,n,i,r)))}constructor(t){this._delaunator=new Ov(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&wce(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const l=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*l],n[2*l+1],n[2*f],n[2*f+1]],g=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=Oce(n[2*p],n[2*p+1],g);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new Ov(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,f=i.length;l<f;++l){const d=a[l%3===2?l-2:l+1];(i[l]===-1||s[d]===-1)&&(s[d]=l)}for(let l=0,f=r.length;l<f;++l)o[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Ece(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:s,collinear:o}=this;if(o){const g=o.indexOf(t);g>0&&(yield o[g-1]),g<o.length-1&&(yield o[g+1]);return}const l=n[t];if(l===-1)return;let f=l,d=-1;do{if(yield d=s[f],f=f%3===2?f-2:f+1,s[f]!==t)return;if(f=a[f],f===-1){const g=i[(r[t]+1)%i.length];g!==d&&(yield g);return}}while(f!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:s,halfedges:o,triangles:l,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,g=Af(n-f[t*2],2)+Af(i-f[t*2+1],2);const p=r[t];let y=p;do{let v=l[y];const x=Af(n-f[v*2],2)+Af(i-f[v*2+1],2);if(x<g&&(g=x,d=v),y=y%3===2?y-2:y+1,l[y]!==t)break;if(y=o[y],y===-1){if(y=a[(s[t]+1)%a.length],y!==v&&Af(n-f[y*2],2)+Af(i-f[y*2+1],2)<g)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new Rl:void 0,{points:i,halfedges:r,triangles:a}=this;for(let s=0,o=r.length;s<o;++s){const l=r[s];if(l<s)continue;const f=a[s]*2,d=a[l]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Rl:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){const o=r[a],l=r[a+1];t.moveTo(o+n,l),t.arc(o,l,n,0,_ce)}return i&&i.value()}renderHull(t){const n=t==null?t=new Rl:void 0,{hull:i,points:r}=this,a=i[0]*2,s=i.length;t.moveTo(r[a],r[a+1]);for(let o=1;o<s;++o){const l=2*i[o];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new qw;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Rl:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,o=a[t+1]*2,l=a[t+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[o],r[o+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new qw;return this.renderTriangle(t,n),n.value()}}function Cce(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){const o=e[s];a[s*2]=t.call(i,o,s,e),a[s*2+1]=n.call(i,o,s,e)}return a}function*Dce(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function KD(e){J.call(this,null,e)}KD.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const $ce=[-1e5,-1e5,1e5,1e5];fe(KD,J,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:$ce;const a=this.value=ZD.from(i,e.x,e.y).voronoi(r);for(let s=0,o=i.length;s<o;++s){const l=a.cellPolygon(s);i[s][n]=l&&!Tce(l)?Mce(l):null}return t.reflow(e.modified()).modifies(n)}});function Mce(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function Tce(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const kce=Object.freeze(Object.defineProperty({__proto__:null,voronoi:KD},Symbol.toStringTag,{value:"Module"}));var SA=Math.PI/180,I0=64,uy=2048;function Fce(){var e=[256,256],t,n,i,r,a,s,o,l=QP,f=[],d=Math.random,g={};g.layout=function(){for(var v=p(lu()),x=Lce((e[0]>>5)*e[1]),E=null,A=f.length,S=-1,w=[],D=f.map(M=>({text:t(M),font:n(M),style:r(M),weight:a(M),rotate:s(M),size:~~(i(M)+1e-14),padding:o(M),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:M})).sort((M,C)=>C.size-M.size);++S<A;){var O=D[S];O.x=e[0]*(d()+.5)>>1,O.y=e[1]*(d()+.5)>>1,Rce(v,O,D,S),O.hasText&&y(x,O,E)&&(w.push(O),E?jce(E,O):E=[{x:O.x+O.x0,y:O.y+O.y0},{x:O.x+O.x1,y:O.y+O.y1}],O.x-=e[0]>>1,O.y-=e[1]>>1)}return w};function p(v){v.width=v.height=1;var x=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(I0<<5)/x,v.height=uy/x;var E=v.getContext("2d");return E.fillStyle=E.strokeStyle="red",E.textAlign="center",{context:E,ratio:x}}function y(v,x,E){for(var A=x.x,S=x.y,w=Math.hypot(e[0],e[1]),D=l(e),O=d()<.5?1:-1,M=-O,C,k,N;(C=D(M+=O))&&(k=~~C[0],N=~~C[1],!(Math.min(Math.abs(k),Math.abs(N))>=w));)if(x.x=A+k,x.y=S+N,!(x.x+x.x0<0||x.y+x.y0<0||x.x+x.x1>e[0]||x.y+x.y1>e[1])&&(!E||!Nce(x,v,e[0]))&&(!E||zce(x,E))){for(var L=x.sprite,B=x.width>>5,V=e[0]>>5,G=x.x-(B<<4),P=G&127,j=32-P,F=x.y1-x.y0,U=(x.y+x.y0)*V+(G>>5),H,Q=0;Q<F;Q++){H=0;for(var R=0;R<=B;R++)v[U+R]|=H<<j|(R<B?(H=L[Q*B+R])>>>P:0);U+=V}return x.sprite=null,!0}return!1}return g.words=function(v){return arguments.length?(f=v,g):f},g.size=function(v){return arguments.length?(e=[+v[0],+v[1]],g):e},g.font=function(v){return arguments.length?(n=dl(v),g):n},g.fontStyle=function(v){return arguments.length?(r=dl(v),g):r},g.fontWeight=function(v){return arguments.length?(a=dl(v),g):a},g.rotate=function(v){return arguments.length?(s=dl(v),g):s},g.text=function(v){return arguments.length?(t=dl(v),g):t},g.spiral=function(v){return arguments.length?(l=Uce[v]||v,g):l},g.fontSize=function(v){return arguments.length?(i=dl(v),g):i},g.padding=function(v){return arguments.length?(o=dl(v),g):o},g.random=function(v){return arguments.length?(d=v,g):d},g}function Rce(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(I0<<5)/a,uy/a);var s=0,o=0,l=0,f=n.length,d,g,p,y,v;for(--i;++i<f;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var x=Math.sin(t.rotate*SA),E=Math.cos(t.rotate*SA),A=d*E,S=d*x,w=p*E,D=p*x;d=Math.max(Math.abs(A+D),Math.abs(A-D))+31>>5<<5,p=~~Math.max(Math.abs(S+w),Math.abs(S-w))}else d=d+31>>5<<5;if(p>l&&(l=p),s+d>=I0<<5&&(s=0,o+=l,l=0),o+p>=uy)break;r.translate((s+(d>>1))/a,(o+(p>>1))/a),t.rotate&&r.rotate(t.rotate*SA),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=s,t.yoff=o,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=d}for(var O=r.getImageData(0,0,(I0<<5)/a,uy/a).data,M=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,g=d>>5,p=t.y1-t.y0,y=0;y<p*g;y++)M[y]=0;if(s=t.xoff,s==null)return;o=t.yoff;var C=0,k=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var N=g*v+(y>>5),L=O[(o+v)*(I0<<5)+(s+y)<<2]?1<<31-y%32:0;M[N]|=L,C|=L}C?k=v:(t.y0++,p--,v--,o++)}t.y1=t.y0+k,t.sprite=M.slice(0,(t.y1-t.y0)*g)}}}function Nce(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),s=a&127,o=32-s,l=e.y1-e.y0,f=(e.y+e.y0)*n+(a>>5),d,g=0;g<l;g++){d=0;for(var p=0;p<=r;p++)if((d<<o|(p<r?(d=i[g*r+p])>>>s:0))&t[f+p])return!0;f+=n}return!1}function jce(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function zce(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function QP(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Bce(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function Lce(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function dl(e){return typeof e=="function"?e:function(){return e}}var Uce={archimedean:QP,rectangular:Bce};const ZP=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Pce=["text","font","rotate","fontSize","fontStyle","fontWeight"];function JD(e){J.call(this,Fce(),e)}JD.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:ZP}]};fe(JD,J,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ne("Wordcloud size dimensions must be non-zero.");function n(v){const x=e[v];return He(x)&&t.modified(x.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||Pce.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,s=e.as||ZP;let o=e.fontSize||14,l;if(He(o)?l=e.fontSizeRange:o=ui(o),l){const v=o,x=ct("sqrt")().domain(Va(r,v)).range(l);o=E=>x(v(E))}r.forEach(v=>{v[s[0]]=NaN,v[s[1]]=NaN,v[s[3]]=0});const f=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(Ir).layout(),d=a.size(),g=d[0]>>1,p=d[1]>>1,y=f.length;for(let v=0,x,E;v<y;++v)x=f[v],E=x.datum,E[s[0]]=x.x+g,E[s[1]]=x.y+p,E[s[2]]=x.font,E[s[3]]=x.size,E[s[4]]=x.style,E[s[5]]=x.weight,E[s[6]]=x.rotate;return t.reflow(i).modifies(s)}});const Ice=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:JD},Symbol.toStringTag,{value:"Module"})),qce=e=>new Uint8Array(e),Hce=e=>new Uint16Array(e),ng=e=>new Uint32Array(e);function Gce(){let e=8,t=[],n=ng(0),i=D1(0,e),r=D1(0,e);return{data:()=>t,seen:()=>n=Yce(n,t.length),add(a){for(let s=0,o=t.length,l=a.length,f;s<l;++s)f=a[s],f._index=o++,t.push(f)},remove(a,s){const o=t.length,l=Array(o-a),f=t;let d,g,p;for(g=0;!s[g]&&g<o;++g)l[g]=t[g],f[g]=g;for(p=g;g<o;++g)d=t[g],s[g]?f[g]=-1:(f[g]=p,i[p]=i[g],r[p]=r[g],l[p]=d,d._index=p++),i[g]=0;return t=l,f},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){i[a]|=s},clear(a,s){i[a]&=~s},resize(a,s){const o=i.length;(a>o||s>e)&&(e=Math.max(s,e),i=D1(a,e,i),r=D1(a,e))}}}function Yce(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function D1(e,t,n){const i=(t<257?qce:t<65537?Hce:ng)(e);return n&&i.set(n),i}function u8(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const s=this,o=s.bisect(s.range,r.value),l=r.index,f=o[0],d=o[1],g=l.length;let p;for(p=0;p<f;++p)a[l[p]]|=i;for(p=d;p<g;++p)a[l[p]]|=i;return s}}}function l8(){let e=ng(0),t=[],n=0;function i(o,l,f){if(!l.length)return[];const d=n,g=l.length,p=ng(g);let y=Array(g),v,x,E;for(E=0;E<g;++E)y[E]=o(l[E]),p[E]=E;if(y=Xce(y,p),d)v=t,x=e,t=Array(d+g),e=ng(d+g),Vce(f,v,x,d,y,p,g,t,e);else{if(f>0)for(E=0;E<g;++E)p[E]+=f;t=y,e=p}return n=d+g,{index:p,value:y}}function r(o,l){const f=n;let d,g,p;for(g=0;!l[e[g]]&&g<f;++g);for(p=g;g<f;++g)l[d=e[g]]||(e[p]=d,t[p]=t[g],++p);n=f-o}function a(o){for(let l=0,f=n;l<f;++l)e[l]=o[e[l]]}function s(o,l){let f;return l?f=l.length:(l=t,f=n),[JW(l,o[0],0,f),gu(l,o[1],0,f)]}return{insert:i,remove:r,bisect:s,reindex:a,index:()=>e,size:()=>n}}function Xce(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),nQ(e,t)}function Vce(e,t,n,i,r,a,s,o,l){let f=0,d=0,g;for(g=0;f<i&&d<s;++g)t[f]<r[d]?(o[g]=t[f],l[g]=n[f++]):(o[g]=r[d],l[g]=a[d++]+e);for(;f<i;++f,++g)o[g]=t[f],l[g]=n[f];for(;d<s;++d,++g)o[g]=r[d],l[g]=a[d]+e}function e$(e){J.call(this,Gce(),e),this._indices=null,this._dims=null}e$.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};fe(e$,J,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],s=i.length;let o=0,l,f;for(;o<s;++o)l=n[o].fname,f=r[l]||(r[l]=l8()),a.push(u8(f,o,i[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,s=this._dims,o=this.value,l=o.curr(),f=o.prev(),d=o.all(),g=n.rem=n.add,p=n.mod,y=r.length,v={};let x,E,A,S,w,D,O,M,C;if(f.set(l),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for(D={},S=t.mod,O=0,M=S.length;O<M;++O)D[S[O]._index]=1;for(O=0;O<y;++O)C=i[O],(!s[O]||e.modified("fields",O)||t.modified(C.fields))&&(A=C.fname,(x=v[A])||(a[A]=E=l8(),v[A]=x=E.insert(C,t.source,0)),s[O]=u8(E,O,r[O]).onAdd(x,l));for(O=0,M=o.data().length;O<M;++O)w[O]||(f[O]!==l[O]?g.push(O):D[O]&&l[O]!==d&&p.push(O));return o.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,s=this._indices,o=e.fields,l={},f=n.add,d=r.size()+i.length,g=a.length;let p=r.size(),y,v,x;r.resize(d,g),r.add(i);const E=r.curr(),A=r.prev(),S=r.all();for(y=0;y<g;++y)v=o[y].fname,x=l[v]||(l[v]=s[v].insert(o[y],i,p)),a[y].onAdd(x,E);for(;p<d;++p)A[p]=S,E[p]!==S&&f.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),s=e.mod;let o,l,f;for(o=0,l=s.length;o<l;++o)f=s[o]._index,r[f]!==a&&n.push(f)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),s=r.prev(),o=r.all(),l={},f=n.rem,d=t.rem;let g,p,y,v;for(g=0,p=d.length;g<p;++g)y=d[g]._index,l[y]=1,s[y]=v=a[y],a[y]=o,v!==o&&f.push(y);for(y in i)i[y].remove(p,l);return this.reindex(t,p,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const s in i)i[s].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,s=i.length;let o=0,l,f;for(n.filters=0,f=0;f<s;++f)e.modified("query",f)&&(l=f,++o);if(o===1)o=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(f=0,o=0;f<s;++f)e.modified("query",f)&&(o|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return o},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),s=r.curr(),o=r.prev(),l=e.index(),f=e.bisect(e.range),d=e.bisect(t),g=d[0],p=d[1],y=f[0],v=f[1],x=e.one;let E,A,S;if(g<y)for(E=g,A=Math.min(y,p);E<A;++E)S=l[E],a[S]!==n&&(o[S]=s[S],a[S]=n,i.push(S)),s[S]^=x;else if(g>y)for(E=y,A=Math.min(g,v);E<A;++E)S=l[E],a[S]!==n&&(o[S]=s[S],a[S]=n,i.push(S)),s[S]^=x;if(p>v)for(E=Math.max(g,v),A=p;E<A;++E)S=l[E],a[S]!==n&&(o[S]=s[S],a[S]=n,i.push(S)),s[S]^=x;else if(p<v)for(E=Math.max(y,p),A=v;E<A;++E)S=l[E],a[S]!==n&&(o[S]=s[S],a[S]=n,i.push(S)),s[S]^=x;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),s=e.index(),o=e.bisect(e.range),l=e.bisect(t),f=l[0],d=l[1],g=o[0],p=o[1],y=e.one;let v,x,E;if(f<g)for(v=f,x=Math.min(g,d);v<x;++v)E=s[v],a[E]^=y,n.push(E);else if(f>g)for(v=g,x=Math.min(f,p);v<x;++v)E=s[v],a[E]^=y,i.push(E);if(d>p)for(v=Math.max(f,p),x=d;v<x;++v)E=s[v],a[E]^=y,n.push(E);else if(d<p)for(v=Math.max(g,d),x=p;v<x;++v)E=s[v],a[E]^=y,i.push(E);e.range=t.slice()}});function t$(e){J.call(this,null,e)}t$.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};fe(t$,J,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),s=i.data(),o=i.curr(),l=i.prev(),f=d=>o[d]&n?null:s[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const g=o[d]&n;return!g&&g^l[d]&n?s[d]:null}),a.filter(a.REM,d=>{const g=o[d]&n;return g&&!(g^(g^l[d]&n))?s[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(o[d]&n)===r?s[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const Wce=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:e$,resolvefilter:t$},Symbol.toStringTag,{value:"Module"})),Qce="RawCode",Kl="Literal",Zce="Property",Kce="Identifier",Jce="ArrayExpression",efe="BinaryExpression",KP="CallExpression",tfe="ConditionalExpression",nfe="LogicalExpression",ife="MemberExpression",rfe="ObjectExpression",afe="UnaryExpression";function va(e){this.type=e}va.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=sfe(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function sfe(e){switch(e.type){case Jce:return e.elements;case efe:case nfe:return[e.left,e.right];case KP:return[e.callee].concat(e.arguments);case tfe:return[e.test,e.consequent,e.alternate];case ife:return[e.object,e.property];case rfe:return e.properties;case Zce:return[e.key,e.value];case afe:return[e.argument];case Kce:case Kl:case Qce:default:return[]}}var us,ve,ee,ii,vt,Jb=1,xp=2,Jl=3,Nu=4,ex=5,yc=6,ji=7,Ep=8,ofe=9;us={};us[Jb]="Boolean";us[xp]="<end>";us[Jl]="Identifier";us[Nu]="Keyword";us[ex]="Null";us[yc]="Numeric";us[ji]="Punctuator";us[Ep]="String";us[ofe]="RegularExpression";var ufe="ArrayExpression",lfe="BinaryExpression",cfe="CallExpression",ffe="ConditionalExpression",JP="Identifier",dfe="Literal",hfe="LogicalExpression",gfe="MemberExpression",pfe="ObjectExpression",mfe="Property",yfe="UnaryExpression",$n="Unexpected token %0",vfe="Unexpected number",bfe="Unexpected string",xfe="Unexpected identifier",Efe="Unexpected reserved word",_fe="Unexpected end of input",Hw="Invalid regular expression",wA="Invalid regular expression: missing /",eI="Octal literals are not allowed in strict mode.",Afe="Duplicate data property in object literal not allowed in strict mode",Bn="ILLEGAL",Og="Disabled.",Sfe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),wfe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function tx(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ls(e){return e>=48&&e<=57}function n$(e){return"0123456789abcdefABCDEF".includes(e)}function ig(e){return"01234567".includes(e)}function Ofe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function Cg(e){return e===10||e===13||e===8232||e===8233}function _p(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Sfe.test(String.fromCharCode(e))}function Cv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&wfe.test(String.fromCharCode(e))}const Cfe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function tI(){for(;ee<ii;){const e=ve.charCodeAt(ee);if(Ofe(e)||Cg(e))++ee;else break}}function Gw(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)ee<ii&&n$(ve[ee])?(i=ve[ee++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):ot({},$n,Bn);return String.fromCharCode(r)}function Dfe(){var e,t,n,i;for(e=ve[ee],t=0,e==="}"&&ot({},$n,Bn);ee<ii&&(e=ve[ee++],!!n$(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ot({},$n,Bn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function nI(){var e,t;for(e=ve.charCodeAt(ee++),t=String.fromCharCode(e),e===92&&(ve.charCodeAt(ee)!==117&&ot({},$n,Bn),++ee,e=Gw("u"),(!e||e==="\\"||!_p(e.charCodeAt(0)))&&ot({},$n,Bn),t=e);ee<ii&&(e=ve.charCodeAt(ee),!!Cv(e));)++ee,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),ve.charCodeAt(ee)!==117&&ot({},$n,Bn),++ee,e=Gw("u"),(!e||e==="\\"||!Cv(e.charCodeAt(0)))&&ot({},$n,Bn),t+=e);return t}function $fe(){var e,t;for(e=ee++;ee<ii;){if(t=ve.charCodeAt(ee),t===92)return ee=e,nI();if(Cv(t))++ee;else break}return ve.slice(e,ee)}function Mfe(){var e,t,n;return e=ee,t=ve.charCodeAt(ee)===92?nI():$fe(),t.length===1?n=Jl:Cfe.hasOwnProperty(t)?n=Nu:t==="null"?n=ex:t==="true"||t==="false"?n=Jb:n=Jl,{type:n,value:t,start:e,end:ee}}function OA(){var e=ee,t=ve.charCodeAt(ee),n,i=ve[ee],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ee,{type:ji,value:String.fromCharCode(t),start:e,end:ee};default:if(n=ve.charCodeAt(ee+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ee+=2,{type:ji,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ee};case 33:case 61:return ee+=2,ve.charCodeAt(ee)===61&&++ee,{type:ji,value:ve.slice(e,ee),start:e,end:ee}}}if(s=ve.substr(ee,4),s===">>>=")return ee+=4,{type:ji,value:s,start:e,end:ee};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return ee+=3,{type:ji,value:a,start:e,end:ee};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return ee+=2,{type:ji,value:r,start:e,end:ee};if(r==="//"&&ot({},$n,Bn),"<>=!+-*%&|^/".includes(i))return++ee,{type:ji,value:i,start:e,end:ee};ot({},$n,Bn)}function Tfe(e){let t="";for(;ee<ii&&n$(ve[ee]);)t+=ve[ee++];return t.length===0&&ot({},$n,Bn),_p(ve.charCodeAt(ee))&&ot({},$n,Bn),{type:yc,value:parseInt("0x"+t,16),start:e,end:ee}}function kfe(e){let t="0"+ve[ee++];for(;ee<ii&&ig(ve[ee]);)t+=ve[ee++];return(_p(ve.charCodeAt(ee))||Ls(ve.charCodeAt(ee)))&&ot({},$n,Bn),{type:yc,value:parseInt(t,8),octal:!0,start:e,end:ee}}function c8(){var e,t,n;if(n=ve[ee],tx(Ls(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ee,e="",n!=="."){if(e=ve[ee++],n=ve[ee],e==="0"){if(n==="x"||n==="X")return++ee,Tfe(t);if(ig(n))return kfe(t);n&&Ls(n.charCodeAt(0))&&ot({},$n,Bn)}for(;Ls(ve.charCodeAt(ee));)e+=ve[ee++];n=ve[ee]}if(n==="."){for(e+=ve[ee++];Ls(ve.charCodeAt(ee));)e+=ve[ee++];n=ve[ee]}if(n==="e"||n==="E")if(e+=ve[ee++],n=ve[ee],(n==="+"||n==="-")&&(e+=ve[ee++]),Ls(ve.charCodeAt(ee)))for(;Ls(ve.charCodeAt(ee));)e+=ve[ee++];else ot({},$n,Bn);return _p(ve.charCodeAt(ee))&&ot({},$n,Bn),{type:yc,value:parseFloat(e),start:t,end:ee}}function Ffe(){var e="",t,n,i,r,a=!1;for(t=ve[ee],tx(t==="'"||t==='"',"String literal must starts with a quote"),n=ee,++ee;ee<ii;)if(i=ve[ee++],i===t){t="";break}else if(i==="\\")if(i=ve[ee++],!i||!Cg(i.charCodeAt(0)))switch(i){case"u":case"x":ve[ee]==="{"?(++ee,e+=Dfe()):e+=Gw(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:ig(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),ee<ii&&ig(ve[ee])&&(a=!0,r=r*8+"01234567".indexOf(ve[ee++]),"0123".includes(i)&&ee<ii&&ig(ve[ee])&&(r=r*8+"01234567".indexOf(ve[ee++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&ve[ee]===`
`&&++ee;else{if(Cg(i.charCodeAt(0)))break;e+=i}return t!==""&&ot({},$n,Bn),{type:Ep,value:e,octal:a,start:n,end:ee}}function Rfe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";ot({},Hw)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ot({},Hw)}try{return new RegExp(e,t)}catch{return null}}function Nfe(){var e,t,n,i,r;for(e=ve[ee],tx(e==="/","Regular expression literal must start with a slash"),t=ve[ee++],n=!1,i=!1;ee<ii;)if(e=ve[ee++],t+=e,e==="\\")e=ve[ee++],Cg(e.charCodeAt(0))&&ot({},wA),t+=e;else if(Cg(e.charCodeAt(0)))ot({},wA);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||ot({},wA),r=t.substr(1,t.length-2),{value:r,literal:t}}function jfe(){var e,t,n;for(t="",n="";ee<ii&&(e=ve[ee],!!Cv(e.charCodeAt(0)));)++ee,e==="\\"&&ee<ii?ot({},$n,Bn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ot({},Hw,n),{value:n,literal:t}}function zfe(){var e,t,n,i;return vt=null,tI(),e=ee,t=Nfe(),n=jfe(),i=Rfe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:ee}}function Bfe(e){return e.type===Jl||e.type===Nu||e.type===Jb||e.type===ex}function iI(){if(tI(),ee>=ii)return{type:xp,start:ee,end:ee};const e=ve.charCodeAt(ee);return _p(e)?Mfe():e===40||e===41||e===59?OA():e===39||e===34?Ffe():e===46?Ls(ve.charCodeAt(ee+1))?c8():OA():Ls(e)?c8():OA()}function Ui(){const e=vt;return ee=e.end,vt=iI(),ee=e.end,e}function rI(){const e=ee;vt=iI(),ee=e}function Lfe(e){const t=new va(ufe);return t.elements=e,t}function f8(e,t,n){const i=new va(e==="||"||e==="&&"?hfe:lfe);return i.operator=e,i.left=t,i.right=n,i}function Ufe(e,t){const n=new va(cfe);return n.callee=e,n.arguments=t,n}function Pfe(e,t,n){const i=new va(ffe);return i.test=e,i.consequent=t,i.alternate=n,i}function i$(e){const t=new va(JP);return t.name=e,t}function q0(e){const t=new va(dfe);return t.value=e.value,t.raw=ve.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function d8(e,t,n){const i=new va(gfe);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function Ife(e){const t=new va(pfe);return t.properties=e,t}function h8(e,t,n){const i=new va(mfe);return i.key=t,i.value=n,i.kind=e,i}function qfe(e,t){const n=new va(yfe);return n.operator=e,n.argument=t,n.prefix=!0,n}function ot(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(tx(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=ee,n.description=r,n}function nx(e){e.type===xp&&ot(e,_fe),e.type===yc&&ot(e,vfe),e.type===Ep&&ot(e,bfe),e.type===Jl&&ot(e,xfe),e.type===Nu&&ot(e,Efe),ot(e,$n,e.value)}function ri(e){const t=Ui();(t.type!==ji||t.value!==e)&&nx(t)}function Ft(e){return vt.type===ji&&vt.value===e}function CA(e){return vt.type===Nu&&vt.value===e}function Hfe(){const e=[];for(ee=vt.start,ri("[");!Ft("]");)Ft(",")?(Ui(),e.push(null)):(e.push(ec()),Ft("]")||ri(","));return Ui(),Lfe(e)}function g8(){ee=vt.start;const e=Ui();return e.type===Ep||e.type===yc?(e.octal&&ot(e,eI),q0(e)):i$(e.value)}function Gfe(){var e,t,n,i;if(ee=vt.start,e=vt,e.type===Jl)return n=g8(),ri(":"),i=ec(),h8("init",n,i);if(e.type===xp||e.type===ji)nx(e);else return t=g8(),ri(":"),i=ec(),h8("init",t,i)}function Yfe(){var e=[],t,n,i,r={},a=String;for(ee=vt.start,ri("{");!Ft("}");)t=Gfe(),t.key.type===JP?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?ot({},Afe):r[i]=!0,e.push(t),Ft("}")||ri(",");return ri("}"),Ife(e)}function Xfe(){ri("(");const e=r$();return ri(")"),e}const Vfe={if:1};function Wfe(){var e,t,n;if(Ft("("))return Xfe();if(Ft("["))return Hfe();if(Ft("{"))return Yfe();if(e=vt.type,ee=vt.start,e===Jl||Vfe[vt.value])n=i$(Ui().value);else if(e===Ep||e===yc)vt.octal&&ot(vt,eI),n=q0(Ui());else{if(e===Nu)throw new Error(Og);e===Jb?(t=Ui(),t.value=t.value==="true",n=q0(t)):e===ex?(t=Ui(),t.value=null,n=q0(t)):Ft("/")||Ft("/=")?(n=q0(zfe()),rI()):nx(Ui())}return n}function Qfe(){const e=[];if(ri("("),!Ft(")"))for(;ee<ii&&(e.push(ec()),!Ft(")"));)ri(",");return ri(")"),e}function Zfe(){ee=vt.start;const e=Ui();return Bfe(e)||nx(e),i$(e.value)}function Kfe(){return ri("."),Zfe()}function Jfe(){ri("[");const e=r$();return ri("]"),e}function ede(){var e,t,n;for(e=Wfe();;)if(Ft("."))n=Kfe(),e=d8(".",e,n);else if(Ft("("))t=Qfe(),e=Ufe(e,t);else if(Ft("["))n=Jfe(),e=d8("[",e,n);else break;return e}function p8(){const e=ede();if(vt.type===ji&&(Ft("++")||Ft("--")))throw new Error(Og);return e}function ly(){var e,t;if(vt.type!==ji&&vt.type!==Nu)t=p8();else{if(Ft("++")||Ft("--"))throw new Error(Og);if(Ft("+")||Ft("-")||Ft("~")||Ft("!"))e=Ui(),t=ly(),t=qfe(e.value,t);else{if(CA("delete")||CA("void")||CA("typeof"))throw new Error(Og);t=p8()}}return t}function m8(e){let t=0;if(e.type!==ji&&e.type!==Nu)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function tde(){var e,t,n,i,r,a,s,o,l,f;if(e=vt,l=ly(),i=vt,r=m8(i),r===0)return l;for(i.prec=r,Ui(),t=[e,vt],s=ly(),a=[l,i,s];(r=m8(vt))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,l=a.pop(),t.pop(),n=f8(o,l,s),a.push(n);i=Ui(),i.prec=r,a.push(i),t.push(vt),n=ly(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=f8(a[f-1].value,a[f-2],n),f-=2;return n}function ec(){var e,t,n;return e=tde(),Ft("?")&&(Ui(),t=ec(),ri(":"),n=ec(),e=Pfe(e,t,n)),e}function r$(){const e=ec();if(Ft(","))throw new Error(Og);return e}function aI(e){ve=e,ee=0,ii=ve.length,vt=null,rI();const t=r$();if(vt.type!==xp)throw new Error("Unexpect token after expression.");return t}var sI={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function oI(e){function t(s,o,l,f){let d=e(o[0]);return l&&(d=l+"("+d+")",l.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(f<0?"":f===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(s,o,l){return f=>t(s,f,o,l)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&ne("Missing arguments to clamp function."),s.length>3&&ne("Too many arguments to clamp function.");const o=s.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(s){s.length<3&&ne("Missing arguments to if function."),s.length>3&&ne("Too many arguments to if function.");const o=s.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function nde(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function uI(e){e=e||{};const t=e.allowed?ga(e.allowed):{},n=e.forbidden?ga(e.forbidden):{},i=e.constants||sI,r=(e.functions||oI)(g),a=e.globalvar,s=e.fieldvar,o=He(a)?a:v=>`${a}["${v}"]`;let l={},f={},d=0;function g(v){if(tt(v))return v;const x=p[v.type];return x==null&&ne("Unsupported type: "+v.type),x(v)}const p={Literal:v=>v.raw,Identifier:v=>{const x=v.name;return d>0?x:Re(n,x)?ne("Illegal identifier: "+x):Re(i,x)?i[x]:Re(t,x)?x:(l[x]=1,o(x))},MemberExpression:v=>{const x=!v.computed,E=g(v.object);x&&(d+=1);const A=g(v.property);return E===s&&(f[nde(A)]=1),x&&(d-=1),E+(x?"."+A:"["+A+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&ne("Illegal callee type: "+v.callee.type);const x=v.callee.name,E=v.arguments,A=Re(r,x)&&r[x];return A||ne("Unrecognized function: "+x),He(A)?A(E):A+"("+E.map(g).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(g).join(",")+"]",BinaryExpression:v=>"("+g(v.left)+" "+v.operator+" "+g(v.right)+")",UnaryExpression:v=>"("+v.operator+g(v.argument)+")",ConditionalExpression:v=>"("+g(v.test)+"?"+g(v.consequent)+":"+g(v.alternate)+")",LogicalExpression:v=>"("+g(v.left)+v.operator+g(v.right)+")",ObjectExpression:v=>"{"+v.properties.map(g).join(",")+"}",Property:v=>{d+=1;const x=g(v.key);return d-=1,x+":"+g(v.value)}};function y(v){const x={code:g(v),globals:Object.keys(l),fields:Object.keys(f)};return l={},f={},x}return y.functions=r,y.constants=i,y}const y8=Symbol("vega_selection_getter");function lI(e){return(!e.getter||!e.getter[y8])&&(e.getter=Lr(e.field),e.getter[y8]=!0),e.getter}const a$="intersect",v8="union",ide="vlMulti",rde="vlPoint",b8="or",ade="and",Na="_vgsid_",Dg=Lr(Na),sde="E",ode="R",ude="R-E",lde="R-LE",cde="R-RE",fde="E-LT",dde="E-LTE",hde="E-GT",gde="E-GTE",pde="E-VALID",mde="E-ONE",Dv="index:unit";function x8(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,s,o;a<r;++a)if(o=n[a],s=lI(o)(e),su(s)&&(s=Kn(s)),su(i[a])&&(i[a]=Kn(i[a])),Ee(i[a])&&su(i[a][0])&&(i[a]=i[a].map(Kn)),o.type===sde){if(Ee(i[a])?!i[a].includes(s):s!==i[a])return!1}else if(o.type===ode){if(!Mf(s,i[a]))return!1}else if(o.type===cde){if(!Mf(s,i[a],!0,!1))return!1}else if(o.type===ude){if(!Mf(s,i[a],!1,!1))return!1}else if(o.type===lde){if(!Mf(s,i[a],!1,!0))return!1}else if(o.type===fde){if(s>=i[a])return!1}else if(o.type===dde){if(s>i[a])return!1}else if(o.type===hde){if(s<=i[a])return!1}else if(o.type===gde){if(s<i[a])return!1}else if(o.type===pde){if(s===null||isNaN(s))return!1}else if(o.type===mde&&i[a].indexOf(s)===-1)return!1;return!0}function yde(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[Dv]&&i[Dv].value:void 0,s=n===a$,o=r.length,l=0,f,d,g,p,y;l<o;++l)if(f=r[l],a&&s){if(d=d||{},g=d[p=f.unit]||0,g===-1)continue;if(y=x8(t,f),d[p]=y?-1:++g,y&&a.size===1)return!0;if(!y&&g===a.get(p).count)return!1}else if(y=x8(t,f),s^y)return y;return o&&s}const cI=$d(Dg),vde=cI.left,bde=cI.right;function xde(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[Dv]&&i[Dv].value:void 0,s=n===a$,o=Dg(t),l=vde(r,o);if(l===r.length||Dg(r[l])!==o)return!1;if(a&&s){if(a.size===1)return!0;if(bde(r,o)-l<a.size)return!1}return!0}function Ede(e,t){return e.map(n=>Ie(t.fields?{values:t.fields.map(i=>lI(i)(n.datum))}:{[Na]:Dg(n.datum)},t))}function _de(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],s={},o={},l={},f,d,g,p,y,v,x,E,A,S,w=a.length,D=0,O,M;D<w;++D)if(f=a[D],p=f.unit,d=f.fields,g=f.values,d&&g){for(O=0,M=d.length;O<M;++O)y=d[O],x=s[y.field]||(s[y.field]={}),E=x[p]||(x[p]=[]),l[y.field]=A=y.type.charAt(0),S=DA[`${A}_union`],x[p]=S(E,De(g[O]));n&&(E=o[p]||(o[p]=[]),E.push(De(g).reduce((C,k,N)=>(C[d[N].field]=k,C),{})))}else y=Na,v=Dg(f),x=s[y]||(s[y]={}),E=x[p]||(x[p]=[]),E.push(v),n&&(E=o[p]||(o[p]=[]),E.push({[Na]:v}));if(t=t||v8,s[Na]?s[Na]=DA[`${Na}_${t}`](...Object.values(s[Na])):Object.keys(s).forEach(C=>{s[C]=Object.keys(s[C]).map(k=>s[C][k]).reduce((k,N)=>k===void 0?N:DA[`${l[C]}_${t}`](k,N))}),a=Object.keys(o),n&&a.length){const C=i?rde:ide;s[C]=t===v8?{[b8]:a.reduce((k,N)=>(k.push(...o[N]),k),[])}:{[ade]:a.map(k=>({[b8]:o[k]}))}}return s}var DA={[`${Na}_union`]:fQ,[`${Na}_intersect`]:lQ,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Kn(t[0]),i=Kn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Kn(t[0]),i=Kn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const Ade=":",Sde="@";function s$(e,t,n,i){t[0].type!==Kl&&ne("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&et(t).value,s="unit",o=Sde+s,l=Ade+r;a===a$&&!Re(i,o)&&(i[o]=n.getData(r).indataRef(n,s)),Re(i,l)||(i[l]=n.getData(r).tuplesRef())}function fI(e){const t=this.context.data[e];return t?t.values.value:[]}function wde(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function Ode(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Ur).insert(t)),1}function Cde(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const Ap=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},Dde=Ap("format"),dI=Ap("timeFormat"),$de=Ap("utcFormat"),Mde=Ap("timeParse"),Tde=Ap("utcParse"),$1=new Date(2e3,0,1);function ix(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":($1.setYear(2e3),$1.setMonth(e),$1.setDate(t),dI.call(this,$1,n))}function kde(e){return ix.call(this,e,1,"%B")}function Fde(e){return ix.call(this,e,1,"%b")}function Rde(e){return ix.call(this,0,2+e,"%A")}function Nde(e){return ix.call(this,0,2+e,"%a")}const jde=":",zde="@",Yw="%",hI="$";function o$(e,t,n,i){t[0].type!==Kl&&ne("First argument to data functions must be a string literal.");const r=t[0].value,a=jde+r;if(!Re(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function Bde(e,t,n,i){t[0].type!==Kl&&ne("First argument to indata must be a string literal."),t[1].type!==Kl&&ne("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,s=zde+a;Re(s,i)||(i[s]=n.getData(r).indataRef(n,a))}function _i(e,t,n,i){if(t[0].type===Kl)E8(n,i,t[0].value);else for(e in n.scales)E8(n,i,e)}function E8(e,t,n){const i=Yw+n;if(!Re(t,i))try{t[i]=e.scaleRef(n)}catch{}}function ls(e,t){if(tt(e)){const n=t.scales[e];return n&&S4(n.value)?n.value:void 0}else if(He(e))return S4(e)?e:void 0}function Lde(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=_i,n._range=_i,n._scale=_i;const i=r=>"_["+(r.type===Kl?Ce(Yw+r.value):Ce(Yw)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function u$(e,t){return function(n,i,r){if(n){const a=ls(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const Ude=u$("area",rse),Pde=u$("bounds",use),Ide=u$("centroid",gse);function qde(e,t){const n=ls(e,(t||this).context);return n&&n.scale()}function Hde(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function l$(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function Gde(){return l$(this.context.dataflow,"warn",arguments)}function Yde(){return l$(this.context.dataflow,"info",arguments)}function Xde(){return l$(this.context.dataflow,"debug",arguments)}function $A(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Xw(e){const t=vu(e),n=$A(t.r),i=$A(t.g),r=$A(t.b);return .2126*n+.7152*i+.0722*r}function Vde(e,t){const n=Xw(e),i=Xw(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function Wde(){const e=[].slice.call(arguments);return e.unshift({}),Ie(...e)}function gI(e,t){return e===t||e!==e&&t!==t?!0:Ee(e)?Ee(t)&&e.length===t.length?Qde(e,t):!1:je(e)&&je(t)?pI(e,t):!1}function Qde(e,t){for(let n=0,i=e.length;n<i;++n)if(!gI(e[n],t[n]))return!1;return!0}function pI(e,t){for(const n in e)if(!gI(e[n],t[n]))return!1;return!0}function _8(e){return t=>pI(e,t)}function Zde(e,t,n,i,r,a){const s=this.context.dataflow,o=this.context.data[e],l=o.input,f=s.stamp();let d=o.changes,g,p;if(s._trigger===!1||!(l.value.length||t||i))return 0;if((!d||d.stamp<f)&&(o.changes=d=s.changeset(),d.stamp=f,s.runAfter(()=>{o.modified=!0,s.pulse(l,d).run()},!0,1)),n&&(g=n===!0?Ur:Ee(n)||db(n)?n:_8(n),d.remove(g)),t&&d.insert(t),i&&(g=_8(i),l.value.some(g)?d.remove(g):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function Kde(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function Jde(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const A8={};function ehe(e,t){const n=A8[t]||(A8[t]=Lr(t));return Ee(e)?e.map(n):n(e)}function rx(e){return Ee(e)||ArrayBuffer.isView(e)?e:null}function c$(e){return rx(e)||(tt(e)?e:null)}function the(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return rx(e).join(...n)}function nhe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return c$(e).indexOf(...n)}function ihe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return c$(e).lastIndexOf(...n)}function rhe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return c$(e).slice(...n)}function ahe(e,t,n){return He(n)&&ne("Function argument passed to replace."),!tt(t)&&!QO(t)&&ne("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function she(e){return rx(e).slice().reverse()}function ohe(e){return rx(e).slice().sort(Cd)}function uhe(e,t,n){return S3(e||0,t||0,n||0)}function lhe(e,t){const n=ls(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function che(e,t){const n=ls(e,(t||this).context);return n?n.copy():void 0}function fhe(e,t){const n=ls(e,(t||this).context);return n?n.domain():[]}function dhe(e,t,n){const i=ls(e,(n||this).context);return i?Ee(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function hhe(e,t){const n=ls(e,(t||this).context);return n&&n.range?n.range():[]}function ghe(e,t,n){const i=ls(e,(n||this).context);return i?i(t):void 0}function phe(e,t,n,i,r){e=ls(e,(r||this).context);const a=rL(t,n);let s=e.domain(),o=s[0],l=et(s),f=Si;return l-o?f=YB(e,o,l):e=(e.interpolator?ct("sequential")().interpolator(e.interpolator()):ct("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,l=1]),e.ticks&&(s=e.ticks(+i||15),o!==s[0]&&s.unshift(o),l!==et(s)&&s.push(l)),s.forEach(d=>a.stop(f(d),e(d))),a}function mhe(e,t,n){const i=ls(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function yhe(e){let t=null;return function(n){return n?vg(n,t=t||ad(e)):e}}const mI=e=>e.data;function yI(e,t){const n=fI.call(t,e);return n.root&&n.root.lookup||{}}function vhe(e,t,n){const i=yI(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(mI):void 0}function bhe(e,t){const n=yI(e,this)[t];return n?n.ancestors().map(mI):void 0}const vI=()=>typeof window<"u"&&window||null;function xhe(){const e=vI();return e?e.screen:{}}function Ehe(){const e=vI();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function _he(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function bI(e,t,n){if(!e)return[];const[i,r]=e,a=new on().set(i[0],i[1],r[0],r[1]),s=n||this.context.dataflow.scenegraph().root;return tU(s,a,Ahe(t))}function Ahe(e){let t=null;if(e){const n=De(e.marktype),i=De(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function She(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=De(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function whe(e){return De(e).reduce((t,n,i)=>{let[r,a]=n;return t+=i==0?`M ${r},${a} `:i===e.length-1?" Z":`L ${r},${a} `},"")}function Ohe(e,t,n){const{x:i,y:r,mark:a}=n,s=new on().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,f]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),f<s.y1&&(s.y1=f),f>s.y2&&(s.y2=f);return s.translate(i,r),bI([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(l=>Che(l.x,l.y,t))}function Che(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[s,o]=n[a],[l,f]=n[r];f>t!=o>t&&e<(s-l)*(t-f)/(o-f)+l&&i++}return i&1}const $g={random(){return Ir()},cumulativeNormal:yb,cumulativeLogNormal:SC,cumulativeUniform:DC,densityNormal:bC,densityLogNormal:AC,densityUniform:CC,quantileNormal:vb,quantileLogNormal:wC,quantileUniform:$C,sampleNormal:mb,sampleLogNormal:_C,sampleUniform:OC,isArray:Ee,isBoolean:WO,isDate:su,isDefined(e){return e!==void 0},isNumber:hu,isObject:je,isRegExp:QO,isString:tt,isTuple:db,isValid(e){return e!=null&&e===e},toBoolean:KO,toDate(e){return JO(e)},toNumber:Kn,toString:eC,indexof:nhe,join:the,lastindexof:ihe,replace:ahe,reverse:she,sort:ohe,slice:rhe,flush:S7,lerp:O7,merge:Wde,pad:$7,peek:et,pluck:ehe,span:Qg,inrange:Mf,truncate:M7,rgb:vu,lab:Ry,hcl:Ny,hsl:ky,luminance:Xw,contrast:Vde,sequence:cr,format:Dde,utcFormat:$de,utcParse:Tde,utcOffset:lj,utcSequence:dj,timeFormat:dI,timeParse:Mde,timeOffset:uj,timeSequence:fj,timeUnitSpecifier:Z7,monthFormat:kde,monthAbbrevFormat:Fde,dayFormat:Rde,dayAbbrevFormat:Nde,quarter:x7,utcquarter:E7,week:J7,utcweek:nj,dayofyear:K7,utcdayofyear:tj,warn:Gde,info:Yde,debug:Xde,extent(e){return Va(e)},inScope:Hde,intersect:bI,clampRange:_7,pinchDistance:Kde,pinchAngle:Jde,screen:xhe,containerSize:_he,windowSize:Ehe,bandspace:uhe,setdata:Ode,pathShape:yhe,panLinear:m7,panLog:y7,panPow:v7,panSymlog:b7,zoomLinear:HO,zoomLog:GO,zoomPow:by,zoomSymlog:YO,encode:Cde,modify:Zde,lassoAppend:She,lassoPath:whe,intersectLasso:Ohe},Dhe=["view","item","group","xy","x","y"],$he="event.vega.",xI="this.",f$={},EI={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Ce(hI+e)}]`,functions:Mhe,constants:sI,visitors:f$},Vw=uI(EI);function Mhe(e){const t=oI(e);Dhe.forEach(n=>t[n]=$he+n);for(const n in $g)t[n]=xI+n;return Ie(t,Lde(e,$g,f$)),t}function en(e,t,n){return arguments.length===1?$g[e]:($g[e]=t,n&&(f$[e]=n),Vw&&(Vw.functions[e]=xI+e),this)}en("bandwidth",lhe,_i);en("copy",che,_i);en("domain",fhe,_i);en("range",hhe,_i);en("invert",dhe,_i);en("scale",ghe,_i);en("gradient",phe,_i);en("geoArea",Ude,_i);en("geoBounds",Pde,_i);en("geoCentroid",Ide,_i);en("geoShape",mhe,_i);en("geoScale",qde,_i);en("indata",wde,Bde);en("data",fI,o$);en("treePath",vhe,o$);en("treeAncestors",bhe,o$);en("vlSelectionTest",yde,s$);en("vlSelectionIdTest",xde,s$);en("vlSelectionResolve",_de,s$);en("vlSelectionTuples",Ede);function Ja(e,t){const n={};let i;try{e=tt(e)?e:Ce(e)+"",i=aI(e)}catch{ne("Expression parse error: "+e)}i.visit(a=>{if(a.type!==KP)return;const s=a.callee.name,o=EI.visitors[s];o&&o(s,a.arguments,t,n)});const r=Vw(i);return r.globals.forEach(a=>{const s=hI+a;!Re(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:Ie({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function The(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const khe=ga(["rule"]),S8=ga(["group","image","rect"]);function Fhe(e,t){let n="";return khe[t]||(e.x2&&(e.x?(S8[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(S8[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function d$(e){return(e+"").toLowerCase()}function Rhe(e){return d$(e)==="operator"}function Nhe(e){return d$(e)==="collect"}function d0(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function jhe(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var zhe={operator:(e,t)=>d0(e,["_"],t.code),parameter:(e,t)=>d0(e,["datum","_"],t.code),event:(e,t)=>d0(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return d0(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const s="o["+Ce(a)+"]";r+=`$=${i[a].code};if(${s}!==$)${s}=$,m=1;`}return r+=Fhe(i,n),r+="return m;",d0(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(Ce).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,s)=>{const o=t[s];let l,f;return a.path?(l=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+s]=a,l=`this.f${s}(a)`,f=`this.f${s}(b)`),jhe(l,f,-o,o)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function Bhe(e){const t=this;Rhe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Lhe(e){const t=this;if(e.params){const n=t.get(e.id);n||ne("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Uhe(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=Ee(r)?r.map(a=>w8(a,n,t)):w8(r,n,t)}return t}function w8(e,t,n){if(!e||!je(e))return e;for(let i=0,r=O8.length,a;i<r;++i)if(a=O8[i],Re(e,a.key))return a.parse(e,t,n);return e}var O8=[{key:"$ref",parse:Phe},{key:"$key",parse:qhe},{key:"$expr",parse:Ihe},{key:"$field",parse:Hhe},{key:"$encode",parse:Yhe},{key:"$compare",parse:Ghe},{key:"$context",parse:Xhe},{key:"$subflow",parse:Vhe},{key:"$tupleid",parse:Whe}];function Phe(e,t){return t.get(e.$ref)||ne("Operator not defined: "+e.$ref)}function Ihe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=Wi(t.parameterExpression(e.$expr),e.$fields))}function qhe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=ZO(e.$key,e.$flat,t.expr.codegen))}function Hhe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Lr(e.$field,e.$name,t.expr.codegen))}function Ghe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=De(e.$compare).map(r=>r&&r.$tupleid?we:r);return t.fn[n]||(t.fn[n]=XO(i,e.$order,t.expr.codegen))}function Yhe(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=Wi(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function Xhe(e,t){return t}function Vhe(e,t){const n=e.$subflow;return function(i,r,a){const s=t.fork().parse(n),o=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(a),o.detachSubflow=()=>t.detach(s),o}}function Whe(){return we}function Qhe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&ne("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function Zhe(e){var t=this,n=je(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,s=void 0;i||ne("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,s)}const Khe={skip:!0};function Jhe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(i[a]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(r[a]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function e0e(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],Khe)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Ur).insert(i[a]))}),(e.subcontext||[]).forEach((a,s)=>{const o=t.subcontext[s];o&&o.setState(a)})}function _I(e,t,n,i){return new AI(e,t,n,i)}function AI(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||zhe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function C8(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}AI.prototype=C8.prototype={fork(){const e=new C8(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),Nhe(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(o=>s[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[d$(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:The,parseOperator:Bhe,parseOperatorParameters:Lhe,parseParameters:Uhe,parseStream:Qhe,parseUpdate:Zhe,getState:Jhe,setState:e0e};function t0e(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),SI(t,e.description()))}function SI(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function n0e(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const MA="default";function i0e(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:MA,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?tt(r)?r:r.user:MA,s=i.item&&i.item.cursor||null;return r&&a===r.user&&s==r.item?r:{user:a,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return tt(i)||(r=i.item,i=i.user),Ww(e,i&&i!==MA?i:r||i),r},{cursor:t})}function Ww(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function $v(e,t){var n=e._runtime.data;return Re(n,t)||ne("Unrecognized data set: "+t),n[t]}function r0e(e,t){return arguments.length<2?$v(this,e).values.value:ax.call(this,e,gc().remove(Ur).insert(t))}function ax(e,t){Lj(t)||ne("Second argument to changes must be a changeset.");const n=$v(this,e);return n.modified=!0,this.pulse(n.input,t)}function a0e(e,t){return ax.call(this,e,gc().insert(t))}function s0e(e,t){return ax.call(this,e,gc().remove(t))}function wI(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function OI(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function sx(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function o0e(e){var t=sx(e),n=wI(e),i=OI(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function u0e(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,s,o;return r&&(o=sx(e),s=t.changedTouches?t.changedTouches[0]:t,a=Gb(s,r),a[0]-=o[0],a[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=l0e(e,n,a),t}function l0e(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(s){var o=i,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){o=l;break}}return o&&o.mark&&o.mark.interactive?o:{}}function a(s){if(!s)return n;tt(s)&&(s=r(s));const o=n.slice();for(;s;)o[0]-=s.x||0,o[1]-=s.y||0,s=s.mark&&s.mark.group;return o}return{view:ui(e),item:ui(t||{}),group:r,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}const D8="view",c0e="timer",f0e="window",d0e={trap:!1};function h0e(e){const t=Ie({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{Ee(i[a])&&(i[a]=ga(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function CI(e,t,n,i){e._eventListeners.push({type:n,sources:De(t),handler:i})}function g0e(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function M1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||je(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function p0e(e,t,n){var i=this,r=new pb(n),a=function(f,d){i.runAsync(null,()=>{e===D8&&g0e(i,t)&&f.preventDefault(),r.receive(u0e(i,f,d))})},s;if(e===c0e)M1(i,"timer",t)&&i.timer(a,t);else if(e===D8)M1(i,"view",t)&&i.addEventListener(t,a,d0e);else if(e===f0e?M1(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&M1(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var o=0,l=s.length;o<l;++o)s[o].addEventListener(t,a);CI(i,s,t,a)}return r}function $8(e){return e.item}function M8(e){return e.item.mark.source}function T8(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function m0e(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",$8),M8,T8(e)),this.on(this.events("view","pointerout",$8),M8,T8(t)),this}function y0e(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,s,o,l;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(s=i[r],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)l=n[r].type,o=n[r].handler,this._handler.off(l,o);return this}function hr(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const v0e="vega-bind",b0e="vega-bind-name",x0e="vega-bind-radio";function E0e(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=VO(i.debounce,r.update))),(i.input==null&&i.element?_0e:S0e)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function _0e(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),CI(i,t,r,a),e.set=s=>{t.value=s,t.dispatchEvent(A0e(r))}}function A0e(e){return typeof Event<"u"?new Event(e):{type:e}}function S0e(e,t,n,i){const r=i.signal(n.signal),a=hr("div",{class:v0e}),s=n.input==="radio"?a:a.appendChild(hr("label"));s.appendChild(hr("span",{class:b0e},n.name||n.signal)),t.appendChild(a);let o=w0e;switch(n.input){case"checkbox":o=O0e;break;case"select":o=C0e;break;case"radio":o=D0e;break;case"range":o=$0e;break}o(e,s,n,r)}function w0e(e,t,n,i){const r=hr("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function O0e(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=hr("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function C0e(e,t,n,i){const r=hr("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,o)=>{const l={value:s};Mv(s,i)&&(l.selected=!0),r.appendChild(hr("option",l,(a[o]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let o=0,l=n.options.length;o<l;++o)if(Mv(n.options[o],s)){r.selectedIndex=o;return}}}function D0e(e,t,n,i){const r=hr("span",{class:x0e}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,o)=>{const l={type:"radio",name:n.signal,value:s};Mv(s,i)&&(l.checked=!0);const f=hr("input",l);f.addEventListener("change",()=>e.update(s));const d=hr("label",{},(a[o]||s)+"");return d.prepend(f),r.appendChild(d),f}),e.set=s=>{const o=e.elements,l=o.length;for(let f=0;f<l;++f)Mv(o[f].value,s)&&(o[f].checked=!0)}}function $0e(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,s=n.step||pu(a,r,100),o=hr("input",{type:"range",name:n.signal,min:a,max:r,step:s});o.value=i;const l=hr("span",{},+i);t.appendChild(o),t.appendChild(l);const f=()=>{l.textContent=o.value,e.update(+o.value)};o.addEventListener("input",f),o.addEventListener("change",f),e.elements=[o],e.set=d=>{o.value=d,l.textContent=d}}function Mv(e,t){return e===t||e+""==t+""}function DI(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,wI(e),OI(e),sx(e),r,a).background(e.background())}function h$(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function M0e(e,t,n,i){const r=new i(e.loader(),h$(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,sx(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function T0e(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=Yb(i);e=n._el=e?TA(n,e,!0):null,t0e(n),a||n.error("Unrecognized renderer type: "+i);const s=a.handler||pp,o=e?a.renderer:a.headless;return n._renderer=o?DI(n,n._renderer,e,o):null,n._handler=M0e(n,n._handler,e,s),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=TA(n,t,!0):e.appendChild(hr("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=TA(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{E0e(n,l.element||t,l)})),n}function TA(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const h0=e=>+e||0,k0e=e=>({top:e,bottom:e,left:e,right:e});function k8(e){return je(e)?{top:h0(e.top),bottom:h0(e.bottom),left:h0(e.left),right:h0(e.right)}:k0e(h0(e))}async function g$(e,t,n,i){const r=Yb(t),a=r&&r.headless;return a||ne("Unrecognized renderer type: "+t),await e.runAsync(),DI(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function F0e(e,t){e!==tu.Canvas&&e!==tu.SVG&&e!==tu.PNG&&ne("Unrecognized image type: "+e);const n=await g$(this,e,t);return e===tu.SVG?R0e(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function R0e(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function N0e(e,t){return(await g$(this,tu.Canvas,e,t)).canvas()}async function j0e(e){return(await g$(this,tu.SVG,e)).svg()}function z0e(e,t,n){return _I(e,Jf,$g,n).parse(t)}function B0e(e){var t=this._runtime.scales;return Re(t,e)||ne("Unrecognized scale or projection: "+e),t[e].value}var $I="width",MI="height",p$="padding",F8={skip:!0};function TI(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===p$?i.left+i.right:0)}function kI(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===p$?i.top+i.bottom:0)}function L0e(e){var t=e._signals,n=t[$I],i=t[MI],r=t[p$];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=TI(e,o.size),a()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=kI(e,o.size),a()},{size:i});const s=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}function U0e(e,t,n,i,r,a){this.runAfter(s=>{let o=0;s._autosize=0,s.width()!==n&&(o=1,s.signal($I,n,F8),s._resizeWidth.skip(!0)),s.height()!==i&&(o=1,s.signal(MI,i,F8),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),o&&s.run("enter"),a&&s.runAfter(l=>l.resize())},!1,1)}function P0e(e){return this._runtime.getState(e||{data:I0e,signals:q0e,recurse:!0})}function I0e(e,t){return t.modified&&Ee(t.input.value)&&!e.startsWith("_:vega:_")}function q0e(e,t){return!(e==="parent"||t instanceof Jf.proxy)}function H0e(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function G0e(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(pue(n,t))}function Y0e(e,t,n,i){const r=e.element();r&&r.setAttribute("title",X0e(i))}function X0e(e){return e==null?"":Ee(e)?FI(e):je(e)&&!su(e)?V0e(e):e+""}function V0e(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Ee(n)?FI(n):RI(n))}).join(`
`)}function FI(e){return"["+e.map(RI).join(", ")+"]"}function RI(e){return Ee(e)?"[…]":je(e)&&!su(e)?"{…}":e}function W0e(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function NI(e,t){const n=this;if(t=t||{},Bf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=Ie({},e.locale,t.locale);n.locale($j(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||tu.Canvas,n._scenegraph=new DL;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Y0e,n._redraw=!0,n._handler=new pp().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=h0e(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=z0e(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:Ie({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=TI(n,n._width),n._viewHeight=kI(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,L0e(n),n0e(n),i0e(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function T1(e,t){return Re(e._signals,t)?e._signals[t]:ne("Unrecognized signal name: "+Ce(t))}function jI(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function R8(e,t,n,i){let r=jI(n,i);return r||(r=h$(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function N8(e,t,n){const i=jI(t,n);return i&&t._targets.remove(i),e}fe(NI,Bf,{async evaluate(e,t,n){if(await Bf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,o0e(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&Y1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&SI(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=T1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",k8(e)):k8(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Yb(e)||ne("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Bf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(T1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:U0e,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=h$(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return R8(this,e,T1(this,e),t)},removeSignalListener(e,t){return N8(this,T1(this,e),t)},addDataListener(e,t){return R8(this,e,$v(this,e).values,t)},removeDataListener(e,t){return N8(this,$v(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=Ww(this,null);this._globalCursor=!!e,t&&Ww(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:G0e,events:p0e,finalize:y0e,hover:m0e,data:r0e,change:ax,insert:a0e,remove:s0e,scale:B0e,initialize:T0e,toImageURL:F0e,toCanvas:N0e,toSVG:j0e,getState:P0e,setState:H0e,_watchPixelRatio:W0e});const Q0e="view",Tv="[",kv="]",zI="{",BI="}",Z0e=":",LI=",",K0e="@",J0e=">",ege=/[[\]{}]/,tge={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let UI,PI;function II(e,t,n){return UI=t||Q0e,PI=n||tge,qI(e.trim()).map(Qw)}function nge(e){return PI[e]}function rg(e,t,n,i,r){const a=e.length;let s=0,o;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;r&&r.indexOf(o)>=0?--s:i&&i.indexOf(o)>=0&&++s}return t}function qI(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=rg(e,r,LI,Tv+zI,kv+BI),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function Qw(e){return e[0]==="["?ige(e):rge(e)}function ige(e){const t=e.length;let n=1,i;if(n=rg(e,n,kv,Tv,kv),n===t)throw"Empty between selector: "+e;if(i=qI(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==J0e)throw"Expected '>' after between selector: "+e;i=i.map(Qw);const r=Qw(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function rge(e){const t={source:UI},n=[];let i=[0,0],r=0,a=0,s=e.length,o=0,l,f;if(e[s-1]===BI){if(o=e.lastIndexOf(zI),o>=0){try{i=age(e.substring(o+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),s=e.length}else throw"Unmatched right brace: "+e;o=0}if(!s)throw e;if(e[0]===K0e&&(r=++o),l=rg(e,o,Z0e),l<s&&(n.push(e.substring(a,l).trim()),a=o=++l),o=rg(e,o,Tv),o===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,o).trim()),f=[],a=++o,a===s)throw"Unmatched left bracket: "+e;for(;o<s;){if(o=rg(e,o,kv),o===s)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,o).trim()),o<s-1&&e[++o]!==Tv)throw"Expected left bracket: "+e;a=++o}if(!(s=n.length)||ege.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):nge(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function age(e){const t=e.split(LI);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function sge(e){return je(e)?e:{type:e||"pad"}}const g0=e=>+e||0,oge=e=>({top:e,bottom:e,left:e,right:e});function uge(e){return je(e)?e.signal?e:{top:g0(e.top),bottom:g0(e.bottom),left:g0(e.left),right:g0(e.right)}:oge(g0(e))}const Mn=e=>je(e)&&!Ee(e)?Ie({},e):{value:e};function j8(e,t,n,i){return n!=null?(je(n)&&!Ee(n)||Ee(n)&&n.length&&je(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function Pn(e,t,n){for(const i in t)j8(e,i,t[i]);for(const i in n)j8(e,i,n[i],"update")}function Ld(e,t,n){for(const i in t)n&&Re(n,i)||(e[i]=Ie(e[i]||{},t[i]));return e}function $f(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const m$="mark",y$="frame",v$="scope",lge="axis",cge="axis-domain",fge="axis-grid",dge="axis-label",hge="axis-tick",gge="axis-title",pge="legend",mge="legend-band",yge="legend-entry",vge="legend-gradient",HI="legend-label",bge="legend-symbol",xge="legend-title",Ege="title",_ge="title-text",Age="title-subtitle";function Sge(e,t,n,i,r){const a={},s={};let o,l,f,d;l="lineBreak",t==="text"&&r[l]!=null&&!$f(l,e)&&kA(a,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===y$?r.group:n===m$?Ie({},r.mark,r[t]):null;for(l in d)f=$f(l,e)||(l==="fill"||l==="stroke")&&($f("fill",e)||$f("stroke",e)),f||kA(a,l,d[l]);De(i).forEach(g=>{const p=r.style&&r.style[g];for(const y in p)$f(y,e)||kA(a,y,p[y])}),e=Ie({},e);for(l in a)d=a[l],d.signal?(o=o||{})[l]=d:s[l]=d;return e.enter=Ie(s,e.enter),o&&(e.update=Ie(o,e.update)),e}function kA(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const GI=e=>tt(e)?Ce(e):e.signal?`(${e.signal})`:YI(e);function ox(e){if(e.gradient!=null)return Oge(e);let t=e.signal?`(${e.signal})`:e.color?wge(e.color):e.field!=null?YI(e.field):e.value!==void 0?Ce(e.value):void 0;return e.scale!=null&&(t=Cge(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${cy(e.exponent)})`),e.mult!=null&&(t+=`*${cy(e.mult)}`),e.offset!=null&&(t+=`+${cy(e.offset)}`),e.round&&(t=`round(${t})`),t}const k1=(e,t,n,i)=>`(${e}(${[t,n,i].map(ox).join(",")})+'')`;function wge(e){return e.c?k1("hcl",e.h,e.c,e.l):e.h||e.s?k1("hsl",e.h,e.s,e.l):e.l||e.a?k1("lab",e.l,e.a,e.b):e.r||e.g||e.b?k1("rgb",e.r,e.g,e.b):null}function Oge(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Ce(n));for(;t.length&&et(t)==null;)t.pop();return t.unshift(GI(e.gradient)),`gradient(${t.join(",")})`}function cy(e){return je(e)?"("+ox(e)+")":e}function YI(e){return XI(je(e)?e:{datum:e})}function XI(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):ne("Invalid field reference: "+Ce(e));return e.signal||(i=tt(i)?eb(i).map(Ce).join("]["):XI(i)),t+"["+i+"]"}function Cge(e,t){const n=GI(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+cy(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function Dge(e){let t="";return e.forEach(n=>{const i=ox(n);t+=n.test?`(${n.test})?${i}:`:i}),et(t)===":"&&(t+="null"),t}function VI(e,t,n,i,r,a){const s={};a=a||{},a.encoders={$encode:s},e=Sge(e,t,n,i,r.config);for(const o in e)s[o]=$ge(e[o],t,a,r);return a}function $ge(e,t,n,i){const r={},a={};for(const s in e)e[s]!=null&&(r[s]=Tge(Mge(e[s]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function Mge(e){return Ee(e)?Dge(e):ox(e)}function Tge(e,t,n,i){const r=Ja(e,t);return r.$fields.forEach(a=>i[a]=1),Ie(n,r.$params),r.$expr}const kge="outer",Fge=["value","update","init","react","bind"];function z8(e,t){ne(e+' for "outer" push: '+Ce(t))}function WI(e,t){const n=e.name;if(e.push===kge)t.signals[n]||z8("No prior signal definition",n),Fge.forEach(i=>{e[i]!==void 0&&z8("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function Zw(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function ux(e,t,n,i){return new Zw(e,t,n,i)}function Fv(e,t){return ux("operator",e,t)}function Se(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Mg(e,t){return t?{$field:e,$name:t}:{$field:e}}const Kw=Mg("key");function B8(e,t){return{$compare:e,$order:t}}function Rge(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Nge="ascending",jge="descending";function zge(e){return je(e)?(e.order===jge?"-":"+")+lx(e.op,e.field):""}function lx(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const b$="scope",Jw="view";function yn(e){return e&&e.signal}function Bge(e){return e&&e.expr}function fy(e){if(yn(e))return!0;if(je(e)){for(const t in e)if(fy(e[t]))return!0}return!1}function ia(e,t){return e??t}function Ll(e){return e&&e.signal||e}const L8="timer";function Tg(e,t){return(e.merge?Uge:e.stream?Pge:e.type?Ige:ne("Invalid stream specification: "+Ce(e)))(e,t)}function Lge(e){return e===b$?Jw:e||Jw}function Uge(e,t){const n=e.merge.map(r=>Tg(r,t)),i=x$({merge:n},e,t);return t.addStream(i).id}function Pge(e,t){const n=Tg(e.stream,t),i=x$({stream:n},e,t);return t.addStream(i).id}function Ige(e,t){let n;e.type===L8?(n=t.event(L8,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Lge(e.source),e.type);const i=x$({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function x$(e,t,n){let i=t.between;return i&&(i.length!==2&&ne('Stream "between" parameter must have 2 entries: '+Ce(t)),e.between=[Tg(i[0],n),Tg(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(qge(t.marktype,t.markname,t.markrole)),t.source===b$&&i.push("inScope(event.item)"),i.length&&(e.filter=Ja("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function qge(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const Hge={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Gge(e,t,n){const i=e.encode,r={target:n};let a=e.events,s=e.update,o=[];a||ne("Signal update missing events specification."),tt(a)&&(a=II(a,t.isSubscope()?b$:Jw)),a=De(a).filter(l=>l.signal||l.scale?(o.push(l),0):1),o.length>1&&(o=[Xge(o)]),a.length&&o.push(a.length>1?{merge:a}:a[0]),i!=null&&(s&&ne("Signal encode and update are mutually exclusive."),s="encode(item(),"+Ce(i)+")"),r.update=tt(s)?Ja(s,t):s.expr!=null?Ja(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:Hge,$params:{$value:t.signalRef(s.signal)}}:ne("Invalid signal update specification."),e.force&&(r.options={force:!0}),o.forEach(l=>t.addUpdate(Ie(Yge(l,t),r)))}function Yge(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Tg(e,t)}}function Xge(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Vge(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?ne("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Ja(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>Gge(r,t,n.id))}const St=e=>(t,n,i)=>ux(e,n,t||void 0,i),QI=St("aggregate"),Wge=St("axisticks"),ZI=St("bound"),ba=St("collect"),U8=St("compare"),Qge=St("datajoin"),KI=St("encode"),Zge=St("expression"),Kge=St("facet"),Jge=St("field"),epe=St("key"),tpe=St("legendentries"),npe=St("load"),ipe=St("mark"),rpe=St("multiextent"),ape=St("multivalues"),spe=St("overlap"),ope=St("params"),JI=St("prefacet"),upe=St("projection"),lpe=St("proxy"),cpe=St("relay"),eq=St("render"),fpe=St("scale"),vc=St("sieve"),dpe=St("sortitems"),tq=St("viewlayout"),hpe=St("values");let gpe=0;const nq={min:"min",max:"max",count:"sum"};function ppe(e,t){const n=e.type||"linear";UB(n)||ne("Unrecognized scale type: "+Ce(n)),t.addScale(e.name,{type:n,domain:void 0})}function mpe(e,t){const n=t.getScale(e.name).params;let i;n.domain=iq(e.domain,e,t),e.range!=null&&(n.range=aq(e,t,n)),e.interpolate!=null&&Ope(e.interpolate,n),e.nice!=null&&(n.nice=wpe(e.nice,t)),e.bins!=null&&(n.bins=Spe(e.bins,t));for(i in e)Re(n,i)||i==="name"||(n[i]=Nr(e[i],t))}function Nr(e,t){return je(e)?e.signal?t.signalRef(e.signal):ne("Unsupported object: "+Ce(e)):e}function dy(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Nr(n,t))}function cx(e){ne("Can not find data set: "+Ce(e))}function iq(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ne("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Ee(e)?ype:e.fields?bpe:vpe)(e,t,n)}function ype(e,t,n){return e.map(i=>Nr(i,n))}function vpe(e,t,n){const i=n.getData(e.data);return i||cx(e.data),rd(t.type)?i.valuesRef(n,e.field,rq(e.sort,!1)):qB(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function bpe(e,t,n){const i=e.data,r=e.fields.reduce((a,s)=>(s=tt(s)?{data:i,field:s}:Ee(s)||s.signal?xpe(s,n):s,a.push(s),a),[]);return(rd(t.type)?Epe:qB(t.type)?_pe:Ape)(e,n,r)}function xpe(e,t){const n="_:vega:_"+gpe++,i=ba({});if(Ee(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+Ce(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,vc({})]),{data:n,field:"data"}}function Epe(e,t,n){const i=rq(e.sort,!0);let r,a;const s=n.map(f=>{const d=t.getData(f.data);return d||cx(f.data),d.countsRef(t,f.field,i)}),o={groupby:Kw,pulse:s};i&&(r=i.op||"count",a=i.field?lx(r,i.field):"count",o.ops=[nq[r]],o.fields=[t.fieldRef(a)],o.as=[a]),r=t.add(QI(o));const l=t.add(ba({pulse:Se(r)}));return a=t.add(hpe({field:Kw,sort:t.sortRef(i),pulse:Se(l)})),Se(a)}function rq(e,t){return e&&(!e.field&&!e.op?je(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ne("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!nq[e.op]&&ne("Multiple domain scales can not be sorted using "+e.op)),e}function _pe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||cx(r.data),a.domainRef(t,r.field)});return Se(t.add(ape({values:i})))}function Ape(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||cx(r.data),a.extentRef(t,r.field)});return Se(t.add(rpe({extents:i})))}function Spe(e,t){return e.signal||Ee(e)?dy(e,t):t.objectProperty(e)}function wpe(e,t){return e.signal?t.signalRef(e.signal):je(e)?{interval:Nr(e.interval),step:Nr(e.step)}:Nr(e)}function Ope(e,t){t.interpolate=Nr(e.type||e),e.gamma!=null&&(t.interpolateGamma=Nr(e.gamma))}function aq(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(tt(r)){if(i&&Re(i,r))return e=Ie({},e,{range:i[r]}),aq(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=rd(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ne("Unrecognized scale range value: "+Ce(r))}else if(r.scheme){n.scheme=Ee(r.scheme)?dy(r.scheme,t):Nr(r.scheme,t),r.extent&&(n.schemeExtent=dy(r.extent,t)),r.count&&(n.schemeCount=Nr(r.count,t));return}else if(r.step){n.rangeStep=Nr(r.step,t);return}else{if(rd(e.type)&&!Ee(r))return iq(r,e,t);Ee(r)||ne("Unsupported range type: "+Ce(r))}return r.map(a=>(Ee(a)?dy:Nr)(a,t))}function Cpe(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=eO(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=eO(n[r],r,t));t.addProjection(e.name,i)}function eO(e,t,n){return Ee(e)?e.map(i=>eO(i,t,n)):je(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ne("Unsupported parameter object: "+Ce(e)):e}const xa="top",Ud="left",Pd="right",Au="bottom",sq="center",Dpe="vertical",$pe="start",Mpe="middle",Tpe="end",tO="index",E$="label",kpe="offset",hd="perc",Fpe="perc2",zr="value",Sp="guide-label",_$="guide-title",Rpe="group-title",Npe="group-subtitle",P8="symbol",hy="gradient",nO="discrete",iO="size",jpe="shape",zpe="fill",Bpe="stroke",Lpe="strokeWidth",Upe="strokeDash",Ppe="opacity",A$=[iO,jpe,zpe,Bpe,Lpe,Upe,Ppe],wp={name:1,style:1,interactive:1},it={value:0},Br={value:1},fx="group",oq="rect",S$="rule",Ipe="symbol",bc="text";function kg(e){return e.type=fx,e.interactive=e.interactive||!1,e}function Qi(e,t){const n=(i,r)=>ia(e[i],ia(t[i],r));return n.isVertical=i=>Dpe===ia(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ia(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ia(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ia(e.columns,ia(t.columns,+n.isVertical(!0))),n}function uq(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function qpe(e,t,n){const i=t.config.style[n];return i&&i[e]}function dx(e,t,n){return`item.anchor === '${$pe}' ? ${e} : item.anchor === '${Tpe}' ? ${t} : ${n}`}const w$=dx(Ce(Ud),Ce(Pd),Ce(sq));function Hpe(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},je(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function lq(e,t){return t?e?je(e)?Object.assign({},e,{offset:lq(e.offset,t)}):{value:e,offset:t}:t:e}function vr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Ld(e.encode,t,wp)):e.interactive=!1,e}function Gpe(e,t,n,i){const r=Qi(e,n),a=r.isVertical(),s=r.gradientThickness(),o=r.gradientLength();let l,f,d,g,p;a?(f=[0,1],d=[0,0],g=s,p=o):(f=[0,0],d=[1,0],g=o,p=s);const y={enter:l={opacity:it,x:it,y:it,width:Mn(g),height:Mn(p)},update:Ie({},l,{opacity:Br,fill:{gradient:t,start:f,stop:d}}),exit:{opacity:it}};return Pn(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),vr({type:oq,role:vge,encode:y},i)}function Ype(e,t,n,i,r){const a=Qi(e,n),s=a.isVertical(),o=a.gradientThickness(),l=a.gradientLength();let f,d,g,p,y="";s?(f="y",g="y2",d="x",p="width",y="1-"):(f="x",g="x2",d="y",p="height");const v={opacity:it,fill:{scale:t,field:zr}};v[f]={signal:y+"datum."+hd,mult:l},v[d]=it,v[g]={signal:y+"datum."+Fpe,mult:l},v[p]=Mn(o);const x={enter:v,update:Ie({},v,{opacity:Br}),exit:{opacity:it}};return Pn(x,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),vr({type:oq,role:mge,key:zr,from:r,encode:x},i)}const Xpe=`datum.${hd}<=0?"${Ud}":datum.${hd}>=1?"${Pd}":"${sq}"`,Vpe=`datum.${hd}<=0?"${Au}":datum.${hd}>=1?"${xa}":"${Mpe}"`;function I8(e,t,n,i){const r=Qi(e,t),a=r.isVertical(),s=Mn(r.gradientThickness()),o=r.gradientLength();let l=r("labelOverlap"),f,d,g,p,y="";const v={enter:f={opacity:it},update:d={opacity:Br,text:{field:E$}},exit:{opacity:it}};return Pn(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:ia(e.labelLimit,t.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:Vpe},g="y",p="x",y="1-"):(f.align=d.align={signal:Xpe},f.baseline={value:"top"},g="x",p="y"),f[g]=d[g]={signal:y+"datum."+hd,mult:o},f[p]=d[p]=s,s.offset=ia(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+tO}:void 0,vr({type:bc,role:HI,style:Sp,key:zr,from:i,encode:v,overlap:l},n)}function Wpe(e,t,n,i,r){const a=Qi(e,t),s=n.entries,o=!!(s&&s.interactive),l=s?s.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),g={data:"value"},p=`(${r}) ? datum.${kpe} : datum.${iO}`,y=f?Mn(f):{field:iO},v=`datum.${tO}`,x=`max(1, ${r})`;let E,A,S,w,D;y.mult=.5,E={enter:A={opacity:it,x:{signal:p,mult:.5,offset:d},y},update:S={opacity:Br,x:A.x,y:A.y},exit:{opacity:it}};let O=null,M=null;e.fill||(O=t.symbolBaseFillColor,M=t.symbolBaseStrokeColor),Pn(E,{fill:a("symbolFillColor",O),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",M),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),A$.forEach(L=>{e[L]&&(S[L]=A[L]={scale:e[L],field:zr})});const C=vr({type:Ipe,role:bge,key:zr,from:g,clip:f?!0:void 0,encode:E},n.symbols),k=Mn(d);k.offset=a("labelOffset"),E={enter:A={opacity:it,x:{signal:p,offset:k},y},update:S={opacity:Br,text:{field:E$},x:A.x,y:A.y},exit:{opacity:it}},Pn(E,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const N=vr({type:bc,role:HI,style:Sp,key:zr,from:g,encode:E},n.labels);return E={enter:{noBound:{value:!f},width:it,height:f?Mn(f):it,opacity:it},exit:{opacity:it},update:S={opacity:Br,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(w=`ceil(item.mark.items.length / ${x})`,S.row.signal=`${v}%${w}`,S.column.signal=`floor(${v} / ${w})`,D={field:["row",v]}):(S.row.signal=`floor(${v} / ${x})`,S.column.signal=`${v} % ${x}`,D={field:v}),S.column.signal=`(${r})?${S.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:tO}},kg({role:v$,from:i,encode:Ld(E,s,wp),marks:[C,N],name:l,interactive:o,sort:D})}function Qpe(e,t){const n=Qi(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const O$='item.orient === "left"',C$='item.orient === "right"',hx=`(${O$} || ${C$})`,Zpe=`datum.vgrad && ${hx}`,Kpe=dx('"top"','"bottom"','"middle"'),Jpe=dx('"right"','"left"','"center"'),eme=`datum.vgrad && ${C$} ? (${Jpe}) : (${hx} && !(datum.vgrad && ${O$})) ? "left" : ${w$}`,tme=`item._anchor || (${hx} ? "middle" : "start")`,nme=`${Zpe} ? (${O$} ? -90 : 90) : 0`,ime=`${hx} ? (datum.vgrad ? (${C$} ? "bottom" : "top") : ${Kpe}) : "top"`;function rme(e,t,n,i){const r=Qi(e,t),a={enter:{opacity:it},update:{opacity:Br,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:it}};return Pn(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:tme},angle:{signal:nme},align:{signal:eme},baseline:{signal:ime},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),vr({type:bc,role:xge,style:_$,from:i,encode:a},n)}function ame(e,t){let n;return je(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+q8(e.path)+")":e.sphere&&(n="geoShape("+q8(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function q8(e){return je(e)&&e.signal?e.signal:Ce(e)}function cq(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===fx?v$:t||m$}function sme(e){return{marktype:e.type,name:e.name||void 0,role:e.role||cq(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function ome(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function D$(e,t){const n=Ij(e.type);n||ne("Unrecognized transform type: "+Ce(e.type));const i=ux(n.type.toLowerCase(),null,fq(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function fq(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const s=e.params[a];i[s.name]=ume(s,t,n)}return i}function ume(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return lme(e,t,n);if(r===void 0){e.required&&ne("Missing required "+Ce(t.type)+" parameter: "+Ce(e.name));return}else{if(i==="param")return cme(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!yn(r)?r.map(a=>H8(e,a,n)):H8(e,r,n)}function H8(e,t,n){const i=e.type;if(yn(t))return Y8(i)?ne("Expression references can not be signals."):FA(i)?n.fieldRef(t):X8(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||FA(i);return r&&fme(t)?n.exprRef(t.expr,t.as):r&&dme(t)?Mg(t.field,t.as):Y8(i)?Ja(t,n):hme(i)?Se(n.getData(t).values):FA(i)?Mg(t):X8(i)?n.compareRef(t):t}}function lme(e,t,n){return tt(t.from)||ne('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function cme(e,t,n){const i=t[e.name];return e.array?(Ee(i)||ne("Expected an array of sub-parameters. Instead: "+Ce(i)),i.map(r=>G8(e,r,n))):G8(e,i,n)}function G8(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const o in r.key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||ne("Unsupported parameter: "+Ce(t));const a=Ie(fq(r,t,n),r.key);return Se(n.add(ope(a)))}const fme=e=>e&&e.expr,dme=e=>e&&e.field,hme=e=>e==="data",Y8=e=>e==="expr",FA=e=>e==="field",X8=e=>e==="compare";function gme(e,t,n){let i,r,a,s,o;return e?(i=e.facet)&&(t||ne("Only group marks can be faceted."),i.field!=null?s=o=gy(i,n):(e.data?o=Se(n.getData(e.data).aggregate):(a=D$(Ie({type:"aggregate",groupby:De(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=gy(i,n),s=o=Se(n.add(a))),r=n.keyRef(i.groupby,!0))):s=Se(n.add(ba(null,[{}]))),s||(s=gy(e,n)),{key:r,pulse:s,parent:o}}function gy(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Se(t.getData(e.data).output)}function tc(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}tc.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],s=null,o=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=Se(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(s=t[o]);return new tc(e,a,r,i,s)};function dq(e){return tt(e)?e:null}function V8(e,t,n){const i=lx(n.op,n.field);let r;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function p0(e,t,n,i,r,a,s){const o=t[n]||(t[n]={}),l=zge(a);let f=dq(r),d,g;if(f!=null&&(e=t.scope,f=f+(l?"|"+l:""),d=o[f]),!d){const p=a?{field:Kw,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:Se(t.output)};l&&(p.sort=e.sortRef(a)),g=e.add(ux(i,void 0,p)),s&&(t.index[r]=g),d=Se(g),f!=null&&(o[f]=d)}return d}tc.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=dq(t);let s,o,l;return a!=null&&(e=i.scope,s=r[a]),s?n&&n.field&&V8(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Se(i.output)},n&&n.field&&V8(e,l,n),o=e.add(QI(l)),s=e.add(ba({pulse:Se(o)})),s={agg:o,ref:Se(s)},a!=null&&(r[a]=s)),s.ref},tuplesRef(){return Se(this.values)},extentRef(e,t){return p0(e,this,"extent","extent",t,!1)},domainRef(e,t){return p0(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return p0(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return p0(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return p0(e,this,"indata","tupleindex",t,!0,!0)}};function pme(e,t,n){const i=e.from.facet,r=i.name,a=gy(i,t);let s;i.name||ne("Facet must have a name: "+Ce(i)),i.data||ne("Facet must reference a data set: "+Ce(i)),i.field?s=t.add(JI({field:t.fieldRef(i.field),pulse:a})):i.groupby?s=t.add(Kge({key:t.keyRef(i.groupby),group:Se(t.proxy(n.parent)),pulse:a})):ne("Facet must specify groupby or field: "+Ce(i));const o=t.fork(),l=o.add(ba()),f=o.add(vc({pulse:Se(l)}));o.addData(r,new tc(o,l,l,f)),o.addSignal("parent",null),s.params.subflow={$subflow:o.parse(e).toRuntime()}}function mme(e,t,n){const i=t.add(JI({pulse:n.pulse})),r=t.fork();r.add(vc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function hq(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,s=e.modify,o=e.values,l=t.add(Fv()),f="if("+e.trigger+',modify("'+n+'",'+[r,i,a,s,o].map(g=>g??"null").join(",")+"),0)",d=Ja(f,t);l.update=d.$expr,l.params=d.$params}function gx(e,t){const n=cq(e),i=e.type===fx,r=e.from&&e.from.facet,a=e.overlap;let s=e.layout||n===v$||n===y$,o,l,f,d,g,p,y;const v=n===m$||s||r,x=gme(e.from,i,t);l=t.add(Qge({key:x.key||(e.key?Mg(e.key):void 0),pulse:x.pulse,clean:!i}));const E=Se(l);l=f=t.add(ba({pulse:E})),l=t.add(ipe({markdef:sme(e),interactive:ome(e.interactive,t),clip:ame(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Se(l)}));const A=Se(l);l=d=t.add(KI(VI(e.encode,e.type,n,e.style,t,{mod:!1,pulse:A}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(M=>{const C=D$(M,t),k=C.metadata;(k.generates||k.changes)&&ne("Mark transforms should not generate new data."),k.nomod||(d.params.mod=!0),C.params.pulse=Se(l),t.add(l=C)}),e.sort&&(l=t.add(dpe({sort:t.compareRef(e.sort),pulse:Se(l)})));const S=Se(l);(r||s)&&(s=t.add(tq({layout:t.objectProperty(e.layout),legends:t.legends,mark:A,pulse:S})),p=Se(s));const w=t.add(ZI({mark:A,pulse:p||S}));y=Se(w),i&&(v&&(o=t.operators,o.pop(),s&&o.pop()),t.pushState(S,p||y,E),r?pme(e,t,x):v?mme(e,t,x):t.parse(e),t.popState(),v&&(s&&o.push(s),o.push(w))),a&&(y=yme(a,y,t));const D=t.add(eq({pulse:y})),O=t.add(vc({pulse:Se(D)},void 0,t.parent()));e.name!=null&&(g=e.name,t.addData(g,new tc(t,f,D,O)),e.on&&e.on.forEach(M=>{(M.insert||M.remove||M.toggle)&&ne("Marks only support modify triggers."),hq(M,t,g)}))}function yme(e,t,n){const i=e.method,r=e.bound,a=e.separation,s={separation:yn(a)?n.signalRef(a.signal):a,method:yn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const o=r.tolerance;s.boundTolerance=yn(o)?n.signalRef(o.signal):+o,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return Se(n.add(spe(s)))}function vme(e,t){const n=t.config.legend,i=e.encode||{},r=Qi(e,n),a=i.legend||{},s=a.name||void 0,o=a.interactive,l=a.style,f={};let d=0,g,p,y;A$.forEach(w=>e[w]?(f[w]=e[w],d=d||e[w]):0),d||ne("Missing valid scale for legend.");const v=bme(e,t.scaleType(d)),x={title:e.title!=null,scales:f,type:v,vgrad:v!=="symbol"&&r.isVertical()},E=Se(t.add(ba(null,[x]))),A={enter:{x:{value:0},y:{value:0}}},S=Se(t.add(tpe(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===hy?(y=[Gpe(e,d,n,i.gradient),I8(e,n,i.labels,S)],p.count=p.count||t.signalRef(`max(2,2*floor((${Ll(r.gradientLength())})/100))`)):v===nO?y=[Ype(e,d,n,i.gradient,S),I8(e,n,i.labels,S)]:(g=Qpe(e,n),y=[Wpe(e,n,i,S,Ll(g.columns))],p.size=_me(e,t,y[0].marks)),y=[kg({role:yge,from:E,encode:A,marks:y,layout:g,interactive:o})],x.title&&y.push(rme(e,n,i.title,E)),gx(kg({role:pge,from:E,encode:Ld(Eme(r,e,n),a,wp),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:o,style:l}),t)}function bme(e,t){let n=e.type||P8;return!e.type&&xme(e)===1&&(e.fill||e.stroke)&&(n=$3(t)?hy:VS(t)?nO:P8),n!==hy?n:VS(t)?nO:hy}function xme(e){return A$.reduce((t,n)=>t+(e[n]?1:0),0)}function Eme(e,t,n){const i={enter:{},update:{}};return Pn(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function _me(e,t,n){const i=Ll(W8("size",e,n)),r=Ll(W8("strokeWidth",e,n)),a=Ll(Ame(n[1].encode,t,Sp));return Ja(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function W8(e,t,n){return t[e]?`scale("${t[e]}",datum)`:uq(e,n[0].encode)}function Ame(e,t,n){return uq("fontSize",e)||qpe("fontSize",t,n)}const Sme=`item.orient==="${Ud}"?-90:item.orient==="${Pd}"?90:0`;function wme(e,t){e=tt(e)?{text:e}:e;const n=Qi(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,s=r.interactive,o=r.style,l=[],f={},d=Se(t.add(ba(null,[f])));return l.push(Dme(e,n,Ome(e),d)),e.subtitle&&l.push($me(e,n,i.subtitle,d)),gx(kg({role:Ege,from:d,encode:Cme(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:o}),t)}function Ome(e){const t=e.encode;return t&&t.title||Ie({name:e.name,interactive:e.interactive,style:e.style},t)}function Cme(e,t){const n={enter:{},update:{}};return Pn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:w$},angle:{signal:Sme},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Ld(n,t,wp)}function Dme(e,t,n,i){const r={value:0},a=e.text,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Pn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vr({type:bc,role:_ge,style:Rpe,from:i,encode:s},n)}function $me(e,t,n,i){const r={value:0},a=e.subtitle,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Pn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vr({type:bc,role:Age,style:Npe,from:i,encode:s},n)}function Mme(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(D$(i,t))}),e.on&&e.on.forEach(i=>{hq(i,t,e.name)}),t.addDataPipeline(e.name,Tme(e,t,n))}function Tme(e,t,n){const i=[];let r=null,a=!1,s=!1,o,l,f,d,g;for(e.values?yn(e.values)||fy(e.format)?(i.push(Q8(t,e)),i.push(r=hl())):i.push(r=hl({$ingest:e.values,$format:e.format})):e.url?fy(e.url)||fy(e.format)?(i.push(Q8(t,e)),i.push(r=hl())):i.push(r=hl({$request:e.url,$format:e.format})):e.source&&(r=o=De(e.source).map(p=>Se(t.getData(p).output)),i.push(null)),l=0,f=n.length;l<f;++l)d=n[l],g=d.metadata,!r&&!g.source&&i.push(r=hl()),i.push(d),g.generates&&(s=!0),g.modifies&&!s&&(a=!0),g.source?r=d:g.changes&&(r=null);return o&&(f=o.length-1,i[0]=cpe({derive:a,pulse:f?o:o[0]}),(a||f)&&i.splice(1,0,hl())),r||i.push(hl()),i.push(vc({})),i}function hl(e){const t=ba({},e);return t.metadata={source:!0},t}function Q8(e,t){return npe({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const gq=e=>e===Au||e===xa,px=(e,t,n)=>yn(e)?Nme(e.signal,t,n):e===Ud||e===xa?t:n,Tn=(e,t,n)=>yn(e)?Fme(e.signal,t,n):gq(e)?t:n,fa=(e,t,n)=>yn(e)?Rme(e.signal,t,n):gq(e)?n:t,pq=(e,t,n)=>yn(e)?jme(e.signal,t,n):e===xa?{value:t}:{value:n},kme=(e,t,n)=>yn(e)?zme(e.signal,t,n):e===Pd?{value:t}:{value:n},Fme=(e,t,n)=>mq(`${e} === '${xa}' || ${e} === '${Au}'`,t,n),Rme=(e,t,n)=>mq(`${e} !== '${xa}' && ${e} !== '${Au}'`,t,n),Nme=(e,t,n)=>$$(`${e} === '${Ud}' || ${e} === '${xa}'`,t,n),jme=(e,t,n)=>$$(`${e} === '${xa}'`,t,n),zme=(e,t,n)=>$$(`${e} === '${Pd}'`,t,n),mq=(e,t,n)=>(t=t!=null?Mn(t):t,n=n!=null?Mn(n):n,Z8(t)&&Z8(n)?(t=t?t.signal||Ce(t.value):null,n=n?n.signal||Ce(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Ie({test:e},t)].concat(n||[])),Z8=e=>e==null||Object.keys(e).length===1,$$=(e,t,n)=>({signal:`${e} ? (${Nf(t)}) : (${Nf(n)})`}),Bme=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Ud}' ? (${Nf(i)}) : `:"")+(n!=null?`${e} === '${Au}' ? (${Nf(n)}) : `:"")+(r!=null?`${e} === '${Pd}' ? (${Nf(r)}) : `:"")+(t!=null?`${e} === '${xa}' ? (${Nf(t)}) : `:"")+"(null)"}),Nf=e=>yn(e)?e.signal:e==null?null:Ce(e),Lme=(e,t)=>t===0?0:yn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},If=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Sf(e,t,n,i){let r;if(t&&Re(t,e))return t[e];if(Re(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[_$][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[Sp][r]}return null}function K8(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function Ume(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,o,l,f;if(yn(s)){const g=K8([n.axisX,n.axisY]),p=K8([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(f of g)o[f]=Tn(s,Sf(f,n.axisX,r,i),Sf(f,n.axisY,r,i));l={};for(f of p)l[f]=Bme(s.signal,Sf(f,n.axisTop,r,i),Sf(f,n.axisBottom,r,i),Sf(f,n.axisLeft,r,i),Sf(f,n.axisRight,r,i))}else o=s===xa||s===Au?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return o||l||a?Ie({},r,o,l,a):r}function Pme(e,t,n,i){const r=Qi(e,t),a=e.orient;let s,o;const l={enter:s={opacity:it},update:o={opacity:Br},exit:{opacity:it}};Pn(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=J8(e,0),d=J8(e,1);return s.x=o.x=Tn(a,f,it),s.x2=o.x2=Tn(a,d),s.y=o.y=fa(a,f,it),s.y2=o.y2=fa(a,d),vr({type:S$,role:cge,from:i,encode:l},n)}function J8(e,t){return{scale:e.scale,range:t}}function Ime(e,t,n,i,r){const a=Qi(e,t),s=e.orient,o=e.gridScale,l=px(s,1,-1),f=qme(e.offset,l);let d,g,p;const y={enter:d={opacity:it},update:p={opacity:Br},exit:g={opacity:it}};Pn(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:zr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},x=Tn(s,{signal:"height"},{signal:"width"}),E=o?{scale:o,range:0,mult:l,offset:f}:{value:0,offset:f},A=o?{scale:o,range:1,mult:l,offset:f}:Ie(x,{mult:l,offset:f});return d.x=p.x=Tn(s,v,E),d.y=p.y=fa(s,v,E),d.x2=p.x2=fa(s,A),d.y2=p.y2=Tn(s,A),g.x=Tn(s,v),g.y=fa(s,v),vr({type:S$,role:fge,key:zr,from:i,encode:y},n)}function qme(e,t){if(t!==1)if(!je(e))e=yn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Ie({},e);for(;n.mult!=null;)if(je(n.mult))n=n.mult=Ie({},n.mult);else return n.mult=yn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Hme(e,t,n,i,r,a){const s=Qi(e,t),o=e.orient,l=px(o,-1,1);let f,d,g;const p={enter:f={opacity:it},update:g={opacity:Br},exit:d={opacity:it}};Pn(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const y=Mn(r);y.mult=l;const v={scale:e.scale,field:zr,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return g.y=f.y=Tn(o,it,v),g.y2=f.y2=Tn(o,y),d.x=Tn(o,v),g.x=f.x=fa(o,it,v),g.x2=f.x2=fa(o,y),d.y=fa(o,v),vr({type:S$,role:hge,key:zr,from:i,encode:p},n)}function RA(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function Gme(e,t,n,i,r,a){const s=Qi(e,t),o=e.orient,l=e.scale,f=px(o,-1,1),d=Ll(s("labelFlush")),g=Ll(s("labelFlushOffset")),p=s("labelAlign"),y=s("labelBaseline");let v=d===0||!!d,x;const E=Mn(r);E.mult=f,E.offset=Mn(s("labelPadding")||0),E.offset.mult=f;const A={scale:l,field:zr,band:.5,offset:lq(a.offset,s("labelOffset"))},S=Tn(o,v?RA(l,d,'"left"','"right"','"center"'):{value:"center"},kme(o,"left","right")),w=Tn(o,pq(o,"bottom","top"),v?RA(l,d,'"top"','"bottom"','"middle"'):{value:"middle"}),D=RA(l,d,`-(${g})`,g,0);v=v&&g;const O={opacity:it,x:Tn(o,A,E),y:fa(o,A,E)},M={enter:O,update:x={opacity:Br,text:{field:E$},x:O.x,y:O.y,align:S,baseline:w},exit:{opacity:it,x:O.x,y:O.y}};Pn(M,{dx:!p&&v?Tn(o,D):null,dy:!y&&v?fa(o,D):null}),Pn(M,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:y});const C=s("labelBound");let k=s("labelOverlap");return k=k||C?{separation:s("labelSeparation"),method:k,order:"datum.index",bound:C?{scale:l,orient:o,tolerance:C}:null}:void 0,x.align!==S&&(x.align=If(x.align,S)),x.baseline!==w&&(x.baseline=If(x.baseline,w)),vr({type:bc,role:dge,style:Sp,key:zr,from:i,encode:M,overlap:k},n)}function Yme(e,t,n,i){const r=Qi(e,t),a=e.orient,s=px(a,-1,1);let o,l;const f={enter:o={opacity:it,anchor:Mn(r("titleAnchor",null)),align:{signal:w$}},update:l=Ie({},o,{opacity:Br,text:Mn(e.title)}),exit:{opacity:it}},d={signal:`lerp(range("${e.scale}"), ${dx(0,1,.5)})`};return l.x=Tn(a,d),l.y=fa(a,d),o.angle=Tn(a,it,Lme(s,90)),o.baseline=Tn(a,pq(a,Au,xa),{value:Au}),l.angle=o.angle,l.baseline=o.baseline,Pn(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),Xme(r,a,f,n),f.update.align=If(f.update.align,o.align),f.update.angle=If(f.update.angle,o.angle),f.update.baseline=If(f.update.baseline,o.baseline),vr({type:bc,role:gge,style:_$,from:i,encode:f},n)}function Xme(e,t,n,i){const r=(o,l)=>o!=null?(n.update[l]=If(Mn(o),n.update[l]),!1):!$f(l,i),a=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===a?Mn(s):Tn(t,Mn(s),Mn(a))}function Vme(e,t){const n=Ume(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,s=r.interactive,o=r.style,l=Qi(e,n),f=Hpe(l),d={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},g=Se(t.add(ba({},[d]))),p=Se(t.add(Wge({scale:t.scaleRef(e.scale),extra:t.property(f.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(Ime(e,n,i.grid,p,f)),d.ticks&&(v=l("tickSize"),y.push(Hme(e,n,i.ticks,p,v,f))),d.labels&&(v=d.ticks?v:0,y.push(Gme(e,n,i.labels,p,v,f))),d.domain&&y.push(Pme(e,n,i.domain,g)),d.title&&y.push(Yme(e,n,i.title,g)),gx(kg({role:lge,from:g,encode:Ld(Wme(l,e),r,wp),marks:y,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:a,interactive:s,style:o}),t)}function Wme(e,t){const n={enter:{},update:{}};return Pn(n,{orient:e("orient"),offset:e("offset")||0,position:ia(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function yq(e,t,n){const i=De(e.signals),r=De(e.scales);return n||i.forEach(a=>WI(a,t)),De(e.projections).forEach(a=>Cpe(a,t)),r.forEach(a=>ppe(a,t)),De(e.data).forEach(a=>Mme(a,t)),r.forEach(a=>mpe(a,t)),(n||i).forEach(a=>Vge(a,t)),De(e.axes).forEach(a=>Vme(a,t)),De(e.marks).forEach(a=>gx(a,t)),De(e.legends).forEach(a=>vme(a,t)),e.title&&wme(e.title,t),t.parseLambdas(),t}const Qme=e=>Ld({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Zme(e,t){const n=t.config,i=Se(t.root=t.add(Fv())),r=Kme(e,n);r.forEach(f=>WI(f,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(ba()),s=t.add(KI(VI(Qme(e.encode),fx,y$,e.style,t,{pulse:Se(a)}))),o=t.add(tq({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Se(s)}));t.operators.pop(),t.pushState(Se(s),Se(o),null),yq(e,t,r),t.operators.push(o);let l=t.add(ZI({mark:i,pulse:Se(o)}));return l=t.add(eq({pulse:Se(l)})),l=t.add(vc({pulse:Se(l)})),t.addData("root",new tc(t,a,a,l)),t}function m0(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Kme(e,t){const n=s=>ia(e[s],t[s]),i=[m0("background",n("background")),m0("autosize",sge(n("autosize"))),m0("padding",uge(n("padding"))),m0("width",n("width")||0),m0("height",n("height")||0)],r=i.reduce((s,o)=>(s[o.name]=o,s),{}),a={};return De(e.signals).forEach(s=>{Re(r,s.name)?s=Ie(r[s.name],s):i.push(s),a[s.name]=s}),De(t.signals).forEach(s=>{!Re(a,s.name)&&!Re(r,s.name)&&i.push(s)}),i}function vq(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function eN(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}vq.prototype=eN.prototype={parse(e){return yq(e,this)},fork(){return new eN(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof Zw?Se(e):e;return this.add(lpe({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let s,o;i&&(s=i.data||(i.data={}),o=s[r]||(s[r]=[]),o.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Se(this.add(vc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Se(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return et(this._parent)},encode(){return et(this._encode)},lookup(){return et(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(tt(e))return Mg(e,t);e.signal||ne("Unsupported field reference: "+Ce(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Se(this.add(Jge(r)))}return i},compareRef(e){let t=!1;const n=a=>yn(a)?(t=!0,this.signalRef(a.signal)):Bge(a)?(t=!0,this.exprRef(a.expr)):a,i=De(e.field).map(n),r=De(e.order).map(n);return t?Se(this.add(U8({fields:i,orders:r}))):B8(i,r)},keyRef(e,t){let n=!1;const i=a=>yn(a)?(n=!0,Se(r[a.signal])):a,r=this.signals;return e=De(e).map(i),n?Se(this.add(epe({fields:e,flat:t}))):Rge(e,t)},sortRef(e){if(!e)return e;const t=lx(e.op,e.field),n=e.order||Nge;return n.signal?Se(this.add(U8({fields:t,orders:this.signalRef(n.signal)}))):B8(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return Re(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ne("Duplicate signal name: "+Ce(e));const n=t instanceof Zw?t:this.add(Fv(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ne("Unrecognized signal name: "+Ce(e)),this.signals[e]},signalRef(e){return this.signals[e]?Se(this.signals[e]):(Re(this.lambdas,e)||(this.lambdas[e]=this.add(Fv(null))),Se(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Ja(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!je(e)?e:this.signalRef(e.signal||M$(e))},exprRef(e,t){const n={expr:Ja(e,this)};return t&&(n.expr.$name=t),Se(this.add(Zge(n)))},addBinding(e,t){this.bindings||ne("Nested signals do not support binding: "+Ce(e)),this.bindings.push(Ie({signal:e},t))},addScaleProj(e,t){Re(this.scales,e)&&ne("Duplicate scale or projection name: "+Ce(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,fpe(t))},addProjection(e,t){this.addScaleProj(e,upe(t))},getScale(e){return this.scales[e]||ne("Unrecognized scale name: "+Ce(e)),this.scales[e]},scaleRef(e){return Se(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Re(this.data,e)&&ne("Duplicate data set name: "+Ce(e)),this.data[e]=t},getData(e){return this.data[e]||ne("Undefined data set name: "+Ce(e)),this.data[e]},addDataPipeline(e,t){return Re(this.data,e)&&ne("Duplicate data set name: "+Ce(e)),this.addData(e,tc.fromEntries(this,t))}};function M$(e){return(Ee(e)?Jme:e1e)(e)}function Jme(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(je(r)?r.signal||M$(r):Ce(r))}return n+"]"}function e1e(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+Ce(i)+":"+(je(r)?r.signal||M$(r):Ce(r));return t+"}"}function t1e(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function n1e(e,t,n){return je(e)||ne("Input Vega specification must be an object."),t=tb(t1e(),t,e.config),Zme(e,new vq(t,n)).toRuntime()}var i1e="5.33.0";Ie(Jf,YJ,_ae,ese,Loe,Fue,sce,Lle,uce,kce,Ice,Wce);const r1e=Object.freeze(Object.defineProperty({__proto__:null,Bounds:on,CanvasHandler:pp,CanvasRenderer:Xy,DATE:Gi,DAY:Zn,DAYOFYEAR:Za,Dataflow:Bf,Debug:c7,Error:qO,EventStream:pb,Gradient:rL,GroupItem:Bb,HOURS:pr,Handler:eD,HybridHandler:WL,HybridRenderer:aw,Info:l7,Item:zb,MILLISECONDS:pa,MINUTES:mr,MONTH:ni,Marks:yr,MultiPulse:gC,None:o7,Operator:Ct,Parameters:gb,Pulse:uu,QUARTER:Hi,RenderType:tu,Renderer:gp,ResourceLoader:fL,SECONDS:Pr,SVGHandler:jL,SVGRenderer:sD,SVGStringRenderer:VL,Scenegraph:DL,TIME_UNITS:rC,Transform:J,View:NI,WEEK:pn,Warn:u7,YEAR:Un,accessor:Wi,accessorFields:ti,accessorName:Vt,array:De,ascending:Cd,bandwidthNRD:vC,bin:Gj,bootstrapCI:Yj,boundClip:aU,boundContext:cp,boundItem:ew,boundMark:SL,boundStroke:oo,changeset:gc,clampRange:_7,codegenExpression:uI,compare:XO,constant:ui,cumulativeLogNormal:SC,cumulativeNormal:yb,cumulativeUniform:DC,dayofyear:K7,debounce:VO,defaultLocale:lC,definition:Ij,densityLogNormal:AC,densityNormal:bC,densityUniform:CC,domChild:gn,domClear:Tr,domCreate:Jo,domFind:J3,dotbin:Xj,error:ne,expressionFunction:en,extend:Ie,extent:Va,extentIndex:A7,falsy:qo,fastmap:Dd,field:Lr,flush:S7,font:qb,fontFamily:hp,fontSize:ss,format:G1,formatLocale:wy,formats:dC,hasOwnProperty:Re,id:Vg,identity:Si,inferType:Tj,inferTypes:kj,ingest:ht,inherits:fe,inrange:Mf,interpolate:M3,interpolateColors:Nb,interpolateRange:HB,intersect:tU,intersectBoxLine:Tf,intersectPath:B3,intersectPoint:L3,intersectRule:hL,isArray:Ee,isBoolean:WO,isDate:su,isFunction:He,isIterable:w7,isNumber:hu,isObject:je,isRegExp:QO,isString:tt,isTuple:db,key:ZO,lerp:O7,lineHeight:xu,loader:cb,locale:$j,logger:f7,lruCache:C7,markup:aD,merge:D7,mergeConfig:tb,multiLineOffset:Q3,one:Od,pad:$7,panLinear:m7,panLog:y7,panPow:v7,panSymlog:b7,parse:n1e,parseExpression:aI,parseSelector:II,path:_b,pathCurves:N3,pathEqual:sU,pathParse:ad,pathRectangle:oL,pathRender:vg,pathSymbols:sL,pathTrail:uL,peek:et,point:Gb,projection:wD,quantileLogNormal:wC,quantileNormal:vb,quantileUniform:$C,quantiles:mC,quantizeInterpolator:GB,quarter:x7,quartiles:yC,get random(){return Ir},randomInteger:QK,randomKDE:EC,randomLCG:WK,randomLogNormal:Wj,randomMixture:Qj,randomNormal:xC,randomUniform:Zj,read:Nj,regressionConstant:MC,regressionExp:Jj,regressionLinear:TC,regressionLoess:nz,regressionLog:Kj,regressionPoly:tz,regressionPow:ez,regressionQuad:kC,renderModule:Yb,repeat:A0,resetDefaultLocale:YZ,resetSVGClipId:cL,resetSVGDefIds:Ure,responseType:Rj,runtimeContext:_I,sampleCurve:xb,sampleLogNormal:_C,sampleNormal:mb,sampleUniform:OC,scale:ct,sceneEqual:oD,sceneFromJSON:OL,scenePickVisit:Ly,sceneToJSON:wL,sceneVisit:ma,sceneZOrder:U3,scheme:T3,serializeXML:HL,setHybridRendererOptions:jre,setRandom:XK,span:Qg,splitAccessPath:eb,stringValue:Ce,textMetrics:dr,timeBin:pj,timeFloor:aj,timeFormatLocale:dg,timeInterval:kd,timeOffset:uj,timeSequence:fj,timeUnitSpecifier:Z7,timeUnits:aC,toBoolean:KO,toDate:JO,toNumber:Kn,toSet:ga,toString:eC,transform:qj,transforms:Jf,truncate:M7,truthy:Ur,tupleid:we,typeParsers:jS,utcFloor:sj,utcInterval:Fd,utcOffset:lj,utcSequence:dj,utcdayofyear:tj,utcquarter:E7,utcweek:nj,version:i1e,visitArray:Yo,week:J7,writeConfig:Wg,zero:Zo,zoomLinear:HO,zoomLog:GO,zoomPow:by,zoomSymlog:YO},Symbol.toStringTag,{value:"Module"}));function a1e(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var s1e={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},o1e={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},u1e={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const l1e=Array.prototype.slice,gl=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,l1e.call(t,1))},c1e=(e,t,n,i,r,a,s)=>new Date(e,t||0,n??1,i||0,r||0,a||0,s||0);var f1e={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:c1e,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return gl("join",arguments)},indexof:function(){return gl("indexOf",arguments)},lastindexof:function(){return gl("lastIndexOf",arguments)},slice:function(){return gl("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(Cd),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return gl("substring",arguments,String)},split:function(){return gl("split",arguments,String)},replace:function(){return gl("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const d1e=["view","item","group","xy","x","y"],rO=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&rO.add(setImmediate);const h1e={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:s1e[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),rO.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||f1e[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>o1e[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>u1e[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,rO.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function y0(e,t,n,i,r,a){const s=o=>h1e[o.type](s,o);return s.memberDepth=0,s.fn=Object.create(t),s.params=n,s.datum=i,s.event=r,s.item=a,d1e.forEach(o=>s.fn[o]=function(){return r.vega[o](...arguments)}),s(e)}var g1e={operator(e,t){const n=t.ast,i=e.functions;return r=>y0(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>y0(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>y0(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const s=a.item&&a.item.datum;return y0(n,i,r,s,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(s,o)=>{const l=s.datum;let f=0,d;for(const g in i)d=y0(i[g].ast,r,o,l,void 0,s),s[g]!==d&&(s[g]=d,f=1);return n!=="rule"&&a1e(s,i,a),f}}};const p1e="5.1.1",m1e={version:p1e};function Id(e,t,n){return e.fields=t||[],e.fname=n,e}function y1e(e){return e.length===1?v1e(e[0]):b1e(e)}const v1e=e=>function(t){return t[e]},b1e=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function NA(e){throw Error(e)}function xc(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function f(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o),a+=e.substring(++o,++o),s=o;else if(l===i)f(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?f():s=o+1:l==="["?(o>s&&f(),r=s=o+1):l==="]"&&(r||NA("Access path missing open bracket: "+e),r>0&&f(),r=0,s=o+1)}return r&&NA("Access path missing closing bracket: "+e),i&&NA("Access path missing closing quote: "+e),o>s&&(o++,f()),t}function x1e(e,t,n){const i=xc(e);return e=i.length===1?i[0]:e,Id(y1e(i),[e],e)}x1e("id");const E1e=Id(e=>e,[],"identity");Id(()=>0,[],"zero");Id(()=>1,[],"one");Id(()=>!0,[],"true");Id(()=>!1,[],"false");function F1(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const _1e=1,bq=2,A1e=3,S1e=4;function w1e(e,t){let n=e;return{level(i){return arguments.length?(n=+i,this):n},error(){return n>=_1e&&F1("error","ERROR",arguments),this},warn(){return n>=bq&&F1("warn","WARN",arguments),this},info(){return n>=A1e&&F1("log","INFO",arguments),this},debug(){return n>=S1e&&F1("log","DEBUG",arguments),this}}}var xe=Array.isArray;function Dt(e){return e===Object(e)}const tN=e=>e!=="__proto__";function xq(...e){return e.reduce((t,n)=>{for(const i in n)if(i==="signals")t.signals=O1e(t.signals,n.signals);else{const r=i==="legend"?{layout:1}:i==="style"?!0:null;T$(t,i,n[i],r)}return t},{})}function T$(e,t,n,i){if(!tN(t))return;let r,a;if(Dt(n)&&!xe(n)){a=Dt(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?T$(a,r,n[r]):tN(r)&&(a[r]=n[r])}else e[t]=n}function O1e(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function Wt(e){return e!=null?xe(e)?e:[e]:[]}function C1e(e){return typeof e=="function"}const D1e=Object.prototype.hasOwnProperty;function jf(e,t){return D1e.call(e,t)}function Op(e){return typeof e=="boolean"}function un(e){return typeof e=="number"}function Le(e){return typeof e=="string"}function at(e){return xe(e)?"["+e.map(at)+"]":Dt(e)||Le(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Ec(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,function(n,i){return Array.isArray(i)?n.push.apply(n,e.call(i,t-1)):n.push(i),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var jA={exports:{}},nN;function $1e(){return nN||(nN=1,(function(e){var t=(function(){function n(p,y){return y!=null&&p instanceof y}var i;try{i=Map}catch{i=function(){}}var r;try{r=Set}catch{r=function(){}}var a;try{a=Promise}catch{a=function(){}}function s(p,y,v,x,E){typeof y=="object"&&(v=y.depth,x=y.prototype,E=y.includeNonEnumerable,y=y.circular);var A=[],S=[],w=typeof Buffer<"u";typeof y>"u"&&(y=!0),typeof v>"u"&&(v=1/0);function D(O,M){if(O===null)return null;if(M===0)return O;var C,k;if(typeof O!="object")return O;if(n(O,i))C=new i;else if(n(O,r))C=new r;else if(n(O,a))C=new a(function(U,H){O.then(function(Q){U(D(Q,M-1))},function(Q){H(D(Q,M-1))})});else if(s.__isArray(O))C=[];else if(s.__isRegExp(O))C=new RegExp(O.source,g(O)),O.lastIndex&&(C.lastIndex=O.lastIndex);else if(s.__isDate(O))C=new Date(O.getTime());else{if(w&&Buffer.isBuffer(O))return Buffer.allocUnsafe?C=Buffer.allocUnsafe(O.length):C=new Buffer(O.length),O.copy(C),C;n(O,Error)?C=Object.create(O):typeof x>"u"?(k=Object.getPrototypeOf(O),C=Object.create(k)):(C=Object.create(x),k=x)}if(y){var N=A.indexOf(O);if(N!=-1)return S[N];A.push(O),S.push(C)}n(O,i)&&O.forEach(function(U,H){var Q=D(H,M-1),R=D(U,M-1);C.set(Q,R)}),n(O,r)&&O.forEach(function(U){var H=D(U,M-1);C.add(H)});for(var L in O){var B;k&&(B=Object.getOwnPropertyDescriptor(k,L)),!(B&&B.set==null)&&(C[L]=D(O[L],M-1))}if(Object.getOwnPropertySymbols)for(var V=Object.getOwnPropertySymbols(O),L=0;L<V.length;L++){var G=V[L],P=Object.getOwnPropertyDescriptor(O,G);P&&!P.enumerable&&!E||(C[G]=D(O[G],M-1),P.enumerable||Object.defineProperty(C,G,{enumerable:!1}))}if(E)for(var j=Object.getOwnPropertyNames(O),L=0;L<j.length;L++){var F=j[L],P=Object.getOwnPropertyDescriptor(O,F);P&&P.enumerable||(C[F]=D(O[F],M-1),Object.defineProperty(C,F,{enumerable:!1}))}return C}return D(p,v)}s.clonePrototype=function(y){if(y===null)return null;var v=function(){};return v.prototype=y,new v};function o(p){return Object.prototype.toString.call(p)}s.__objToStr=o;function l(p){return typeof p=="object"&&o(p)==="[object Date]"}s.__isDate=l;function f(p){return typeof p=="object"&&o(p)==="[object Array]"}s.__isArray=f;function d(p){return typeof p=="object"&&o(p)==="[object RegExp]"}s.__isRegExp=d;function g(p){var y="";return p.global&&(y+="g"),p.ignoreCase&&(y+="i"),p.multiline&&(y+="m"),y}return s.__getRegExpFlags=g,s})();e.exports&&(e.exports=t)})(jA)),jA.exports}var M1e=$1e();const T1e=PO(M1e);var zA,iN;function k1e(){return iN||(iN=1,zA=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,a;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),i=a.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=i;r--!==0;){var s=a[r];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}),zA}var F1e=k1e();const R1e=PO(F1e);var BA,rN;function N1e(){return rN||(rN=1,BA=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,i=t.cmp&&(function(a){return function(s){return function(o,l){var f={key:o,value:s[o]},d={key:l,value:s[l]};return a(f,d)}}})(t.cmp),r=[];return(function a(s){if(s&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s!==void 0){if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);var o,l;if(Array.isArray(s)){for(l="[",o=0;o<s.length;o++)o&&(l+=","),l+=a(s[o])||"null";return l+"]"}if(s===null)return"null";if(r.indexOf(s)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var f=r.push(s)-1,d=Object.keys(s).sort(i&&i(s));for(l="",o=0;o<d.length;o++){var g=d[o],p=a(s[g]);p&&(l&&(l+=","),l+=JSON.stringify(g)+":"+p)}return r.splice(f,1),"{"+l+"}"}})(e)}),BA}var j1e=N1e();const k$=PO(j1e);function F$(e){return!!e.or}function R$(e){return!!e.and}function N$(e){return!!e.not}function py(e,t){if(N$(e))py(e.not,t);else if(R$(e))for(const n of e.and)py(n,t);else if(F$(e))for(const n of e.or)py(n,t);else t(e)}function qf(e,t){return N$(e)?{not:qf(e.not,t)}:R$(e)?{and:e.and.map(n=>qf(n,t))}:F$(e)?{or:e.or.map(n=>qf(n,t))}:t(e)}const La=R1e,Ue=T1e;function gd(e,t){const n={};for(const i of t)jf(e,i)&&(n[i]=e[i]);return n}function gr(e,t){const n=Object.assign({},e);for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>k$(e)).join(",")})`};const Tt=k$;function Ke(e){if(un(e))return e;const t=Le(e)?e:k$(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function aO(e){return e===!1||e===null}function Ge(e,t){return e.includes(t)}function pd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function j$(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function Eq(e,...t){for(const n of t)z1e(e,n??{});return e}function z1e(e,t){for(const n of ue(t))T$(e,n,t[n],!0)}function Ua(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function B1e(e,t){const n=ue(e),i=ue(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function _q(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function z$(e,t){for(const n of e)if(t.has(n))return!0;return!1}function sO(e){const t=new Set;for(const n of e){const r=xc(n).map((s,o)=>o===0?s:`[${s}]`),a=r.map((s,o)=>r.slice(0,o+1).join(""));for(const s of a)t.add(s)}return t}function B$(e,t){return e===void 0||t===void 0?!0:z$(sO(e),sO(t))}function At(e){return ue(e).length===0}const ue=Object.keys,ai=Object.values,Su=Object.entries;function Fg(e){return e===!0||e===!1}function Bt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function ag(e,t){return N$(e)?`!(${ag(e.not,t)})`:R$(e)?`(${e.and.map(n=>ag(n,t)).join(") && (")})`:F$(e)?`(${e.or.map(n=>ag(n,t)).join(") || (")})`:t(e)}function Rv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Rv(e[n],t)&&delete e[n],At(e)}function Cp(e){return e.charAt(0).toUpperCase()+e.substr(1)}function L$(e,t="datum"){const n=xc(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(at).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function Aq(e,t="datum"){return`${t}[${at(xc(e).join("."))}]`}function L1e(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Hr(e){return`${xc(e).map(L1e).join("\\.")}`}function nc(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function U$(e){return`${xc(e).join(".")}`}function md(e){return e?xc(e).length:0}function ln(...e){for(const t of e)if(t!==void 0)return t}let Sq=42;function wq(e){const t=++Sq;return e?String(e)+t:t}function U1e(){Sq=42}function Oq(e){return Cq(e)?e:`__${e}`}function Cq(e){return e.startsWith("__")}function Rg(e){if(e!==void 0)return(e%360+360)%360}function mx(e){return un(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}var Dp=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const Js="row",eo="column",yx="facet",Pt="x",vn="y",Ea="x2",cs="y2",fs="radius",lo="radius2",_a="theta",co="theta2",ds="latitude",hs="longitude",Aa="latitude2",Gr="longitude2",Xi="color",gs="fill",ps="stroke",Vi="shape",fo="size",_c="angle",ho="opacity",ju="fillOpacity",zu="strokeOpacity",Bu="strokeWidth",Lu="strokeDash",$p="text",Mp="order",Tp="detail",vx="key",ic="tooltip",bx="href",xx="url",Ex="description",P1e={x:1,y:1,x2:1,y2:1},Dq={theta:1,theta2:1,radius:1,radius2:1};function $q(e){return e in Dq}const P$={longitude:1,longitude2:1,latitude:1,latitude2:1};function I1e(e){switch(e){case ds:return"y";case Aa:return"y2";case hs:return"x";case Gr:return"x2"}}function q1e(e){return e in P$}const H1e=ue(P$),I$=Object.assign(Object.assign(Object.assign(Object.assign({},P1e),Dq),P$),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function Hf(e){return e===Xi||e===gs||e===ps}const Mq={row:1,column:1,facet:1},jr=ue(Mq),_x=Object.assign(Object.assign({},I$),Mq),G1e=ue(_x),{order:HCe,detail:GCe,tooltip:YCe}=_x,Tq=Dp(_x,["order","detail","tooltip"]),{row:XCe,column:VCe,facet:WCe}=Tq,Y1e=Dp(Tq,["row","column","facet"]);function X1e(e){return!!Y1e[e]}function kq(e){return!!_x[e]}const V1e=[Ea,cs,Aa,Gr,co,lo];function Fq(e){return Ac(e)!==e}function Ac(e){switch(e){case Ea:return Pt;case cs:return vn;case Aa:return ds;case Gr:return hs;case co:return _a;case lo:return fs}return e}function wu(e){if($q(e))switch(e){case _a:return"startAngle";case co:return"endAngle";case fs:return"outerRadius";case lo:return"innerRadius"}return e}function go(e){switch(e){case Pt:return Ea;case vn:return cs;case ds:return Aa;case hs:return Gr;case _a:return co;case fs:return lo}}function Yr(e){switch(e){case Pt:case Ea:return"width";case vn:case cs:return"height"}}function W1e(e){switch(e){case Pt:return"xOffset";case vn:return"yOffset";case Ea:return"x2Offset";case cs:return"y2Offset";case _a:return"thetaOffset";case fs:return"radiusOffset";case co:return"theta2Offset";case lo:return"radius2Offset"}}const{x:QCe,y:ZCe,x2:KCe,y2:JCe,latitude:e3e,longitude:t3e,latitude2:n3e,longitude2:i3e,theta:r3e,theta2:a3e,radius:s3e,radius2:o3e}=I$,Ax=Dp(I$,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),Q1e=ue(Ax),Uu={x:1,y:1},ms=ue(Uu);function es(e){return e in Uu}const q$={theta:1,radius:1},Z1e=ue(q$);function Sx(e){return e==="width"?Pt:vn}const{text:u3e,tooltip:l3e,href:c3e,url:f3e,description:d3e,detail:h3e,key:g3e,order:p3e}=Ax,Rq=Dp(Ax,["text","tooltip","href","url","description","detail","key","order"]),K1e=ue(Rq);function J1e(e){return!!Ax[e]}function eye(e){switch(e){case Xi:case gs:case ps:case fo:case Vi:case ho:case Bu:case Lu:return!0;case ju:case zu:case _c:return!1}}const Nq=Object.assign(Object.assign(Object.assign({},Uu),q$),Rq),wx=ue(Nq);function Pu(e){return!!Nq[e]}function tye(e,t){return iye(e)[t]}const H$={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:m3e}=H$,nye=Dp(H$,["geoshape"]);function iye(e){switch(e){case Xi:case gs:case ps:case Ex:case Tp:case vx:case ic:case bx:case Mp:case ho:case ju:case zu:case Bu:case yx:case Js:case eo:return H$;case Pt:case vn:case ds:case hs:return nye;case Ea:case cs:case Aa:case Gr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case fo:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Lu:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Vi:return{point:"always",geoshape:"always"};case $p:return{text:"always"};case _c:return{point:"always",square:"always",text:"always"};case xx:return{image:"always"};case _a:return{text:"always",arc:"always"};case fs:return{text:"always",arc:"always"};case co:case lo:return{arc:"always"}}}function LA(e){switch(e){case Pt:case vn:case _a:case fs:case fo:case _c:case Bu:case ho:case ju:case zu:case Ea:case cs:case co:case lo:return;case yx:case Js:case eo:case Vi:case Lu:case $p:case ic:case bx:case xx:case Ex:return"discrete";case Xi:case gs:case ps:return"flexible";case ds:case hs:case Aa:case Gr:case Tp:case vx:case Mp:return}}const rye={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},aye={count:1,min:1,max:1};function so(e){return!!e&&!!e.argmin}function Iu(e){return!!e&&!!e.argmax}function G$(e){return Le(e)&&!!rye[e]}const sye=["count","valid","missing","distinct"];function jq(e){return Le(e)&&Ge(sye,e)}function oye(e){return Le(e)&&Ge(["min","max"],e)}const uye=["count","sum","distinct","valid","missing"],lye=["mean","average","median","q1","q3","min","max"],cye=Ec(lye);function zq(e){return Op(e)&&(e=Bx(e,void 0)),"bin"+ue(e).map(t=>Ox(e[t])?Bt(`_${t}_${Su(e[t])}`):Bt(`_${t}_${e[t]}`)).join("")}function kt(e){return e===!0||Sc(e)&&!e.binned}function vi(e){return e==="binned"||Sc(e)&&e.binned===!0}function Sc(e){return Dt(e)}function Ox(e){return e?.param}function aN(e){switch(e){case Js:case eo:case fo:case Xi:case gs:case ps:case Bu:case ho:case ju:case zu:case Vi:return 6;case Lu:return 4;default:return 10}}function kp(e){return e&&!!e.expr}function Li(e){const t=ue(e||{}),n={};for(const i of t)n[i]=lr(e[i]);return n}var fye=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Bq(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:s,color:o,subtitleColor:l,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:g,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v}=e,x=fye(e,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),E=Object.assign(Object.assign({},x),o?{fill:o}:{}),A=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},t?{anchor:t}:{}),n?{frame:n}:{}),i?{offset:i}:{}),r?{orient:r}:{}),a!==void 0?{angle:a}:{}),s!==void 0?{limit:s}:{}),S=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},l?{subtitleColor:l}:{}),f?{subtitleFont:f}:{}),d?{subtitleFontSize:d}:{}),g?{subtitleFontStyle:g}:{}),p?{subtitleFontWeight:p}:{}),y?{subtitleLineHeight:y}:{}),v?{subtitlePadding:v}:{}),w=gd(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:E,subtitleMarkConfig:w,nonMarkTitleProperties:A,subtitle:S}}function Qo(e){return Le(e)||xe(e)&&Le(e[0])}function $e(e){return e&&!!e.signal}function qu(e){return!!e.step}function dye(e){return xe(e)?!1:"fields"in e&&!("data"in e)}function hye(e){return xe(e)?!1:"fields"in e&&"data"in e}function Ws(e){return xe(e)?!1:"field"in e&&"data"in e}const gye={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},pye=ue(gye),mye={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},oO=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];var Y$=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Lq(e){const t=xe(e.condition)?e.condition.map(sN):sN(e.condition);return Object.assign(Object.assign({},lr(e)),{condition:t})}function lr(e){if(kp(e)){const{expr:t}=e,n=Y$(e,["expr"]);return Object.assign({signal:t},n)}return e}function sN(e){if(kp(e)){const{expr:t}=e,n=Y$(e,["expr"]);return Object.assign({signal:t},n)}return e}function zt(e){if(kp(e)){const{expr:t}=e,n=Y$(e,["expr"]);return Object.assign({signal:t},n)}return $e(e)?e:e!==void 0?{value:e}:void 0}function oN(e){return $e(e)?e.signal:at(e.value)}function to(e){return $e(e)?e.signal:e==null?null:at(e)}function yye(e,t,n){for(const i of n){const r=rc(i,t.markDef,t.config);r!==void 0&&(e[i]=zt(r))}return e}function Uq(e){var t;return[].concat(e.type,(t=e.style)!==null&&t!==void 0?t:[])}function pt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&t[r]!==void 0?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:rc(e,t,n,i)}function rc(e,t,n,{vgChannel:i}={}){return ln(i?Nv(e,t,n.style):void 0,Nv(e,t,n.style),i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function Nv(e,t,n){return Pq(e,Uq(t),n)}function Pq(e,t,n){t=Wt(t);let i;for(const r of t){const a=n[r];a&&a[e]!==void 0&&(i=a[e])}return i}function Iq(e,t){return Wt(e).reduce((n,i)=>{var r;return n.field.push(de(i,t)),n.order.push((r=i.sort)!==null&&r!==void 0?r:"ascending"),n},{field:[],order:[]})}function qq(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(La(r,i))return;n.push(i)}),n}function Hq(e,t){return La(e,t)||!t?e:e?[...Wt(e),...Wt(t)].join(", "):t}function Gq(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((Qo(n)||$e(n))&&(Qo(i)||$e(i)))return{explicit:e.explicit,value:Hq(n,i)};if(Qo(n)||$e(n))return{explicit:e.explicit,value:n};if(Qo(i)||$e(i))return{explicit:e.explicit,value:i};if(!Qo(n)&&!$e(n)&&!Qo(i)&&!$e(i))return{explicit:e.explicit,value:qq(n,i)};throw new Error("It should never reach here")}function X$(e){return`Invalid specification ${Tt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const vye='Autosize "fit" only works for single views and layered views.';function uN(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function lN(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function cN(e){return e?`Dropping "fit-${e}" because spec has discrete ${Yr(e)}.`:'Dropping "fit" because spec has discrete size.'}function V$(e){return`Unknown field for ${e}. Cannot calculate view size.`}function fN(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function bye(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function xye(e){return`The "nearest" transform is not supported for ${e} marks.`}function Yq(e){return`Selection not supported for ${e} yet.`}function Eye(e){return`Cannot find a selection named "${e}".`}const _ye="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Aye="Legend bindings are only supported for selections over an individual field or encoding channel.";function Sye(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function wye(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Oye="The same selection must be used to override scale domains in a layered view.",Cye='Interval selections should be initialized using "x" and/or "y" keys.';function Dye(e){return`Unknown repeated value "${e}".`}function dN(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const $ye="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Mye(e){return`Unrecognized parse "${e}".`}function hN(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Tye="Attempt to add the same child twice.";function kye(e){return`Ignoring an invalid transform: ${Tt(e)}.`}const Fye='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function gN(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Rye(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Tt(t)} is overridden by a child projection ${Tt(n)}.`}const Nye="Arc marks uses theta channel rather than angle, replacing angle with theta.";function jye(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Tt(n)}}.`}function Xq(e){return`Invalid field type "${e}".`}function zye(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Bye(e){return`Invalid aggregation operator "${e}".`}function Vq(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function Lye(e){return`Position range does not support relative band size for ${e}.`}function uO(e,t){return`Dropping ${Tt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Uye="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Cx(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function Pye(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Iye(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function qye(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Hye(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function UA(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Gye(e){return`The ${e} for range marks cannot be an expression`}function Yye(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Xye(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Vye(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Wye(e){return`Cannot use the relative band size with ${e} scale.`}function Qye(e){return`Using unaggregated domain with raw field has no effect (${Tt(e)}).`}function Zye(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Kye(e){return`Unaggregated domain is currently unsupported for log scale (${Tt(e)}).`}function Jye(e){return`Cannot apply size to non-oriented mark "${e}".`}function eve(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function tve(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function Wq(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function Qq(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function nve(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Tt(n)} and ${Tt(i)}). Using ${Tt(n)}.`}function ive(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${Tt(n)} and ${Tt(i)}). Using the union of the two domains.`}function rve(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function ave(e){return`Dropping sort property ${Tt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const pN="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",sve="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",ove="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",uve="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function lve(e){return`Cannot stack "${e}" if there is already "${e}2".`}function cve(e){return`Cannot stack non-linear scale (${e}).`}function fve(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function jv(e,t){return`Invalid ${e}: ${Tt(t)}.`}function dve(e){return`Dropping day from datetime ${Tt(e)} as day cannot be combined with other units.`}function hve(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function gve(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function pve(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function mN(e){return`1D error band does not support ${e}.`}function Zq(e){return`Channel ${e} is required for "binned" bin.`}function mve(e){return`Channel ${e} should not be used with "binned" bin.`}function yve(e){return`Domain for ${e} is required for threshold scale.`}const Kq=w1e(bq);let yd=Kq;function vve(e){return yd=e,yd}function bve(){return yd=Kq,yd}function ce(...e){yd.warn(...e)}function xve(...e){yd.debug(...e)}function wc(e){if(e&&Dt(e)){for(const t of Q$)if(t in e)return!0}return!1}const Jq=["january","february","march","april","may","june","july","august","september","october","november","december"],Eve=Jq.map(e=>e.substr(0,3)),eH=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],_ve=eH.map(e=>e.substr(0,3));function Ave(e){if(mx(e)&&(e=+e),un(e))return e>4&&ce(jv("quarter",e)),e-1;throw new Error(jv("quarter",e))}function Sve(e){if(mx(e)&&(e=+e),un(e))return e-1;{const t=e.toLowerCase(),n=Jq.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Eve.indexOf(i);if(r!==-1)return r;throw new Error(jv("month",e))}}function wve(e){if(mx(e)&&(e=+e),un(e))return e%7;{const t=e.toLowerCase(),n=eH.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=_ve.indexOf(i);if(r!==-1)return r;throw new Error(jv("day",e))}}function W$(e,t){const n=[];if(t&&e.day!==void 0&&ue(e).length>1&&(ce(dve(e)),e=Ue(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?Sve(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?Ave(e.quarter):e.quarter;n.push(un(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?wve(e.day):e.day;n.push(un(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function Ng(e){const n=W$(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Ove(e){const n=W$(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Cve(e){const t=W$(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}var Dve=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const tH={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Q$=ue(tH);function $ve(e){return!!tH[e]}function Z$(e){return e.startsWith("utc")}function Mve(e){return e.substr(3)}const Tve={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function K$(e){return Q$.filter(t=>nH(e,t))}function nH(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function kve(e,t,{end:n}={end:!1}){const i=L$(t),r=Z$(e)?"utc":"";function a(l){return l==="quarter"?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let s;const o={};for(const l of Q$)nH(e,l)&&(o[l]=a(l),s=l);return n&&(o[s]+="+1"),Ove(o)}function iH(e){if(!e)return;const t=K$(e);return`timeUnitSpecifier(${Tt(t)}, ${Tt(Tve)})`}function Fve(e,t,n){if(!e)return;const i=iH(e);return`${n||Z$(e)?"utc":"time"}Format(${t}, ${i})`}function Ci(e){if(!e)return;let t;return Le(e)?t={unit:e}:Dt(e)&&(t=Object.assign(Object.assign({},e),e.unit?{unit:e.unit}:{})),Z$(t.unit)&&(t.utc=!0,t.unit=Mve(t.unit)),t}function Rve(e){const t=Ci(e),{utc:n}=t,i=Dve(t,["utc"]);return i.unit?(n?"utc":"")+ue(i).map(r=>Bt(`${r==="unit"?"":`_${r}_`}${i[r]}`)).join(""):(n?"utc":"")+"timeunit"+ue(i).map(r=>Bt(`_${r}_${i[r]}`)).join("")}function Nve(e){return e?.param}function J$(e){return e&&!!e.field&&e.equal!==void 0}function eM(e){return e&&!!e.field&&e.lt!==void 0}function tM(e){return e&&!!e.field&&e.lte!==void 0}function nM(e){return e&&!!e.field&&e.gt!==void 0}function iM(e){return e&&!!e.field&&e.gte!==void 0}function rM(e){if(e?.field){if(xe(e.range)&&e.range.length===2)return!0;if($e(e.range))return!0}return!1}function aM(e){return e&&!!e.field&&(xe(e.oneOf)||xe(e.in))}function jve(e){return e&&!!e.field&&e.valid!==void 0}function rH(e){return aM(e)||J$(e)||rM(e)||eM(e)||nM(e)||tM(e)||iM(e)}function ka(e,t){return Lx(e,{timeUnit:t,wrapTime:!0})}function zve(e,t){return e.map(n=>ka(n,t))}function aH(e,t=!0){var n;const{field:i}=e,r=(n=Ci(e.timeUnit))===null||n===void 0?void 0:n.unit,a=r?`time(${kve(r,i)})`:de(e,{expr:"datum"});if(J$(e))return`${a}===${ka(e.equal,r)}`;if(eM(e)){const s=e.lt;return`${a}<${ka(s,r)}`}else if(nM(e)){const s=e.gt;return`${a}>${ka(s,r)}`}else if(tM(e)){const s=e.lte;return`${a}<=${ka(s,r)}`}else if(iM(e)){const s=e.gte;return`${a}>=${ka(s,r)}`}else{if(aM(e))return`indexof([${zve(e.oneOf,r).join(",")}], ${a}) !== -1`;if(jve(e))return sM(a,e.valid);if(rM(e)){const{range:s}=e,o=$e(s)?{signal:`${s.signal}[0]`}:s[0],l=$e(s)?{signal:`${s.signal}[1]`}:s[1];if(o!==null&&l!==null&&t)return"inrange("+a+", ["+ka(o,r)+", "+ka(l,r)+"])";const f=[];return o!==null&&f.push(`${a} >= ${ka(o,r)}`),l!==null&&f.push(`${a} <= ${ka(l,r)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Tt(e)}`)}function sM(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Bve(e){var t;return rH(e)&&e.timeUnit?Object.assign(Object.assign({},e),{timeUnit:(t=Ci(e.timeUnit))===null||t===void 0?void 0:t.unit}):e}const Fp={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},ac=Fp.quantitative,oM=Fp.ordinal,vd=Fp.temporal,uM=Fp.nominal,qd=Fp.geojson;function Lve(e){if(e)switch(e=e.toLowerCase(),e){case"q":case ac:return"quantitative";case"t":case vd:return"temporal";case"o":case oM:return"ordinal";case"n":case uM:return"nominal";case qd:return"geojson"}}var Uve=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const dn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",POINT:"point",BAND:"band"},lO={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Pve(e,t){const n=lO[e],i=lO[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const Ive={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function yN(e){return Ive[e]}const sH=["linear","log","pow","sqrt","symlog","time","utc"],qve=Ec(sH),Hve=["linear","log","pow","sqrt","symlog"],Gve=Ec(Hve);function Yve(e){return e in Gve}const Xve=["quantile","quantize","threshold"],Vve=Ec(Xve),Wve=sH.concat(["quantile","quantize","threshold","sequential","identity"]),Qve=Ec(Wve),Zve=["ordinal","bin-ordinal","point","band"],Kve=Ec(Zve);function li(e){return e in Kve}function br(e){return e in Qve}function ca(e){return e in qve}function jg(e){return e in Vve}const Jve={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4};function ebe(e){return!Le(e)&&!!e.name}function oH(e){return e?.param}function tbe(e){return e&&e.unionWith}function nbe(e){return je(e)&&"field"in e}const uH={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:y3e,domain:v3e,range:b3e,rangeMax:x3e,rangeMin:E3e,scheme:_3e}=uH,ibe=Uve(uH,["type","domain","range","rangeMax","rangeMin","scheme"]),rbe=ue(ibe);function cO(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return ca(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return ca(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"clamp":return ca(e);case"nice":return ca(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return br(e)&&!Ge(["log","time","utc","threshold","quantile"],e)}}function lH(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Hf(e)?void 0:Vye(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function abe(e,t){return Ge([oM,uM],t)?e===void 0||li(e):t===vd?Ge([dn.TIME,dn.UTC,void 0],e):t===ac?Ge([dn.LOG,dn.POW,dn.SQRT,dn.SYMLOG,dn.QUANTILE,dn.QUANTIZE,dn.THRESHOLD,dn.LINEAR,void 0],e):!0}function sbe(e,t){if(!Pu(e))return!1;switch(e){case Pt:case vn:case _a:case fs:return ca(t)||Ge(["band","point"],t);case fo:case Bu:case ho:case ju:case zu:case _c:return ca(t)||jg(t)||Ge(["band","point","ordinal"],t);case Xi:case gs:case ps:return t!=="band";case Lu:case Vi:return t==="ordinal"||jg(t)}}const $i={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},cH=$i.arc,Dx=$i.area,$x=$i.bar,obe=$i.image,Mx=$i.line,Tx=$i.point,ube=$i.rect,zv=$i.rule,fH=$i.text,lM=$i.tick,lbe=$i.trail,cM=$i.circle,fM=$i.square,dH=$i.geoshape;function Hu(e){return["line","area","trail"].includes(e)}function hH(e){return["rect","bar","image","arc"].includes(e)}const gH=ue($i);function ts(e){return e.type}Ec(gH);const cbe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],fbe=["fill","fillOpacity"],dbe=[...cbe,...fbe],hbe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},vN=ue(hbe),gbe={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]},pbe={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},mbe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},pH=ue(mbe);function Hd(e){return e&&e.band!=null}const ybe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},mH=5,vbe={binSpacing:1,continuousBandSize:mH,timeUnitBandPosition:.5},bbe={binSpacing:0,continuousBandSize:mH,timeUnitBandPosition:.5},xbe={thickness:1};function Ebe(e){return ts(e)?e.type:e}function dM(e){const{channel:t,channelDef:n,markDef:i,scale:r,config:a}=e,s=vH(e);return he(n)&&!jq(n.aggregate)&&r&&ca(r.get("type"))&&r.get("zero")===!1?yH({fieldDef:n,channel:t,markDef:i,ref:s,config:a}):s}function yH({fieldDef:e,channel:t,markDef:n,ref:i,config:r}){return Hu(n.type)||pt("invalid",n,r)===null?i:[_be(e,t),i]}function _be(e,t){const n=hM(e,!0),r=Ac(t)==="y"?{field:{group:"height"}}:{value:0};return Object.assign({test:n},r)}function hM(e,t=!0){return sM(Le(e)?e:de(e,{expr:"datum"}),!t)}function Abe(e){const{datum:t}=e;return wc(t)?Ng(t):`${Tt(t)}`}function Ul(e,t,n,i){const r={};if(t&&(r.scale=t),Gu(e)){const{datum:a}=e;wc(a)?r.signal=Ng(a):$e(a)?r.signal=a.signal:kp(a)?r.signal=a.expr:r.value=a}else r.field=de(e,n);if(i){const{offset:a,band:s}=i;a&&(r.offset=a),s&&(r.band=s)}return r}function Bv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,bandPosition:a=.5}){const s=0<a&&a<1?"datum":void 0,o=de(t,{expr:s,suffix:r}),l=n!==void 0?de(n,{expr:s}):de(t,{suffix:"end",expr:s}),f={};if(a===0||a===1){f.scale=e;const d=a===0?o:l;f.field=d}else{const d=$e(a)?`${a.signal} * ${o} + (1-${a.signal}) * ${l}`:`${a} * ${o} + ${1-a} * ${l}`;f.signal=`scale("${e}", ${d})`}return i&&(f.offset=i),f}function vH({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:f,bandPosition:d}){var g;if(t){if(Be(t)){if(Xr(t)){d??(d=CH({fieldDef:t,fieldDef2:n,markDef:i,config:r}));const{bin:y,timeUnit:v,type:x}=t;if(kt(y)||d&&v&&x===vd)return o?.impute?Ul(t,a,{binSuffix:"mid"},{offset:l}):d?Bv({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:l}):Ul(t,a,Np(t,e)?{binSuffix:"range"}:{},{offset:l});if(vi(y)){if(he(n))return Bv({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:l});ce(Zq(e===Pt?Ea:cs))}}const p=s?.get("type");return Ul(t,a,li(p)?{binSuffix:"range"}:{},{offset:l,band:p==="band"?(g=d??t.bandPosition)!==null&&g!==void 0?g:.5:void 0})}else if(ya(t)){const p=t.value,y=l?{offset:l}:{};return Object.assign(Object.assign({},sg(e,p)),y)}}return C1e(f)&&(f=f()),f&&Object.assign(Object.assign({},f),l?{offset:l}:{})}function sg(e,t){return Ge(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ge(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:zt(t)}function sc(e){return e&&e!=="number"&&e!=="time"}function bH(e,t,n){return`${e}(${t}${n?`, ${Tt(n)}`:""})`}const Sbe=" – ";function gM({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){var s,o;if(sc(n))return pM({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const l=xH(e,i,r);if(bd(e)){const f=Obe(l,he(e)?(s=Ci(e.timeUnit))===null||s===void 0?void 0:s.unit:void 0,t,a.timeFormat,Oc(e)&&((o=e.scale)===null||o===void 0?void 0:o.type)===dn.UTC);return f?{signal:f}:void 0}if(t=AH(dO(e),t,a),he(e)&&kt(e.bin)){const f=de(e,{expr:i,binSuffix:"end"});return{signal:kx(l,f,t,n,a)}}else return t||dO(e)==="quantitative"?{signal:`${SH(l,t)}`}:{signal:`isValid(${l}) ? ${l} : ""+${l}`}}function xH(e,t,n){return he(e)?n?`${de(e,{expr:t,suffix:"end"})}-${de(e,{expr:t,suffix:"start"})}`:de(e,{expr:t}):Abe(e)}function pM({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:s}){if(s??(s=xH(e,i,r)),he(e)&&kt(e.bin)){const o=de(e,{expr:i,binSuffix:"end"});return{signal:kx(s,o,t,n,a)}}return{signal:bH(n,s,t)}}function EH(e,t,n,i,r,a){var s;if(!sc(i)){if(bd(e)){const o=he(e)?(s=Ci(e.timeUnit))===null||s===void 0?void 0:s.unit:void 0;return wbe(n,o,r,a)}return AH(t,n,r)}}function _H(e,t,n){if(e&&($e(e)||e==="number"||e==="time"))return e;if(bd(t)&&n!=="time"&&n!=="utc")return"time"}function AH(e,t,n){if(Le(t))return t;if(e===ac)return n.numberFormat}function wbe(e,t,n,i){return e||(t?{signal:iH(t)}:i?void 0:n.timeFormat)}function SH(e,t){return`format(${e}, "${t||""}")`}function bN(e,t,n,i){var r;return sc(n)?bH(n,e,t):SH(e,(r=Le(t)?t:void 0)!==null&&r!==void 0?r:i.numberFormat)}function kx(e,t,n,i,r){const a=bN(e,n,i,r),s=bN(t,n,i,r);return`${sM(e,!1)} ? "null" : ${a} + "${Sbe}" + ${s}`}function Obe(e,t,n,i,r){return!t||n?(n=Le(n)?n:i,`${r?"utc":"time"}Format(${e}, '${n}')`):Fve(t,e,r)}const Fx="min",Cbe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function xN(e){return e in Cbe}function wH(e){return!!e&&!!e.encoding}function Ga(e){return!!e&&(e.op==="count"||!!e.field)}function OH(e){return!!e&&xe(e)}function Rp(e){return"row"in e||"column"in e}function mM(e){return!!e&&"header"in e}function Rx(e){return"facet"in e}var fO=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Dbe(e){return e.param}function $be(e){return e&&!Le(e)&&"repeat"in e}function EN(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return Object.assign(Object.assign(Object.assign(Object.assign({},n?{timeUnit:n}:{}),i?{bin:i}:{}),r?{aggregate:r}:{}),{field:t})}function yM(e){return"sort"in e}function CH({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Be(e)&&e.bandPosition!==void 0)return e.bandPosition;if(he(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return hH(n.type)?0:rc("timeUnitBandPosition",n,i);if(kt(a))return .5}}function DH({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:s}){var o,l,f;const d=Yr(e),g=pt(s?"size":d,i,r,{vgChannel:d});if(g!==void 0)return g;if(he(t)){const{timeUnit:p,bin:y}=t;if(p&&!n)return{band:rc("timeUnitBandSize",i,r)};if(kt(y)&&!li(a))return{band:1}}if(hH(i.type))return a?li(a)?((o=r[i.type])===null||o===void 0?void 0:o.discreteBandSize)||{band:1}:(l=r[i.type])===null||l===void 0?void 0:l.continuousBandSize:(f=r[i.type])===null||f===void 0?void 0:f.discreteBandSize}function $H(e,t,n,i){return kt(e.bin)||e.timeUnit&&Xr(e)&&e.type==="temporal"?CH({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function Nx(e){return e&&"condition"in e}function jx(e){const t=e&&e.condition;return!!t&&!xe(t)&&he(t)}function zx(e){const t=e&&e.condition;return!!t&&!xe(t)&&Be(t)}function Mbe(e){const t=e&&e.condition;return!!t&&(xe(t)||ya(t))}function he(e){return e&&(!!e.field||e.aggregate==="count")}function dO(e){return e&&e.type}function Gu(e){return e&&"datum"in e}function Pa(e){return Xr(e)&&!Lv(e)||hO(e)}function hO(e){return Gu(e)&&un(e.datum)}function Be(e){return he(e)||Gu(e)}function Xr(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function ya(e){return e&&"value"in e&&"value"in e}function Oc(e){return e&&("scale"in e||"sort"in e)}function vM(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function MH(e){return e&&"legend"in e}function TH(e){return e&&("format"in e||"formatType"in e)}function Tbe(e){return gr(e,["legend","axis","header","scale"])}function kbe(e){return"op"in e}function de(e,t={}){var n,i,r;let a=e.field;const s=t.prefix;let o=t.suffix,l="";if(Rbe(e))a=Oq("count");else{let f;if(!t.nofn)if(kbe(e))f=e.op;else{const{bin:d,aggregate:g,timeUnit:p}=e;kt(d)?(f=zq(d),o=((n=t.binSuffix)!==null&&n!==void 0?n:"")+((i=t.suffix)!==null&&i!==void 0?i:"")):g?Iu(g)?(l=`["${a}"]`,a=`argmax_${g.argmax}`):so(g)?(l=`["${a}"]`,a=`argmin_${g.argmin}`):f=String(g):p&&(f=Rve(p),o=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+((r=t.suffix)!==null&&r!==void 0?r:""))}f&&(a=a?`${f}_${a}`:f)}return o&&(a=`${a}_${o}`),s&&(a=`${s}_${a}`),t.forAs?U$(a):t.expr?Aq(a,t.expr)+l:Hr(a)+l}function Lv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return he(e)&&!!e.bin;case"temporal":return!1}throw new Error(Xq(e.type))}function Fbe(e){var t;return Oc(e)&&jg((t=e.scale)===null||t===void 0?void 0:t.type)}function Rbe(e){return e.aggregate==="count"}function Nbe(e,t){var n;const{field:i,bin:r,timeUnit:a,aggregate:s}=e;if(s==="count")return t.countTitle;if(kt(r))return`${i} (binned)`;if(a){const o=(n=Ci(a))===null||n===void 0?void 0:n.unit;if(o)return`${i} (${K$(o).join("-")})`}else if(s)return Iu(s)?`${i} for max ${s.argmax}`:so(s)?`${i} for min ${s.argmin}`:`${Cp(s)} of ${i}`;return i}function jbe(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Iu(t))return`${r} for argmax(${t.argmax})`;if(so(t))return`${r} for argmin(${t.argmin})`;const a=Ci(i),s=t||a?.unit||a?.maxbins&&"timeunit"||kt(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}const kH=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return jbe(e);default:return Nbe(e,t)}};let FH=kH;function RH(e){FH=e}function zbe(){RH(kH)}function Gf(e,t,{allowDisabling:n,includeDefault:i=!0}){var r,a;const s=(r=bM(e))===null||r===void 0?void 0:r.title;if(!he(e))return s;const o=e,l=i?xM(o,t):void 0;return n?ln(s,o.title,l):(a=s??o.title)!==null&&a!==void 0?a:l}function bM(e){if(vM(e)&&e.axis)return e.axis;if(MH(e)&&e.legend)return e.legend;if(mM(e)&&e.header)return e.header}function xM(e,t){return FH(e,t)}function Uv(e){var t;if(TH(e)){const{format:n,formatType:i}=e;return{format:n,formatType:i}}else{const n=(t=bM(e))!==null&&t!==void 0?t:{},{format:i,formatType:r}=n;return{format:i,formatType:r}}}function Bbe(e,t){var n;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(yM(e)&&xe(e.sort))return"ordinal";const{aggregate:i,bin:r,timeUnit:a}=e;if(a)return"temporal";if(r||i&&!Iu(i)&&!so(i))return"quantitative";if(Oc(e)&&(!((n=e.scale)===null||n===void 0)&&n.type))switch(lO[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ns(e){if(he(e))return e;if(jx(e))return e.condition}function mn(e){if(Be(e))return e;if(zx(e))return e.condition}function NH(e,t,n,i={}){if(Le(e)||un(e)||Op(e)){const r=Le(e)?"string":un(e)?"number":"boolean";return ce(jye(t,r,e)),{value:e}}return Be(e)?Pv(e,t,n,i):zx(e)?Object.assign(Object.assign({},e),{condition:Pv(e.condition,t,n,i)}):e}function Pv(e,t,n,i){if(TH(e)){const{format:r,formatType:a}=e,s=fO(e,["format","formatType"]);if(sc(a)&&!n.customFormatTypes)return ce(gN(t)),Pv(s,t,n,i)}else{const r=vM(e)?"axis":MH(e)?"legend":mM(e)?"header":null;if(r&&e[r]){const a=e[r],{format:s,formatType:o}=a,l=fO(a,["format","formatType"]);if(sc(o)&&!n.customFormatTypes)return ce(gN(t)),Pv(Object.assign(Object.assign({},e),{[r]:l}),t,n,i)}}return he(e)?EM(e,t,i):Lbe(e)}function Lbe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=un(n)?"quantitative":Le(n)?"nominal":wc(n)?"temporal":void 0,Object.assign(Object.assign({},e),{type:t})}function EM(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:s}=e,o=Object.assign({},e);if(!n&&i&&!G$(i)&&!Iu(i)&&!so(i)&&(ce(Bye(i)),delete o.aggregate),r&&(o.timeUnit=Ci(r)),s&&(o.field=`${s}`),kt(a)&&(o.bin=Bx(a,t)),vi(a)&&!es(t)&&ce(mve(t)),Xr(o)){const{type:l}=o,f=Lve(l);l!==f&&(o.type=f),l!=="quantitative"&&jq(i)&&(ce(zye(l,i)),o.type="quantitative")}else if(!Fq(t)){const l=Bbe(o,t);o.type=l}if(Xr(o)){const{compatible:l,warning:f}=Ube(o,t)||{};l===!1&&ce(f)}if(yM(o)&&Le(o.sort)){const{sort:l}=o;if(xN(l))return Object.assign(Object.assign({},o),{sort:{encoding:l}});const f=l.substr(1);if(l.charAt(0)==="-"&&xN(f))return Object.assign(Object.assign({},o),{sort:{encoding:f,order:"descending"}})}if(mM(o)){const{header:l}=o;if(l){const{orient:f}=l,d=fO(l,["orient"]);if(f)return Object.assign(Object.assign({},o),{header:Object.assign(Object.assign({},d),{labelOrient:l.labelOrient||f,titleOrient:l.titleOrient||f})})}}return o}function Bx(e,t){return Op(e)?{maxbins:aN(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?Object.assign(Object.assign({},e),{maxbins:aN(t)}):e}const wf={compatible:!0};function Ube(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Js:case eo:case yx:return Lv(e)?wf:{compatible:!1,warning:Iye(t)};case Pt:case vn:case Xi:case gs:case ps:case $p:case Tp:case vx:case ic:case bx:case xx:case _c:case _a:case fs:case Ex:return wf;case hs:case Gr:case ds:case Aa:return n!==ac?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:wf;case ho:case ju:case zu:case Bu:case fo:case co:case lo:case Ea:case cs:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:wf;case Vi:case Lu:return!Lv(e)&&!Fbe(e)?{compatible:!1,warning:qye(t)}:wf;case Mp:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:wf}}function bd(e){const{formatType:t}=Uv(e);return t==="time"||!t&&Pbe(e)}function Pbe(e){return e&&(e.type==="temporal"||he(e)&&!!e.timeUnit)}function Lx(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){var a;const s=t&&((a=Ci(t))===null||a===void 0?void 0:a.unit);let o=s||n==="temporal",l;return kp(e)?l=e.expr:$e(e)?l=e.signal:wc(e)?(o=!0,l=Ng(e)):(Le(e)||un(e))&&o&&(l=`datetime(${Tt(e)})`,$ve(s)&&(un(e)&&e<1e4||Le(e)&&isNaN(Date.parse(e)))&&(l=Ng({[s]:e}))),l?i&&o?`time(${l})`:l:r?void 0:Tt(e)}function jH(e,t){const{type:n}=e;return t.map(i=>{const r=Lx(i,{timeUnit:he(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return r!==void 0?{signal:r}:i})}function Np(e,t){return kt(e.bin)?Pu(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const _N={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function jp(e){return e&&e.condition}const zH=["domain","grid","labels","ticks","title"],Ibe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},BH={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},qbe=Object.assign(Object.assign({},BH),{style:1,labelExpr:1,encoding:1});function AN(e){return!!qbe[e]}const Hbe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},LH=ue(Hbe);function po(e){return"mark"in e}class Ux{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return po(t)?Ebe(t.mark)===this.name:!1}}var Gbe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Pl(e,t){const n=e&&e[t];return n?xe(n)?pd(n,i=>!!i.field):he(n)||jx(n):!1}function _M(e){return pd(G1e,t=>{if(Pl(e,t)){const n=e[t];if(xe(n))return pd(n,i=>!!i.aggregate);{const i=ns(n);return i&&!!i.aggregate}}return!1})}function UH(e,t){const n=[],i=[],r=[],a=[],s={};return AM(e,(o,l)=>{if(he(o)){const{field:f,aggregate:d,bin:g,timeUnit:p}=o,y=Gbe(o,["field","aggregate","bin","timeUnit"]);if(d||p||g){const v=bM(o),x=v?.title;let E=de(o,{forAs:!0});const A=Object.assign(Object.assign(Object.assign({},x?[]:{title:Gf(o,t,{allowDisabling:!0})}),y),{field:E});if(d){let S;if(Iu(d)?(S="argmax",E=de({op:"argmax",field:d.argmax},{forAs:!0}),A.field=`${E}.${f}`):so(d)?(S="argmin",E=de({op:"argmin",field:d.argmin},{forAs:!0}),A.field=`${E}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(S=d),S){const w={op:S,as:E};f&&(w.field=f),a.push(w)}}else if(n.push(E),Xr(o)&&kt(g)){if(i.push({bin:g,field:f,as:E}),n.push(de(o,{binSuffix:"end"})),Np(o,l)&&n.push(de(o,{binSuffix:"range"})),es(l)){const S={field:`${E}_end`};s[`${l}2`]=S}A.bin="binned",Fq(l)||(A.type=ac)}else if(p){r.push({timeUnit:p,field:f,as:E});const S=Xr(o)&&o.type!==vd&&"time";S&&(l===$p||l===ic?A.formatType=S:J1e(l)?A.legend=Object.assign({formatType:S},A.legend):es(l)&&(A.axis=Object.assign({formatType:S},A.axis)))}s[l]=A}else n.push(f),s[l]=e[l]}else s[l]=e[l]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:s}}function Ybe(e,t,n){const i=tye(t,n);if(i){if(i==="binned"){const r=e[t===Ea?Pt:vn];return!!(he(r)&&he(e[t])&&vi(r.bin))}}else return!1;return!0}function Xbe(e,t,n,i){return ue(e).reduce((r,a)=>{if(!kq(a))return ce(Pye(a)),r;const s=e[a];if(a==="angle"&&t==="arc"&&!e.theta&&(ce(Nye),a=_a),!Ybe(e,a,t))return ce(Cx(a,t)),r;if(a===fo&&t==="line"){const o=ns(e[a]);if(o?.aggregate)return ce(Uye),r}if(a===Xi&&(n?"fill"in e:"stroke"in e))return ce(Vq("encoding",{fill:"fill"in e,stroke:"stroke"in e})),r;if(a===Tp||a===Mp&&!xe(s)&&!ya(s)||a===ic&&xe(s))s&&(r[a]=Wt(s).reduce((o,l)=>(he(l)?o.push(EM(l,a)):ce(uO(l,a)),o),[]));else{if(a===ic&&s===null)r[a]=null;else if(!he(s)&&!Gu(s)&&!ya(s)&&!Nx(s)&&!$e(s))return ce(uO(s,a)),r;r[a]=NH(s,a,i)}return r},{})}function Px(e,t){const n={};for(const i of ue(e)){const r=NH(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function Vbe(e){const t=[];for(const n of ue(e))if(Pl(e,n)){const i=e[n],r=Wt(i);for(const a of r)he(a)?t.push(a):jx(a)&&t.push(a.condition)}return t}function AM(e,t,n){if(e)for(const i of ue(e)){const r=e[i];if(xe(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function Wbe(e,t,n,i){return e?ue(e).reduce((r,a)=>{const s=e[a];return xe(s)?s.reduce((o,l)=>t.call(i,o,l,a),r):t.call(i,r,s,a)},n):n}function PH(e,t){return ue(t).reduce((n,i)=>{switch(i){case Pt:case vn:case bx:case Ex:case xx:case Ea:case cs:case _a:case co:case fs:case lo:case ds:case hs:case Aa:case Gr:case $p:case Vi:case _c:case ic:return n;case Mp:if(e==="line"||e==="trail")return n;case Tp:case vx:{const r=t[i];if(xe(r)||he(r))for(const a of Wt(r))a.aggregate||n.push(de(a,{}));return n}case fo:if(e==="trail")return n;case Xi:case gs:case ps:case ho:case ju:case zu:case Lu:case Bu:{const r=ns(t[i]);return r&&!r.aggregate&&n.push(de(r,{})),n}}},[])}var IH=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Qbe(e){const{tooltip:t}=e,n=IH(e,["tooltip"]);if(!t)return{filteredEncoding:n};let i,r;if(xe(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return xe(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function gO(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:o})=>{const l=i?` of ${SM(t)}`:"";return{field:s+t.field,type:t.type,title:$e(o)?{signal:`${o}"${escape(l)}"`}:o+l}}),a=Vbe(n).map(Tbe);return{tooltip:[...r,...Ua(a,Ke)]}}function SM(e){const{title:t,field:n}=e;return ln(t,n)}function wM(e,t,n,i,r){const{scale:a,axis:s}=n;return({partName:o,mark:l,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:g={}})=>{const p=SM(n);return qH(e,o,r,{mark:l,encoding:Object.assign(Object.assign(Object.assign({[t]:Object.assign(Object.assign(Object.assign({field:`${f}_${n.field}`,type:n.type},p!==void 0?{title:p}:{}),a!==void 0?{scale:a}:{}),s!==void 0?{axis:s}:{})},Le(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{}),i),g)})}}function qH(e,t,n,i){const{clip:r,color:a,opacity:s}=e,o=e.type;return e[t]||e[t]===void 0&&n[t]?[Object.assign(Object.assign({},i),{mark:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n[t]),r?{clip:r}:{}),a?{color:a}:{}),s?{opacity:s}:{}),ts(i.mark)?i.mark:{type:i.mark}),{style:`${o}-${t}`}),Op(e[t])?{}:e[t])})]:[]}function HH(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],s=i[`${r}2`],o=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:R1(a,n),continuousAxisChannelDef2:R1(s,n),continuousAxisChannelDefError:R1(o,n),continuousAxisChannelDefError2:R1(l,n),continuousAxis:r}}function R1(e,t){if(e?.aggregate){const{aggregate:n}=e,i=IH(e,["aggregate"]);return n!==t&&ce(pve(n,t)),i}else return e}function GH(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(ts(n)&&n.orient)return n.orient;if(Pa(r)){if(Pa(a)){const s=he(r)&&r.aggregate,o=he(a)&&a.aggregate;if(!s&&o===t)return"vertical";if(!o&&s===t)return"horizontal";if(s===t&&o===t)throw new Error("Both x and y cannot have aggregate");return bd(a)&&!bd(r)?"horizontal":"vertical"}return"horizontal"}else{if(Pa(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}var my=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const Iv="boxplot",Zbe=["box","median","outliers","rule","ticks"],Kbe=new Ux(Iv,XH);function YH(e){return un(e)?"tukey":e}function XH(e,{config:t}){var n,i;e=Object.assign(Object.assign({},e),{encoding:Px(e.encoding,t)});const{mark:r,encoding:a,params:s,projection:o}=e,l=my(e,["mark","encoding","params","projection"]),f=ts(r)?r:{type:r};s&&ce(Yq("boxplot"));const d=(n=f.extent)!==null&&n!==void 0?n:t.boxplot.extent,g=pt("size",f,t),p=YH(d),{bins:y,timeUnits:v,transform:x,continuousAxisChannelDef:E,continuousAxis:A,groupby:S,aggregate:w,encodingWithoutContinuousAxis:D,ticksOrient:O,boxOrient:M,customTooltipWithoutAggregatedField:C}=Jbe(e,d,t),{color:k,size:N}=D,L=my(D,["color","size"]),B=nn=>wM(f,A,E,nn,t.boxplot),V=B(L),G=B(D),P=B(Object.assign(Object.assign({},L),N?{size:N}:{})),j=gO([{fieldPrefix:p==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:p==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],E,D),F={type:"tick",color:"black",opacity:1,orient:O,invalid:null,aria:!1},U=p==="min-max"?j:gO([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],E,D),H=[...V({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...V({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...V({partName:"ticks",mark:F,positionPrefix:"lower_whisker",extraEncoding:U}),...V({partName:"ticks",mark:F,positionPrefix:"upper_whisker",extraEncoding:U})],Q=[...p!=="tukey"?H:[],...G({partName:"box",mark:Object.assign(Object.assign({type:"bar"},g?{size:g}:{}),{orient:M,invalid:null,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:j}),...P({partName:"median",mark:Object.assign(Object.assign(Object.assign({type:"tick",invalid:null},Dt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{}),g?{size:g}:{}),{orient:O,aria:!1}),positionPrefix:"mid_box",extraEncoding:j})];if(p==="min-max")return Object.assign(Object.assign({},l),{transform:((i=l.transform)!==null&&i!==void 0?i:[]).concat(x),layer:Q});const R=`datum["lower_box_${E.field}"]`,W=`datum["upper_box_${E.field}"]`,ie=`(${W} - ${R})`,se=`${R} - ${d} * ${ie}`,ge=`${W} + ${d} * ${ie}`,pe=`datum["${E.field}"]`,_e={joinaggregate:VH(E.field),groupby:S},It={transform:[{filter:`(${se} <= ${pe}) && (${pe} <= ${ge})`},{aggregate:[{op:"min",field:E.field,as:`lower_whisker_${E.field}`},{op:"max",field:E.field,as:`upper_whisker_${E.field}`},{op:"min",field:`lower_box_${E.field}`,as:`lower_box_${E.field}`},{op:"max",field:`upper_box_${E.field}`,as:`upper_box_${E.field}`},...w],groupby:S}],layer:H},{tooltip:ft}=L,me=my(L,["tooltip"]),{scale:ze,axis:Pe}=E,le=SM(E),Qt=gr(Pe,["title"]),rt=qH(f,"outliers",t.boxplot,{transform:[{filter:`(${pe} < ${se}) || (${pe} > ${ge})`}],mark:"point",encoding:Object.assign(Object.assign(Object.assign({[A]:Object.assign(Object.assign(Object.assign({field:E.field,type:E.type},le!==void 0?{title:le}:{}),ze!==void 0?{scale:ze}:{}),At(Qt)?{}:{axis:Qt})},me),k?{color:k}:{}),C?{tooltip:C}:{})})[0];let tn;const En=[...y,...v,_e];return rt?tn={transform:En,layer:[rt,It]}:(tn=It,tn.transform.unshift(...En)),Object.assign(Object.assign({},l),{layer:[tn,{transform:x,layer:Q}]})}function VH(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}function Jbe(e,t,n){const i=GH(e,Iv),{continuousAxisChannelDef:r,continuousAxis:a}=HH(e,i,Iv),s=r.field,o=YH(t),l=[...VH(s),{op:"median",field:s,as:`mid_box_${s}`},{op:"min",field:s,as:(o==="min-max"?"lower_whisker_":"min_")+s},{op:"max",field:s,as:(o==="min-max"?"upper_whisker_":"max_")+s}],f=o==="min-max"||o==="tukey"?[]:[{calculate:`datum["upper_box_${s}"] - datum["lower_box_${s}"]`,as:`iqr_${s}`},{calculate:`min(datum["upper_box_${s}"] + datum["iqr_${s}"] * ${t}, datum["max_${s}"])`,as:`upper_whisker_${s}`},{calculate:`max(datum["lower_box_${s}"] - datum["iqr_${s}"] * ${t}, datum["min_${s}"])`,as:`lower_whisker_${s}`}],d=e.encoding,g=a;d[g];const p=my(d,[typeof g=="symbol"?g:g+""]),{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=Qbe(p),{bins:x,timeUnits:E,aggregate:A,groupby:S,encoding:w}=UH(v,n),D=i==="vertical"?"horizontal":"vertical",O=i,M=[...x,...E,{aggregate:[...A,...l],groupby:S},...f];return{bins:x,timeUnits:E,transform:M,groupby:S,aggregate:A,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:w,ticksOrient:D,boxOrient:O,customTooltipWithoutAggregatedField:y}}var SN=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const OM="errorbar",exe=["ticks","rule"],txe=new Ux(OM,WH);function WH(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:Px(e.encoding,t)});const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:o,outerSpec:l,tooltipEncoding:f}=QH(e,OM,t);delete a.size;const d=wM(o,r,i,a,t.errorbar),g=o.thickness,p=o.size,y=Object.assign(Object.assign({type:"tick",orient:s,aria:!1},g!==void 0?{thickness:g}:{}),p!==void 0?{size:p}:{}),v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:Object.assign({type:"rule",ariaRoleDescription:"errorbar"},g!==void 0?{size:g}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return Object.assign(Object.assign(Object.assign({},l),{transform:n}),v.length>1?{layer:v}:Object.assign({},v[0]))}function nxe(e,t){const{encoding:n}=e;if(ixe(n))return{orient:GH(e,t),inputType:"raw"};const i=rxe(n),r=axe(n),a=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,l=n.y2;if(Be(o)&&Be(l))throw new Error(`${t} cannot have both x2 and y2`);if(Be(o)){if(Pa(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Be(l)){if(Pa(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,l=n.xError2,f=n.yError,d=n.yError2;if(Be(l)&&!Be(o))throw new Error(`${t} cannot have xError2 without xError`);if(Be(d)&&!Be(f))throw new Error(`${t} cannot have yError2 without yError`);if(Be(o)&&Be(f))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Be(o)){if(Pa(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Be(f)){if(Pa(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function ixe(e){return(Be(e.x)||Be(e.y))&&!Be(e.x2)&&!Be(e.y2)&&!Be(e.xError)&&!Be(e.xError2)&&!Be(e.yError)&&!Be(e.yError2)}function rxe(e){return Be(e.x2)||Be(e.y2)}function axe(e){return Be(e.xError)||Be(e.xError2)||Be(e.yError)||Be(e.yError2)}function QH(e,t,n){var i;const{mark:r,encoding:a,params:s,projection:o}=e,l=SN(e,["mark","encoding","params","projection"]),f=ts(r)?r:{type:r};s&&ce(Yq(t));const{orient:d,inputType:g}=nxe(e,t),{continuousAxisChannelDef:p,continuousAxisChannelDef2:y,continuousAxisChannelDefError:v,continuousAxisChannelDefError2:x,continuousAxis:E}=HH(e,d,t),{errorBarSpecificAggregate:A,postAggregateCalculates:S,tooltipSummary:w,tooltipTitleWithFieldName:D}=sxe(f,p,y,v,x,g,t,n),O=a,M=E;O[M];const C=E==="x"?"x2":"y2";O[C];const k=E==="x"?"xError":"yError";O[k];const N=E==="x"?"xError2":"yError2";O[N];const L=SN(O,[typeof M=="symbol"?M:M+"",typeof C=="symbol"?C:C+"",typeof k=="symbol"?k:k+"",typeof N=="symbol"?N:N+""]),{bins:B,timeUnits:V,aggregate:G,groupby:P,encoding:j}=UH(L,n),F=[...G,...A],U=g!=="raw"?[]:P,H=gO(w,p,j,D);return{transform:[...(i=l.transform)!==null&&i!==void 0?i:[],...B,...V,...F.length===0?[]:[{aggregate:F,groupby:U}],...S],groupby:U,continuousAxisChannelDef:p,continuousAxis:E,encodingWithoutContinuousAxis:j,ticksOrient:d==="vertical"?"horizontal":"vertical",markDef:f,outerSpec:l,tooltipEncoding:H}}function sxe(e,t,n,i,r,a,s,o){let l=[],f=[];const d=t.field;let g,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&ce(gve(y,v,s)),v==="stderr"||v==="stdev")l=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],f=[{calculate:`datum["center_${d}"] + datum["extent_${d}"]`,as:`upper_${d}`},{calculate:`datum["center_${d}"] - datum["extent_${d}"]`,as:`lower_${d}`}],g=[{fieldPrefix:"center_",titlePrefix:Cp(y)},{fieldPrefix:"upper_",titlePrefix:wN(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:wN(y,v,"-")}],p=!0;else{let x,E,A;v==="ci"?(x="mean",E="ci0",A="ci1"):(x="median",E="q1",A="q3"),l=[{op:E,field:d,as:`lower_${d}`},{op:A,field:d,as:`upper_${d}`},{op:x,field:d,as:`center_${d}`}],g=[{fieldPrefix:"upper_",titlePrefix:Gf({field:d,aggregate:A,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Gf({field:d,aggregate:E,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Gf({field:d,aggregate:x,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ce(hve(e.center,e.extent)),a==="aggregated-upper-lower"?(g=[],f=[{calculate:`datum["${n.field}"]`,as:`upper_${d}`},{calculate:`datum["${d}"]`,as:`lower_${d}`}]):a==="aggregated-error"&&(g=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`datum["${d}"] + datum["${i.field}"]`,as:`upper_${d}`}],r?f.push({calculate:`datum["${d}"] + datum["${r.field}"]`,as:`lower_${d}`}):f.push({calculate:`datum["${d}"] - datum["${i.field}"]`,as:`lower_${d}`}));for(const y of f)g.push({fieldPrefix:y.as.substring(0,6),titlePrefix:nc(nc(y.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:l,tooltipSummary:g,tooltipTitleWithFieldName:p}}function wN(e,t,n){return`${Cp(e)} ${n} ${t}`}const CM="errorband",oxe=["band","borders"],uxe=new Ux(CM,ZH);function ZH(e,{config:t}){e=Object.assign(Object.assign({},e),{encoding:Px(e.encoding,t)});const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:o,tooltipEncoding:l}=QH(e,CM,t),f=s,d=wM(f,r,i,a,t.errorband),g=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:g?"area":"rect"},y={type:g?"line":"rule"};const v=Object.assign(Object.assign({},f.interpolate?{interpolate:f.interpolate}:{}),f.tension&&f.interpolate?{tension:f.tension}:{});return g?(p=Object.assign(Object.assign(Object.assign({},p),v),{ariaRoleDescription:"errorband"}),y=Object.assign(Object.assign(Object.assign({},y),v),{aria:!1})):f.interpolate?ce(mN("interpolate")):f.tension&&ce(mN("tension")),Object.assign(Object.assign({},o),{transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:l})]})}const KH={};function DM(e,t,n){const i=new Ux(e,t);KH[e]={normalizer:i,parts:n}}function lxe(){return ue(KH)}DM(Iv,XH,Zbe);DM(OM,WH,exe);DM(CM,ZH,oxe);const cxe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],JH={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},eG={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},fxe=ue(JH),dxe=ue(eG),hxe={header:1,headerRow:1,headerColumn:1,headerFacet:1},tG=ue(hxe),nG=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],gxe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},pxe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},zg="_vgsid_",mxe={point:{on:"click",fields:[zg],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function $M(e){return!!e&&(e==="legend"||!!e.legend)}function PA(e){return $M(e)&&Dt(e)}function MM(e){return!!e.select}var yxe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function iG(e){const t=[];for(const n of e||[]){if(MM(n))continue;const{expr:i,bind:r}=n,a=yxe(n,["expr","bind"]);if(r&&i){const s=Object.assign(Object.assign({},a),{bind:r,init:i});t.push(s)}else{const s=Object.assign(Object.assign(Object.assign({},a),i?{update:i}:{}),r?{bind:r}:{});t.push(s)}}return t}function vxe(e){return Ix(e)||kM(e)||TM(e)}function TM(e){return"concat"in e}function Ix(e){return"vconcat"in e}function kM(e){return"hconcat"in e}function is(e){return Dt(e)&&e.step!==void 0}function ON(e){return e.view||e.width||e.height}const CN=20,bxe={align:1,bounds:1,center:1,columns:1,spacing:1},xxe=ue(bxe);function Exe(e,t,n){var i,r;const a=n[t],s={},{spacing:o,columns:l}=a;o!==void 0&&(s.spacing=o),l!==void 0&&(Rx(e)&&!Rp(e.facet)||TM(e))&&(s.columns=l),Ix(e)&&(s.columns=1);for(const f of xxe)if(e[f]!==void 0)if(f==="spacing"){const d=e[f];s[f]=un(d)?d:{row:(i=d.row)!==null&&i!==void 0?i:o,column:(r=d.column)!==null&&r!==void 0?r:o}}else s[f]=e[f];return s}var _xe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function pO(e,t){var n;return(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"continuousWidth":"continuousHeight"]}function qv(e,t){const n=Bg(e,t);return is(n)?n.step:rG}function Bg(e,t){var n;const i=(n=e[t])!==null&&n!==void 0?n:e[t==="width"?"discreteWidth":"discreteHeight"];return ln(i,{step:e.step})}const rG=20,Axe={continuousWidth:200,continuousHeight:200,step:rG},Sxe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Axe,mark:pbe,arc:{},area:{},bar:vbe,circle:{},geoshape:{},image:{},line:{},point:{},rect:bbe,rule:{color:"black"},square:{},text:{color:"black"},tick:xbe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Jve,projection:{},legend:gxe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:mxe,style:{},title:{},facet:{spacing:CN},concat:{spacing:CN}},js=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],DN={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},$N={blue:js[0],orange:js[1],red:js[2],teal:js[3],green:js[4],yellow:js[5],purple:js[6],pink:js[7],brown:js[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function wxe(e={}){return{signals:[{name:"color",value:Dt(e)?Object.assign(Object.assign({},$N),e):$N}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Oxe(e){return{signals:[{name:"fontSize",value:Dt(e)?Object.assign(Object.assign({},DN),e):DN}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Cxe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function aG(e){const t=ue(e||{}),n={};for(const i of t){const r=e[i];n[i]=jp(r)?Lq(r):lr(r)}return n}function Dxe(e){const t=ue(e),n={};for(const i of t)n[i]=aG(e[i]);return n}const $xe=[...pH,...LH,...tG,"background","padding","legend","lineBreak","scale","style","title","view"];function sG(e={}){const{color:t,font:n,fontSize:i,selection:r}=e,a=_xe(e,["color","font","fontSize","selection"]),s=xq({},Ue(Sxe),n?Cxe(n):{},t?wxe(t):{},i?Oxe(i):{},a||{});r&&Wg(s,"selection",r,!0);const o=gr(s,$xe);for(const l of["background","lineBreak","padding"])s[l]&&(o[l]=lr(s[l]));for(const l of pH)s[l]&&(o[l]=Li(s[l]));for(const l of LH)s[l]&&(o[l]=aG(s[l]));for(const l of tG)s[l]&&(o[l]=Li(s[l]));return s.legend&&(o.legend=Li(s.legend)),s.scale&&(o.scale=Li(s.scale)),s.style&&(o.style=Dxe(s.style)),s.title&&(o.title=Li(s.title)),s.view&&(o.view=Li(s.view)),o}const Mxe=["view",...gH],Txe=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],kxe=Object.assign({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},gbe);function Fxe(e){e=Ue(e);for(const t of Txe)delete e[t];if(e.axis)for(const t in e.axis)jp(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of cxe)delete e.legend[t];if(e.mark){for(const t of vN)delete e.mark[t];e.mark.tooltip&&Dt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(iG(e.params)),delete e.params);for(const t of Mxe){for(const i of vN)delete e[t][i];const n=kxe[t];if(n)for(const i of n)delete e[t][i];Nxe(e,t)}for(const t of lxe())delete e[t];Rxe(e);for(const t in e)Dt(e[t])&&At(e[t])&&delete e[t];return At(e)?void 0:e}function Rxe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=Bq(e.title);At(t)||(e.style["group-title"]=Object.assign(Object.assign({},e.style["group-title"]),t)),At(n)||(e.style["group-subtitle"]=Object.assign(Object.assign({},e.style["group-subtitle"]),n)),At(i)?delete e.title:e.title=i}function Nxe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a=Object.assign(Object.assign({},r),e.style[n??t]);At(a)||(e.style[n??t]=a),delete e[t]}function qx(e){return"layer"in e}function jxe(e){return"repeat"in e}function zxe(e){return!xe(e.repeat)&&e.repeat.layer}var Bxe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class FM{map(t,n){return Rx(t)?this.mapFacet(t,n):jxe(t)?this.mapRepeat(t,n):kM(t)?this.mapHConcat(t,n):Ix(t)?this.mapVConcat(t,n):TM(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(qx(t))return this.mapLayer(t,n);if(po(t))return this.mapUnit(t,n);throw new Error(X$(t))}mapLayer(t,n){return Object.assign(Object.assign({},t),{layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))})}mapHConcat(t,n){return Object.assign(Object.assign({},t),{hconcat:t.hconcat.map(i=>this.map(i,n))})}mapVConcat(t,n){return Object.assign(Object.assign({},t),{vconcat:t.vconcat.map(i=>this.map(i,n))})}mapConcat(t,n){const{concat:i}=t,r=Bxe(t,["concat"]);return Object.assign(Object.assign({},r),{concat:i.map(a=>this.map(a,n))})}mapFacet(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}mapRepeat(t,n){return Object.assign(Object.assign({},t),{spec:this.map(t.spec,n)})}}const Lxe={zero:1,center:1,normalize:1};function Uxe(e){return e in Lxe}const Pxe=new Set([cH,$x,Dx,zv,Tx,cM,fM,Mx,fH,lM]),Ixe=new Set([$x,Dx,cH]);function Of(e){return he(e)&&dO(e)==="quantitative"&&!e.bin}function MN(e,t){var n,i;const r=t==="x"?"y":"radius",a=e[t],s=e[r];if(he(a)&&he(s))if(Of(a)&&Of(s)){if(a.stack)return t;if(s.stack)return r;const o=he(a)&&!!a.aggregate,l=he(s)&&!!s.aggregate;if(o!==l)return o?t:r;{const f=(n=a.scale)===null||n===void 0?void 0:n.type,d=(i=s.scale)===null||i===void 0?void 0:i.type;if(f&&f!=="linear")return r;if(d&&d!=="linear")return t}}else{if(Of(a))return t;if(Of(s))return r}else{if(Of(a))return t;if(Of(s))return r}}function qxe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function oG(e,t,n={}){var i,r;const a=ts(e)?e.type:e;if(!Pxe.has(a))return null;const s=MN(t,"x")||MN(t,"theta");if(!s)return null;const o=t[s],l=he(o)?de(o,{}):void 0;let f=qxe(s),d=t[f],g=he(d)?de(d,{}):void 0;g===l&&(g=void 0,d=void 0,f=void 0);const p=Q1e.reduce((v,x)=>{if(x!=="tooltip"&&Pl(t,x)){const E=t[x];for(const A of Wt(E)){const S=ns(A);if(S.aggregate)continue;const w=de(S,{});(!w||w!==g)&&v.push({channel:x,fieldDef:S})}}return v},[]);let y;if(o.stack!==void 0?Op(o.stack)?y=o.stack?"zero":null:y=o.stack:Ixe.has(a)&&(y="zero"),!y||!Uxe(y)||_M(t)&&p.length===0)return null;if(!((i=o?.scale)===null||i===void 0)&&i.type&&((r=o?.scale)===null||r===void 0?void 0:r.type)!==dn.LINEAR){if(n.disallowNonLinearStack)return null;ce(cve(o.scale.type))}return Be(t[go(s)])?(o.stack!==void 0&&ce(lve(s)),null):(he(o)&&o.aggregate&&!Ge(uye,o.aggregate)&&ce(fve(o.aggregate)),{groupbyChannel:d?f:void 0,groupbyField:g,fieldChannel:s,impute:o.impute===null?!1:Hu(a),stackBy:p,offset:y})}var uG=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Hxe(e){const{point:t,line:n}=e,i=uG(e,["point","line"]);return ue(i).length>1?i:i.type}function Gxe(e){for(const t of["line","area","rule","trail"])e[t]&&(e=Object.assign(Object.assign({},e),{[t]:gr(e[t],["point","line"])}));return e}function IA(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Dt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Dt(t.point)?t.point:{}:void 0}function TN(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Yxe{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(po(t)){const{mark:i,encoding:r}=t,a=ts(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!IA(a,n[a.type],r);case"area":return!!IA(a,n[a.type],r)||!!TN(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:s,mark:o,encoding:l}=t,f=uG(t,["params","projection","mark","encoding"]),d=Px(l,r),g=ts(o)?o:{type:o},p=IA(g,r[g.type],d),y=g.type==="area"&&TN(g,r[g.type]),v=[Object.assign(Object.assign({},a?{params:a}:{}),{mark:Hxe(Object.assign(Object.assign({},g.type==="area"&&g.opacity===void 0&&g.fillOpacity===void 0?{opacity:.7}:{}),g)),encoding:gr(d,["shape"])})],x=oG(g,d);let E=d;if(x){const{fieldChannel:A,offset:S}=x;E=Object.assign(Object.assign({},d),{[A]:Object.assign(Object.assign({},d[A]),S?{stack:S}:{})})}return y&&v.push(Object.assign(Object.assign({},s?{projection:s}:{}),{mark:Object.assign(Object.assign({type:"line"},gd(g,["clip","interpolate","tension","tooltip"])),y),encoding:E})),p&&v.push(Object.assign(Object.assign({},s?{projection:s}:{}),{mark:Object.assign(Object.assign({type:"point",opacity:1,filled:!0},gd(g,["clip","tooltip"])),p),encoding:E})),i(Object.assign(Object.assign({},f),{layer:v}),Object.assign(Object.assign({},n),{config:Gxe(r)}))}}var Xxe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Vxe(e,t){return t?Rp(e)?cG(e,t):lG(e,t):e}function qA(e,t){return t?cG(e,t):e}function mO(e,t,n){const i=t[e];if($be(i)){if(i.repeat in n)return Object.assign(Object.assign({},t),{[e]:n[i.repeat]});ce(Dye(i.repeat));return}return t}function lG(e,t){if(e=mO("field",e,t),e!==void 0){if(e===null)return null;if(yM(e)&&Ga(e.sort)){const n=mO("field",e.sort,t);e=Object.assign(Object.assign({},e),n?{sort:n}:{})}return e}}function kN(e,t){if(he(e))return lG(e,t);{const n=mO("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function FN(e,t){if(Be(e)){const n=kN(e,t);if(n)return n;if(Nx(e))return{condition:e.condition}}else{if(zx(e)){const n=kN(e.condition,t);if(n)return Object.assign(Object.assign({},e),{condition:n});{const{condition:i}=e;return Xxe(e,["condition"])}}return e}}function cG(e,t){const n={};for(const i in e)if(jf(e,i)){const r=e[i];if(xe(r))n[i]=r.map(a=>FN(a,t)).filter(a=>a);else{const a=FN(r,t);a!==void 0&&(n[i]=a)}}return n}class Wxe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(po(t)){const{encoding:n,mark:i}=t;if(i==="line"||ts(i)&&i.type==="line")for(const r of V1e){const a=Ac(r),s=n[a];if(n[r]&&(he(s)&&!vi(s.bin)||Gu(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return ce(Yye(!!r.x2,!!r.y2)),i(Object.assign(Object.assign({},t),{mark:Dt(a)?Object.assign(Object.assign({},a),{type:"rule"}):"rule"}),n)}}var Io=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class Qxe extends FM{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Kbe,txe,uxe,new Yxe,new Wxe]}map(t,n){if(po(t)){const i=Pl(t.encoding,Js),r=Pl(t.encoding,eo),a=Pl(t.encoding,yx);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=qA(t.encoding,n.repeater),s=Object.assign(Object.assign({},t),a?{encoding:a}:{});if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const o=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,o);return s}mapRepeat(t,n){return zxe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r}=t,a=Io(t,["repeat","spec"]),{row:s,column:o,layer:l}=i,{repeater:f={},repeaterPrefix:d=""}=n;return s||o?this.mapRepeat(Object.assign(Object.assign({},t),{repeat:Object.assign(Object.assign({},s?{row:s}:{}),o?{column:o}:{}),spec:{repeat:{layer:l},spec:r}}),n):Object.assign(Object.assign({},a),{layer:l.map(g=>{const p=Object.assign(Object.assign({},f),{layer:g}),y=`${(r.name||"")+d}child__layer_${Bt(g)}`,v=this.mapLayerOrUnit(r,Object.assign(Object.assign({},n),{repeater:p,repeaterPrefix:y}));return v.name=y,v})})}mapNonLayerRepeat(t,n){var i;const{repeat:r,spec:a,data:s}=t,o=Io(t,["repeat","spec","data"]);!xe(r)&&t.columns&&(t=gr(t,["columns"]),ce(dN("repeat")));const l=[],{repeater:f={},repeaterPrefix:d=""}=n,g=!xe(r)&&r.row||[f?f.row:null],p=!xe(r)&&r.column||[f?f.column:null],y=xe(r)&&r||[f?f.repeat:null];for(const x of y)for(const E of g)for(const A of p){const S={repeat:x,row:E,column:A,layer:f.layer},w=(a.name||"")+d+"child__"+(xe(r)?`${Bt(x)}`:(r.row?`row_${Bt(E)}`:"")+(r.column?`column_${Bt(A)}`:"")),D=this.map(a,Object.assign(Object.assign({},n),{repeater:S,repeaterPrefix:w}));D.name=w,l.push(gr(D,["data"]))}const v=xe(r)?t.columns:r.column?r.column.length:1;return Object.assign(Object.assign({data:(i=a.data)!==null&&i!==void 0?i:s,align:"all"},o),{columns:v,concat:l})}mapFacet(t,n){const{facet:i}=t;return Rp(i)&&t.columns&&(t=gr(t,["columns"]),ce(dN("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:s,config:o}=n,l=NN({parentProjection:s,projection:r}),f=RN({parentEncoding:a,encoding:qA(i,n.repeater)});return this.mapUnit(Object.assign(Object.assign(Object.assign({},t),l?{projection:l}:{}),f?{encoding:f}:{}),{config:o})}mapFacetedUnit(t,n){const i=t.encoding,{row:r,column:a,facet:s}=i,o=Io(i,["row","column","facet"]),{mark:l,width:f,projection:d,height:g,view:p,params:y,encoding:v}=t,x=Io(t,["mark","width","projection","height","view","params","encoding"]),{facetMapping:E,layout:A}=this.getFacetMappingAndLayout({row:r,column:a,facet:s},n),S=qA(o,n.repeater);return this.mapFacet(Object.assign(Object.assign(Object.assign({},x),A),{facet:E,spec:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},f?{width:f}:{}),g?{height:g}:{}),p?{view:p}:{}),d?{projection:d}:{}),{mark:l,encoding:S}),y?{params:y}:{})}),n)}getFacetMappingAndLayout(t,n){var i;const{row:r,column:a,facet:s}=t;if(r||a){s&&ce(Hye([...r?[Js]:[],...a?[eo]:[]]));const o={},l={};for(const f of[Js,eo]){const d=t[f];if(d){const{align:g,center:p,spacing:y,columns:v}=d,x=Io(d,["align","center","spacing","columns"]);o[f]=x;for(const E of["align","center","spacing"])d[E]!==void 0&&((i=l[E])!==null&&i!==void 0||(l[E]={}),l[E][f]=d[E])}}return{facetMapping:o,layout:l}}else{const{align:o,center:l,spacing:f,columns:d}=s,g=Io(s,["align","center","spacing","columns"]);return{facetMapping:Vxe(g,n.repeater),layout:Object.assign(Object.assign(Object.assign(Object.assign({},o?{align:o}:{}),l?{center:l}:{}),f?{spacing:f}:{}),d?{columns:d}:{})}}}mapLayer(t,n){var{parentEncoding:i,parentProjection:r}=n,a=Io(n,["parentEncoding","parentProjection"]);const{encoding:s,projection:o}=t,l=Io(t,["encoding","projection"]),f=Object.assign(Object.assign({},a),{parentEncoding:RN({parentEncoding:i,encoding:s,layer:!0}),parentProjection:NN({parentProjection:r,projection:o})});return super.mapLayer(l,f)}}function RN({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...ue(e),...ue(t)]);for(const a of r){const s=t[a],o=e[a];if(Be(s)){const l=Object.assign(Object.assign({},o),s);i[a]=l}else zx(s)?i[a]=Object.assign(Object.assign({},s),{condition:Object.assign(Object.assign({},o),s.condition)}):s||s===null?i[a]=s:(n||ya(o)||$e(o)||Be(o)||xe(o))&&(i[a]=o)}}else i=t;return!i||At(i)?void 0:i}function NN(e){const{parentProjection:t,projection:n}=e;return t&&n&&ce(Rye({parentProjection:t,projection:n})),n??t}function RM(e){return"filter"in e}function Zxe(e){return e?.stop!==void 0}function fG(e){return"lookup"in e}function Kxe(e){return"data"in e}function Jxe(e){return"param"in e}function e2e(e){return"pivot"in e}function t2e(e){return"density"in e}function n2e(e){return"quantile"in e}function i2e(e){return"regression"in e}function r2e(e){return"loess"in e}function a2e(e){return"sample"in e}function s2e(e){return"window"in e}function o2e(e){return"joinaggregate"in e}function u2e(e){return"flatten"in e}function l2e(e){return"calculate"in e}function dG(e){return"bin"in e}function c2e(e){return"impute"in e}function f2e(e){return"timeUnit"in e}function d2e(e){return"aggregate"in e}function h2e(e){return"stack"in e}function g2e(e){return"fold"in e}function p2e(e){return e.map(t=>RM(t)?{filter:qf(t.filter,Bve)}:t)}var fu=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class m2e extends FM{map(t,n){var i,r;return(i=n.emptySelections)!==null&&i!==void 0||(n.emptySelections={}),(r=n.selectionPredicates)!==null&&r!==void 0||(n.selectionPredicates={}),t=jN(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=jN(t,n),t.encoding){const i={};for(const[r,a]of Su(t.encoding))i[r]=hG(a,n);t=Object.assign(Object.assign({},t),{encoding:i})}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const i=t,{selection:r}=i,a=fu(i,["selection"]);return r?Object.assign(Object.assign({},a),{params:Su(r).map(([s,o])=>{var l;const f=o,{init:d,bind:g,empty:p}=f,y=fu(f,["init","bind","empty"]);y.type==="single"?(y.type="point",y.toggle=!1):y.type==="multi"&&(y.type="point"),n.emptySelections[s]=p!=="none";for(const v of ai((l=n.selectionPredicates[s])!==null&&l!==void 0?l:{}))v.empty=p!=="none";return{name:s,value:d,select:y,bind:g}})}):t}}function jN(e,t){const{transform:n}=e,i=fu(e,["transform"]);if(n){const r=n.map(a=>{if(RM(a))return{filter:yO(a,t)};if(dG(a)&&Sc(a.bin))return Object.assign(Object.assign({},a),{bin:gG(a.bin)});if(fG(a)){const s=a.from,{selection:o}=s,l=fu(s,["selection"]);return o?Object.assign(Object.assign({},a),{from:Object.assign({param:o},l)}):a}return a});return Object.assign(Object.assign({},i),{transform:r})}return e}function hG(e,t){var n,i;const r=Ue(e);if(he(r)&&Sc(r.bin)&&(r.bin=gG(r.bin)),Oc(r)&&(!((i=(n=r.scale)===null||n===void 0?void 0:n.domain)===null||i===void 0)&&i.selection)){const a=r.scale.domain,{selection:s}=a,o=fu(a,["selection"]);r.scale.domain=Object.assign(Object.assign({},o),s?{param:s}:{})}if(Nx(r))if(Ee(r.condition))r.condition=r.condition.map(a=>{const{selection:s,param:o,test:l}=a,f=fu(a,["selection","param","test"]);return o?a:Object.assign(Object.assign({},f),{test:yO(a,t)})});else{const a=hG(r.condition,t),{selection:s,param:o,test:l}=a,f=fu(a,["selection","param","test"]);r.condition=o?r.condition:Object.assign(Object.assign({},f),{test:yO(r.condition,t)})}return r}function gG(e){const t=e.extent;if(t?.selection){const{selection:n}=t,i=fu(t,["selection"]);return Object.assign(Object.assign({},e),{extent:Object.assign(Object.assign({},i),{param:n})})}return e}function yO(e,t){const n=i=>qf(i,r=>{var a,s,o;const l=(a=t.emptySelections[r])!==null&&a!==void 0?a:!0,f={param:r,empty:l};return(s=(o=t.selectionPredicates)[r])!==null&&s!==void 0||(o[r]=[]),t.selectionPredicates[r].push(f),f});return e.selection?n(e.selection):qf(e.test||e.filter,i=>i.selection?n(i.selection):i)}class vO extends FM{map(t,n){var i;const r=(i=n.selections)!==null&&i!==void 0?i:[];if(t.params&&!po(t)){const a=[];for(const s of t.params)MM(s)?r.push(s):a.push(s);t.params=a}return n.selections=r,super.map(t,pG(t,n))}mapUnit(t,n){var i;const r=n.selections;if(!r||!r.length)return t;const a=((i=n.path)!==null&&i!==void 0?i:[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const l of o.views)(tt(l)&&(l===t.name||a.indexOf(l)>=0)||Ee(l)&&l.map(f=>a.indexOf(f)).every((f,d,g)=>f!==-1&&(d===0||f>g[d-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=vO.prototype[e];vO.prototype[e]=function(n,i){return t.call(this,n,pG(n,i))}}function pG(e,t){var n;return e.name?Object.assign(Object.assign({},t),{path:((n=t.path)!==null&&n!==void 0?n:[]).concat(e.name)}):t}function mG(e,t){t===void 0&&(t=sG(e.config));const n=x2e(e,t),{width:i,height:r}=e,a=E2e(n,{width:i,height:r,autosize:e.autosize},t);return Object.assign(Object.assign({},n),a?{autosize:a}:{})}const y2e=new Qxe,v2e=new m2e,b2e=new vO;function x2e(e,t={}){const n={config:t};return b2e.map(y2e.map(v2e.map(e,n),n),n)}function zN(e){return Le(e)?{type:e}:e??{}}function E2e(e,t,n){let{width:i,height:r}=t;const a=po(e)||qx(e),s={};a?i=="container"&&r=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):r=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(ce(uN("width")),i=void 0),r=="container"&&(ce(uN("height")),r=void 0));const o=Object.assign(Object.assign(Object.assign({type:"pad"},s),n?zN(n.autosize):{}),zN(e.autosize));if(o.type==="fit"&&!a&&(ce(vye),o.type="pad"),i=="container"&&!(o.type=="fit"||o.type=="fit-x")&&ce(lN("width")),r=="container"&&!(o.type=="fit"||o.type=="fit-y")&&ce(lN("height")),!La(o,{type:"pad"}))return o}function _2e(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function A2e(e){return e?`fit-${Sx(e)}`:"fit"}const S2e=["background","padding"];function BN(e,t){const n={};for(const i of S2e)e&&e[i]!==void 0&&(n[i]=lr(e[i]));return t&&(n.params=e.params),n}class mo{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new mo(Ue(this.explicit),Ue(this.implicit))}combine(){return Object.assign(Object.assign({},this.explicit),this.implicit)}get(t){return ln(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ue(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Us(e){return{explicit:!0,value:e}}function sr(e){return{explicit:!1,value:e}}function yG(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:Hx(t,n,i,r)}}function Hx(e,t,n,i){return e.explicit&&t.explicit&&ce(nve(n,i,e.value,t.value)),e}function Ou(e,t,n,i,r=Hx){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:La(e.value,t.value)?e:r(e,t,n,i)}class w2e extends mo{constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function xd(e){return"url"in e}function Lg(e){return"values"in e}function vG(e){return"name"in e&&!xd(e)&&!Lg(e)&&!du(e)}function du(e){return e&&(bG(e)||xG(e)||NM(e))}function bG(e){return"sequence"in e}function xG(e){return"sphere"in e}function NM(e){return"graticule"in e}var Mt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Mt||(Mt={}));const O2e="view",Hv="[",Gv="]",EG="{",_G="}",C2e=":",AG=",",D2e="@",$2e=">",M2e=/[[\]{}]/,T2e={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let SG,wG;function Gd(e,t,n){return SG=t||O2e,wG=T2e,OG(e.trim()).map(bO)}function k2e(e){return wG[e]}function og(e,t,n,i,r){const a=e.length;let s=0,o;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;r&&r.indexOf(o)>=0?--s:i&&i.indexOf(o)>=0&&++s}return t}function OG(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=og(e,r,AG,Hv+EG,Gv+_G),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function bO(e){return e[0]==="["?F2e(e):R2e(e)}function F2e(e){const t=e.length;let n=1,i;if(n=og(e,n,Gv,Hv,Gv),n===t)throw"Empty between selector: "+e;if(i=OG(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==$2e)throw"Expected '>' after between selector: "+e;i=i.map(bO);const r=bO(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function R2e(e){const t={source:SG},n=[];let i=[0,0],r=0,a=0,s=e.length,o=0,l,f;if(e[s-1]===_G){if(o=e.lastIndexOf(EG),o>=0){try{i=N2e(e.substring(o+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),s=e.length}else throw"Unmatched right brace: "+e;o=0}if(!s)throw e;if(e[0]===D2e&&(r=++o),l=og(e,o,C2e),l<s&&(n.push(e.substring(a,l).trim()),a=o=++l),o=og(e,o,Hv),o===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,o).trim()),f=[],a=++o,a===s)throw"Unmatched left bracket: "+e;for(;o<s;){if(o=og(e,o,Gv),o===s)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,o).trim()),o<s-1&&e[++o]!==Hv)throw"Expected left bracket: "+e;a=++o}if(!(s=n.length)||M2e.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):k2e(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function N2e(e){const t=e.split(AG);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}var j2e=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Ed(e,t=!0,n=E1e){if(xe(e)){const i=e.map(r=>Ed(r,t,n));return t?`[${i.join(", ")}]`:i}else if(wc(e))return n(t?Ng(e):Cve(e));return t?n(Tt(e)):e}function z2e(e,t){var n;for(const i of ai((n=e.component.selection)!==null&&n!==void 0?n:{})){const r=i.name;let a=`${r}${$u}, ${i.resolve==="global"?"true":`{unit: ${_d(e)}}`}`;for(const s of Yx)s.defined(i)&&(s.signals&&(t=s.signals(e,i,t)),s.modifyExpr&&(a=s.modifyExpr(e,i,a)));t.push({name:r+mEe,on:[{events:{signal:i.name+$u},update:`modify(${at(i.name+oc)}, ${a})`}]})}return jM(t)}function B2e(e,t){if(e.component.selection&&ue(e.component.selection).length){const n=at(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Gd("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return jM(t)}function L2e(e,t){var n;let i=!1;for(const r of ai((n=e.component.selection)!==null&&n!==void 0?n:{})){const a=r.name,s=at(a+oc);if(t.filter(l=>l.name===a).length===0){const l=r.resolve==="global"?"union":r.resolve,f=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${IG}(${s}, ${at(l)}${f}`})}i=!0;for(const l of Yx)l.defined(r)&&l.topLevelSignals&&(t=l.topLevelSignals(e,r,t))}return i&&t.filter(a=>a.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),jM(t)}function U2e(e,t){var n;const i=[...t];for(const r of ai((n=e.component.selection)!==null&&n!==void 0?n:{})){const a={name:r.name+oc};if(r.init){const o=r.project.items.map(l=>{const{signals:f}=l;return j2e(l,["signals"])});a.values=r.init.map(l=>({unit:_d(e,{escape:!1}),fields:o,values:Ed(l,!1)}))}i.filter(o=>o.name===r.name+oc).length||i.push(a)}return i}function CG(e,t){var n;for(const i of ai((n=e.component.selection)!==null&&n!==void 0?n:{}))for(const r of Yx)r.defined(i)&&r.marks&&(t=r.marks(e,i,t));return t}function P2e(e,t){for(const n of e.children)sn(n)&&(t=CG(n,t));return t}function I2e(e,t,n,i){const r=JG(e,t.param,t);return{signal:br(n.get("type"))&&xe(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function jM(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class wt{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){ce(Tye);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=n,t.parent=this}}class Ai extends wt{constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${wq()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}var LN=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class Ya extends wt{constructor(t,n){super(t),this.formula=n}clone(){return new Ya(null,Ue(this.formula))}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a)=>{const{field:s,timeUnit:o}=a;if(o){const l=de(a,{forAs:!0});r[Ke({as:l,field:s,timeUnit:o})]={as:l,field:s,timeUnit:o}}return r},{});return At(i)?null:new Ya(t,i)}static makeFromTransform(t,n){const i=Object.assign({},n),{timeUnit:r}=i,a=LN(i,["timeUnit"]),s=Ci(r),o=Object.assign(Object.assign({},a),{timeUnit:s});return new Ya(t,{[Ke(o)]:o})}merge(t){this.formula=Object.assign({},this.formula);for(const n in t.formula)this.formula[n]||(this.formula[n]=t.formula[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of Su(this.formula))t.has(r.as)||(n[i]=r);this.formula=n}producedFields(){return new Set(ai(this.formula).map(t=>t.as))}dependentFields(){return new Set(ai(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${Ke(this.formula)}`}assemble(){const t=[];for(const n of ai(this.formula)){const{field:i,as:r,timeUnit:a}=n,s=Ci(a),{unit:o,utc:l}=s,f=LN(s,["unit","utc"]);t.push(Object.assign(Object.assign(Object.assign(Object.assign({field:Hr(i),type:"timeunit"},o?{units:K$(o)}:{}),l?{timezone:"utc"}:{}),f),{as:[r,`${r}_end`]}))}return t}}var q2e=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const zp="_tuple_fields";class H2e{constructor(...t){this.items=t,this.hasChannel={},this.hasField={}}}const G2e={defined:()=>!0,parse:(e,t,n)=>{var i;const r=t.name,a=(i=t.project)!==null&&i!==void 0?i:t.project=new H2e,s={},o={},l=new Set,f=(x,E)=>{const A=E==="visual"?x.channel:x.field;let S=Bt(`${r}_${A}`);for(let w=1;l.has(S);w++)S=Bt(`${r}_${A}_${w}`);return l.add(S),{[E]:S}},d=t.type,g=e.config.selection[d],p=n.value!==void 0?Wt(n.value):null;let{fields:y,encodings:v}=Dt(n.select)?n.select:{};if(!y&&!v&&p){for(const x of p)if(Dt(x))for(const E of ue(x))X1e(E)?(v||(v=[])).push(E):d==="interval"?(ce(Cye),v=g.encodings):(y||(y=[])).push(E)}!y&&!v&&(v=g.encodings,"fields"in g&&(y=g.fields));for(const x of v??[]){const E=e.fieldDef(x);if(E){let A=E.field;if(E.aggregate){ce(bye(x,E.aggregate));continue}else if(!A){ce(fN(x));continue}if(E.timeUnit){A=e.vgField(x);const S={timeUnit:E.timeUnit,as:A,field:E.field};o[Ke(S)]=S}if(!s[A]){let S="E";if(d==="interval"){const D=e.getScaleComponent(x).get("type");br(D)&&(S="R")}else E.bin&&(S="R-RE");const w={field:A,channel:x,type:S};w.signals=Object.assign(Object.assign({},f(w,"data")),f(w,"visual")),a.items.push(s[A]=w),a.hasField[A]=a.hasChannel[x]=s[A]}}else ce(fN(x))}for(const x of y??[]){if(a.hasField[x])continue;const E={type:"E",field:x};E.signals=Object.assign({},f(E,"data")),a.items.push(E),a.hasField[x]=E}p&&(t.init=p.map(x=>a.items.map(E=>Dt(x)?x[E.channel]!==void 0?x[E.channel]:x[E.field]:x))),At(o)||(a.timeUnit=new Ya(null,o))},signals:(e,t,n)=>{const i=t.name+zp;return n.filter(a=>a.name===i).length>0?n:n.concat({name:i,value:t.project.items.map(a=>{const{signals:s,hasLegend:o}=a,l=q2e(a,["signals","hasLegend"]);return l.field=Hr(l.field),l})})}},Cu={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!Pu(r))continue;const a=e.getScaleComponent(r),s=a?a.get("type"):void 0;if(!a||!br(s)){ce(_ye);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>n.filter(o=>o.name===s.signals.data).length===0);if(!e.parent||EO(e)||i.length===0)return n;const r=n.filter(s=>s.name===t.name)[0];let a=r.update;if(a.indexOf(IG)>=0)r.update=`{${i.map(s=>`${at(Hr(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const o=`${at(Hr(s.field))}: ${s.signals.data}`;a.includes(o)||(a=`${a.substring(0,a.length-1)}, ${o}}`)}r.update=a}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!EO(e))for(const i of t.scales){const r=n.filter(a=>a.name===i.signals.data)[0];r.push="outer",delete r.value,delete r.update}return n}};function xO(e,t){return`domain(${at(e.scaleName(t))})`}function EO(e){var t;return e.parent&&Zd(e.parent)&&((t=!e.parent.parent)!==null&&t!==void 0?t:EO(e.parent.parent))}var Y2e=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const Yf="_brush",_O="_scale_trigger",X2e={defined:e=>e.type==="interval",signals:(e,t,n)=>{const i=t.name,r=i+zp,a=Cu.defined(t),s=t.init?t.init[0]:null,o=[],l=[];if(t.translate&&!a){const d=`!event.item || event.item.mark.name !== ${at(i+Yf)}`;DG(t,(g,p)=>{var y,v;const x=Wt((y=(v=p.between[0]).filter)!==null&&y!==void 0?y:v.filter=[]);return x.includes(d)||x.push(d),g})}t.project.items.forEach((d,g)=>{const p=d.channel;if(p!==Pt&&p!==vn){ce("Interval selections only support x and y encoding channels.");return}const y=s?s[g]:null,v=V2e(e,t,d,y),x=d.signals.data,E=d.signals.visual,A=at(e.scaleName(p)),S=e.getScaleComponent(p).get("type"),w=br(S)?"+":"";n.push(...v),o.push(x),l.push({scaleName:e.scaleName(p),expr:`(!isArray(${x}) || (${w}invert(${A}, ${E})[0] === ${w}${x}[0] && ${w}invert(${A}, ${E})[1] === ${w}${x}[1]))`})}),!a&&l.length&&n.push({name:i+_O,value:{},on:[{events:l.map(d=>({scale:d.scaleName})),update:`${l.map(d=>d.expr).join(" && ")} ? ${i+_O} : {}`}]});const f=`unit: ${_d(e)}, fields: ${r}, values`;return n.concat(Object.assign(Object.assign({name:i+$u},s?{init:`{${f}: ${Ed(s)}}`}:{}),o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${f}: [${o}]} : null`}]}:{}))},marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,s=r&&r.signals.visual,o=a&&a.signals.visual,l=`data(${at(t.name+oc)})`;if(Cu.defined(t)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${s}[0]`}:{value:0},y:a!==void 0?{signal:`${o}[0]`}:{value:0},x2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const E of ue(f))f[E]=[Object.assign({test:`${l}.length && ${l}[0].unit === ${_d(e)}`},f[E]),{value:0}];const d=t.mark,{fill:g,fillOpacity:p,cursor:y}=d,v=Y2e(d,["fill","fillOpacity","cursor"]),x=ue(v).reduce((E,A)=>(E[A]=[{test:[r!==void 0&&`${s}[0] !== ${s}[1]`,a!==void 0&&`${o}[0] !== ${o}[1]`].filter(S=>S).join(" && "),value:v[A]},{value:null}],E),{});return[{name:`${i+Yf}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:g},fillOpacity:{value:p}},update:f}},...n,{name:i+Yf,type:"rect",clip:!0,encode:{enter:Object.assign(Object.assign({},y?{cursor:{value:y}}:{}),{fill:{value:"transparent"}}),update:Object.assign(Object.assign({},f),x)}}]}};function V2e(e,t,n,i){const r=n.channel,a=n.signals.visual,s=n.signals.data,o=Cu.defined(t),l=at(e.scaleName(r)),f=e.getScaleComponent(r),d=f?f.get("type"):void 0,g=x=>`scale(${l}, ${x})`,p=e.getSizeSignalRef(r===Pt?"width":"height").signal,y=`${r}(unit)`,v=DG(t,(x,E)=>[...x,{events:E.between[0],update:`[${y}, ${y}]`},{events:E,update:`[${a}[0], clamp(${y}, 0, ${p})]`}]);return v.push({events:{signal:t.name+_O},update:br(d)?`[${g(`${s}[0]`)}, ${g(`${s}[1]`)}]`:"[0, 0]"}),o?[{name:s,on:[]}]:[Object.assign(Object.assign({name:a},i?{init:Ed(i,!0,g)}:{value:[]}),{on:v}),Object.assign(Object.assign({name:s},i?{init:Ed(i)}:{}),{on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${l}, ${a})`}]})]}function DG(e,t){return e.events.reduce((n,i)=>i.between?t(n,i):(ce(`${i} is not an ordered event stream for interval selections.`),n),[])}const W2e={defined:e=>e.type==="point",signals:(e,t,n)=>{var i;const r=t.name,a=r+zp,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",l=s.items.map(y=>{const v=e.fieldDef(y.channel);return v?.bin?`[${o}[${at(e.vgField(y.channel,{}))}], ${o}[${at(e.vgField(y.channel,{binSuffix:"end"}))}]]`:`${o}[${at(y.field)}]`}).join(", "),f=`unit: ${_d(e)}, fields: ${a}, values`,d=t.events,g=ai((i=e.component.selection)!==null&&i!==void 0?i:{}).reduce((y,v)=>v.type==="interval"?y.concat(v.name+Yf):y,[]).map(y=>`indexof(item().mark.name, '${y}') < 0`).join(" && "),p="datum && item().mark.marktype !== 'group'"+(g?` && ${g}`:"");return n.concat([{name:r+$u,on:d?[{events:d,update:`${p} ? {${f}: [${l}]} : null`,force:!0}]:[]}])}};function Yd(e,t,n,i){const r=Nx(t)&&t.condition,a=i(t);if(r){const o=Wt(r).map(l=>{const f=i(l);if(Dbe(l)){const{param:d,empty:g}=l,p=KG(e,{param:d,empty:g});return Object.assign({test:p},f)}else{const d=Wv(e,l.test);return Object.assign({test:d},f)}});return{[n]:[...o,...a!==void 0?[a]:[]]}}else return a!==void 0?{[n]:a}:{}}function zM(e,t="text"){const n=e.encoding[t];return Yd(e,n,t,i=>Gx(i,e.config))}function Gx(e,t,n="datum"){if(e){if(ya(e))return zt(e.value);if(Be(e)){const{format:i,formatType:r}=Uv(e);return gM({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function $G(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,s=n.tooltip;if(xe(s))return{tooltip:UN({tooltip:s},a,r,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return Yd(e,s,"tooltip",l=>{const f=Gx(l,r,o);if(f)return f;if(l===null)return;let d=pt("tooltip",i,r);if(d===!0&&(d={content:"encoding"}),Le(d))return{value:d};if(Dt(d))return $e(d)?d:d.content==="encoding"?UN(n,a,r,t):{signal:o}})}}function MG(e,t,n,{reactiveGeom:i}={}){const r={},a=i?"datum.datum":"datum",s=[];function o(f,d){const g=Ac(d),p=Xr(f)?f:Object.assign(Object.assign({},f),{type:e[g].type}),y=p.title||xM(p,n),v=Wt(y).join(", ");let x;if(es(d)){const E=d==="x"?"x2":"y2",A=ns(e[E]);if(vi(p.bin)&&A){const S=de(p,{expr:a}),w=de(A,{expr:a}),{format:D,formatType:O}=Uv(p);x=kx(S,w,D,O,n),r[E]=!0}else if(t&&t.fieldChannel===d&&t.offset==="normalize"){const{format:S,formatType:w}=Uv(p);x=gM({fieldOrDatumDef:p,format:S,formatType:w,expr:a,config:n,normalizeStack:!0}).signal}}x??(x=Gx(p,n,a).signal),s.push({channel:d,key:v,value:x})}AM(e,(f,d)=>{he(f)?o(f,d):jx(f)&&o(f.condition,d)});const l={};for(const{channel:f,key:d,value:g}of s)!r[f]&&!l[d]&&(l[d]=g);return l}function UN(e,t,n,{reactiveGeom:i}={}){const r=MG(e,t,n,{reactiveGeom:i}),a=Su(r).map(([s,o])=>`"${s}": ${o}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function Q2e(e){const{markDef:t,config:n}=e,i=pt("aria",t,n);return i===!1?{}:Object.assign(Object.assign(Object.assign({},i?{aria:i}:{}),Z2e(e)),K2e(e))}function Z2e(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=pt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:t in mye?{}:{ariaRoleDescription:{value:t}}}function K2e(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return Yd(e,a,"description",l=>Gx(l,e.config));const s=pt("description",n,i);if(s!=null)return{description:zt(s)};if(i.aria===!1)return{};const o=MG(t,r,i);if(!At(o))return{description:{signal:Su(o).map(([l,f],d)=>`"${d>0?"; ":""}${l}: " + (${f})`).join(" + ")}}}function On(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:s}=n;let{defaultRef:o,defaultValue:l}=n;o===void 0&&(l??(l=pt(e,i,a,{vgChannel:s,ignoreVgConfig:!0})),l!==void 0&&(o=zt(l)));const f=r[e];return Yd(t,f,s??e,d=>vH({channel:e,channelDef:d,markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:o}))}function TG(e,t={filled:void 0}){var n,i,r,a;const{markDef:s,encoding:o,config:l}=e,{type:f}=s,d=(n=t.filled)!==null&&n!==void 0?n:pt("filled",s,l),g=Ge(["bar","point","circle","square","geoshape"],f)?"transparent":void 0,p=(r=(i=pt(d===!0?"color":void 0,s,l,{vgChannel:"fill"}))!==null&&i!==void 0?i:l.mark[d===!0&&"color"])!==null&&r!==void 0?r:g,y=(a=pt(d===!1?"color":void 0,s,l,{vgChannel:"stroke"}))!==null&&a!==void 0?a:l.mark[d===!1&&"color"],v=d?"fill":"stroke",x=Object.assign(Object.assign({},p?{fill:zt(p)}:{}),y?{stroke:zt(y)}:{});return s.color&&(d?s.fill:s.stroke)&&ce(Vq("property",{fill:"fill"in s,stroke:"stroke"in s})),Object.assign(Object.assign(Object.assign(Object.assign({},x),On("color",e,{vgChannel:v,defaultValue:d?p:y})),On("fill",e,{defaultValue:o.fill?p:void 0})),On("stroke",e,{defaultValue:o.stroke?y:void 0}))}function J2e(e){const{encoding:t,mark:n}=e,i=t.order;return!Hu(n)&&ya(i)?Yd(e,i,"zindex",r=>zt(r.value)):{}}function Ug(e,t){const n=W1e(e),i=t[n];if(i)return i}function Jn(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:s,stack:o}=t,l=r[e],f=r[go(e)],d=t.scaleName(e),g=t.getScaleComponent(e),p=Ug(e,a),y=BM({model:t,defaultPos:n,channel:e,scaleName:d,scale:g}),v=!l&&es(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:eEe({channel:e,channelDef:l,channel2Def:f,markDef:a,config:s,scaleName:d,scale:g,stack:o,offset:p,defaultRef:y});return v?{[i||e]:v}:void 0}function eEe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:s}=e;if(Be(n)&&r&&t===r.fieldChannel){if(he(n)){let o=n.bandPosition;if(o===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(o=.5),o!==void 0)return Bv({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:a})}return Ul(n,i,{suffix:"end"},{offset:a})}return dM(e)}function BM({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:s}=e;return()=>{const o=Ac(n),l=wu(n),f=pt(n,a,s,{vgChannel:l});if(f!==void 0)return sg(n,f);switch(t){case"zeroOrMin":case"zeroOrMax":if(i){const d=r.get("type");if(!Ge([dn.LOG,dn.TIME,dn.UTC],d)){if(r.domainDefinitelyIncludesZero())return{scale:i,value:0}}}if(t==="zeroOrMin")return o==="y"?{field:{group:"height"}}:{value:0};switch(o){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const d=e[Yr(n)];return Object.assign(Object.assign({},d),{mult:.5})}}}}const tEe={left:"x",center:"xc",right:"x2"},nEe={top:"y",middle:"yc",bottom:"y2"};function kG(e,t,n,i="middle"){if(e==="radius"||e==="theta")return wu(e);const r=e==="x"?"align":"baseline",a=pt(r,t,n);let s;return $e(a)?(ce(Gye(r)),s=void 0):s=a,e==="x"?tEe[s||(i==="top"?"left":"center")]:nEe[s||i]}function Yv(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?FG(e,t,{defaultPos:n,defaultPos2:i}):Jn(e,t,{defaultPos:n})}function FG(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,s=go(e),o=Yr(e),l=iEe(t,i,s),f=l[o]?kG(e,r,a):wu(e);return Object.assign(Object.assign({},Jn(e,t,{defaultPos:n,vgChannel:f})),l)}function iEe(e,t,n){const{encoding:i,mark:r,markDef:a,stack:s,config:o}=e,l=Ac(n),f=Yr(n),d=wu(n),g=i[l],p=e.scaleName(l),y=e.getScaleComponent(l),v=n in i||n in a?Ug(n,e.markDef):Ug(l,e.markDef);if(!g&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const E=Yr(n),A=e.markDef[E];return A!=null?{[E]:{value:A}}:{[d]:{field:e.getName(n)}}}const x=rEe({channel:n,channelDef:g,channel2Def:i[n],markDef:a,config:o,scaleName:p,scale:y,stack:s,offset:v,defaultRef:void 0});return x!==void 0?{[d]:x}:N1(n,a)||N1(n,{[n]:Nv(n,a,o.style),[f]:Nv(f,a,o.style)})||N1(n,o[r])||N1(n,o.mark)||{[d]:BM({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function rEe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:f}){return Be(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?Ul(t,a,{suffix:"start"},{offset:l}):dM({channel:e,channelDef:n,scaleName:a,scale:s,stack:o,markDef:i,config:r,offset:l,defaultRef:f})}function N1(e,t){const n=Yr(e),i=wu(e);if(t[i]!==void 0)return{[i]:sg(e,t[i])};if(t[e]!==void 0)return{[i]:sg(e,t[e])};if(t[n]){const r=t[n];if(Hd(r))ce(Lye(n));else return{[n]:sg(e,r)}}}function Du(e,t,n){var i,r,a,s;const{config:o,encoding:l,markDef:f}=e,d=go(t),g=Yr(t),p=l[t],y=l[d],v=e.getScaleComponent(t),x=v?v.get("type"):void 0,E=e.scaleName(t),A=f.orient,S=(r=(i=l[g])!==null&&i!==void 0?i:l.size)!==null&&r!==void 0?r:pt("size",f,o,{vgChannel:g}),w=n==="bar"&&(t==="x"?A==="vertical":A==="horizontal");if(he(p)&&(kt(p.bin)||vi(p.bin)||p.timeUnit&&!y)&&!(S&&!Hd(S))&&!li(x)){const D=DH({channel:t,fieldDef:p,markDef:f,config:o,scaleType:x}),O=(a=e.component.axes[t])===null||a===void 0?void 0:a[0],M=(s=O?.get("translate"))!==null&&s!==void 0?s:.5;return oEe({fieldDef:p,fieldDef2:y,channel:t,markDef:f,scaleName:E,bandSize:D,axisTranslate:M,spacing:es(t)?pt("binSpacing",f,o):void 0,reverse:v.get("reverse"),config:o})}else return(Be(p)&&li(x)||w)&&!y?sEe(p,t,e):FG(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function aEe(e,t,n,i,r){if(Hd(r))if(n){const s=n.get("type");if(s==="band")return{scale:t,band:r.band};r.band!==1&&(ce(Wye(s)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if($e(r))return r;if(r)return{value:r}}if(n){const s=n.get("range");if(qu(s)&&un(s.step))return{value:s.step-2}}return{value:qv(i.view,e)-2}}function sEe(e,t,n){const{markDef:i,encoding:r,config:a,stack:s}=n,o=i.orient,l=n.scaleName(t),f=n.getScaleComponent(t),d=Yr(t),g=go(t),p=o==="horizontal"&&t==="y"||o==="vertical"&&t==="x";let y;(r.size||i.size)&&(p?y=On("size",n,{vgChannel:d,defaultRef:zt(i.size)}):ce(Jye(i.type)));const v=DH({channel:t,fieldDef:e,markDef:i,config:a,scaleType:f?.get("type"),useVlSizeChannel:p});y=y||{[d]:aEe(d,l,f,a,v)};const x=f?.get("type")!=="band"||!("band"in y[d])?"middle":"top",E=kG(t,i,a,x),A=E==="xc"||E==="yc",S=Ug(t,i),w=dM({channel:t,channelDef:e,markDef:i,config:a,scaleName:l,scale:f,stack:s,offset:S,defaultRef:BM({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:f}),bandPosition:A?.5:$e(v)?{signal:`(1-${v})/2`}:Hd(v)?(1-v.band)/2:0});if(d)return Object.assign({[E]:w},y);{const D=wu(g),O=y[d],M=S?Object.assign(Object.assign({},O),{offset:S}):O;return{[E]:w,[D]:xe(w)?[w[0],Object.assign(Object.assign({},w[1]),{offset:M})]:Object.assign(Object.assign({},w),{offset:M})}}}function v0(e,t,n,i,r){if($q(e))return 0;const a=e==="x"||e==="y2"?-t/2:t/2;if($e(n)||$e(r)||$e(i)){const s=to(n),o=to(r),l=to(i),f=l?`${l} + `:"",d=s?`(${s} ? -1 : 1) * `:"",g=o?`(${o} + ${a})`:a;return{signal:f+d+g}}else return r=r||0,i+(n?-r-a:+r+a)}function oEe({fieldDef:e,fieldDef2:t,channel:n,bandSize:i,scaleName:r,markDef:a,spacing:s=0,axisTranslate:o,reverse:l,config:f}){const d=go(n),g=wu(n),p=wu(d),y=Ug(n,a),v=$e(i)?{signal:`(1-${i.signal})/2`}:Hd(i)?(1-i.band)/2:.5;if(kt(e.bin)||e.timeUnit)return{[p]:PN({channel:n,fieldDef:e,scaleName:r,markDef:a,bandPosition:v,offset:v0(d,s,l,o,y),config:f}),[g]:PN({channel:n,fieldDef:e,scaleName:r,markDef:a,bandPosition:$e(v)?{signal:`1-${v.signal}`}:1-v,offset:v0(n,s,l,o,y),config:f})};if(vi(e.bin)){const x=Ul(e,r,{},{offset:v0(d,s,l,o,y)});if(he(t))return{[p]:x,[g]:Ul(t,r,{},{offset:v0(n,s,l,o,y)})};if(Sc(e.bin)&&e.bin.step)return{[p]:x,[g]:{signal:`scale("${r}", ${de(e,{expr:"datum"})} + ${e.bin.step})`,offset:v0(n,s,l,o,y)}}}ce(Zq(d))}function PN({channel:e,fieldDef:t,scaleName:n,markDef:i,bandPosition:r,offset:a,config:s}){const o=Bv({scaleName:n,fieldOrDatumDef:t,bandPosition:r,offset:a});return yH({fieldDef:t,channel:e,markDef:i,ref:o,config:s})}const uEe=new Set(["aria","width","height"]);function Wr(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?TG(e):{};return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},lEe(e.markDef,t)),IN(e,"fill",n)),IN(e,"stroke",i)),On("opacity",e)),On("fillOpacity",e)),On("strokeOpacity",e)),On("strokeWidth",e)),On("strokeDash",e)),J2e(e)),$G(e)),zM(e,"href")),Q2e(e))}function IN(e,t,n){const{config:i,mark:r,markDef:a}=e;if(pt("invalid",a,i)==="hide"&&n&&!Hu(r)){const o=cEe(e,{invalid:!0,channels:wx});if(o)return{[t]:[{test:o,value:null},...Wt(n)]}}return n?{[t]:n}:{}}function lEe(e,t){return pye.reduce((n,i)=>(!uEe.has(i)&&e[i]!==void 0&&t[i]!=="ignore"&&(n[i]=zt(e[i])),n),{})}function cEe(e,{invalid:t=!1,channels:n}){const i=n.reduce((a,s)=>{const o=e.getScaleComponent(s);if(o){const l=o.get("type"),f=e.vgField(s,{expr:"datum"});f&&br(l)&&(a[f]=!0)}return a},{}),r=ue(i);if(r.length>0){const a=t?"||":"&&";return r.map(s=>hM(s,t)).join(` ${a} `)}}function LM(e){const{config:t,markDef:n}=e;if(pt("invalid",n,t)){const r=fEe(e,{channels:ms});if(r)return{defined:{signal:r}}}return{}}function fEe(e,{invalid:t=!1,channels:n}){const i=n.reduce((a,s)=>{const o=e.getScaleComponent(s);if(o){const l=o.get("type"),f=e.vgField(s,{expr:"datum"});f&&br(l)&&(a[f]=!0)}return a},{}),r=ue(i);if(r.length>0){const a=t?"||":"&&";return r.map(s=>hM(s,t)).join(` ${a} `)}}function qN(e,t){if(t!==void 0)return{[e]:zt(t)}}const HA="voronoi",RG={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(HA)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(Hu(a))return ce(xye(a)),n;const s={name:e.getName(HA),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:Object.assign({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},$G(e,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,l=!1;return n.forEach((f,d)=>{var g;const p=(g=f.name)!==null&&g!==void 0?g:"";p===e.component.mark[0].name?o=d:p.indexOf(HA)>=0&&(l=!0)}),l||n.splice(o+1,0,s),n}},NG={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!$M(e.bind),parse:(e,t,n)=>qG(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,s=t.init&&t.init[0],o=RG.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,f)=>{var d,g;const p=Bt(`${i}_${l.field}`);n.filter(v=>v.name===p).length||n.unshift(Object.assign(Object.assign({name:p},s?{init:Ed(s[f])}:{value:null}),{on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${at(l.field)}] : null`}]:[],bind:(g=(d=a[l.field])!==null&&d!==void 0?d:a[l.channel])!==null&&g!==void 0?g:a}))}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.filter(f=>f.name===i+$u)[0],s=i+zp,o=r.items.map(f=>Bt(`${i}_${f.field}`)),l=o.map(f=>`${f} !== null`).join(" && ");return o.length&&(a.update=`${l} ? {fields: ${s}, values: [${o.join(", ")}]} : null`),delete a.value,delete a.on,n}},Xv="_toggle",jG={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Xv,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+$u,i=t.name+Xv;return`${i} ? null : ${n}, `+(t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${_d(e)}}, `)+`${i} ? ${n} : null`}},dEe={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Le(t.clear)?Gd(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(NG.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Bt(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(s=>s.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const s=n.findIndex(o=>o.name===r.signals.data);i(s,"null")}}else{let r=n.findIndex(a=>a.name===t.name+$u);i(r,"null"),jG.defined(t)&&(r=n.findIndex(a=>a.name===t.name+Xv),i(r,"false"))}return n}},zG={defined:e=>{const t=e.resolve==="global"&&e.bind&&$M(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==zg;return t&&!n&&ce(Aye),t&&n},parse:(e,t,n)=>{var i;const r=Ue(n);if(r.select=Le(r.select)?{type:r.select,toggle:t.toggle}:Object.assign(Object.assign({},r.select),{toggle:t.toggle}),qG(t,r),je(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const l of t.events)l.filter=Wt((i=l.filter)!==null&&i!==void 0?i:[]),l.filter.includes(o)||l.filter.push(o)}const a=PA(t.bind)?t.bind.legend:"click",s=Le(a)?Gd(a,"view"):Wt(a);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=PA(t.bind)&&t.bind.legend,a=s=>o=>{const l=Ue(o);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const o=`${Bt(s.field)}_legend`,l=`${i}_${o}`;if(n.filter(d=>d.name===l).length===0){const d=r.merge.map(a(`${o}_symbols`)).concat(r.merge.map(a(`${o}_labels`))).concat(r.merge.map(a(`${o}_entries`)));n.unshift(Object.assign(Object.assign({name:l},t.init?{}:{value:null}),{on:[{events:d,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]}))}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+$u),s=i+zp,o=r.items.filter(p=>p.hasLegend).map(p=>Bt(`${i}_${Bt(p.field)}_legend`)),f=`${o.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?a.on.push({events:o.map(p=>({signal:p})),update:f}):o.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(p=>p.name===i+Xv),g=PA(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push(Object.assign(Object.assign({},d.on[0]),{events:g})):d.on[0].events=g),n}};function hEe(e,t,n){var i,r,a,s;const o=(i=e.fieldDef(t))===null||i===void 0?void 0:i.field;for(const l of ai((r=e.component.selection)!==null&&r!==void 0?r:{})){const f=(a=l.project.hasField[o])!==null&&a!==void 0?a:l.project.hasChannel[t];if(f&&zG.defined(l)){const d=(s=n.get("selections"))!==null&&s!==void 0?s:[];d.push(l.name),n.set("selections",d,!1),f.hasLegend=!0}}}const BG="_translate_anchor",LG="_translate_delta",gEe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=Cu.defined(t),a=i+BG,{x:s,y:o}=t.project.hasChannel;let l=Gd(t.translate,"scope");return r||(l=l.map(f=>(f.between[0].markname=i+Yf,f))),n.push({name:a,value:{},on:[{events:l.map(f=>f.between[0]),update:"{x: x(unit), y: y(unit)"+(s!==void 0?`, extent_x: ${r?xO(e,Pt):`slice(${s.signals.visual})`}`:"")+(o!==void 0?`, extent_y: ${r?xO(e,vn):`slice(${o.signals.visual})`}`:"")+"}"}]},{name:i+LG,value:{},on:[{events:l,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),s!==void 0&&HN(e,t,s,"width",n),o!==void 0&&HN(e,t,o,"height",n),n}};function HN(e,t,n,i,r){var a,s;const o=t.name,l=o+BG,f=o+LG,d=n.channel,g=Cu.defined(t),p=r.filter(C=>C.name===n.signals[g?"data":"visual"])[0],y=e.getSizeSignalRef(i).signal,v=e.getScaleComponent(d),x=v.get("type"),E=v.get("reverse"),A=g?d===Pt?E?"":"-":E?"-":"":"",S=`${l}.extent_${d}`,w=`${A}${f}.${d} / ${g?`${y}`:`span(${S})`}`,D=g?x==="log"?"panLog":x==="symlog"?"panSymlog":x==="pow"?"panPow":"panLinear":"panLinear",O=g?x==="pow"?`, ${(a=v.get("exponent"))!==null&&a!==void 0?a:1}`:x==="symlog"?`, ${(s=v.get("constant"))!==null&&s!==void 0?s:1}`:"":"",M=`${D}(${S}, ${w}${O})`;p.on.push({events:{signal:f},update:g?M:`clampRange(${M}, 0, ${y})`})}const UG="_zoom_anchor",PG="_zoom_delta",pEe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=Cu.defined(t),a=i+PG,{x:s,y:o}=t.project.hasChannel,l=at(e.scaleName(Pt)),f=at(e.scaleName(vn));let d=Gd(t.zoom,"scope");return r||(d=d.map(g=>(g.markname=i+Yf,g))),n.push({name:i+UG,on:[{events:d,update:r?"{"+[l?`x: invert(${l}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(g=>!!g).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&GN(e,t,s,"width",n),o!==void 0&&GN(e,t,o,"height",n),n}};function GN(e,t,n,i,r){var a,s;const o=t.name,l=n.channel,f=Cu.defined(t),d=r.filter(D=>D.name===n.signals[f?"data":"visual"])[0],g=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(l),y=p.get("type"),v=f?xO(e,l):d.name,x=o+PG,E=`${o}${UG}.${l}`,A=f?y==="log"?"zoomLog":y==="symlog"?"zoomSymlog":y==="pow"?"zoomPow":"zoomLinear":"zoomLinear",S=f?y==="pow"?`, ${(a=p.get("exponent"))!==null&&a!==void 0?a:1}`:y==="symlog"?`, ${(s=p.get("constant"))!==null&&s!==void 0?s:1}`:"":"",w=`${A}(${v}, ${E}, ${x}${S})`;d.on.push({events:{signal:x},update:f?w:`clampRange(${w}, 0, ${g})`})}const oc="_store",$u="_tuple",mEe="_modify",IG="vlSelectionResolve",Yx=[W2e,X2e,G2e,jG,NG,Cu,zG,dEe,gEe,pEe,RG];function yEe(e){let t=e.parent;for(;t&&!ha(t);)t=t.parent;return t}function _d(e,{escape:t}={escape:!0}){let n=t?at(e.name):e.name;const i=yEe(e);if(i){const{facet:r}=i;for(const a of jr)r[a]&&(n+=` + '__facet_${a}_' + (facet[${at(i.vgField(a))}])`)}return n}function UM(e){var t;return ai((t=e.component.selection)!==null&&t!==void 0?t:{}).reduce((n,i)=>n||i.project.items.some(r=>r.field===zg),!1)}function qG(e,t){(tt(t.select)||!t.select.on)&&delete e.events,(tt(t.select)||!t.select.clear)&&delete e.clear,(tt(t.select)||!t.select.toggle)&&delete e.toggle}function Xd(e,t,n){return e.fields=t||[],e.fname=n,e}function vEe(e){return e.length===1?bEe(e[0]):xEe(e)}const bEe=e=>function(t){return t[e]},xEe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function GA(e){throw Error(e)}function EEe(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function f(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)f(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?f():s=o+1:l==="["?(o>s&&f(),r=s=o+1):l==="]"&&(r||GA("Access path missing open bracket: "+e),r>0&&f(),r=0,s=o+1)}return r&&GA("Access path missing closing bracket: "+e),i&&GA("Access path missing closing quote: "+e),o>s&&(o++,f()),t}function _Ee(e,t,n){const i=EEe(e);return e=i.length===1?i[0]:e,Xd(vEe(i),[e],e)}_Ee("id");Xd(e=>e,[],"identity");Xd(()=>0,[],"zero");Xd(()=>1,[],"one");Xd(()=>!0,[],"true");Xd(()=>!1,[],"false");const AEe="RawCode",SEe="Literal",wEe="Property",OEe="Identifier",CEe="ArrayExpression",DEe="BinaryExpression",$Ee="CallExpression",MEe="ConditionalExpression",TEe="LogicalExpression",kEe="MemberExpression",FEe="ObjectExpression",REe="UnaryExpression";function Sa(e){this.type=e}Sa.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=NEe(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function NEe(e){switch(e.type){case CEe:return e.elements;case DEe:case TEe:return[e.left,e.right];case $Ee:return[e.callee].concat(e.arguments);case MEe:return[e.test,e.consequent,e.alternate];case kEe:return[e.object,e.property];case FEe:return e.properties;case wEe:return[e.key,e.value];case REe:return[e.argument];case OEe:case SEe:case AEe:default:return[]}}var ys,be,te,si,bt,Xx=1,Bp=2,uc=3,Yu=4,Vx=5,Cc=6,zi=7,Lp=8,jEe=9;ys={};ys[Xx]="Boolean";ys[Bp]="<end>";ys[uc]="Identifier";ys[Yu]="Keyword";ys[Vx]="Null";ys[Cc]="Numeric";ys[zi]="Punctuator";ys[Lp]="String";ys[jEe]="RegularExpression";var zEe="ArrayExpression",BEe="BinaryExpression",LEe="CallExpression",UEe="ConditionalExpression",HG="Identifier",PEe="Literal",IEe="LogicalExpression",qEe="MemberExpression",HEe="ObjectExpression",GEe="Property",YEe="UnaryExpression",kn="Unexpected token %0",XEe="Unexpected number",VEe="Unexpected string",WEe="Unexpected identifier",QEe="Unexpected reserved word",ZEe="Unexpected end of input",AO="Invalid regular expression",YA="Invalid regular expression: missing /",GG="Octal literals are not allowed in strict mode.",KEe="Duplicate data property in object literal not allowed in strict mode",Ln="ILLEGAL",Pg="Disabled.",JEe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),e_e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Wx(e,t){if(!e)throw new Error("ASSERT: "+t)}function Ps(e){return e>=48&&e<=57}function PM(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function ug(e){return"01234567".indexOf(e)>=0}function t_e(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function Ig(e){return e===10||e===13||e===8232||e===8233}function Up(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&JEe.test(String.fromCharCode(e))}function Vv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&e_e.test(String.fromCharCode(e))}const n_e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function YG(){for(;te<si;){const e=be.charCodeAt(te);if(t_e(e)||Ig(e))++te;else break}}function SO(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)te<si&&PM(be[te])?(i=be[te++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):ut({},kn,Ln);return String.fromCharCode(r)}function i_e(){var e,t,n,i;for(e=be[te],t=0,e==="}"&&ut({},kn,Ln);te<si&&(e=be[te++],!!PM(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ut({},kn,Ln),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function XG(){var e,t;for(e=be.charCodeAt(te++),t=String.fromCharCode(e),e===92&&(be.charCodeAt(te)!==117&&ut({},kn,Ln),++te,e=SO("u"),(!e||e==="\\"||!Up(e.charCodeAt(0)))&&ut({},kn,Ln),t=e);te<si&&(e=be.charCodeAt(te),!!Vv(e));)++te,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),be.charCodeAt(te)!==117&&ut({},kn,Ln),++te,e=SO("u"),(!e||e==="\\"||!Vv(e.charCodeAt(0)))&&ut({},kn,Ln),t+=e);return t}function r_e(){var e,t;for(e=te++;te<si;){if(t=be.charCodeAt(te),t===92)return te=e,XG();if(Vv(t))++te;else break}return be.slice(e,te)}function a_e(){var e,t,n;return e=te,t=be.charCodeAt(te)===92?XG():r_e(),t.length===1?n=uc:n_e.hasOwnProperty(t)?n=Yu:t==="null"?n=Vx:t==="true"||t==="false"?n=Xx:n=uc,{type:n,value:t,start:e,end:te}}function XA(){var e=te,t=be.charCodeAt(te),n,i=be[te],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++te,{type:zi,value:String.fromCharCode(t),start:e,end:te};default:if(n=be.charCodeAt(te+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return te+=2,{type:zi,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:te};case 33:case 61:return te+=2,be.charCodeAt(te)===61&&++te,{type:zi,value:be.slice(e,te),start:e,end:te}}}if(s=be.substr(te,4),s===">>>=")return te+=4,{type:zi,value:s,start:e,end:te};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return te+=3,{type:zi,value:a,start:e,end:te};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".indexOf(i)>=0||r==="=>")return te+=2,{type:zi,value:r,start:e,end:te};if(r==="//"&&ut({},kn,Ln),"<>=!+-*%&|^/".indexOf(i)>=0)return++te,{type:zi,value:i,start:e,end:te};ut({},kn,Ln)}function s_e(e){let t="";for(;te<si&&PM(be[te]);)t+=be[te++];return t.length===0&&ut({},kn,Ln),Up(be.charCodeAt(te))&&ut({},kn,Ln),{type:Cc,value:parseInt("0x"+t,16),start:e,end:te}}function o_e(e){let t="0"+be[te++];for(;te<si&&ug(be[te]);)t+=be[te++];return(Up(be.charCodeAt(te))||Ps(be.charCodeAt(te)))&&ut({},kn,Ln),{type:Cc,value:parseInt(t,8),octal:!0,start:e,end:te}}function YN(){var e,t,n;if(n=be[te],Wx(Ps(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=te,e="",n!=="."){if(e=be[te++],n=be[te],e==="0"){if(n==="x"||n==="X")return++te,s_e(t);if(ug(n))return o_e(t);n&&Ps(n.charCodeAt(0))&&ut({},kn,Ln)}for(;Ps(be.charCodeAt(te));)e+=be[te++];n=be[te]}if(n==="."){for(e+=be[te++];Ps(be.charCodeAt(te));)e+=be[te++];n=be[te]}if(n==="e"||n==="E")if(e+=be[te++],n=be[te],(n==="+"||n==="-")&&(e+=be[te++]),Ps(be.charCodeAt(te)))for(;Ps(be.charCodeAt(te));)e+=be[te++];else ut({},kn,Ln);return Up(be.charCodeAt(te))&&ut({},kn,Ln),{type:Cc,value:parseFloat(e),start:t,end:te}}function u_e(){var e="",t,n,i,r,a=!1;for(t=be[te],Wx(t==="'"||t==='"',"String literal must starts with a quote"),n=te,++te;te<si;)if(i=be[te++],i===t){t="";break}else if(i==="\\")if(i=be[te++],!i||!Ig(i.charCodeAt(0)))switch(i){case"u":case"x":be[te]==="{"?(++te,e+=i_e()):e+=SO(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:ug(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),te<si&&ug(be[te])&&(a=!0,r=r*8+"01234567".indexOf(be[te++]),"0123".indexOf(i)>=0&&te<si&&ug(be[te])&&(r=r*8+"01234567".indexOf(be[te++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&be[te]===`
`&&++te;else{if(Ig(i.charCodeAt(0)))break;e+=i}return t!==""&&ut({},kn,Ln),{type:Lp,value:e,octal:a,start:n,end:te}}function l_e(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";ut({},AO)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ut({},AO)}try{return new RegExp(e,t)}catch{return null}}function c_e(){var e,t,n,i,r;for(e=be[te],Wx(e==="/","Regular expression literal must start with a slash"),t=be[te++],n=!1,i=!1;te<si;)if(e=be[te++],t+=e,e==="\\")e=be[te++],Ig(e.charCodeAt(0))&&ut({},YA),t+=e;else if(Ig(e.charCodeAt(0)))ut({},YA);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||ut({},YA),r=t.substr(1,t.length-2),{value:r,literal:t}}function f_e(){var e,t,n;for(t="",n="";te<si&&(e=be[te],!!Vv(e.charCodeAt(0)));)++te,e==="\\"&&te<si?ut({},kn,Ln):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ut({},AO,n),{value:n,literal:t}}function d_e(){var e,t,n,i;return bt=null,YG(),e=te,t=c_e(),n=f_e(),i=l_e(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:te}}function h_e(e){return e.type===uc||e.type===Yu||e.type===Xx||e.type===Vx}function VG(){if(YG(),te>=si)return{type:Bp,start:te,end:te};const e=be.charCodeAt(te);return Up(e)?a_e():e===40||e===41||e===59?XA():e===39||e===34?u_e():e===46?Ps(be.charCodeAt(te+1))?YN():XA():Ps(e)?YN():XA()}function Pi(){const e=bt;return te=e.end,bt=VG(),te=e.end,e}function WG(){const e=te;bt=VG(),te=e}function g_e(e){const t=new Sa(zEe);return t.elements=e,t}function XN(e,t,n){const i=new Sa(e==="||"||e==="&&"?IEe:BEe);return i.operator=e,i.left=t,i.right=n,i}function p_e(e,t){const n=new Sa(LEe);return n.callee=e,n.arguments=t,n}function m_e(e,t,n){const i=new Sa(UEe);return i.test=e,i.consequent=t,i.alternate=n,i}function IM(e){const t=new Sa(HG);return t.name=e,t}function H0(e){const t=new Sa(PEe);return t.value=e.value,t.raw=be.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function VN(e,t,n){const i=new Sa(qEe);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function y_e(e){const t=new Sa(HEe);return t.properties=e,t}function WN(e,t,n){const i=new Sa(GEe);return i.key=t,i.value=n,i.kind=e,i}function v_e(e,t){const n=new Sa(YEe);return n.operator=e,n.argument=t,n.prefix=!0,n}function ut(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(Wx(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=te,n.description=r,n}function Qx(e){e.type===Bp&&ut(e,ZEe),e.type===Cc&&ut(e,XEe),e.type===Lp&&ut(e,VEe),e.type===uc&&ut(e,WEe),e.type===Yu&&ut(e,QEe),ut(e,kn,e.value)}function oi(e){const t=Pi();(t.type!==zi||t.value!==e)&&Qx(t)}function Rt(e){return bt.type===zi&&bt.value===e}function VA(e){return bt.type===Yu&&bt.value===e}function b_e(){const e=[];for(te=bt.start,oi("[");!Rt("]");)Rt(",")?(Pi(),e.push(null)):(e.push(lc()),Rt("]")||oi(","));return Pi(),g_e(e)}function QN(){te=bt.start;const e=Pi();return e.type===Lp||e.type===Cc?(e.octal&&ut(e,GG),H0(e)):IM(e.value)}function x_e(){var e,t,n,i;if(te=bt.start,e=bt,e.type===uc)return n=QN(),oi(":"),i=lc(),WN("init",n,i);if(e.type===Bp||e.type===zi)Qx(e);else return t=QN(),oi(":"),i=lc(),WN("init",t,i)}function E_e(){var e=[],t,n,i,r={},a=String;for(te=bt.start,oi("{");!Rt("}");)t=x_e(),t.key.type===HG?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?ut({},KEe):r[i]=!0,e.push(t),Rt("}")||oi(",");return oi("}"),y_e(e)}function __e(){oi("(");const e=qM();return oi(")"),e}const A_e={if:1};function S_e(){var e,t,n;if(Rt("("))return __e();if(Rt("["))return b_e();if(Rt("{"))return E_e();if(e=bt.type,te=bt.start,e===uc||A_e[bt.value])n=IM(Pi().value);else if(e===Lp||e===Cc)bt.octal&&ut(bt,GG),n=H0(Pi());else{if(e===Yu)throw new Error(Pg);e===Xx?(t=Pi(),t.value=t.value==="true",n=H0(t)):e===Vx?(t=Pi(),t.value=null,n=H0(t)):Rt("/")||Rt("/=")?(n=H0(d_e()),WG()):Qx(Pi())}return n}function w_e(){const e=[];if(oi("("),!Rt(")"))for(;te<si&&(e.push(lc()),!Rt(")"));)oi(",");return oi(")"),e}function O_e(){te=bt.start;const e=Pi();return h_e(e)||Qx(e),IM(e.value)}function C_e(){return oi("."),O_e()}function D_e(){oi("[");const e=qM();return oi("]"),e}function $_e(){var e,t,n;for(e=S_e();;)if(Rt("."))n=C_e(),e=VN(".",e,n);else if(Rt("("))t=w_e(),e=p_e(e,t);else if(Rt("["))n=D_e(),e=VN("[",e,n);else break;return e}function ZN(){const e=$_e();if(bt.type===zi&&(Rt("++")||Rt("--")))throw new Error(Pg);return e}function yy(){var e,t;if(bt.type!==zi&&bt.type!==Yu)t=ZN();else{if(Rt("++")||Rt("--"))throw new Error(Pg);if(Rt("+")||Rt("-")||Rt("~")||Rt("!"))e=Pi(),t=yy(),t=v_e(e.value,t);else{if(VA("delete")||VA("void")||VA("typeof"))throw new Error(Pg);t=ZN()}}return t}function KN(e){let t=0;if(e.type!==zi&&e.type!==Yu)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function M_e(){var e,t,n,i,r,a,s,o,l,f;if(e=bt,l=yy(),i=bt,r=KN(i),r===0)return l;for(i.prec=r,Pi(),t=[e,bt],s=yy(),a=[l,i,s];(r=KN(bt))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,l=a.pop(),t.pop(),n=XN(o,l,s),a.push(n);i=Pi(),i.prec=r,a.push(i),t.push(bt),n=yy(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=XN(a[f-1].value,a[f-2],n),f-=2;return n}function lc(){var e,t,n;return e=M_e(),Rt("?")&&(Pi(),t=lc(),oi(":"),n=lc(),e=m_e(e,t,n)),e}function qM(){const e=lc();if(Rt(","))throw new Error(Pg);return e}function T_e(e){be=e,te=0,si=be.length,bt=null,WG();const t=qM();if(bt.type!==Bp)throw new Error("Unexpect token after expression.");return t}function wO(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...wO(e.object)),t.push(...wO(e.property))),t)}function QG(e){return e.object.type==="MemberExpression"?QG(e.object):e.object.name==="datum"}function ZG(e){const t=T_e(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&QG(i)&&n.add(wO(i).slice(1).join("."))}),n}class Vd extends wt{constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=Wv(this.model,this.filter,this),this._dependentFields=ZG(this.expr)}clone(){return new Vd(null,this.model,Ue(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function k_e(e,t){var n;const i={},r=e.config.selection;if(!t||!t.length)return i;for(const a of t){const s=Bt(a.name),o=a.select,l=Le(o)?o:o.type,f=Dt(o)?Ue(o):{type:l},d=r[l];for(const p in d)p==="fields"||p==="encodings"||(p==="mark"&&(f[p]=Object.assign(Object.assign({},d[p]),f[p])),(f[p]===void 0||f[p]===!0)&&(f[p]=(n=d[p])!==null&&n!==void 0?n:f[p]));const g=i[s]=Object.assign(Object.assign({},f),{name:s,type:l,init:a.value,bind:a.bind,events:Le(f.on)?Gd(f.on,"scope"):Wt(Ue(f.on))});for(const p of Yx)p.defined(g)&&p.parse&&p.parse(e,g,a)}return i}function KG(e,t,n,i="datum"){const r=Le(t)?t:t.param,a=Bt(r),s=at(a+oc);let o;try{o=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(o.project.timeUnit){const d=n??e.component.data.raw,g=o.project.timeUnit.clone();d.parent?g.insertAsParentOf(d):d.parent=g}const l=`vlSelectionTest(${s}, ${i}${o.resolve==="global"?")":`, ${at(o.resolve)})`}`,f=`length(data(${s}))`;return t.empty===!1?`${f} && ${l}`:`!${f} || ${l}`}function JG(e,t,n){const i=Bt(t),r=n.encoding;let a=n.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=s.project.items[0].field,s.project.items.length>1&&ce(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${at(a)}.`);else if(r&&!a){const o=s.project.items.filter(l=>l.channel===r);!o.length||o.length>1?(a=s.project.items[0].field,ce((o.length?"Multiple ":"No ")+`matching ${at(r)} encoding found for selection ${at(n.param)}. Using "field": ${at(a)}.`)):a=o[0].field}return`${s.name}[${at(Hr(a))}]`}function F_e(e,t){var n;for(const[i,r]of Su((n=e.component.selection)!==null&&n!==void 0?n:{})){const a=e.getName(`lookup_${i}`);e.component.data.outputNodes[a]=r.materialized=new Ai(new Vd(t,e,{param:i}),a,Mt.Lookup,e.component.data.outputNodeRefCounts)}}function Wv(e,t,n){return ag(t,i=>Le(i)?i:Nve(i)?KG(e,i,n):aH(i))}var j1=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function R_e(e,t){if(e)return xe(e)&&!Qo(e)?e.map(n=>xM(n,t)).join(", "):e}function WA(e,t,n,i){var r,a,s,o,l;(r=e.encode)!==null&&r!==void 0||(e.encode={}),(a=(o=e.encode)[t])!==null&&a!==void 0||(o[t]={}),(s=(l=e.encode[t]).update)!==null&&s!==void 0||(l.update={}),e.encode[t].update[n]=i}function G0(e,t,n,i={header:!1}){var r,a;const s=e.combine(),{disable:o,orient:l,scale:f,labelExpr:d,title:g,zindex:p}=s,y=j1(s,["disable","orient","scale","labelExpr","title","zindex"]);if(!o){for(const v in y){const x=Ibe[v],E=y[v];if(x&&x!==t&&x!=="both")delete y[v];else if(jp(E)){const{condition:A}=E,S=j1(E,["condition"]),w=Wt(A),D=_N[v];if(D){const{vgProp:O,part:M}=D,C=[...w.map(k=>{const{test:N}=k,L=j1(k,["test"]);return Object.assign({test:Wv(null,N)},L)}),S];WA(y,M,O,C),delete y[v]}else if(D===null){const O={signal:w.map(M=>{const{test:C}=M,k=j1(M,["test"]);return`${Wv(null,C)} ? ${oN(k)} : `}).join("")+oN(S)};y[v]=O}}else if($e(E)){const A=_N[v];if(A){const{vgProp:S,part:w}=A;WA(y,w,S,E),delete y[v]}}Ge(["labelAlign","labelBaseline"],v)&&y[v]===null&&delete y[v]}if(t==="grid"){if(!y.grid)return;if(y.encode){const{grid:v}=y.encode;y.encode=Object.assign({},v?{grid:v}:{}),At(y.encode)&&delete y.encode}return Object.assign(Object.assign({scale:f,orient:l},y),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ln(p,0)})}else{if(!i.header&&e.mainExtracted)return;if(d!==void 0){let x=d;!((a=(r=y.encode)===null||r===void 0?void 0:r.labels)===null||a===void 0)&&a.update&&$e(y.encode.labels.update.text)&&(x=nc(d,"datum.label",y.encode.labels.update.text.signal)),WA(y,"labels","text",{signal:x})}if(y.labelAlign===null&&delete y.labelAlign,y.encode){for(const x of zH)e.hasAxisPart(x)||delete y.encode[x];At(y.encode)&&delete y.encode}const v=R_e(g,n);return Object.assign(Object.assign(Object.assign(Object.assign({scale:f,orient:l,grid:!1},v?{title:v}:{}),y),n.aria===!1?{aria:!1}:{}),{zindex:ln(p,0)})}}}function eY(e){const{axes:t}=e.component,n=[];for(const i of ms)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}}return n}function N_e(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>G0(r,"grid",t)),...i.map(r=>G0(r,"grid",t)),...n.map(r=>G0(r,"main",t)),...i.map(r=>G0(r,"main",t))].filter(r=>r)}function JN(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...ue(s),...ue(o)]),f={};for(const d of l.values())f[d]={signal:`${i.signal} === "${a}" ? ${to(s[d])} : ${to(o[d])}`};return f}return t[r]})])}function j_e(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Yve(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",s=$e(n)?"axisOrient":`axis${Cp(n)}`,o=[...r,...r.map(f=>a+f.substr(4))],l=["axis",s,a];return{vlOnlyAxisConfig:JN(o,i,e,n),vgAxisConfig:JN(l,i,e,n),axisConfigStyle:z_e([...l,...o],i)}}function z_e(e,t){var n;const i=[{}];for(const r of e){let a=(n=t[r])===null||n===void 0?void 0:n.style;if(a){a=Wt(a);for(const s of a)i.push(t.style[s])}}return Object.assign.apply(null,i)}function OO(e,t,n,i={}){var r;const a=Pq(e,n,t);if(a!==void 0)return{configFrom:"style",configValue:a};for(const s of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((r=i[s])===null||r===void 0?void 0:r[e])!==void 0)return{configFrom:s,configValue:i[s][e]};return{}}const e9={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:i,formatType:r}=n;return EH(e,e.type,i,r,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return _H(i,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>{var i;return(i=t.grid)!==null&&i!==void 0?i:B_e(n,e)},gridScale:({model:e,channel:t})=>L_e(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||nY(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||tY(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>{var i;return(i=e.labelFlush)!==null&&i!==void 0?i:P_e(t.type,n)},labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{var i;return(i=e.labelOverlap)!==null&&i!==void 0?i:I_e(t.type,n,he(t)&&!!t.timeUnit,he(t)?t.sort:void 0)},orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{var a;const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return(a=n.tickCount)!==null&&a!==void 0?a:H_e({fieldOrDatumDef:i,scaleType:r,size:o,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=iY(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",s=t.fieldDef(a);return qq(r?[EN(r)]:[],he(s)?[EN(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>G_e(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>{var i;return(i=e.zindex)!==null&&i!==void 0?i:Y_e(n,t)}};function B_e(e,t){return!li(e)&&he(t)&&!kt(t?.bin)&&!vi(t?.bin)}function L_e(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function U_e(e,t,n,i,r){const a=t?.labelAngle;if(a!==void 0)return $e(a)?a:Rg(a);{const{configValue:s}=OO("labelAngle",i,t?.style,r);return s!==void 0?Rg(s):n===Pt&&Ge([uM,oM],e.type)&&!(he(e)&&e.timeUnit)?270:void 0}}function CO(e){return`(((${e.signal} % 360) + 360) % 360)`}function tY(e,t,n,i){if(e!==void 0)if(n==="x"){if($e(e)){const r=CO(e),a=$e(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if($e(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if($e(e)){const r=CO(e),a=$e(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if($e(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function nY(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if($e(e)){const s=CO(e),o=$e(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${o} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if($e(t)){const s=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${s} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function P_e(e,t){if(t==="x"&&Ge(["quantitative","temporal"],e))return!0}function I_e(e,t,n,i){if(n&&!Dt(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function q_e(e){return e==="x"?"bottom":"left"}function H_e({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){var r;if(!i&&!li(t)&&t!=="log"){if(he(e)){if(kt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ge(["month","hours","day","quarter"],(r=Ci(e.timeUnit))===null||r===void 0?void 0:r.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function iY(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,s=r?r.title:void 0;if(a&&s)return Hq(a,s);if(a)return a;if(s)return s;if(a!==void 0)return a;if(s!==void 0)return s}function G_e(e,t){const n=e.values;if(xe(n))return jH(t,n);if($e(n))return n}function Y_e(e,t){return e==="rect"&&Lv(t)?1:0}class Ad extends wt{constructor(t,n){super(t),this.transform=n,this._dependentFields=ZG(this.transform.calculate)}clone(){return new Ad(null,Ue(this.transform))}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(Oc(i)&&OH(i.sort)){const{field:a,timeUnit:s}=i,o=i.sort,l=o.map((f,d)=>`${aH({field:a,timeUnit:s,equal:f})} ? ${d} : `).join("")+o.length;t=new Ad(t,{calculate:l,as:Sd(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ke(this.transform)}`}}function Sd(e,t,n){return de(e,Object.assign({prefix:t,suffix:"sort_index"},n??{}))}function Zx(e,t){return Ge(["top","bottom"],t)?"column":Ge(["left","right"],t)||e==="row"?"row":"column"}function wd(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return ln((t||{})[e],r[e],n.header[e])}function Kx(e,t,n,i){const r={};for(const a of e){const s=wd(a,t||{},n,i);s!==void 0&&(r[a]=s)}return r}const HM=["row","column"],GM=["header","footer"];function X_e(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:o}=Kx(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=Zx(t,o),f=Rg(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:n},t==="row"?{orient:"left"}:{}),{style:"guide-title"}),aY(f,l)),rY(l,f,a)),sY(i,r,t,fxe,JH))}}function rY(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=nY(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function aY(e,t){const n=tY(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function V_e(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of GM)if(n[r])for(const a of n[r]){const s=Q_e(e,t,r,n,a);s!=null&&i.push(s)}return i}function W_e(e,t){var n;const{sort:i}=e;return Ga(i)?{field:de(i,{expr:"datum"}),order:(n=i.order)!==null&&n!==void 0?n:"ascending"}:xe(i)?{field:Sd(e,t,{expr:"datum"}),order:"ascending"}:{field:de(e,{expr:"datum"}),order:i??"ascending"}}function DO(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:s,labelOrient:o,labelExpr:l}=Kx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),f=gM({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=Zx(t,o);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({text:{signal:l?nc(nc(l,"datum.label",f),"datum.value",de(e,{expr:"parent"})):f}},t==="row"?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),aY(a,d)),rY(d,a,s)),sY(n,e,t,dxe,eG))}function Q_e(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:s}=i,o=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:g}=Kx(["labelOrient"],s.header,o,t);(t==="row"&&!Ge(["top","bottom"],g)||t==="column"&&!Ge(["left","right"],g))&&(a=DO(s,t,o))}const l=ha(e)&&!Rp(e.facet),f=r.axes,d=f?.length>0;if(a||d){const g=t==="row"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`},i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:W_e(s,t)}:{}),d&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{}),a?{title:a}:{}),r.sizeSignal?{encode:{update:{[g]:r.sizeSignal}}}:{}),d?{axes:f}:{})}}return null}const Z_e={column:{start:0,end:1},row:{start:1,end:0}};function K_e(e,t){return Z_e[t][e]}function J_e(e,t){const n={};for(const i of jr){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:a,titleOrient:s}=Kx(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),o=Zx(i,s),l=K_e(a,o);l!==void 0&&(n[o]=l)}}return At(n)?void 0:n}function sY(e,t,n,i,r){const a={};for(const s of i){if(!r[s])continue;const o=wd(s,t?.header,e,n);o!==void 0&&(a[r[s]]=o)}return a}function YM(e){return[...z1(e,"width"),...z1(e,"height"),...z1(e,"childWidth"),...z1(e,"childHeight")]}function z1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),o=a.get("range");if(li(s)&&qu(o)){const l=e.scaleName(n);return ha(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[t9(l,o)]:[t9(l,o),{name:r,update:oY(l,a,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",o=pO(e.config.view,a?"width":"height"),l=`isFinite(${s}) ? ${s} : ${o}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:r,value:i}]}function t9(e,t){return{name:`${e}_step`,value:t.step}}function oY(e,t,n){const i=t.get("type"),r=t.get("padding"),a=ln(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:r:1,`bandspace(${n}, ${to(s)}, ${to(a)}) * ${e}_step`}function uY(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function lY(e,t){return ue(e).reduce((n,i)=>{const r=e[i];return Object.assign(Object.assign({},n),Yd(t,r,i,a=>zt(a.value)))},{})}function cY(e,t){if(ha(t))return e==="theta"?"independent":"shared";if(Zd(t))return"shared";if(JM(t))return es(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function XM(e,t){const n=e.scale[t],i=es(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&ce(rve(t)),"independent"):e[i][t]||"shared"}const eAe=Object.assign(Object.assign({},pxe),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),fY=ue(eAe);class tAe extends mo{}const n9={symbols:nAe,gradient:iAe,labels:rAe,entries:aAe};function nAe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){var s,o,l,f,d,g,p,y;if(a!=="symbol")return;const{markDef:v,encoding:x,config:E,mark:A}=n,S=v.filled&&A!=="trail";let w=Object.assign(Object.assign({},yye({},n,dbe)),TG(n,{filled:S}));const D=(s=r.get("symbolOpacity"))!==null&&s!==void 0?s:E.legend.symbolOpacity,O=(o=r.get("symbolFillColor"))!==null&&o!==void 0?o:E.legend.symbolFillColor,M=(l=r.get("symbolStrokeColor"))!==null&&l!==void 0?l:E.legend.symbolStrokeColor,C=D===void 0?(f=dY(x.opacity))!==null&&f!==void 0?f:v.opacity:void 0;if(w.fill){if(i==="fill"||S&&i===Xi)delete w.fill;else if(w.fill.field)O?delete w.fill:(w.fill=zt((d=E.legend.symbolBaseFillColor)!==null&&d!==void 0?d:"black"),w.fillOpacity=zt(C??1));else if(xe(w.fill)){const k=(y=(p=$O((g=x.fill)!==null&&g!==void 0?g:x.color))!==null&&p!==void 0?p:v.fill)!==null&&y!==void 0?y:S&&v.color;k&&(w.fill=zt(k))}}if(w.stroke){if(i==="stroke"||!S&&i===Xi)delete w.stroke;else if(w.stroke.field||M)delete w.stroke;else if(xe(w.stroke)){const k=ln($O(x.stroke||x.color),v.stroke,S?v.color:void 0);k&&(w.stroke={value:k})}}if(i!==ho){const k=he(t)&&gY(n,r,t);k?w.opacity=[Object.assign({test:k},zt(C??1)),zt(E.legend.unselectedOpacity)]:C&&(w.opacity=zt(C))}return w=Object.assign(Object.assign({},w),e),At(w)?void 0:w}function iAe(e,{model:t,legendType:n,legendCmpt:i}){var r;if(n!=="gradient")return;const{config:a,markDef:s,encoding:o}=t;let l={};const d=((r=i.get("gradientOpacity"))!==null&&r!==void 0?r:a.legend.gradientOpacity)===void 0?dY(o.opacity)||s.opacity:void 0;return d&&(l.opacity=zt(d)),l=Object.assign(Object.assign({},l),e),At(l)?void 0:l}function rAe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},s=n.config,o=he(t)?gY(n,r,t):void 0,l=o?[{test:o,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a,g=sc(d)?pM({fieldOrDatumDef:t,field:"datum.value",format:f,formatType:d,config:s}):void 0,p=Object.assign(Object.assign(Object.assign({},l?{opacity:l}:{}),g?{text:g}:{}),e);return At(p)?void 0:p}function aAe(e,{legendCmpt:t}){const n=t.get("selections");return n?.length?Object.assign(Object.assign({},e),{fill:{value:"transparent"}}):e}function dY(e){return hY(e,(t,n)=>Math.max(t,n.value))}function $O(e){return hY(e,(t,n)=>ln(t,n.value))}function hY(e,t){if(Mbe(e))return Wt(e.condition).reduce(t,e.value);if(ya(e))return e.value}function gY(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=at(n.field);return i.map(a=>`(!length(data(${at(Bt(a)+oc)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const i9={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return EH(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return _H(i,t,n)},gradientLength:e=>{var t,n;const{legend:i,legendConfig:r}=e;return(n=(t=i.gradientLength)!==null&&t!==void 0?t:r.gradientLength)!==null&&n!==void 0?n:dAe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>{var i,r;return(r=(i=e.labelOverlap)!==null&&i!==void 0?i:t.labelOverlap)!==null&&r!==void 0?r:hAe(n)},symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>{var r;return(r=e.symbolType)!==null&&r!==void 0?r:oAe(t.type,n,i.shape,t.shape)},title:({fieldOrDatumDef:e,config:t})=>Gf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Hf(n)&&ca(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>sAe(t,e)};function sAe(e,t){const n=e.values;if(xe(n))return jH(t,n);if($e(n))return n}function oAe(e,t,n,i){var r;if(t!=="shape"){const a=(r=$O(n))!==null&&r!==void 0?r:i;if(a)return a}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function uAe(e){const{legend:t}=e;return ln(t.type,lAe(e))}function lAe({channel:e,timeUnit:t,scaleType:n}){if(Hf(e)){if(Ge(["quarter","month","day"],t))return"symbol";if(ca(n))return"gradient"}return"symbol"}function cAe({legendConfig:e,legendType:t,orient:n,legend:i}){var r,a;return(a=(r=i.direction)!==null&&r!==void 0?r:e[t?"gradientDirection":"symbolDirection"])!==null&&a!==void 0?a:fAe(n,t)}function fAe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function dAe({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:o,gradientVerticalMinLength:l}=e;if(ca(r))return n==="horizontal"?i==="top"||i==="bottom"?r9(t,"width",s,a):s:r9(t,"height",l,o)}function r9(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function hAe(e){if(Ge(["quantile","threshold","log","symlog"],e))return"greedy"}function pY(e){const t=sn(e)?gAe(e):vAe(e);return e.component.legends=t,t}function gAe(e){const{encoding:t}=e,n={};for(const i of[Xi,...nG]){const r=mn(t[i]);!r||!e.getScaleComponent(i)||i===Vi&&he(r)&&r.type===qd||(n[i]=yAe(e,i))}return n}function pAe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function mAe(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function yAe(e,t){var n,i,r;let a=e.legend(t);const{markDef:s,encoding:o,config:l}=e,f=l.legend,d=new tAe({},pAe(e,t));hEe(e,t,d);const g=a!==void 0?!a:f.disable;if(d.set("disable",g,a!==void 0),g)return d;a=a||{};const p=e.getScaleComponent(t).get("type"),y=mn(o[t]),v=he(y)?(n=Ci(y.timeUnit))===null||n===void 0?void 0:n.unit:void 0,x=a.orient||l.legend.orient||"right",E=uAe({legend:a,channel:t,timeUnit:v,scaleType:p}),A=cAe({legend:a,legendType:E,orient:x,legendConfig:f}),S={legend:a,channel:t,model:e,markDef:s,encoding:o,fieldOrDatumDef:y,legendConfig:f,config:l,scaleType:p,orient:x,legendType:E,direction:A};for(const C of fY){if(E==="gradient"&&C.startsWith("symbol")||E==="symbol"&&C.startsWith("gradient"))continue;const k=C in i9?i9[C](S):a[C];if(k!==void 0){const N=mAe(k,C,a,e.fieldDef(t));(N||l.legend[C]===void 0)&&d.set(C,k,N)}}const w=(i=a?.encoding)!==null&&i!==void 0?i:{},D=d.get("selections"),O={},M={fieldOrDatumDef:y,model:e,channel:t,legendCmpt:d,legendType:E};for(const C of["labels","legend","title","symbols","gradient","entries"]){const k=lY((r=w[C])!==null&&r!==void 0?r:{},e),N=C in n9?n9[C](k,M):k;N!==void 0&&!At(N)&&(O[C]=Object.assign(Object.assign(Object.assign({},D?.length&&he(y)?{name:`${Bt(y.field)}_legend_${C}`}:{}),D?.length?{interactive:!!D}:{}),{update:N}))}return At(O)||d.set("encode",O,!!a?.encoding),d}function vAe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){pY(i);for(const r of ue(i.component.legends))n.legend[r]=XM(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=mY(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of ue(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function mY(e,t){var n,i,r,a;if(!e)return t.clone();const s=e.getWithExplicit("orient"),o=t.getWithExplicit("orient");if(s.explicit&&o.explicit&&s.value!==o.value)return;let l=!1;for(const f of fY){const d=Ou(e.getWithExplicit(f),t.getWithExplicit(f),f,"legend",(g,p)=>{switch(f){case"symbolType":return bAe(g,p);case"title":return Gq(g,p);case"type":return l=!0,sr("symbol")}return Hx(g,p,f,"legend")});e.setWithExplicit(f,d)}return l&&(!((i=(n=e.implicit)===null||n===void 0?void 0:n.encode)===null||i===void 0)&&i.gradient&&Rv(e.implicit,["encode","gradient"]),!((a=(r=e.explicit)===null||r===void 0?void 0:r.encode)===null||a===void 0)&&a.gradient&&Rv(e.explicit,["encode","gradient"])),e}function bAe(e,t){return t.value==="circle"?t:e}var xAe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function EAe(e,t,n,i){var r,a,s,o,l;(r=e.encode)!==null&&r!==void 0||(e.encode={}),(a=(o=e.encode)[t])!==null&&a!==void 0||(o[t]={}),(s=(l=e.encode[t]).update)!==null&&s!==void 0||(l.update={}),e.encode[t].update[n]=i}function yY(e){const t=e.component.legends,n={};for(const r of ue(t)){const a=e.getScaleComponent(r),s=Tt(a.get("domains"));if(n[s])for(const o of n[s])mY(o,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return ai(n).flat().map(r=>_Ae(r,e.config)).filter(r=>r!==void 0)}function _Ae(e,t){var n,i,r;const a=e.combine(),{disable:s,labelExpr:o,selections:l}=a,f=xAe(a,["disable","labelExpr","selections"]);if(!s){if(t.aria===!1&&f.aria==null&&(f.aria=!1),!((n=f.encode)===null||n===void 0)&&n.symbols){const d=f.encode.symbols.update;d.fill&&d.fill.value!=="transparent"&&!d.stroke&&!f.stroke&&(d.stroke={value:"transparent"});for(const g of nG)f[g]&&delete d[g]}if(f.title||delete f.title,o!==void 0){let d=o;!((r=(i=f.encode)===null||i===void 0?void 0:i.labels)===null||r===void 0)&&r.update&&$e(f.encode.labels.update.text)&&(d=nc(o,"datum.label",f.encode.labels.update.text.signal)),EAe(f,"labels","text",{signal:d})}return f}}function AAe(e){return Zd(e)||JM(e)?SAe(e):vY(e)}function SAe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),vY(e))}function vY(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,o)=>{const l=$e(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return Ge(s,l)||s.push(l),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[Object.assign({name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]}},n)]}else return[Object.assign(Object.assign({name:i},{translate:{signal:"[width / 2, height / 2]"}}),n)]}const wAe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class bY extends mo{constructor(t,n,i,r){super(Object.assign({},n),{name:t}),this.specifiedProjection=n,this.size=i,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function xY(e){e.component.projection=sn(e)?OAe(e):$Ae(e)}function OAe(e){var t;if(e.hasProjection){const n=Li(e.specifiedProjection),i=!(n&&(n.scale!=null||n.translate!=null)),r=i?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,a=i?CAe(e):void 0,s=new bY(e.projectionName(!0),Object.assign(Object.assign({},(t=Li(e.config.projection))!==null&&t!==void 0?t:{}),n??{}),r,a);return s.get("type")||s.set("type","equalEarth",!1),s}}function CAe(e){const t=[],{encoding:n}=e;for(const i of[[hs,ds],[Gr,Aa]])(mn(n[i[0]])||mn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Vi)&&e.typedFieldDef(Vi).type===qd&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Mt.Main)),t}function DAe(e,t){const n=j$(wAe,r=>!!(!jf(e.explicit,r)&&!jf(t.explicit,r)||jf(e.explicit,r)&&jf(t.explicit,r)&&La(e.get(r),t.get(r))));if(La(e.size,t.size)){if(n)return e;if(La(e.explicit,{}))return t;if(La(t.explicit,{}))return e}return null}function $Ae(e){if(e.children.length===0)return;let t;for(const i of e.children)xY(i);const n=j$(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=DAe(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new bY(i,t.specifiedProjection,t.size,Ue(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),i),s.merged=!0)}return r}}var MAe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function TAe(e,t,n,i){var r,a;if(Np(t,n)){const s=sn(e)?(a=(r=e.axis(n))!==null&&r!==void 0?r:e.legend(n))!==null&&a!==void 0?a:{}:{},o=de(t,{expr:"datum"}),l=de(t,{expr:"datum",binSuffix:"end"});return{formulaAs:de(t,{binSuffix:"range",forAs:!0}),formula:kx(o,l,s.format,s.formatType,i)}}return{}}function EY(e,t){return`${zq(e)}_${t}`}function kAe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function VM(e,t,n){var i;const r=(i=Bx(n,void 0))!==null&&i!==void 0?i:{},a=EY(r,t);return e.getName(`${a}_bins`)}function FAe(e){return"as"in e}function a9(e,t,n){let i,r;FAe(e)?i=Le(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[de(e,{forAs:!0}),de(e,{binSuffix:"end",forAs:!0})];const a=Object.assign({},Bx(t,void 0)),s=EY(a,e.field),{signal:o,extentSignal:l}=kAe(n,s);if(Ox(a.extent)){const d=a.extent;r=JG(n,d.param,d),delete a.extent}const f=Object.assign(Object.assign(Object.assign({bin:a,field:e.field,as:[i]},o?{signal:o}:{}),l?{extentSignal:l}:{}),r?{span:r}:{});return{key:s,binComponent:f}}class Xa extends wt{constructor(t,n){super(t),this.bins=n}clone(){return new Xa(null,Ue(this.bins))}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{if(Xr(a)&&kt(a.bin)){const{key:o,binComponent:l}=a9(a,a.bin,n);r[o]=Object.assign(Object.assign(Object.assign({},l),r[o]),TAe(n,a,s,n.config))}return r},{});return At(i)?null:new Xa(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=a9(n,n.bin,i);return new Xa(t,{[r]:a})}merge(t,n){for(const i of ue(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=Ua([...this.bins[i].as,...t.bins[i].as],Ke)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(ai(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(ai(this.bins).map(t=>t.field))}hash(){return`Bin ${Ke(this.bins)}`}assemble(){return ai(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,a=t.bin,{extent:s}=a,o=MAe(a,["extent"]),l=Object.assign(Object.assign(Object.assign({type:"bin",field:Hr(t.field),as:i,signal:t.signal},Ox(s)?{extent:null}:{extent:s}),t.span?{span:{signal:`span(${t.span})`}}:{}),o);!s&&t.extentSignal&&(n.push({type:"extent",field:Hr(t.field),signal:t.extentSignal}),l.extent={signal:t.extentSignal}),n.push(l);for(const f of r)for(let d=0;d<2;d++)n.push({type:"formula",expr:de({field:i[d]},{expr:"datum"}),as:f[d]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function RAe(e,t,n,i){var r;const a=sn(i)?i.encoding[go(t)]:void 0;if(Xr(n)&&sn(i)&&$H(n,a,i.markDef,i.config))e.add(de(n,{})),e.add(de(n,{suffix:"end"})),n.bin&&Np(n,t)&&e.add(de(n,{binSuffix:"range"}));else if(q1e(t)){const s=I1e(t);e.add(i.getName(s))}else e.add(de(n));return Oc(n)&&nbe((r=n.scale)===null||r===void 0?void 0:r.range)&&e.add(n.scale.range.field),e}function NAe(e,t){var n;for(const i of ue(t)){const r=t[i];for(const a of ue(r))i in e?e[i][a]=new Set([...(n=e[i][a])!==null&&n!==void 0?n:[],...r[a]]):e[i]={[a]:r[a]}}}class da extends wt{constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}clone(){return new da(null,new Set(this.dimensions),Ue(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((s,o)=>{var l,f,d,g;const{aggregate:p,field:y}=s;if(p)if(p==="count")(l=r["*"])!==null&&l!==void 0||(r["*"]={}),r["*"].count=new Set([de(s,{forAs:!0})]);else{if(so(p)||Iu(p)){const v=so(p)?"argmin":"argmax",x=p[v];(f=r[x])!==null&&f!==void 0||(r[x]={}),r[x][v]=new Set([de({op:v,field:x},{forAs:!0})])}else(d=r[y])!==null&&d!==void 0||(r[y]={}),r[y][p]=new Set([de(s,{forAs:!0})]);Pu(o)&&n.scaleDomain(o)==="unaggregated"&&((g=r[y])!==null&&g!==void 0||(r[y]={}),r[y].min=new Set([de({field:y,aggregate:"min"},{forAs:!0})]),r[y].max=new Set([de({field:y,aggregate:"max"},{forAs:!0})]))}else RAe(a,o,s,n)}),a.size+ue(r).length===0)?null:new da(t,a,r)}static makeFromTransform(t,n){var i,r,a;const s=new Set,o={};for(const l of n.aggregate){const{op:f,field:d,as:g}=l;f&&(f==="count"?((i=o["*"])!==null&&i!==void 0||(o["*"]={}),o["*"].count=new Set([g||de(l,{forAs:!0})])):((r=o[d])!==null&&r!==void 0||(o[d]={}),o[d][f]=new Set([g||de(l,{forAs:!0})])))}for(const l of(a=n.groupby)!==null&&a!==void 0?a:[])s.add(l);return s.size+ue(o).length===0?null:new da(t,s,o)}merge(t){return _q(this.dimensions,t.dimensions)?(NAe(this.measures,t.measures),!0):(xve("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ue(this.measures)])}producedFields(){const t=new Set;for(const n of ue(this.measures))for(const i of ue(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${Ke({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of ue(this.measures))for(const s of ue(this.measures[a]))for(const o of this.measures[a][s])i.push(o),t.push(s),n.push(a==="*"?null:Hr(a));return{type:"aggregate",groupby:[...this.dimensions].map(Hr),ops:t,fields:n,as:i}}}class Wd extends wt{constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of jr){const s=n.facet[a];if(s){const{bin:o,sort:l}=s;this[a]=Object.assign({name:n.getName(`${a}_domain`),fields:[de(s),...kt(o)?[de(s,{binSuffix:"end"})]:[]]},Ga(l)?{sortField:l}:xe(l)?{sortIndexField:Sd(s,a)}:{})}}this.childModel=n.child}hash(){let t="Facet";for(const n of jr)this[n]&&(t+=` ${n.charAt(0)}:${Ke(this[n])}`);return t}get fields(){var t;const n=[];for(const i of jr)!((t=this[i])===null||t===void 0)&&t.fields&&n.push(...this[i].fields);return n}dependentFields(){const t=new Set(this.fields);for(const n of jr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of ms){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if(li(r)&&qu(a)){const s=Jx(this.childModel,n),o=KM(s);o?t[n]=o:ce(V$(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],s=[],o=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),s.push("max")):(a.push(i[r]),s.push("distinct")),o.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:f}=this[t];if(l){const{op:d=Fx,field:g}=l;a.push(g),s.push(d),o.push(de(l,{forAs:!0}))}else f&&(a.push(f),s.push("max"),o.push(f));return{name:this[t].name,source:n??this.data,transform:[Object.assign({type:"aggregate",groupby:this[t].fields},a.length?{fields:a,ops:s,as:o}:{})]}}assembleFacetHeaderData(t){var n,i;const{columns:r}=this.model.layout,{layoutHeaders:a}=this.model.component,s=[],o={};for(const d of HM){for(const g of GM){const p=(n=a[d]&&a[d][g])!==null&&n!==void 0?n:[];for(const y of p)if(((i=y.axes)===null||i===void 0?void 0:i.length)>0){o[d]=!0;break}}if(o[d]){const g=`length(data("${this.facet.name}"))`,p=d==="row"?r?{signal:`ceil(${g} / ${r})`}:1:r?{signal:`min(${g}, ${r})`}:{signal:g};s.push({name:`${this.facet.name}_${d}`,transform:[{type:"sequence",start:0,stop:p}]})}}const{row:l,column:f}=o;return(l||f)&&s.unshift(this.assembleRowColumnHeaderData("facet",null,t)),s}assemble(){var t,n;const i=[];let r=null;const a=this.getChildIndependentFieldsWithStep(),{column:s,row:o,facet:l}=this;if(s&&o&&(a.x||a.y)){r=`cross_${this.column.name}_${this.row.name}`;const f=[].concat((t=a.x)!==null&&t!==void 0?t:[],(n=a.y)!==null&&n!==void 0?n:[]),d=f.map(()=>"distinct");i.push({name:r,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:f,ops:d}]})}for(const f of[eo,Js])this[f]&&i.push(this.assembleRowColumnHeaderData(f,r,a));if(l){const f=this.assembleFacetHeaderData(a);f&&i.push(...f)}return i}}function s9(e){return e[0]==="'"&&e[e.length-1]==="'"||e[0]==='"'&&e[e.length-1]==='"'?e.slice(1,-1):e}function jAe(e,t){const n=L$(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=s9(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=s9(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return ce(Mye(t)),null}function zAe(e){const t={};return py(e.filter,n=>{var i;if(rH(n)){let r=null;J$(n)?r=lr(n.equal):tM(n)?r=lr(n.lte):eM(n)?r=lr(n.lt):nM(n)?r=lr(n.gt):iM(n)?r=lr(n.gte):rM(n)?r=n.range[0]:aM(n)&&(r=((i=n.oneOf)!==null&&i!==void 0?i:n.in)[0]),r&&(wc(r)?t[n.field]="date":un(r)?t[n.field]="number":Le(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function BAe(e){const t={};function n(i){bd(i)?t[i.field]="date":i.type==="quantitative"&&oye(i.aggregate)?t[i.field]="number":md(i.field)>1?i.field in t||(t[i.field]="flatten"):Oc(i)&&Ga(i.sort)&&md(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((sn(e)||ha(e))&&e.forEachFieldDef((i,r)=>{if(Xr(i))n(i);else{const a=Ac(r),s=e.fieldDef(a);n(Object.assign(Object.assign({},i),{type:s.type}))}}),sn(e)){const{mark:i,markDef:r,encoding:a}=e;if(Hu(i)&&!e.encoding.order){const s=r.orient==="horizontal"?"y":"x",o=a[s];he(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function LAe(e){const t={};if(sn(e)&&e.component.selection)for(const n of ue(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&md(r.field)>1&&(t[r.field]="flatten")}return t}class ei extends wt{constructor(t,n){super(t),this._parse=n}clone(){return new ei(null,Ue(this._parse))}hash(){return`Parse ${Ke(this._parse)}`}static makeExplicit(t,n,i){var r;let a={};const s=n.data;return!du(s)&&(!((r=s?.format)===null||r===void 0)&&r.parse)&&(a=s.format.parse),this.makeWithAncestors(t,a,{},i)}static makeWithAncestors(t,n,i,r){for(const o of ue(i)){const l=r.getWithExplicit(o);l.value!==void 0&&(l.explicit||l.value===i[o]||l.value==="derived"||i[o]==="flatten"?delete i[o]:ce(hN(o,i[o],l.value)))}for(const o of ue(n)){const l=r.get(o);l!==void 0&&(l===n[o]?delete n[o]:ce(hN(o,n[o],l)))}const a=new mo(n,i);r.copyAll(a);const s={};for(const o of ue(a.combine())){const l=a.get(o);l!==null&&(s[o]=l)}return ue(s).length===0||r.parseNothing?null:new ei(t,s)}get parse(){return this._parse}merge(t){this._parse=Object.assign(Object.assign({},this._parse),t.parse),t.remove()}assembleFormatParse(){const t={};for(const n of ue(this._parse)){const i=this._parse[n];md(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(ue(this._parse))}dependentFields(){return new Set(ue(this._parse))}assembleTransforms(t=!1){return ue(this._parse).filter(n=>t?md(n)>1:!0).map(n=>{const i=jAe(n,this._parse[n]);return i?{type:"formula",expr:i,as:U$(n)}:null}).filter(n=>n!==null)}}class Mu extends wt{clone(){return new Mu(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([zg])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:zg}}}class Pp extends wt{constructor(t,n){super(t),this.params=n}clone(){return new Pp(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ke(this.params)}`}assemble(){return Object.assign({type:"graticule"},this.params===!0?{}:this.params)}}class Ip extends wt{constructor(t,n){super(t),this.params=n}clone(){return new Ip(null,this.params)}dependentFields(){return new Set}producedFields(){var t;return new Set([(t=this.params.as)!==null&&t!==void 0?t:"data"])}hash(){return`Hash ${Ke(this.params)}`}assemble(){return Object.assign({type:"sequence"},this.params)}}class cc extends wt{constructor(t){super(null),t??(t={name:"source"});let n;if(du(t)||(n=t.format?Object.assign({},gr(t.format,["parse"])):{}),Lg(t))this._data={values:t.values};else if(xd(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];Ge(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else xG(t)?this._data={values:[{type:"Sphere"}]}:(vG(t)||du(t))&&(this._data={});this._generator=du(t),t.name&&(this._name=t.name),n&&!At(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return Object.assign(Object.assign({name:this._name},this._data),{transform:[]})}}var o9=function(e,t,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(e,n):r?r.value=n:t.set(e,n),n},UAe=function(e,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(e):i?i.value:t.get(e)},Y0;function WM(e){return e instanceof cc||e instanceof Pp||e instanceof Ip}class QM{constructor(){Y0.set(this,void 0),o9(this,Y0,!1,"f")}setModified(){o9(this,Y0,!0,"f")}get modifiedFlag(){return UAe(this,Y0,"f")}}Y0=new WeakMap;class Dc extends QM{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class ZM extends QM{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class PAe extends ZM{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of ue(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class IAe extends ZM{constructor(t){super(),this.requiresSelectionId=t&&UM(t)}run(t){t instanceof Mu&&(this.requiresSelectionId&&(WM(t.parent)||t.parent instanceof da||t.parent instanceof ei)||(this.setModified(),t.remove()))}}class qAe extends QM{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Ya&&(i=t.producedFields(),z$(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class HAe extends ZM{constructor(){super()}run(t){t instanceof Ai&&!t.isRequired()&&(this.setModified(),t.remove())}}class GAe extends Dc{run(t){if(!WM(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ei)if(t instanceof ei)this.setModified(),t.merge(n);else{if(B$(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class YAe extends Dc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof ei);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const s of i){const o=s.parse;for(const l of ue(o))l in r?r[l]!==o[l]&&a.add(l):r[l]=o[l]}for(const s of a)delete r[s];if(!At(r)){this.setModified();const s=new ei(t,r);for(const o of n){if(o instanceof ei)for(const l of ue(r))delete o.parse[l];t.removeChild(o),o.parent=s,o instanceof ei&&ue(o.parse).length===0&&o.remove()}}}}}class XAe extends Dc{run(t){t instanceof Ai||t.numChildren()>0||t instanceof Wd||t instanceof cc||(this.setModified(),t.remove())}}class VAe extends Dc{run(t){const n=t.children.filter(r=>r instanceof Ya),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class WAe extends Dc{run(t){const n=t.children.filter(r=>r instanceof da),i={};for(const r of n){const a=Ke(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of ue(i)){const a=i[r];if(a.length>1){const s=a.pop();for(const o of a)s.merge(o)&&(t.removeChild(o),o.parent=s,o.remove(),this.setModified())}}}}class QAe extends Dc{constructor(t){super(),this.model=t}run(t){const n=!(WM(t)||t instanceof Vd||t instanceof ei||t instanceof Mu),i=[],r=[];for(const a of t.children)a instanceof Xa&&(n&&!B$(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const s of i)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Xa?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const s of r)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class ZAe extends Dc{run(t){const n=[...t.children];if(!pd(n,s=>s instanceof Ai)||t.numChildren()<=1)return;const r=[];let a;for(const s of n)if(s instanceof Ai){let o=s;for(;o.numChildren()===1;){const[l]=o.children;if(l instanceof Ai)o=l;else break}r.push(...o.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=o,this.setModified()):a=o}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=a}}}class $c extends wt{constructor(t,n){super(t),this.transform=n}clone(){return new $c(null,Ue(this.transform))}addDimensions(t){this.transform.groupby=Ua(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:de(t)}hash(){return`JoinAggregateTransform ${Ke(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return Object.assign({type:"joinaggregate",as:i,ops:n,fields:t},r!==void 0?{groupby:r}:{})}}function KAe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=de(i);return r&&t.push(r),t},[])}function JAe(e){return xe(e)&&e.every(t=>Le(t))&&e.length>1}class no extends wt{constructor(t,n){super(t),this._stack=n}clone(){return new no(null,Ue(this._stack))}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:s="zero"}=n,o=[],l=[];if(n.sort!==void 0)for(const g of n.sort)o.push(g.field),l.push(ln(g.order,"ascending"));const f={field:o,order:l};let d;return JAe(a)?d=a:Le(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new no(t,{stackField:i,groupby:r,offset:s,sort:f,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannel:a,fieldChannel:s,offset:o,impute:l}=i;let f;if(a){const y=r[a];f=ns(y)}const d=KAe(n),g=n.encoding.order;let p;return xe(g)||he(g)?p=Iq(g):p=d.reduce((y,v)=>(y.field.push(v),y.order.push(s==="y"?"descending":"ascending"),y),{field:[],order:[]}),new no(t,{dimensionFieldDef:f,stackField:n.vgField(s),facetby:[],stackby:d,sort:p,offset:o,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ke(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:t,impute:n,groupby:i}=this._stack;return t?t.bin?n?[de(t,{binSuffix:"mid"})]:[de(t,{}),de(t,{binSuffix:"end"})]:[de(t)]:i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDef:i,stackField:r,stackby:a,sort:s,offset:o,impute:l,as:f}=this._stack;if(l&&i){const{bandPosition:d=.5,bin:g}=i;g&&t.push({type:"formula",expr:`${d}*`+de(i,{expr:"datum"})+`+${1-d}*`+de(i,{expr:"datum",binSuffix:"end"}),as:de(i,{binSuffix:"mid",forAs:!0})}),t.push({type:"impute",field:r,groupby:[...a,...n],key:de(i,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:f,offset:o}),t}}class Qd extends wt{constructor(t,n){super(t),this.transform=n}clone(){return new Qd(null,Ue(this.transform))}addDimensions(t){this.transform.groupby=Ua(this.transform.groupby.concat(t),n=>n)}dependentFields(){var t,n;const i=new Set;return((t=this.transform.groupby)!==null&&t!==void 0?t:[]).forEach(i.add,i),((n=this.transform.sort)!==null&&n!==void 0?n:[]).forEach(r=>i.add(r.field)),this.transform.window.map(r=>r.field).filter(r=>r!==void 0).forEach(i.add,i),i}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var n;return(n=t.as)!==null&&n!==void 0?n:de(t)}hash(){return`WindowTransform ${Ke(this.transform)}`}assemble(){var t;const n=[],i=[],r=[],a=[];for(const p of this.transform.window)i.push(p.op),r.push(this.getDefaultName(p)),a.push(p.param===void 0?null:p.param),n.push(p.field===void 0?null:p.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&i.every(p=>G$(p)))return Object.assign({type:"joinaggregate",as:r,ops:i,fields:n},o!==void 0?{groupby:o}:{});const l=[],f=[];if(this.transform.sort!==void 0)for(const p of this.transform.sort)l.push(p.field),f.push((t=p.order)!==null&&t!==void 0?t:"ascending");const d={field:l,order:f},g=this.transform.ignorePeers;return Object.assign(Object.assign(Object.assign({type:"window",params:a,as:r,ops:i,fields:n,sort:d},g!==void 0?{ignorePeers:g}:{}),o!==void 0?{groupby:o}:{}),s!==void 0?{frame:s}:{})}}function eSe(e){function t(n){if(!(n instanceof Wd)){const i=n.clone();if(i instanceof Ai){const r=TO+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof da||i instanceof no||i instanceof Qd||i instanceof $c)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function MO(e){if(e instanceof Wd)if(e.numChildren()===1&&!(e.children[0]instanceof Ai)){const t=e.children[0];(t instanceof da||t instanceof no||t instanceof Qd||t instanceof $c)&&t.addDimensions(e.fields),t.swapWithParent(),MO(e)}else{const t=e.model.component.data.main;_Y(t);const n=eSe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(MO)}function _Y(e){if(e instanceof Ai&&e.type===Mt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Wd||(t.swapWithParent(),_Y(e))}}const TO="scale_",B1=5;function kO(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!kO(t.children))return!1}return!0}function Jr(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function u9(e,t,n){let i=e.sources,r=!1;return r=Jr(new HAe,i)||r,r=Jr(new IAe(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=Jr(new XAe,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=Jr(new GAe,i)||r,r=Jr(new QAe(t),i)||r,r=Jr(new qAe,i)||r,r=Jr(new YAe,i)||r,r=Jr(new WAe,i)||r,r=Jr(new VAe,i)||r,r=Jr(new PAe,i)||r,r=Jr(new ZAe,i)||r),e.sources=i,r}function tSe(e,t){kO(e.sources);let n=0,i=0;for(let r=0;r<B1&&u9(e,t,!0);r++)n++;e.sources.map(MO);for(let r=0;r<B1&&u9(e,t,!1);r++)i++;kO(e.sources),Math.max(n,i)===B1&&ce(`Maximum optimization runs(${B1}) reached.`)}class qi{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new qi(()=>t(n))}}var nSe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function AY(e){sn(e)?iSe(e):rSe(e)}function iSe(e){const t=e.component.scales;for(const n of ue(t)){const i=sSe(e,n);if(t[n].setWithExplicit("domains",i),uSe(e,n),e.component.data.isFaceted){let a=e;for(;!ha(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const o of i.value)Ws(o)&&(o.data=TO+o.data.replace(TO,""))}}}function rSe(e){for(const n of e.children)AY(n);const t=e.component.scales;for(const n of ue(t)){let i,r=null;for(const a of e.children){const s=a.component.scales[n];if(s){i===void 0?i=s.getWithExplicit("domains"):i=Ou(i,s.getWithExplicit("domains"),"domains","scale",FO);const o=s.get("selectionExtent");r&&o&&r.param!==o.param&&ce(Oye),r=o}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function aSe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=l9(t,n);if(!r){ce(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=l9(t,n);if(r)return"unaggregated"}return e}function sSe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=aSe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]=Object.assign(Object.assign({},e.specifiedScales[t]),{domain:r})),t==="x"&&mn(i.x2)?mn(i.x)?Ou(Go(n,r,e,"x"),Go(n,r,e,"x2"),"domain","scale",FO):Go(n,r,e,"x2"):t==="y"&&mn(i.y2)?mn(i.y)?Ou(Go(n,r,e,"y"),Go(n,r,e,"y2"),"domain","scale",FO):Go(n,r,e,"y2"):Go(n,r,e,t)}function oSe(e,t,n){return e.map(i=>({signal:`{data: ${Lx(i,{timeUnit:n,type:t})}}`}))}function QA(e,t,n){var i;const r=(i=Ci(n))===null||i===void 0?void 0:i.unit;return t==="temporal"||r?oSe(e,t,r):[e]}function Go(e,t,n,i){const{encoding:r}=n,a=mn(r[i]),{type:s}=a,o=a.timeUnit;if(tbe(t)){const g=Go(e,void 0,n,i),p=QA(t.unionWith,s,o);return Us([...g.value,...p])}else{if($e(t))return Us([t]);if(t&&t!=="unaggregated"&&!oH(t))return Us(QA(t,s,o))}const l=n.stack;if(l&&i===l.fieldChannel){if(l.offset==="normalize")return sr([[0,1]]);const g=n.requestDataName(Mt.Main);return sr([{data:g,field:n.vgField(i,{suffix:"start"})},{data:g,field:n.vgField(i,{suffix:"end"})}])}const f=Pu(i)&&he(a)?lSe(n,i,e):void 0;if(Gu(a)){const g=QA([a.datum],s,o);return sr(g)}const d=a;if(t==="unaggregated"){const g=n.requestDataName(Mt.Main),{field:p}=a;return sr([{data:g,field:de({field:p,aggregate:"min"})},{data:g,field:de({field:p,aggregate:"max"})}])}else if(kt(d.bin)){if(li(e))return sr(e==="bin-ordinal"?[]:[{data:Fg(f)?n.requestDataName(Mt.Main):n.requestDataName(Mt.Raw),field:n.vgField(i,Np(d,i)?{binSuffix:"range"}:{}),sort:f===!0||!Dt(f)?{field:n.vgField(i,{}),op:"min"}:f}]);{const{bin:g}=d;if(kt(g)){const p=VM(n,d.field,g);return sr([new qi(()=>{const y=n.getSignalName(p);return`[${y}.start, ${y}.stop]`})])}else return sr([{data:n.requestDataName(Mt.Main),field:n.vgField(i,{})}])}}else if(d.timeUnit&&Ge(["time","utc"],e)&&$H(d,sn(n)?n.encoding[go(i)]:void 0,n.markDef,n.config)){const g=n.requestDataName(Mt.Main);return sr([{data:g,field:n.vgField(i)},{data:g,field:n.vgField(i,{suffix:"end"})}])}else return sr(f?[{data:Fg(f)?n.requestDataName(Mt.Main):n.requestDataName(Mt.Raw),field:n.vgField(i),sort:f}]:[{data:n.requestDataName(Mt.Main),field:n.vgField(i)}])}function ZA(e,t){const{op:n,field:i,order:r}=e;return Object.assign(Object.assign({op:n??(t?"sum":Fx)},i?{field:Hr(i)}:{}),r?{order:r}:{})}function uSe(e,t){var n;const i=e.component.scales[t],r=e.specifiedScales[t].domain,a=(n=e.fieldDef(t))===null||n===void 0?void 0:n.bin,s=oH(r)&&r,o=Sc(a)&&Ox(a.extent)&&a.extent;(s||o)&&i.set("selectionExtent",s??o,!0)}function lSe(e,t,n){if(!li(n))return;const i=e.fieldDef(t),r=i.sort;if(OH(r))return{op:"min",field:Sd(i,t),order:"ascending"};const{stack:a}=e,s=a?[...a.groupbyField?[a.groupbyField]:[],...a.stackBy.map(o=>o.fieldDef.field)]:void 0;if(Ga(r)){const o=a&&!Ge(s,r.field);return ZA(r,o)}else if(wH(r)){const{encoding:o,order:l}=r,f=e.fieldDef(o),{aggregate:d,field:g}=f,p=a&&!Ge(s,g);if(so(d)||Iu(d))return ZA({field:de(f),order:l},p);if(G$(d)||!d)return ZA({op:d,field:g,order:l},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ge(["ascending",void 0],r))return!0}}function l9(e,t){const{aggregate:n,type:i}=e;return n?Le(n)&&!cye[n]?{valid:!1,reason:Zye(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:Kye(e)}:{valid:!0}:{valid:!1,reason:Qye(e)}}function FO(e,t,n,i){return e.explicit&&t.explicit&&ce(ive(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function cSe(e){const t=Ua(e.map(s=>{if(Ws(s)){const{sort:o}=s;return nSe(s,["sort"])}return s}),Ke),n=Ua(e.map(s=>{if(Ws(s)){const o=s.sort;return o!==void 0&&!Fg(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(s=>s!==void 0),Ke);if(t.length===0)return;if(t.length===1){const s=e[0];if(Ws(s)&&n.length>0){let o=n[0];if(n.length>1)ce(pN),o=!0;else if(Dt(o)&&"field"in o){const l=o.field;s.field===l&&(o=o.order?{order:o.order}:!0)}return Object.assign(Object.assign({},s),{sort:o})}return s}const i=Ua(n.map(s=>Fg(s)||!("op"in s)||Le(s.op)&&s.op in aye?s:(ce(ave(s)),!0)),Ke);let r;i.length===1?r=i[0]:i.length>1&&(ce(pN),r=!0);const a=Ua(e.map(s=>Ws(s)?s.data:null),s=>s);return a.length===1&&a[0]!==null?Object.assign({data:a[0],fields:t.map(o=>o.field)},r?{sort:r}:{}):Object.assign({fields:t},r?{sort:r}:{})}function KM(e){if(Ws(e)&&Le(e.field))return e.field;if(dye(e)){let t;for(const n of e.fields)if(Ws(n)&&Le(n.field)){if(!t)t=n.field;else if(t!==n.field)return ce(sve),t}return ce(ove),t}else if(hye(e)){ce(uve);const t=e.fields[0];return Le(t)?t:void 0}}function Jx(e,t){const i=e.component.scales[t].get("domains").map(r=>(Ws(r)&&(r.data=e.lookupDataSource(r.data)),r));return cSe(i)}var fSe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function SY(e){return Zd(e)||JM(e)?e.children.reduce((t,n)=>t.concat(SY(n)),c9(e)):c9(e)}function c9(e){return ue(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:s,selectionExtent:o,domains:l,range:f,reverse:d}=r,g=fSe(r,["name","type","selectionExtent","domains","range","reverse"]),p=dSe(r.range,a,n,e),y=Jx(e,n),v=o?I2e(e,o,i,y):null;return t.push(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:a,type:s},y?{domain:y}:{}),v?{domainRaw:v}:{}),{range:p}),d!==void 0?{reverse:d}:{}),g)),t},[])}function dSe(e,t,n,i){if(es(n)){if(qu(e))return{step:{signal:`${t}_step`}}}else if(Dt(e)&&Ws(e))return Object.assign(Object.assign({},e),{data:i.lookupDataSource(e.data)});return e}class wY extends mo{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:pd(this.get("domains"),t=>xe(t)&&t.length===2&&t[0]<=0&&t[1]>=0)}}const hSe=["range","scheme"];function OY(e){return e==="x"?"width":e==="y"?"height":void 0}function gSe(e){const t=e.component.scales;for(const n of wx){const i=t[n];if(!i)continue;const r=pSe(n,e);i.setWithExplicit("range",r)}}function f9(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,a=OY(t),s=e.getName(a);if(Dt(i)&&i.binned&&i.step!==void 0)return new qi(()=>{const o=e.scaleName(t),l=`(domain("${o}")[1] - domain("${o}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${l})`});if(kt(i)){const o=VM(e,r,i);return new qi(()=>{const l=e.getSignalName(o),f=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${f})`})}}}function pSe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const f of hSe)if(n[f]!==void 0){const d=cO(a,f),g=lH(e,f);if(!d)ce(Wq(a,f,e));else if(g)ce(g);else switch(f){case"range":{const p=n.range;if(xe(p)){if(es(e))return Us(p.map(y=>{if(y==="width"||y==="height"){const v=t.getName(y),x=t.getSignalName.bind(t);return qi.fromName(x,v)}return y}))}else if(Dt(p))return Us({data:t.requestDataName(Mt.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Us(p)}case"scheme":return Us(mSe(n[f]))}}if(e===Pt||e===vn){const f=e===Pt?"width":"height",d=i[f];if(is(d)){if(li(a))return Us({step:d.step});ce(Qq(f))}}const{rangeMin:s,rangeMax:o}=n,l=ySe(e,t);return(s!==void 0||o!==void 0)&&cO(a,"rangeMin")&&xe(l)&&l.length===2?Us([s??l[0],o??l[1]]):sr(l)}function mSe(e){return ebe(e)?Object.assign({scheme:e.name},gr(e,["name"])):{scheme:e}}function ySe(e,t){const{size:n,config:i,mark:r,encoding:a}=t,s=t.getSignalName.bind(t),{type:o}=mn(a[e]),f=t.getScaleComponent(e).get("type"),{domain:d,domainMid:g}=t.specifiedScales[e];switch(e){case Pt:case vn:{if(Ge(["point","band"],f)){if(e===Pt&&!n.width){const v=Bg(i.view,"width");if(is(v))return v}else if(e===vn&&!n.height){const v=Bg(i.view,"height");if(is(v))return v}}const p=OY(e),y=t.getName(p);return e===vn&&br(f)?[qi.fromName(s,y),0]:[0,qi.fromName(s,y)]}case fo:{const p=t.component.scales[e].get("zero"),y=CY(r,p,i),v=xSe(r,n,t,i);return jg(f)?bSe(y,v,vSe(f,i,d,e)):[y,v]}case _a:return[0,Math.PI*2];case _c:return[0,360];case fs:return[0,new qi(()=>{const p=t.getSignalName("width"),y=t.getSignalName("height");return`min(${p},${y})/2`})];case Bu:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Lu:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Vi:return"symbol";case Xi:case gs:case ps:return f==="ordinal"?o==="nominal"?"category":"ordinal":g!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case ho:case ju:case zu:return[i.scale.minOpacity,i.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${e}`)}function vSe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&xe(n)?n.length+1:(ce(yve(i)),3)}}function bSe(e,t,n){const i=()=>{const r=to(t),a=to(e),s=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${s}, ${s})`};return $e(t)?new qi(i):{signal:i()}}function CY(e,t,n){if(t)return $e(t)?{signal:`${t.signal} ? 0 : ${CY(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(Cx("size",e))}const d9=.95;function xSe(e,t,n,i){const r={x:f9(n,"x"),y:f9(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=h9(t,r,i.view);return un(a)?a-1:new qi(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=h9(t,r,i.view);return un(a)?Math.pow(d9*a,2):new qi(()=>`pow(${d9} * ${a.signal}, 2)`)}}throw new Error(Cx("size",e))}function h9(e,t,n){const i=is(e.width)?e.width.step:qv(n,"width"),r=is(e.height)?e.height.step:qv(n,"height");return t.x||t.y?new qi(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function DY(e,t){sn(e)?ESe(e,t):MY(e,t)}function ESe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:s}=e;for(const o of ue(n)){const l=s[o],f=n[o],d=e.getScaleComponent(o),g=mn(r[o]),p=l[t],y=d.get("type"),v=d.get("padding"),x=d.get("paddingInner"),E=cO(y,t),A=lH(o,t);if(p!==void 0&&(E?A&&ce(A):ce(Wq(y,t,o))),E&&A===void 0)if(p!==void 0){const S=g.timeUnit,w=g.type;switch(t){case"domainMax":case"domainMin":wc(l[t])||w==="temporal"||S?f.set(t,{signal:Lx(l[t],{type:w,timeUnit:S})},!0):f.set(t,l[t],!0);break;default:f.copyKeyFromObject(t,l)}}else{const S=t in g9?g9[t]({model:e,channel:o,fieldOrDatumDef:g,scaleType:y,scalePadding:v,scalePaddingInner:x,domain:l.domain,markDef:a,config:i}):i.scale[t];S!==void 0&&f.set(t,S,!1)}}}const g9={bins:({model:e,fieldOrDatumDef:t})=>he(t)?_Se(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>ASe(e,t.type),nice:({scaleType:e,channel:t,domain:n,fieldOrDatumDef:i})=>SSe(e,t,n,i),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>wSe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,config:i})=>OSe(e,t,n.type,i.scale),paddingOuter:({scalePadding:e,channel:t,scaleType:n,markDef:i,scalePaddingInner:r,config:a})=>CSe(e,t,n,i.type,r,a.scale),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=he(e)?e.sort:void 0;return DSe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r})=>$Se(e,t,n,i,r)};function $Y(e){sn(e)?gSe(e):MY(e,"range")}function MY(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?$Y(i):DY(i,t);for(const i of ue(n)){let r;for(const a of e.children){const s=a.component.scales[i];if(s){const o=s.getWithExplicit(t);r=Ou(r,o,t,"scale",yG((l,f)=>{switch(t){case"range":return l.step&&f.step?l.step-f.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function _Se(e,t){const n=t.bin;if(kt(n)){const i=VM(e,t.field,n);return new qi(()=>e.getSignalName(i))}else if(vi(n)&&Sc(n)&&n.step!==void 0)return{step:n.step}}function ASe(e,t){if(Ge([Xi,gs,ps],e)&&t!=="nominal")return"hcl"}function SSe(e,t,n,i){var r;if(!(!((r=ns(i))===null||r===void 0)&&r.bin||xe(n)||Ge([dn.TIME,dn.UTC],e)))return t in Uu?!0:void 0}function wSe(e,t,n,i,r,a){if(e in Uu){if(ca(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:o}=r;if(s==="bar"&&!(he(i)&&(i.bin||i.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===dn.POINT)return n.pointPadding}}function OSe(e,t,n,i){if(e===void 0&&t in Uu){const{bandPaddingInner:r,barBandPaddingInner:a,rectBandPaddingInner:s}=i;return ln(r,n==="bar"?a:s)}}function CSe(e,t,n,i,r,a){if(e===void 0&&t in Uu&&n===dn.BAND){const{bandPaddingOuter:s}=a;return ln(s,$e(r)?{signal:`${r.signal}/2`}:r/2)}}function DSe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return br(e)&&t==="descending"?$e(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(br(e)&&t==="descending")return!0}function $Se(e,t,n,i,r){if(!!n&&n!=="unaggregated"&&br(r)){if(xe(n)){const s=n[0],o=n[n.length-1];if(s<=0&&o>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!jg(r))return!0;if(!(he(t)&&t.bin)&&Ge([...ms,...Z1e],e)){const{orient:s,type:o}=i;return!(Ge(["bar","area","line","trail"],o)&&(s==="horizontal"&&e==="y"||s==="vertical"&&e==="x"))}return!1}function MSe(e,t,n,i){const r=TSe(t,n,i),{type:a}=e;return Pu(t)?a!==void 0?sbe(t,a)?he(n)&&!abe(a,n.type)?(ce(tve(a,r)),r):a:(ce(eve(t,a,r)),r):r:null}function TSe(e,t,n){var i;switch(t.type){case"nominal":case"ordinal":{if(Hf(e)||LA(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ce(UA(e,"ordinal")),"ordinal";if(e in Uu){if(Ge(["rect","bar","image","rule"],n.type))return"band"}else if(n.type==="arc"&&e in q$)return"band";const r=n[Yr(e)];return Hd(r)||vM(t)&&(!((i=t.axis)===null||i===void 0)&&i.tickBand)?"band":"point"}case"temporal":return Hf(e)?"time":LA(e)==="discrete"?(ce(UA(e,"temporal")),"ordinal"):he(t)&&t.timeUnit&&Ci(t.timeUnit).utc?"utc":"time";case"quantitative":return Hf(e)?he(t)&&kt(t.bin)?"bin-ordinal":"linear":LA(e)==="discrete"?(ce(UA(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(Xq(t.type))}function kSe(e,{ignoreRange:t}={}){TY(e),AY(e);for(const n of rbe)DY(e,n);t||$Y(e)}function TY(e){sn(e)?e.component.scales=FSe(e):e.component.scales=NSe(e)}function FSe(e){const{encoding:t,mark:n,markDef:i}=e;return wx.reduce((r,a)=>{const s=mn(t[a]);if(s&&n===dH&&a===Vi&&s.type===qd)return r;let o=s&&s.scale;if(s&&o!==null&&o!==!1){o??(o={});const l=MSe(o,a,s,i);r[a]=new wY(e.scaleName(`${a}`,!0),{value:l,explicit:o.type===l})}return r},{})}const RSe=yG((e,t)=>yN(e)-yN(t));function NSe(e){var t,n;const i=e.component.scales={},r={},a=e.component.resolve;for(const s of e.children){TY(s);for(const o of ue(s.component.scales))if((t=(n=a.scale)[o])!==null&&t!==void 0||(n[o]=cY(o,e)),a.scale[o]==="shared"){const l=r[o],f=s.component.scales[o].getWithExplicit("type");l?Pve(l.value,f.value)?r[o]=Ou(l,f,"type","scale",RSe):(a.scale[o]="independent",delete r[o]):r[o]=f}}for(const s of ue(r)){const o=e.scaleName(s,!0),l=r[s];i[s]=new wY(o,l);for(const f of e.children){const d=f.component.scales[s];d&&(f.renameScale(d.get("name"),o),d.merged=!0)}}return i}var KA=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class JA{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function sn(e){return e?.type==="unit"}function ha(e){return e?.type==="facet"}function JM(e){return e?.type==="concat"}function Zd(e){return e?.type==="layer"}class eT{constructor(t,n,i,r,a,s,o){var l,f;this.type=n,this.parent=i,this.config=a,this.correctDataNames=d=>{var g,p,y;return!((g=d.from)===null||g===void 0)&&g.data&&(d.from.data=this.lookupDataSource(d.from.data)),!((y=(p=d.from)===null||p===void 0?void 0:p.facet)===null||y===void 0)&&y.data&&(d.from.facet.data=this.lookupDataSource(d.from.facet.data)),d},this.parent=i,this.config=a,this.view=Li(o),this.name=(l=t.name)!==null&&l!==void 0?l:r,this.title=Qo(t.title)?{text:t.title}:t.title?Li(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new JA,this.projectionNameMap=i?i.projectionNameMap:new JA,this.signalNameMap=i?i.signalNameMap:new JA,this.data=t.data,this.description=t.description,this.transforms=p2e((f=t.transform)!==null&&f!==void 0?f:[]),this.layout=n==="layer"||n==="unit"?{}:Exe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:Rx(t)||i&&i.component.data.isFaceted&&t.data===void 0},layoutSize:new mo,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:Object.assign({scale:{},axis:{},legend:{}},s?Ue(s):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){kSe(this)}parseProjection(){xY(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){pY(this)}assembleEncodeFromView(t){const{style:n}=t,i=KA(t,["style"]),r={};for(const a of ue(i)){const s=i[a];s!==void 0&&(r[a]=zt(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=zt(this.description)),this.type==="unit"||this.type==="layer")?Object.assign({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},n??{}):At(n)?void 0:n}assembleLayout(){if(!this.layout)return;const t=this.layout,{spacing:n}=t,i=KA(t,["spacing"]),{component:r,config:a}=this,s=J_e(r.layoutHeaders,a);return Object.assign(Object.assign(Object.assign({padding:n},this.assembleDefaultLayout()),i),s?{titleBand:s}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of jr)t[i].title&&n.push(X_e(this,i));for(const i of HM)n=n.concat(V_e(this,i));return n}assembleAxes(){return N_e(this.component.axes,this.config)}assembleLegends(){return yY(this)}assembleProjections(){return AAe(this)}assembleTitle(){var t,n,i;const r=(t=this.title)!==null&&t!==void 0?t:{},{encoding:a}=r,s=KA(r,["encoding"]),o=Object.assign(Object.assign(Object.assign({},Bq(this.config.title).nonMarkTitleProperties),s),a?{encode:{update:a}}:{});if(o.text)return Ge(["unit","layer"],this.type)?Ge(["middle",void 0],o.anchor)&&((n=o.frame)!==null&&n!==void 0||(o.frame="group")):(i=o.anchor)!==null&&i!==void 0||(o.anchor="start"),At(o)?void 0:o}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||ha(this.parent)?SY(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Bt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Mt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(ha(this.parent)){const n=uY(t),i=Sx(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if(li(a)&&qu(s)){const o=r.get("name"),l=Jx(this,i),f=KM(l);if(f){const d=de({aggregate:"distinct",field:f},{expr:"datum"});return{signal:oY(o,r,d)}}else return ce(V$(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(kq(t)&&Pu(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(Eye(n));return i}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)===null||t===void 0?void 0:t.some(i=>i.hasOrientSignalRef()))||((n=this.component.axes.y)===null||n===void 0?void 0:n.some(i=>i.hasOrientSignalRef()))}}class kY extends eT{vgField(t,n={}){const i=this.fieldDef(t);if(i)return de(i,n)}reduceFieldDef(t,n){return Wbe(this.getMapping(),(i,r,a)=>{const s=ns(r);return s?t(i,s,a):i},n)}forEachFieldDef(t,n){AM(this.getMapping(),(i,r)=>{const a=ns(i);a&&t(a,r)},n)}}var jSe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class e2 extends wt{constructor(t,n){var i,r,a;super(t),this.transform=n,this.transform=Ue(n);const s=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(r=s[0])!==null&&r!==void 0?r:"value",(a=s[1])!==null&&a!==void 0?a:"density"]}clone(){return new e2(null,Ue(this.transform))}dependentFields(){var t;return new Set([this.transform.density,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ke(this.transform)}`}assemble(){const t=this.transform,{density:n}=t,i=jSe(t,["density"]);return Object.assign({type:"kde",field:n},i)}}class qg extends wt{constructor(t,n){super(t),this.filter=n}clone(){return new qg(null,Object.assign({},this.filter))}static make(t,n){const{config:i,mark:r,markDef:a}=n;if(pt("invalid",a,i)!=="filter")return null;const o=n.reduceFieldDef((l,f,d)=>{const g=Pu(d)&&n.getScaleComponent(d);if(g){const p=g.get("type");br(p)&&f.aggregate!=="count"&&!Hu(r)&&(l[f.field]=f)}return l},{});return ue(o).length?new qg(t,o):null}dependentFields(){return new Set(ue(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ke(this.filter)}`}assemble(){const t=ue(this.filter).reduce((n,i)=>{const r=this.filter[i],a=de(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (isValid(${a}) && isFinite(+${a})))`):r.type==="quantitative"&&(n.push(`isValid(${a})`),n.push(`isFinite(+${a})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class t2 extends wt{constructor(t,n){super(t),this.transform=n,this.transform=Ue(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,s)=>{var o;return(o=r[s])!==null&&o!==void 0?o:a})}clone(){return new t2(this.parent,Ue(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ke(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class n2 extends wt{constructor(t,n){var i,r,a;super(t),this.transform=n,this.transform=Ue(n);const s=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(r=s[0])!==null&&r!==void 0?r:"key",(a=s[1])!==null&&a!==void 0?a:"value"]}clone(){return new n2(null,Ue(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ke(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Xf extends wt{constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}clone(){return new Xf(null,Ue(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[hs,ds],[Gr,Aa]]){const a=r.map(s=>{const o=mn(n.encoding[s]);return he(o)?o.field:Gu(o)?{expr:`${o.datum}`}:ya(o)?{expr:`${o.value}`}:void 0});(a[0]||a[1])&&(t=new Xf(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Vi)){const r=n.typedFieldDef(Vi);r.type===qd&&(t=new Xf(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}dependentFields(){var t;const n=((t=this.fields)!==null&&t!==void 0?t:[]).filter(Le);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ke(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],Object.assign(Object.assign(Object.assign({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class Hg extends wt{constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}clone(){return new Hg(null,this.projection,Ue(this.fields),Ue(this.as))}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[hs,ds],[Gr,Aa]]){const r=i.map(s=>{const o=mn(n.encoding[s]);return he(o)?o.field:Gu(o)?{expr:`${o.datum}`}:ya(o)?{expr:`${o.value}`}:void 0}),a=i[0]===Gr?"2":"";(r[0]||r[1])&&(t=new Hg(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Le))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ke(this.fields)} ${Ke(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Il extends wt{constructor(t,n){super(t),this.transform=n}clone(){return new Il(null,Ue(this.transform))}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Il(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if(he(r)&&he(a)){const s=r.impute?r:a.impute?a:void 0;if(s===void 0)return;const o=r.impute?a:a.impute?r:void 0,{method:l,value:f,frame:d,keyvals:g}=s.impute,p=PH(n.mark,i);return new Il(t,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({impute:s.field,key:o.field},l?{method:l}:{}),f!==void 0?{value:f}:{}),d?{frame:d}:{}),g!==void 0?{keyvals:g}:{}),p.length?{groupby:p}:{}))}return null}hash(){return`Impute ${Ke(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:s,frame:o=[null,null]}=this.transform,l=Object.assign(Object.assign(Object.assign(Object.assign({type:"impute",field:t,key:n},i?{keyvals:Zxe(i)?this.processSequence(i):i}:{}),{method:"value"}),a?{groupby:a}:{}),{value:!r||r==="value"?s:null});if(r&&r!=="value"){const f=Object.assign({type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:o,ignorePeers:!1},a?{groupby:a}:{}),d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,f,d]}else return[l]}}var zSe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class i2 extends wt{constructor(t,n){var i,r,a;super(t),this.transform=n,this.transform=Ue(n);const s=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(r=s[0])!==null&&r!==void 0?r:n.on,(a=s[1])!==null&&a!==void 0?a:n.loess]}clone(){return new i2(null,Ue(this.transform))}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ke(this.transform)}`}assemble(){const t=this.transform,{loess:n,on:i}=t,r=zSe(t,["loess","on"]);return Object.assign({type:"loess",x:i,y:n},r)}}class Gg extends wt{constructor(t,n,i){super(t),this.transform=n,this.secondary=i}clone(){return new Gg(null,Ue(this.transform),this.secondary)}static make(t,n,i,r){const a=n.component.data.sources,{from:s}=i;let o=null;if(Kxe(s)){let l=NY(s.data,a);l||(l=new cc(s.data),a.push(l));const f=n.getName(`lookup_${r}`);o=new Ai(l,f,Mt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[f]=o}else if(Jxe(s)){const l=s.param;i=Object.assign({as:l},i);let f;try{f=n.getSelectionComponent(Bt(l),l)}catch{throw new Error(Sye(l))}if(o=f.materialized,!o)throw new Error(wye(l))}return new Gg(t,i,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Wt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ke({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t=Object.assign({values:this.transform.from.fields},this.transform.as?{as:Wt(this.transform.as)}:{});else{let n=this.transform.as;Le(n)||(ce(Fye),n="_lookup"),t={as:[n]}}return Object.assign(Object.assign({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},t),this.transform.default?{default:this.transform.default}:{})}}var BSe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class r2 extends wt{constructor(t,n){var i,r,a;super(t),this.transform=n,this.transform=Ue(n);const s=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(r=s[0])!==null&&r!==void 0?r:"prob",(a=s[1])!==null&&a!==void 0?a:"value"]}clone(){return new r2(null,Ue(this.transform))}dependentFields(){var t;return new Set([this.transform.quantile,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ke(this.transform)}`}assemble(){const t=this.transform,{quantile:n}=t,i=BSe(t,["quantile"]);return Object.assign({type:"quantile",field:n},i)}}var LSe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class a2 extends wt{constructor(t,n){var i,r,a;super(t),this.transform=n,this.transform=Ue(n);const s=(i=this.transform.as)!==null&&i!==void 0?i:[void 0,void 0];this.transform.as=[(r=s[0])!==null&&r!==void 0?r:n.on,(a=s[1])!==null&&a!==void 0?a:n.regression]}clone(){return new a2(null,Ue(this.transform))}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ke(this.transform)}`}assemble(){const t=this.transform,{regression:n,on:i}=t,r=LSe(t,["regression","on"]);return Object.assign({type:"regression",x:i,y:n},r)}}class s2 extends wt{constructor(t,n){super(t),this.transform=n}clone(){return new s2(null,Ue(this.transform))}addDimensions(t){var n;this.transform.groupby=Ua(((n=this.transform.groupby)!==null&&n!==void 0?n:[]).concat(t),i=>i)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...(t=this.transform.groupby)!==null&&t!==void 0?t:[]])}hash(){return`PivotTransform ${Ke(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return Object.assign(Object.assign(Object.assign({type:"pivot",field:t,value:n},r!==void 0?{limit:r}:{}),a!==void 0?{op:a}:{}),i!==void 0?{groupby:i}:{})}}class o2 extends wt{constructor(t,n){super(t),this.transform=n}clone(){return new o2(null,Ue(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ke(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function FY(e){let t=0;function n(i,r){var a;if(i instanceof cc&&!i.isGenerator&&!xd(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof ei&&(i.parent instanceof cc&&!r.source?(r.format=Object.assign(Object.assign({},(a=r.format)!==null&&a!==void 0?a:{}),{parse:i.assembleFormatParse()}),r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Wd){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof Pp||i instanceof Ip||i instanceof qg||i instanceof Vd||i instanceof Ad||i instanceof Hg||i instanceof da||i instanceof Gg||i instanceof Qd||i instanceof $c||i instanceof n2||i instanceof t2||i instanceof e2||i instanceof i2||i instanceof r2||i instanceof a2||i instanceof Mu||i instanceof o2||i instanceof s2)&&r.transform.push(i.assemble()),(i instanceof Xa||i instanceof Ya||i instanceof Il||i instanceof no||i instanceof Xf)&&r.transform.push(...i.assemble()),i instanceof Ai&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof Ai?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Ai&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let s=r.name;!r.source||r.transform.length>0?e.push(r):s=r.source;for(const o of i.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function USe(e){const t=[],n=FY(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function PSe(e,t){var n,i;const r=[],a=FY(r);let s=0;for(const l of e.sources){l.hasName()||(l.dataName=`source_${s++}`);const f=l.assemble();a(l,f)}for(const l of r)l.transform.length===0&&delete l.transform;let o=0;for(const[l,f]of r.entries())((n=f.transform)!==null&&n!==void 0?n:[]).length===0&&!f.source&&r.splice(o++,0,r.splice(l,1)[0]);for(const l of r)for(const f of(i=l.transform)!==null&&i!==void 0?i:[])f.type==="lookup"&&(f.from=e.outputNodes[f.from].getSource());for(const l of r)l.name in t&&(l.values=t[l.name]);return r}function ISe(e){return e==="top"||e==="left"||$e(e)?"header":"footer"}function qSe(e){for(const t of jr)HSe(e,t);p9(e,"x"),p9(e,"y")}function HSe(e,t){var n;const{facet:i,config:r,child:a,component:s}=e;if(e.channelHasField(t)){const o=i[t],l=wd("title",null,r,t);let f=Gf(o,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});a.component.layoutHeaders[t].title&&(f=xe(f)?f.join(", "):f,f+=` / ${a.component.layoutHeaders[t].title}`,a.component.layoutHeaders[t].title=null);const d=wd("labelOrient",o.header,r,t),g=o.header!==null?ln((n=o.header)===null||n===void 0?void 0:n.labels,r.header.labels,!0):!1,p=Ge(["bottom","right"],d)?"footer":"header";s.layoutHeaders[t]={title:o.header!==null?f:null,facetFieldDef:o,[p]:t==="facet"?[]:[RY(e,t,g)]}}}function RY(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function p9(e,t){var n;const{child:i}=e;if(i.component.axes[t]){const{layoutHeaders:r,resolve:a}=e.component;if(a.axis[t]=XM(a,t),a.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const l of i.component.axes[t]){const f=ISe(l.get("orient"));(n=o[f])!==null&&n!==void 0||(o[f]=[RY(e,s,!1)]);const d=G0(l,"main",e.config,{header:!0});d&&o[f][0].axes.push(d),l.mainExtracted=!0}}}}function GSe(e){tT(e),Qv(e,"width"),Qv(e,"height")}function YSe(e){tT(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Qv(e,t),Qv(e,n)}function tT(e){for(const t of e.children)t.parseLayoutSize()}function Qv(e,t){var n;const i=uY(t),r=Sx(i),a=e.component.resolve,s=e.component.layoutSize;let o;for(const l of e.children){const f=l.component.layoutSize.getWithExplicit(i),d=(n=a.scale[r])!==null&&n!==void 0?n:cY(r,e);if(d==="independent"&&f.value==="step"){o=void 0;break}if(o){if(d==="independent"&&o.value!==f.value){o=void 0;break}o=Ou(o,f,i,"")}else o=f}if(o){for(const l of e.children)e.renameSignal(l.getName(i),e.getName(t)),l.component.layoutSize.set(i,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function XSe(e){const{size:t,component:n}=e;for(const i of ms){const r=Yr(i);if(t[r]){const a=t[r];n.layoutSize.set(r,is(a)?"step":a,!0)}else{const a=VSe(e,r);n.layoutSize.set(r,a,!1)}}}function VSe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),s=r.get("range");if(li(a)){const o=Bg(i.view,t);return qu(s)||is(o)?"step":o}else return pO(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return pO(i.view,t);{const a=Bg(i.view,t);return is(a)?a.step:a}}}function RO(e,t,n){return de(t,Object.assign({suffix:`by_${de(e)}`},n??{}))}class lg extends kY{constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=sT(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Rp(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ue(t),i={};for(const r of n){if(![Js,eo].includes(r)){ce(Cx(r,"facet"));break}const a=t[r];if(a.field===void 0){ce(uO(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=EM(t,n);return i.header?i.header=Li(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=u2(this),this.child.parseData()}parseLayoutSize(){tT(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),qSe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){var t,n,i;const r={};for(const a of jr)for(const s of GM){const o=this.component.layoutHeaders[a],l=o[s],{facetFieldDef:f}=o;if(f){const d=wd("titleOrient",f.header,this.config,a);if(["right","bottom"].includes(d)){const g=Zx(a,d);(t=r.titleAnchor)!==null&&t!==void 0||(r.titleAnchor={}),r.titleAnchor[g]="end"}}if(l?.[0]){const d=a==="row"?"height":"width",g=s==="header"?"headerBand":"footerBand";a!=="facet"&&!this.child.component.layoutSize.get(d)&&((n=r[g])!==null&&n!==void 0||(r[g]={}),r[g][a]=.5),o.title&&((i=r.offset)!==null&&i!==void 0||(r.offset={}),r.offset[a==="row"?"rowTitle":"columnTitle"]=10)}}return r}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),Object.assign(Object.assign(Object.assign({},this.getHeaderLayoutMixins()),i?{columns:i}:{}),{bounds:"full",align:r})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof lg))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof lg?Object.assign(Object.assign({},this.channelHasField("column")?{encode:{update:{columns:{field:de(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(t)):super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof lg){if(this.child.channelHasField("column")){const r=de(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of ms){const a=this.child.component.scales[r];if(a&&!a.merged){const s=a.get("type"),o=a.get("range");if(li(s)&&qu(o)){const l=Jx(this.child,r),f=KM(l);f?(t.push(f),n.push("distinct"),i.push(`distinct_${f}`)):ce(V$(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:s,as:o}=this.getCardinalityAggregateForChild(),l=[];for(const d of jr){const g=this.facet[d];if(g){l.push(de(g));const{bin:p,sort:y}=g;if(kt(p)&&l.push(de(g,{binSuffix:"end"})),Ga(y)){const{field:v,op:x=Fx}=y,E=RO(g,y);i&&r?(a.push(E),s.push("max"),o.push(E)):(a.push(v),s.push(x),o.push(E))}else if(xe(y)){const v=Sd(g,d);a.push(v),s.push("max"),o.push(v)}}}const f=!!i&&!!r;return Object.assign({name:t,data:n,groupby:l},f||a.length>0?{aggregate:Object.assign(Object.assign({},f?{cross:f}:{}),a.length?{fields:a,ops:s,as:o}:{})}:{})}facetSortFields(t){const{facet:n}=this,i=n[t];return i?Ga(i.sort)?[RO(i,i.sort,{expr:"datum"})]:xe(i.sort)?[Sd(i,t,{expr:"datum"})]:[de(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(Ga(r)?r.order:!xe(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){var t;const{facet:n,config:i}=this;if(n.facet)return DO(n.facet,"facet",i);const r={row:["top","bottom"],column:["left","right"]};for(const a of HM)if(n[a]){const s=wd("labelOrient",(t=n[a])===null||t===void 0?void 0:t.header,i,a);if(r[a].includes(s))return DO(n[a],a,i)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=USe(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:this.getName("cell"),type:"group"},a?{title:a}:{}),s?{style:s}:{}),{from:{facet:this.assembleFacet()},sort:{field:jr.map(l=>this.facetSortFields(l)).flat(),order:jr.map(l=>this.facetSortOrder(l)).flat()}}),i.length>0?{data:i}:{}),r?{encode:{update:r}}:{}),t.assembleGroup(B2e(this,[])))]}getMapping(){return this.facet}}function WSe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(Ga(a.sort)){const{field:s,op:o=Fx}=a.sort;e=r=new $c(e,{joinaggregate:[{op:o,field:s,as:RO(a,a.sort,{forAs:!0})}],groupby:[de(a)]})}return r}return null}function NY(e,t){var n,i,r,a;for(const s of t){const o=s.data;if(e.name&&s.hasName()&&e.name!==s.dataName)continue;const l=(n=e.format)===null||n===void 0?void 0:n.mesh,f=(i=o.format)===null||i===void 0?void 0:i.feature;if(l&&f)continue;const d=(r=e.format)===null||r===void 0?void 0:r.feature;if((d||f)&&d!==f)continue;const g=(a=o.format)===null||a===void 0?void 0:a.mesh;if(!((l||g)&&l!==g)){if(Lg(e)&&Lg(o)){if(La(e.values,o.values))return s}else if(xd(e)&&xd(o)){if(e.url===o.url)return s}else if(vG(e)&&e.name===s.dataName)return s}}return null}function QSe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new cc({values:[]});return t.push(i),i}const n=NY(e.data,t);if(n)return du(e.data)||(n.data.format=Eq({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new cc(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function ZSe(e,t,n){var i,r;let a=0;for(const s of t.transforms){let o,l;if(l2e(s))l=e=new Ad(e,s),o="derived";else if(RM(s)){const f=zAe(s);l=e=(i=ei.makeWithAncestors(e,{},f,n))!==null&&i!==void 0?i:e,e=new Vd(e,t,s.filter)}else if(dG(s))l=e=Xa.makeFromTransform(e,s,t),o="number";else if(f2e(s))o="date",n.getWithExplicit(s.field).value===void 0&&(e=new ei(e,{[s.field]:o}),n.set(s.field,o,!1)),l=e=Ya.makeFromTransform(e,s);else if(d2e(s))l=e=da.makeFromTransform(e,s),o="number",UM(t)&&(e=new Mu(e));else if(fG(s))l=e=Gg.make(e,t,s,a++),o="derived";else if(s2e(s))l=e=new Qd(e,s),o="number";else if(o2e(s))l=e=new $c(e,s),o="number";else if(h2e(s))l=e=no.makeFromTransform(e,s),o="derived";else if(g2e(s))l=e=new n2(e,s),o="derived";else if(u2e(s))l=e=new t2(e,s),o="derived";else if(e2e(s))l=e=new s2(e,s),o="derived";else if(a2e(s))e=new o2(e,s);else if(c2e(s))l=e=Il.makeFromTransform(e,s),o="derived";else if(t2e(s))l=e=new e2(e,s),o="derived";else if(n2e(s))l=e=new r2(e,s),o="derived";else if(i2e(s))l=e=new a2(e,s),o="derived";else if(r2e(s))l=e=new i2(e,s),o="derived";else{ce(kye(s));continue}if(l&&o!==void 0)for(const f of(r=l.producedFields())!==null&&r!==void 0?r:[])n.set(f,o,!1)}return e}function u2(e){var t,n,i,r,a,s,o,l,f,d;let g=QSe(e,e.component.data.sources);const{outputNodes:p,outputNodeRefCounts:y}=e.component.data,v=e.data,E=!(v&&(du(v)||xd(v)||Lg(v)))&&e.parent?e.parent.component.data.ancestorParse.clone():new w2e;du(v)?(bG(v)?g=new Ip(g,v.sequence):NM(v)&&(g=new Pp(g,v.graticule)),E.parseNothing=!0):((t=v?.format)===null||t===void 0?void 0:t.parse)===null&&(E.parseNothing=!0),g=(n=ei.makeExplicit(g,e,E))!==null&&n!==void 0?n:g,g=new Mu(g);const A=e.parent&&Zd(e.parent);(sn(e)||ha(e))&&A&&(g=(i=Xa.makeFromEncoding(g,e))!==null&&i!==void 0?i:g),e.transforms.length>0&&(g=ZSe(g,e,E));const S=LAe(e),w=BAe(e);g=(r=ei.makeWithAncestors(g,{},Object.assign(Object.assign({},S),w),E))!==null&&r!==void 0?r:g,sn(e)&&(g=Xf.parseAll(g,e),g=Hg.parseAll(g,e)),(sn(e)||ha(e))&&(A||(g=(a=Xa.makeFromEncoding(g,e))!==null&&a!==void 0?a:g),g=(s=Ya.makeFromEncoding(g,e))!==null&&s!==void 0?s:g,g=Ad.parseAllForSortIndex(g,e));const D=e.getDataName(Mt.Raw),O=new Ai(g,D,Mt.Raw,y);if(p[D]=O,g=O,sn(e)){const N=da.makeFromEncoding(g,e);N&&(g=N,UM(e)&&(g=new Mu(g))),g=(o=Il.makeFromEncoding(g,e))!==null&&o!==void 0?o:g,g=(l=no.makeFromEncoding(g,e))!==null&&l!==void 0?l:g}sn(e)&&(g=(f=qg.make(g,e))!==null&&f!==void 0?f:g);const M=e.getDataName(Mt.Main),C=new Ai(g,M,Mt.Main,y);p[M]=C,g=C,sn(e)&&F_e(e,C);let k=null;if(ha(e)){const N=e.getName("facet");g=(d=WSe(g,e.facet))!==null&&d!==void 0?d:g,k=new Wd(g,e,N,C.getSource()),p[N]=k}return Object.assign(Object.assign({},e.component.data),{outputNodes:p,outputNodeRefCounts:y,raw:O,main:C,facetRoot:k,ancestorParse:E})}class KSe extends eT{constructor(t,n,i,r){var a,s,o,l;super(t,"concat",n,i,r,t.resolve),(((s=(a=t.resolve)===null||a===void 0?void 0:a.axis)===null||s===void 0?void 0:s.x)==="shared"||((l=(o=t.resolve)===null||o===void 0?void 0:o.axis)===null||l===void 0?void 0:l.y)==="shared")&&ce($ye),this.children=this.getChildren(t).map((f,d)=>sT(f,this,this.getName(`concat_${d}`),void 0,r))}parseData(){this.component.data=u2(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ue(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return Ix(t)?t.vconcat:kM(t)?t.hconcat:t.concat}parseLayoutSize(){YSe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=YM(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return Object.assign(Object.assign(Object.assign(Object.assign({type:"group",name:t.getName("group")},n?{title:n}:{}),i?{style:i}:{}),r?{encode:{update:r}}:{}),t.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return Object.assign(Object.assign({},t!=null?{columns:t}:{}),{bounds:"full",align:"each"})}}function JSe(e){return e===!1||e===null}const ewe=Object.assign(Object.assign({disable:1,gridScale:1,scale:1},BH),{labelExpr:1,encode:1}),jY=ue(ewe);class nT extends mo{constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new nT(Ue(this.explicit),Ue(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!JSe(this.get(t))}hasOrientSignalRef(){return $e(this.explicit.orient)}}function twe(e,t,n){var i;const{encoding:r,config:a}=e,s=(i=mn(r[t]))!==null&&i!==void 0?i:mn(r[go(t)]),o=e.axis(t)||{},{format:l,formatType:f}=o;return sc(f)?Object.assign({text:pM({fieldOrDatumDef:s,field:"datum.value",format:l,formatType:f,config:a})},n):n}function nwe(e){return ms.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[lwe(n,e)]),t),{})}const iwe={bottom:"top",top:"bottom",left:"right",right:"left"};function rwe(e){var t;const{axes:n,resolve:i}=e.component,r={top:0,bottom:0,right:0,left:0};for(const a of e.children){a.parseAxesAndHeaders();for(const s of ue(a.component.axes))i.axis[s]=XM(e.component.resolve,s),i.axis[s]==="shared"&&(n[s]=awe(n[s],a.component.axes[s]),n[s]||(i.axis[s]="independent",delete n[s]))}for(const a of ms){for(const s of e.children)if(s.component.axes[a]){if(i.axis[a]==="independent"){n[a]=((t=n[a])!==null&&t!==void 0?t:[]).concat(s.component.axes[a]);for(const o of s.component.axes[a]){const{value:l,explicit:f}=o.getWithExplicit("orient");if(!$e(l)){if(r[l]>0&&!f){const d=iwe[l];r[l]>r[d]&&o.set("orient",d,!1)}r[l]++}}}delete s.component.axes[a]}if(i.axis[a]==="independent"&&n[a]&&n[a].length>1)for(const s of n[a])s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function awe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const s=r.getWithExplicit("orient"),o=a.getWithExplicit("orient");if(s.explicit&&o.explicit&&s.value!==o.value)return;e[i]=swe(r,a)}}}else return t.map(n=>n.clone());return e}function swe(e,t){for(const n of jY){const i=Ou(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return Gq(r,a);case"gridScale":return{explicit:r.explicit,value:ln(r.value,a.value)}}return Hx(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function owe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===($e(n.labelAngle)?n.labelAngle:Rg(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===iY(i,r))return!0}return e===n[t]}const uwe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function lwe(e,t){var n,i,r;let a=t.axis(e);const s=new nT,o=mn(t.encoding[e]),{mark:l,config:f}=t,d=a?.orient||((n=f[e==="x"?"axisX":"axisY"])===null||n===void 0?void 0:n.orient)||((i=f.axis)===null||i===void 0?void 0:i.orient)||q_e(e),g=t.getScaleComponent(e).get("type"),p=j_e(e,g,d,t.config),y=a!==void 0?!a:OO("disable",f.style,a?.style,p).configValue;if(s.set("disable",y,a!==void 0),y)return s;a=a||{};const v=U_e(o,a,e,f.style,p),x={fieldOrDatumDef:o,axis:a,channel:e,model:t,scaleType:g,orient:d,labelAngle:v,mark:l,config:f};for(const S of jY){const w=S in e9?e9[S](x):AN(S)?a[S]:void 0,D=w!==void 0,O=owe(w,S,a,t,e);if(D&&O)s.set(S,w,O);else{const{configValue:M=void 0,configFrom:C=void 0}=AN(S)&&S!=="values"?OO(S,f.style,a.style,p):{},k=M!==void 0;D&&!k?s.set(S,w,O):(C!=="vgAxisConfig"||uwe.has(S)&&k||jp(M)||$e(M))&&s.set(S,M,!1)}}const E=(r=a.encoding)!==null&&r!==void 0?r:{},A=zH.reduce((S,w)=>{var D;if(!s.hasAxisPart(w))return S;const O=lY((D=E[w])!==null&&D!==void 0?D:{},t),M=w==="labels"?twe(t,e,O):O;return M!==void 0&&!At(M)&&(S[w]={update:M}),S},{});return At(A)||s.set("encode",A,!!a.encoding||a.labelAngle!==void 0),s}function cwe({encoding:e,size:t}){for(const n of ms){const i=Yr(n);is(t[i])&&Pa(e[n])&&(delete t[i],ce(Qq(i)))}return t}function fwe(e,t,n){const i=Li(e),r=pt("orient",i,n);if(i.orient=pwe(i.type,t,r),r!==void 0&&r!==i.orient&&ce(Xye(i.orient,r)),i.type==="bar"&&i.orient){const o=pt("cornerRadiusEnd",i,n);if(o!==void 0){const l=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:ybe[i.orient];for(const f of l)i[f]=o;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}return pt("opacity",i,n)===void 0&&(i.opacity=hwe(i.type,t)),pt("cursor",i,n)===void 0&&(i.cursor=dwe(i,t,n)),i}function dwe(e,t,n){return t.href||e.href||pt("href",e,n)?"pointer":e.cursor}function hwe(e,t){if(Ge([Tx,lM,cM,fM],e)&&!_M(t))return .7}function gwe(e,t,{graticule:n}){if(n)return!1;const i=rc("filled",e,t),r=e.type;return ln(i,r!==Tx&&r!==Mx&&r!==zv)}function pwe(e,t,n){switch(e){case Tx:case cM:case fM:case fH:case ube:case obe:return}const{x:i,y:r,x2:a,y2:s}=t;switch(e){case $x:if(he(i)&&(vi(i.bin)||he(r)&&r.aggregate&&!i.aggregate))return"vertical";if(he(r)&&(vi(r.bin)||he(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a&&(he(i)&&i.type===ac&&!kt(i.bin)||hO(i)))return"horizontal";if(!s&&(he(r)&&r.type===ac&&!kt(r.bin)||hO(r)))return"vertical"}case zv:if(a&&!(he(i)&&vi(i.bin))&&s&&!(he(r)&&vi(r.bin)))return;case Dx:if(s)return he(r)&&vi(r.bin)?"horizontal":"vertical";if(a)return he(i)&&vi(i.bin)?"vertical":"horizontal";if(e===zv){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case Mx:case lM:{const o=Pa(i),l=Pa(r);if(n)return n;if(o&&!l)return e!=="tick"?"horizontal":"vertical";if(!o&&l)return e!=="tick"?"vertical":"horizontal";if(o&&l){const f=i,d=r,g=f.type===vd,p=d.type===vd;return g&&!p?e!=="tick"?"vertical":"horizontal":!g&&p?e!=="tick"?"horizontal":"vertical":!f.aggregate&&d.aggregate?e!=="tick"?"vertical":"horizontal":f.aggregate&&!d.aggregate&&e!=="tick"?"horizontal":"vertical"}else return}}return"vertical"}const mwe={vgMark:"arc",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Wr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Jn("x",e,{defaultPos:"mid"})),Jn("y",e,{defaultPos:"mid"})),Du(e,"radius","arc")),Du(e,"theta","arc"))},ywe={vgMark:"area",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Wr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),Yv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"})),Yv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"})),LM(e))},vwe={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Wr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Du(e,"x","bar")),Du(e,"y","bar"))},bwe={vgMark:"shape",encodeEntry:e=>Object.assign({},Wr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[Object.assign({type:"geoshape",projection:e.projectionName()},n&&he(n)&&n.type===qd?{field:de(n,{expr:"datum"})}:{})]}},xwe={vgMark:"image",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign({},Wr(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Du(e,"x","image")),Du(e,"y","image")),zM(e,"url"))},Ewe={vgMark:"line",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Wr(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),Jn("x",e,{defaultPos:"mid"})),Jn("y",e,{defaultPos:"mid"})),On("size",e,{vgChannel:"strokeWidth"})),LM(e))},_we={vgMark:"trail",encodeEntry:e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Wr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Jn("x",e,{defaultPos:"mid"})),Jn("y",e,{defaultPos:"mid"})),On("size",e)),LM(e))};function iT(e,t){const{config:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Wr(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),Jn("x",e,{defaultPos:"mid"})),Jn("y",e,{defaultPos:"mid"})),On("size",e)),On("angle",e)),Awe(e,n,t))}function Awe(e,t,n){return n?{shape:{value:n}}:On("shape",e)}const Swe={vgMark:"symbol",encodeEntry:e=>iT(e)},wwe={vgMark:"symbol",encodeEntry:e=>iT(e,"circle")},Owe={vgMark:"symbol",encodeEntry:e=>iT(e,"square")},Cwe={vgMark:"rect",encodeEntry:e=>Object.assign(Object.assign(Object.assign({},Wr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Du(e,"x","rect")),Du(e,"y","rect"))},Dwe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:Object.assign(Object.assign(Object.assign(Object.assign({},Wr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Yv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"})),Yv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"})),On("size",e,{vgChannel:"strokeWidth"}))}},$we={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Wr(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),Jn("x",e,{defaultPos:"mid"})),Jn("y",e,{defaultPos:"mid"})),zM(e)),On("size",e,{vgChannel:"fontSize"})),On("angle",e)),qN("align",Mwe(e.markDef,n,t))),qN("baseline",Twe(e.markDef,n,t))),Jn("radius",e,{defaultPos:null})),Jn("theta",e,{defaultPos:null}))}};function Mwe(e,t,n){if(pt("align",e,n)===void 0)return"center"}function Twe(e,t,n){if(pt("baseline",e,n)===void 0)return"middle"}const kwe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"width":"height",a=i==="horizontal"?"height":"width";return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Wr(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Jn("x",e,{defaultPos:"mid",vgChannel:"xc"})),Jn("y",e,{defaultPos:"mid",vgChannel:"yc"})),On("size",e,{defaultValue:Fwe(e),vgChannel:r})),{[a]:zt(pt("thickness",n,t))})}};function Fwe(e){var t;const{config:n,markDef:i}=e,{orient:r}=i,a=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=(t=pt("size",i,n,{vgChannel:a}))!==null&&t!==void 0?t:n.tick.bandSize;if(o!==void 0)return o;{const l=s?s.get("range"):void 0;return l&&qu(l)&&un(l.step)?l.step*3/4:qv(n.view,a)*3/4}}const L1={arc:mwe,area:ywe,bar:vwe,circle:wwe,geoshape:bwe,image:xwe,line:Ewe,point:Swe,rect:Cwe,rule:Dwe,square:Owe,text:$we,tick:kwe,trail:_we};function Rwe(e){if(Ge([Mx,Dx,lbe],e.mark)){const t=PH(e.mark,e.encoding);if(t.length>0)return Nwe(e,t)}else if(e.mark===$x){const t=oO.some(n=>pt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return jwe(e)}return rT(e)}const m9="faceted_path_";function Nwe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:m9+e.requestDataName(Mt.Main),data:e.requestDataName(Mt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:rT(e,{fromPrefix:m9})}]}const y9="stack_group_";function jwe(e){const[t]=rT(e,{fromPrefix:y9}),n=e.scaleName(e.stack.fieldChannel),i=(f={})=>e.vgField(e.stack.fieldChannel,f),r=(f,d)=>{const g=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${f}(${g.map(p=>`scale('${n}',${p})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a=Object.assign(Object.assign({},gd(t.encode.update,["y","yc","y2","height",...oO])),{x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}}),s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update=Object.assign(Object.assign({},gr(t.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(a=Object.assign(Object.assign({},gd(t.encode.update,["x","xc","x2","width"])),{y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}}),s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update=Object.assign(Object.assign({},gr(t.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const f of oO){const d=rc(f,e.markDef,e.config);t.encode.update[f]?(a[f]=t.encode.update[f],delete t.encode.update[f]):d&&(a[f]=zt(d)),d&&(t.encode.update[f]={value:0})}const o=[];if(e.stack.groupbyChannel){const f=e.fieldDef(e.stack.groupbyChannel),d=de(f);d&&o.push(d),(f?.bin||f?.timeUnit)&&o.push(de(f,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(t.encode.update[d])return Object.assign(Object.assign({},f),{[d]:t.encode.update[d]});{const g=rc(d,e.markDef,e.config);return g!==void 0?Object.assign(Object.assign({},f),{[d]:zt(g)}):f}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Mt.Main),name:y9+e.requestDataName(Mt.Main),groupby:o,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function zwe(e){var t;const{encoding:n,stack:i,mark:r,markDef:a,config:s}=e,o=n.order;if(!(!xe(o)&&ya(o)&&aO(o.value)||!o&&aO(pt("order",a,s)))){if((xe(o)||he(o))&&!i)return Iq(o,{expr:"datum"});if(Hu(r)){const l=a.orient==="horizontal"?"y":"x",f=n[l];if(he(f)){const d=f.sort;if(xe(d))return{field:de(f,{prefix:l,suffix:"sort_index",expr:"datum"})};if(Ga(d))return{field:de({aggregate:_M(e.encoding)?d.op:void 0,field:d.field},{expr:"datum"})};if(wH(d)){const g=e.fieldDef(d.encoding);return{field:de(g,{expr:"datum"}),order:d.order}}else return d===null?void 0:{field:de(f,{binSuffix:!((t=e.stack)===null||t===void 0)&&t.impute?"mid":void 0,expr:"datum"})}}return}}}function rT(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,s=ln(i.clip,Bwe(e),Lwe(e)),o=Uq(i),l=r.key,f=zwe(e),d=Uwe(e),g=pt("aria",i,a),p=L1[n].postEncodingTransform?L1[n].postEncodingTransform(e):null;return[Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({name:e.getName("marks"),type:L1[n].vgMark},s?{clip:!0}:{}),o?{style:o}:{}),l?{key:l.field}:{}),f?{sort:f}:{}),d||{}),g===!1?{aria:g}:{}),{from:{data:t.fromPrefix+e.requestDataName(Mt.Main)},encode:{update:L1[n].encodeEntry(e)}}),p?{transform:p}:{})]}function Bwe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t&&t.get("selectionExtent")||n&&n.get("selectionExtent")?!0:void 0}function Lwe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Uwe(e){if(!e.component.selection)return null;const t=ue(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=ue(i.component.selection).length,i=i.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}class zY extends kY{constructor(t,n,i,r={},a){var s;super(t,"unit",n,i,a,void 0,ON(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=ts(t.mark)?Object.assign({},t.mark):{type:t.mark},l=o.type;o.filled===void 0&&(o.filled=gwe(o,a,{graticule:t.data&&NM(t.data)}));const f=this.encoding=Xbe(t.encoding||{},l,o.filled,a);this.markDef=fwe(o,f,a),this.size=cwe({encoding:f,size:ON(t)?Object.assign(Object.assign(Object.assign({},r),t.width?{width:t.width}:{}),t.height?{height:t.height}:{}):r}),this.stack=oG(l,f),this.specifiedScales=this.initScales(l,f),this.specifiedAxes=this.initAxes(f),this.specifiedLegends=this.initLegends(f),this.specifiedProjection=t.projection,this.selection=((s=t.params)!==null&&s!==void 0?s:[]).filter(d=>MM(d))}get hasProjection(){const{encoding:t}=this,n=this.mark===dH,i=t&&H1e.some(r=>Be(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return wx.reduce((i,r)=>{var a;const s=mn(n[r]);return s&&(i[r]=this.initScale((a=s.scale)!==null&&a!==void 0?a:{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Li(t);return xe(n)&&(r.domain=n.map(lr)),xe(i)&&(r.range=i.map(lr)),r}initAxes(t){return ms.reduce((n,i)=>{const r=t[i];if(Be(r)||i===Pt&&Be(t.x2)||i===vn&&Be(t.y2)){const a=Be(r)?r.axis:void 0;n[i]=a&&this.initAxis(Object.assign({},a))}return n},{})}initAxis(t){const n=ue(t),i={};for(const r of n){const a=t[r];i[r]=jp(a)?Lq(a):lr(a)}return i}initLegends(t){return K1e.reduce((n,i)=>{const r=mn(t[i]);if(r&&eye(i)){const a=r.legend;n[i]=a&&Li(a)}return n},{})}parseData(){this.component.data=u2(this)}parseLayoutSize(){XSe(this)}parseSelections(){this.component.selection=k_e(this,this.selection)}parseMarkGroup(){this.component.mark=Rwe(this)}parseAxesAndHeaders(){this.component.axes=nwe(this)}assembleSelectionTopLevelSignals(t){return L2e(this,t)}assembleSignals(){return[...eY(this),...z2e(this,[])]}assembleSelectionData(t){return U2e(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return YM(this)}assembleMarks(){var t;let n=(t=this.component.mark)!==null&&t!==void 0?t:[];return(!this.parent||!Zd(this.parent))&&(n=CG(this,n)),n.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};if(t!==void 0)return t;if(this.encoding.x||this.encoding.y)return"cell"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Pl(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return ns(n)}typedFieldDef(t){const n=this.fieldDef(t);return Xr(n)?n:null}}class aT extends eT{constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const s=Object.assign(Object.assign(Object.assign({},r),t.width?{width:t.width}:{}),t.height?{height:t.height}:{});this.children=t.layer.map((o,l)=>{if(qx(o))return new aT(o,this,this.getName(`layer_${l}`),s,a);if(po(o))return new zY(o,this,this.getName(`layer_${l}`),s,a);throw new Error(X$(o))})}parseData(){this.component.data=u2(this);for(const t of this.children)t.parseData()}parseLayoutSize(){GSe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ue(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){rwe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),eY(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),YM(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of Wt(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return P2e(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),yY(this))}}function sT(e,t,n,i,r){if(Rx(e))return new lg(e,t,n,r);if(qx(e))return new aT(e,t,n,i,r);if(po(e))return new zY(e,t,n,i,r);if(vxe(e))return new KSe(e,t,n,r);throw new Error(X$(e))}var Pwe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function Iwe(e,t={}){t.logger&&vve(t.logger),t.fieldTitle&&RH(t.fieldTitle);try{const n=sG(xq(t.config,e.config)),i=mG(e,n),r=sT(i,null,"",void 0,n);return r.parse(),tSe(r.component.data,r),{spec:Hwe(r,qwe(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&bve(),t.fieldTitle&&zbe()}}function qwe(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Le(t)&&(t={type:t}),r&&a&&_2e(t.type)){if(r==="step"&&a==="step")ce(cN()),t.type="pad";else if(r==="step"||a==="step"){const s=r==="step"?"width":"height";ce(cN(Sx(s)));const o=s==="width"?"height":"width";t.type=A2e(o)}}return Object.assign(Object.assign(Object.assign({},ue(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t}),BN(n,!1)),BN(e,!0))}function Hwe(e,t,n={},i){const r=e.config?Fxe(e.config):void 0,a=[].concat(e.assembleSelectionData([]),PSe(e.component.data,n)),s=e.assembleProjections(),o=e.assembleTitle(),l=e.assembleGroupStyle(),f=e.assembleGroupEncodeEntry(!0);let d=e.assembleLayoutSignals();d=d.filter(y=>(y.name==="width"||y.name==="height")&&y.value!==void 0?(t[y.name]=+y.value,!1):!0);const{params:g}=t,p=Pwe(t,["params"]);return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({$schema:"https://vega.github.io/schema/vega/v5.json"},e.description?{description:e.description}:{}),p),o?{title:o}:{}),l?{style:l}:{}),f?{encode:{update:f}}:{}),{data:a}),s.length>0?{projections:s}:{}),e.assembleGroup([...d,...e.assembleSelectionTopLevelSignals([]),...iG(g)])),r?{config:r}:{}),i?{usermeta:i}:{})}const Gwe=m1e.version,Ywe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:md,accessPathWithDatum:L$,compile:Iwe,contains:Ge,deepEqual:La,deleteNestedProperty:Rv,duplicate:Ue,entries:Su,every:j$,fieldIntersection:B$,flatAccessWithDatum:Aq,getFirstDefined:ln,hasIntersection:z$,hash:Ke,internalField:Oq,isBoolean:Fg,isEmpty:At,isEqual:B1e,isInternalField:Cq,isNullOrFalse:aO,isNumeric:mx,keys:ue,logicalExpr:ag,mergeDeep:Eq,normalize:mG,normalizeAngle:Rg,omit:gr,pick:gd,prefixGenerator:sO,removePathFromField:U$,replaceAll:nc,replacePathInField:Hr,resetIdCounter:U1e,setEqual:_q,some:pd,stringify:Tt,titleCase:Cp,unique:Ua,uniqueId:wq,vals:ai,varName:Bt,version:Gwe},Symbol.toStringTag,{value:"Module"}));function BY(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Xwe="2.15.0",Vwe={version:Xwe};const Cf="#fff",v9="#888",Wwe={background:"#333",view:{stroke:v9},title:{color:Cf,subtitleColor:Cf},style:{"guide-label":{fill:Cf},"guide-title":{fill:Cf}},axis:{domainColor:Cf,gridColor:v9,tickColor:Cf}},pl="#4572a7",Qwe={background:"#fff",arc:{fill:pl},area:{fill:pl},line:{stroke:pl,strokeWidth:2},path:{stroke:pl},rect:{fill:pl},shape:{stroke:pl},symbol:{fill:pl,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},ml="#30a2da",eS="#cbcbcb",Zwe="#999",Kwe="#333",b9="#f0f0f0",x9="#333",Jwe={arc:{fill:ml},area:{fill:ml},axis:{domainColor:eS,grid:!0,gridColor:eS,gridWidth:1,labelColor:Zwe,labelFontSize:10,titleColor:Kwe,tickColor:eS,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:b9,group:{fill:b9},legend:{labelColor:x9,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:x9,titleFontSize:14,titlePadding:10},line:{stroke:ml,strokeWidth:2},path:{stroke:ml,strokeWidth:.5},rect:{fill:ml},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:ml},bar:{binSpacing:2,fill:ml,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},yl="#000",eOe={group:{fill:"#e5e5e5"},arc:{fill:yl},area:{fill:yl},line:{stroke:yl},path:{stroke:yl},rect:{fill:yl},shape:{stroke:yl},symbol:{fill:yl,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},tOe=22,nOe="normal",E9="Benton Gothic, sans-serif",_9=11.5,iOe="normal",vl="#82c6df",tS="Benton Gothic Bold, sans-serif",A9="normal",S9=13,b0={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},rOe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:tS,fontSize:tOe,fontWeight:nOe},arc:{fill:vl},area:{fill:vl},line:{stroke:vl,strokeWidth:2},path:{stroke:vl},rect:{fill:vl},shape:{stroke:vl},symbol:{fill:vl,size:30},axis:{labelFont:E9,labelFontSize:_9,labelFontWeight:iOe,titleFont:tS,titleFontSize:S9,titleFontWeight:A9},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:E9,labelFontSize:_9,symbolType:"square",titleFont:tS,titleFontSize:S9,titleFontWeight:A9},range:{category:b0["category-6"],diverging:b0["fireandice-6"],heatmap:b0["fire-7"],ordinal:b0["fire-7"],ramp:b0["fire-7"]}},bl="#ab5787",U1="#979797",aOe={background:"#f9f9f9",arc:{fill:bl},area:{fill:bl},line:{stroke:bl},path:{stroke:bl},rect:{fill:bl},shape:{stroke:bl},symbol:{fill:bl,size:30},axis:{domainColor:U1,domainWidth:.5,gridWidth:.2,labelColor:U1,tickColor:U1,tickWidth:.2,titleColor:U1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},xl="#3e5c69",sOe={background:"#fff",arc:{fill:xl},area:{fill:xl},line:{stroke:xl},path:{stroke:xl},rect:{fill:xl},shape:{stroke:xl},symbol:{fill:xl},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Mr="#1696d2",w9="#000000",oOe="#FFFFFF",P1="Lato",nS="Lato",uOe="Lato",lOe="#DEDDDD",cOe=18,x0={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},fOe={background:oOe,title:{anchor:"start",fontSize:cOe,font:P1},axisX:{domain:!0,domainColor:w9,domainWidth:1,grid:!1,labelFontSize:12,labelFont:nS,labelAngle:0,tickColor:w9,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:P1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:lOe,gridWidth:1,labelFontSize:12,labelFont:nS,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:P1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:nS,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:P1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:x0["six-groups-cat-1"],diverging:x0["diverging-colors"],heatmap:x0["diverging-colors"],ordinal:x0["six-groups-seq"],ramp:x0["shades-blue"]},area:{fill:Mr},rect:{fill:Mr},line:{color:Mr,stroke:Mr,strokeWidth:5},trail:{color:Mr,stroke:Mr,strokeWidth:0,size:1},path:{stroke:Mr,strokeWidth:.5},point:{filled:!0},text:{font:uOe,color:Mr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Mr,stroke:null}},arc:{fill:Mr},shape:{stroke:Mr},symbol:{fill:Mr,size:30}},El="#3366CC",O9="#ccc",I1="Arial, sans-serif",dOe={arc:{fill:El},area:{fill:El},path:{stroke:El},rect:{fill:El},shape:{stroke:El},symbol:{stroke:El},circle:{fill:El},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:I1,fontSize:12},"guide-title":{font:I1,fontSize:12},"group-title":{font:I1,fontSize:12}},title:{font:I1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:O9,tickColor:O9,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},oT=e=>e*(1/3+1),C9=oT(9),D9=oT(10),$9=oT(12),E0="Segoe UI",M9="wf_standard-font, helvetica, arial, sans-serif",T9="#252423",_0="#605E5C",k9="transparent",hOe="#C8C6C4",ta="#118DFF",gOe="#12239E",pOe="#E66C37",mOe="#6B007B",yOe="#E044A7",vOe="#744EC2",bOe="#D9B300",xOe="#D64550",LY=ta,UY="#DEEFFF",F9=[UY,LY],EOe=[UY,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",LY],_Oe={view:{stroke:k9},background:k9,font:E0,header:{titleFont:M9,titleFontSize:$9,titleColor:T9,labelFont:E0,labelFontSize:D9,labelColor:_0},axis:{ticks:!1,grid:!1,domain:!1,labelColor:_0,labelFontSize:C9,titleFont:M9,titleColor:T9,titleFontSize:$9,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:hOe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ta},line:{stroke:ta,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:E0,fontSize:C9,fill:_0},arc:{fill:ta},area:{fill:ta,line:!0,opacity:.6},path:{stroke:ta},rect:{fill:ta},point:{fill:ta,filled:!0,size:75},shape:{stroke:ta},symbol:{fill:ta,strokeWidth:1.5,size:50},legend:{titleFont:E0,titleFontWeight:"bold",titleColor:_0,labelFont:E0,labelFontSize:D9,labelColor:_0,symbolType:"circle",symbolSize:75},range:{category:[ta,gOe,pOe,mOe,yOe,vOe,bOe,xOe],diverging:F9,heatmap:F9,ordinal:EOe}},iS='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',AOe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',rS=400,q1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},SOe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],wOe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function l2({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=q1.gridBg[e],r=q1.textPrimary[e],a=q1.textSecondary[e],s=n==="dark"?SOe:wOe,o=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:iS,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:AOe,labelFontWeight:rS,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:q1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:iS,fill:a,fontWeight:rS},"guide-title":{font:iS,fill:a,fontWeight:rS}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const OOe=l2({theme:"white",background:"#ffffff"}),COe=l2({theme:"g10",background:"#f4f4f4"}),DOe=l2({theme:"g90",background:"#262626"}),$Oe=l2({theme:"g100",background:"#161616"}),MOe=Vwe.version,TOe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:COe,carbong100:$Oe,carbong90:DOe,carbonwhite:OOe,dark:Wwe,excel:Qwe,fivethirtyeight:Jwe,ggplot2:eOe,googlecharts:dOe,latimes:rOe,powerbi:_Oe,quartz:aOe,urbaninstitute:fOe,version:MOe,vox:sOe},Symbol.toStringTag,{value:"Module"}));function kOe(e,t,n,i){if(Ee(e))return`[${e.map(r=>t(tt(r)?r:R9(r,n))).join(", ")}]`;if(je(e)){let r="";const{title:a,image:s,...o}=e;a&&(r+=`<h2>${t(a)}</h2>`),s&&(r+=`<img src="${new URL(t(s),i||location.href).href}">`);const l=Object.keys(o);if(l.length>0){r+="<table>";for(const f of l){let d=o[f];d!==void 0&&(je(d)&&(d=R9(d,n)),r+=`<tr><td class="key">${t(f)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function FOe(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function R9(e,t){return JSON.stringify(e,FOe(t))}var ROe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const PY="vg-tooltip-element",NOe={offsetX:10,offsetY:10,id:PY,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:jOe,maxDepth:2,formatTooltip:kOe,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function jOe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function zOe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return ROe.toString().replace(PY,e)}function IY(e,t,{offsetX:n,offsetY:i}){const r=qY({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),a=["bottom-right","bottom-left","top-right","top-left"];for(const s of a)if(HY(r[s],t))return r[s];return r["top-left"]}function BOe(e,t,n,i,r){const{position:a,offsetX:s,offsetY:o}=r,l=e._el.getBoundingClientRect(),f=e._origin,d=LOe(l,f,n),g=qY(d,i,s,o),p=Array.isArray(a)?a:[a];for(const y of p)if(HY(g[y],i)&&!UOe(t,g[y],i))return g[y];return IY(t,i,r)}function LOe(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,a=e.top+t[1]+i.y1,s=n;for(;s.mark.group;)s=s.mark.group,r+=s.x??0,a+=s.y??0;const o=i.x2-i.x1,l=i.y2-i.y1;return{x1:r,x2:r+o,y1:a,y2:a+l}}function qY(e,t,n,i){const r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,s=e.x1-t.width-n,o=r-t.width/2,l=e.x2+n,f=e.y1-t.height-i,d=a-t.height/2,g=e.y2+i;return{top:{x:o,y:f},bottom:{x:o,y:g},left:{x:s,y:d},right:{x:l,y:d},"top-left":{x:s,y:f},"top-right":{x:l,y:f},"bottom-left":{x:s,y:g},"bottom-right":{x:l,y:g}}}function HY(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function UOe(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class POe{constructor(t){this.options={...NOe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=zOe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=this.options.anchor==="mark"?BOe(t,n,i,this.el.getBoundingClientRect(),this.options):IY(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${s}px`,this.el.style.left=`${a}px`}}var aS={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var IOe=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),qOe=Object.prototype.hasOwnProperty;function NO(e,t){return qOe.call(e,t)}function jO(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)NO(e,r)&&i.push(r);return i}function fr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function zO(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function Sl(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function GY(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function BO(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(BO(e[t]))return!0}else if(typeof e=="object"){for(var i=jO(e),r=i.length,a=0;a<r;a++)if(BO(e[i[a]]))return!0}}return!1}function N9(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var YY=(function(e){IOe(t,e);function t(n,i,r,a,s){var o=this.constructor,l=e.call(this,N9(n,{name:i,index:r,operation:a,tree:s}))||this;return l.name=i,l.index=r,l.operation=a,l.tree=s,Object.setPrototypeOf(l,o.prototype),l.message=N9(n,{name:i,index:r,operation:a,tree:s}),l}return t})(Error),Yt=YY,HOe=fr,zf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=Zv(n,this.path);i&&(i=fr(i));var r=ql(n,{op:"remove",path:this.from}).removed;return ql(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=Zv(n,this.from);return ql(n,{op:"add",path:this.path,value:fr(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Yg(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},GOe={add:function(e,t,n){return zO(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:zf.move,copy:zf.copy,test:zf.test,_get:zf._get};function Zv(e,t){if(t=="")return e;var n={op:"_get",path:t};return ql(e,n),n.value}function ql(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):Kv(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=Zv(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Yg(e,t.value),s.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Yt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{i||(e=fr(e));var o=t.path||"",l=o.split("/"),f=e,d=1,g=l.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=Kv;;){if(y=l[d],y&&y.indexOf("~")!=-1&&(y=GY(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&l[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(f[y]===void 0?p=l.slice(0,d).join("/"):d==g-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(f)){if(y==="-")y=f.length;else{if(n&&!zO(y))throw new Yt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);zO(y)&&(y=~~y)}if(d>=g){if(n&&t.op==="add"&&y>f.length)throw new Yt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var s=GOe[t.op].call(t,f,y,e);if(s.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(d>=g){var s=zf[t.op].call(t,f,y,e);if(s.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(f=f[y],n&&d<g&&(!f||typeof f!="object"))throw new Yt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function c2(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Yt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=fr(e));for(var a=new Array(t.length),s=0,o=t.length;s<o;s++)a[s]=ql(e,t[s],n,!0,r,s),e=a[s].newDocument;return a.newDocument=e,a}function YOe(e,t,n){var i=ql(e,t);if(i.test===!1)throw new Yt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function Kv(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Yt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(zf[e.op]){if(typeof e.path!="string")throw new Yt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Yt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Yt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Yt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&BO(e.value))throw new Yt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Yt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Yt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},o=XY([s],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Yt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Yt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function XY(e,t,n){try{if(!Array.isArray(e))throw new Yt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)c2(fr(t),fr(e),n||!0);else{n=n||Kv;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Yt)return r;throw r}}function Yg(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,s;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!Yg(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var o=Object.keys(e);if(a=o.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(o[r]))return!1;for(r=a;r--!==0;)if(s=o[r],!Yg(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}var XOe=Object.freeze({__proto__:null,JsonPatchError:Yt,_areEquals:Yg,applyOperation:ql,applyPatch:c2,applyReducer:YOe,deepClone:HOe,getValueByPointer:Zv,validate:XY,validator:Kv});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var uT=new WeakMap,VOe=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),WOe=(function(){function e(t,n){this.callback=t,this.observer=n}return e})();function QOe(e){return uT.get(e)}function ZOe(e,t){return e.observers.get(t)}function KOe(e,t){e.observers.delete(t.callback)}function JOe(e,t){t.unobserve()}function eCe(e,t){var n=[],i,r=QOe(e);if(!r)r=new VOe(e),uT.set(e,r);else{var a=ZOe(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=fr(e),t){i.callback=t,i.next=null;var s=function(){LO(i)},o=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return i.patches=n,i.object=e,i.unobserve=function(){LO(i),clearTimeout(i.next),KOe(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new WOe(t,i)),i}function LO(e,t){t===void 0&&(t=!1);var n=uT.get(e.object);lT(n.value,e.object,e.patches,"",t),e.patches.length&&c2(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function lT(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=jO(t),s=jO(e),o=!1,l=s.length-1;l>=0;l--){var f=s[l],d=e[f];if(NO(t,f)&&!(t[f]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var g=t[f];typeof d=="object"&&d!=null&&typeof g=="object"&&g!=null&&Array.isArray(d)===Array.isArray(g)?lT(d,g,n,i+"/"+Sl(f),r):d!==g&&(r&&n.push({op:"test",path:i+"/"+Sl(f),value:fr(d)}),n.push({op:"replace",path:i+"/"+Sl(f),value:fr(g)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+Sl(f),value:fr(d)}),n.push({op:"remove",path:i+"/"+Sl(f)}),o=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!o&&a.length==s.length))for(var l=0;l<a.length;l++){var f=a[l];!NO(e,f)&&t[f]!==void 0&&n.push({op:"add",path:i+"/"+Sl(f),value:fr(t[f])})}}}function tCe(e,t,n){n===void 0&&(n=!1);var i=[];return lT(e,t,i,"",n),i}var nCe=Object.freeze({__proto__:null,compare:tCe,generate:LO,observe:eCe,unobserve:JOe});Object.assign({},XOe,nCe,{JsonPatchError:YY,deepClone:fr,escapePathComponent:Sl,unescapePathComponent:GY});function iCe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sS,j9;function rCe(){if(j9)return sS;j9=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return sS=e,sS}var oS,z9;function cT(){if(z9)return oS;z9=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return oS=i=>i?typeof i!="object"?e:i:t,oS}var H1={exports:{}},uS,B9;function fT(){if(B9)return uS;B9=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return uS={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},uS}var lS,L9;function f2(){return L9||(L9=1,lS=typeof process=="object"&&aS&&aS.NODE_DEBUG&&/\bsemver\b/i.test(aS.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),lS}var U9;function dT(){return U9||(U9=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=fT(),a=f2();t=e.exports={};const s=t.re=[],o=t.safeRe=[],l=t.src=[],f=t.t={};let d=0;const g="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",r],[g,i]],y=x=>{for(const[E,A]of p)x=x.split(`${E}*`).join(`${E}{0,${A}}`).split(`${E}+`).join(`${E}{1,${A}}`);return x},v=(x,E,A)=>{const S=y(E),w=d++;a(x,w,E),f[x]=w,l[w]=E,s[w]=new RegExp(E,A?"g":void 0),o[w]=new RegExp(S,A?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${g}*`),v("MAINVERSION",`(${l[f.NUMERICIDENTIFIER]})\\.(${l[f.NUMERICIDENTIFIER]})\\.(${l[f.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${l[f.NUMERICIDENTIFIERLOOSE]})\\.(${l[f.NUMERICIDENTIFIERLOOSE]})\\.(${l[f.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${l[f.NUMERICIDENTIFIER]}|${l[f.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${l[f.NUMERICIDENTIFIERLOOSE]}|${l[f.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${l[f.PRERELEASEIDENTIFIER]}(?:\\.${l[f.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${l[f.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[f.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${g}+`),v("BUILD",`(?:\\+(${l[f.BUILDIDENTIFIER]}(?:\\.${l[f.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${l[f.MAINVERSION]}${l[f.PRERELEASE]}?${l[f.BUILD]}?`),v("FULL",`^${l[f.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${l[f.MAINVERSIONLOOSE]}${l[f.PRERELEASELOOSE]}?${l[f.BUILD]}?`),v("LOOSE",`^${l[f.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${l[f.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${l[f.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${l[f.XRANGEIDENTIFIER]})(?:\\.(${l[f.XRANGEIDENTIFIER]})(?:\\.(${l[f.XRANGEIDENTIFIER]})(?:${l[f.PRERELEASE]})?${l[f.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${l[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[f.XRANGEIDENTIFIERLOOSE]})(?:${l[f.PRERELEASELOOSE]})?${l[f.BUILD]}?)?)?`),v("XRANGE",`^${l[f.GTLT]}\\s*${l[f.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${l[f.GTLT]}\\s*${l[f.XRANGEPLAINLOOSE]}$`),v("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),v("COERCE",`${l[f.COERCEPLAIN]}(?:$|[^\\d])`),v("COERCEFULL",l[f.COERCEPLAIN]+`(?:${l[f.PRERELEASE]})?(?:${l[f.BUILD]})?(?:$|[^\\d])`),v("COERCERTL",l[f.COERCE],!0),v("COERCERTLFULL",l[f.COERCEFULL],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${l[f.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",v("TILDE",`^${l[f.LONETILDE]}${l[f.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${l[f.LONETILDE]}${l[f.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${l[f.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",v("CARET",`^${l[f.LONECARET]}${l[f.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${l[f.LONECARET]}${l[f.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${l[f.GTLT]}\\s*(${l[f.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${l[f.GTLT]}\\s*(${l[f.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${l[f.GTLT]}\\s*(${l[f.LOOSEPLAIN]}|${l[f.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${l[f.XRANGEPLAIN]})\\s+-\\s+(${l[f.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${l[f.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[f.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(H1,H1.exports)),H1.exports}var cS,P9;function aCe(){if(P9)return cS;P9=1;const e=/^[0-9]+$/,t=(i,r)=>{const a=e.test(i),s=e.test(r);return a&&s&&(i=+i,r=+r),i===r?0:a&&!s?-1:s&&!a?1:i<r?-1:1};return cS={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},cS}var fS,I9;function hT(){if(I9)return fS;I9=1;const e=f2(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=fT(),{safeRe:i,t:r}=dT(),a=cT(),{compareIdentifiers:s}=aCe();class o{constructor(f,d){if(d=a(d),f instanceof o){if(f.loose===!!d.loose&&f.includePrerelease===!!d.includePrerelease)return f;f=f.version}else if(typeof f!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof f}".`);if(f.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",f,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const g=f.trim().match(d.loose?i[r.LOOSE]:i[r.FULL]);if(!g)throw new TypeError(`Invalid Version: ${f}`);if(this.raw=f,this.major=+g[1],this.minor=+g[2],this.patch=+g[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");g[4]?this.prerelease=g[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const y=+p;if(y>=0&&y<n)return y}return p}):this.prerelease=[],this.build=g[5]?g[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(f){if(e("SemVer.compare",this.version,this.options,f),!(f instanceof o)){if(typeof f=="string"&&f===this.version)return 0;f=new o(f,this.options)}return f.version===this.version?0:this.compareMain(f)||this.comparePre(f)}compareMain(f){return f instanceof o||(f=new o(f,this.options)),s(this.major,f.major)||s(this.minor,f.minor)||s(this.patch,f.patch)}comparePre(f){if(f instanceof o||(f=new o(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;let d=0;do{const g=this.prerelease[d],p=f.prerelease[d];if(e("prerelease compare",d,g,p),g===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(g===void 0)return-1;if(g===p)continue;return s(g,p)}while(++d)}compareBuild(f){f instanceof o||(f=new o(f,this.options));let d=0;do{const g=this.build[d],p=f.build[d];if(e("build compare",d,g,p),g===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(g===void 0)return-1;if(g===p)continue;return s(g,p)}while(++d)}inc(f,d,g){switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,g);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,g);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,g),this.inc("pre",d,g);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,g),this.inc("pre",d,g);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(g)?1:0;if(!d&&g===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[p];else{let y=this.prerelease.length;for(;--y>=0;)typeof this.prerelease[y]=="number"&&(this.prerelease[y]++,y=-2);if(y===-1){if(d===this.prerelease.join(".")&&g===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(d){let y=[d,p];g===!1&&(y=[d]),s(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=y):this.prerelease=y}break}default:throw new Error(`invalid increment argument: ${f}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return fS=o,fS}var dS,q9;function Kd(){if(q9)return dS;q9=1;const e=hT();return dS=(n,i,r)=>new e(n,r).compare(new e(i,r)),dS}var hS,H9;function sCe(){if(H9)return hS;H9=1;const e=Kd();return hS=(n,i,r)=>e(n,i,r)===0,hS}var gS,G9;function oCe(){if(G9)return gS;G9=1;const e=Kd();return gS=(n,i,r)=>e(n,i,r)!==0,gS}var pS,Y9;function uCe(){if(Y9)return pS;Y9=1;const e=Kd();return pS=(n,i,r)=>e(n,i,r)>0,pS}var mS,X9;function lCe(){if(X9)return mS;X9=1;const e=Kd();return mS=(n,i,r)=>e(n,i,r)>=0,mS}var yS,V9;function cCe(){if(V9)return yS;V9=1;const e=Kd();return yS=(n,i,r)=>e(n,i,r)<0,yS}var vS,W9;function fCe(){if(W9)return vS;W9=1;const e=Kd();return vS=(n,i,r)=>e(n,i,r)<=0,vS}var bS,Q9;function dCe(){if(Q9)return bS;Q9=1;const e=sCe(),t=oCe(),n=uCe(),i=lCe(),r=cCe(),a=fCe();return bS=(o,l,f,d)=>{switch(l){case"===":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o===f;case"!==":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o!==f;case"":case"=":case"==":return e(o,f,d);case"!=":return t(o,f,d);case">":return n(o,f,d);case">=":return i(o,f,d);case"<":return r(o,f,d);case"<=":return a(o,f,d);default:throw new TypeError(`Invalid operator: ${l}`)}},bS}var xS,Z9;function hCe(){if(Z9)return xS;Z9=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,g){if(g=n(g),d instanceof t){if(d.loose===!!g.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),s("comparator",d,g),this.options=g,this.loose=!!g.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(d){const g=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(g);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new o(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(s("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new o(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,g){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,g).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,g).test(d.semver):(g=n(g),g.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!g.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,g)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,g)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}xS=t;const n=cT(),{safeRe:i,t:r}=dT(),a=dCe(),s=f2(),o=hT(),l=VY();return xS}var ES,K9;function VY(){if(K9)return ES;K9=1;const e=/\s+/g;class t{constructor(j,F){if(F=r(F),j instanceof t)return j.loose===!!F.loose&&j.includePrerelease===!!F.includePrerelease?j:new t(j.raw,F);if(j instanceof a)return this.raw=j.value,this.set=[[j]],this.formatted=void 0,this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=j.trim().replace(e," "),this.set=this.raw.split("||").map(U=>this.parseRange(U.trim())).filter(U=>U.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const U=this.set[0];if(this.set=this.set.filter(H=>!x(H[0])),this.set.length===0)this.set=[U];else if(this.set.length>1){for(const H of this.set)if(H.length===1&&E(H[0])){this.set=[H];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let j=0;j<this.set.length;j++){j>0&&(this.formatted+="||");const F=this.set[j];for(let U=0;U<F.length;U++)U>0&&(this.formatted+=" "),this.formatted+=F[U].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(j){const U=((this.options.includePrerelease&&y)|(this.options.loose&&v))+":"+j,H=i.get(U);if(H)return H;const Q=this.options.loose,R=Q?l[f.HYPHENRANGELOOSE]:l[f.HYPHENRANGE];j=j.replace(R,V(this.options.includePrerelease)),s("hyphen replace",j),j=j.replace(l[f.COMPARATORTRIM],d),s("comparator trim",j),j=j.replace(l[f.TILDETRIM],g),s("tilde trim",j),j=j.replace(l[f.CARETTRIM],p),s("caret trim",j);let W=j.split(" ").map(pe=>S(pe,this.options)).join(" ").split(/\s+/).map(pe=>B(pe,this.options));Q&&(W=W.filter(pe=>(s("loose invalid filter",pe,this.options),!!pe.match(l[f.COMPARATORLOOSE])))),s("range list",W);const ie=new Map,se=W.map(pe=>new a(pe,this.options));for(const pe of se){if(x(pe))return[pe];ie.set(pe.value,pe)}ie.size>1&&ie.has("")&&ie.delete("");const ge=[...ie.values()];return i.set(U,ge),ge}intersects(j,F){if(!(j instanceof t))throw new TypeError("a Range is required");return this.set.some(U=>A(U,F)&&j.set.some(H=>A(H,F)&&U.every(Q=>H.every(R=>Q.intersects(R,F)))))}test(j){if(!j)return!1;if(typeof j=="string")try{j=new o(j,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(G(this.set[F],j,this.options))return!0;return!1}}ES=t;const n=rCe(),i=new n,r=cT(),a=hCe(),s=f2(),o=hT(),{safeRe:l,t:f,comparatorTrimReplace:d,tildeTrimReplace:g,caretTrimReplace:p}=dT(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:v}=fT(),x=P=>P.value==="<0.0.0-0",E=P=>P.value==="",A=(P,j)=>{let F=!0;const U=P.slice();let H=U.pop();for(;F&&U.length;)F=U.every(Q=>H.intersects(Q,j)),H=U.pop();return F},S=(P,j)=>(s("comp",P,j),P=M(P,j),s("caret",P),P=D(P,j),s("tildes",P),P=k(P,j),s("xrange",P),P=L(P,j),s("stars",P),P),w=P=>!P||P.toLowerCase()==="x"||P==="*",D=(P,j)=>P.trim().split(/\s+/).map(F=>O(F,j)).join(" "),O=(P,j)=>{const F=j.loose?l[f.TILDELOOSE]:l[f.TILDE];return P.replace(F,(U,H,Q,R,W)=>{s("tilde",P,U,H,Q,R,W);let ie;return w(H)?ie="":w(Q)?ie=`>=${H}.0.0 <${+H+1}.0.0-0`:w(R)?ie=`>=${H}.${Q}.0 <${H}.${+Q+1}.0-0`:W?(s("replaceTilde pr",W),ie=`>=${H}.${Q}.${R}-${W} <${H}.${+Q+1}.0-0`):ie=`>=${H}.${Q}.${R} <${H}.${+Q+1}.0-0`,s("tilde return",ie),ie})},M=(P,j)=>P.trim().split(/\s+/).map(F=>C(F,j)).join(" "),C=(P,j)=>{s("caret",P,j);const F=j.loose?l[f.CARETLOOSE]:l[f.CARET],U=j.includePrerelease?"-0":"";return P.replace(F,(H,Q,R,W,ie)=>{s("caret",P,H,Q,R,W,ie);let se;return w(Q)?se="":w(R)?se=`>=${Q}.0.0${U} <${+Q+1}.0.0-0`:w(W)?Q==="0"?se=`>=${Q}.${R}.0${U} <${Q}.${+R+1}.0-0`:se=`>=${Q}.${R}.0${U} <${+Q+1}.0.0-0`:ie?(s("replaceCaret pr",ie),Q==="0"?R==="0"?se=`>=${Q}.${R}.${W}-${ie} <${Q}.${R}.${+W+1}-0`:se=`>=${Q}.${R}.${W}-${ie} <${Q}.${+R+1}.0-0`:se=`>=${Q}.${R}.${W}-${ie} <${+Q+1}.0.0-0`):(s("no pr"),Q==="0"?R==="0"?se=`>=${Q}.${R}.${W}${U} <${Q}.${R}.${+W+1}-0`:se=`>=${Q}.${R}.${W}${U} <${Q}.${+R+1}.0-0`:se=`>=${Q}.${R}.${W} <${+Q+1}.0.0-0`),s("caret return",se),se})},k=(P,j)=>(s("replaceXRanges",P,j),P.split(/\s+/).map(F=>N(F,j)).join(" ")),N=(P,j)=>{P=P.trim();const F=j.loose?l[f.XRANGELOOSE]:l[f.XRANGE];return P.replace(F,(U,H,Q,R,W,ie)=>{s("xRange",P,U,H,Q,R,W,ie);const se=w(Q),ge=se||w(R),pe=ge||w(W),_e=pe;return H==="="&&_e&&(H=""),ie=j.includePrerelease?"-0":"",se?H===">"||H==="<"?U="<0.0.0-0":U="*":H&&_e?(ge&&(R=0),W=0,H===">"?(H=">=",ge?(Q=+Q+1,R=0,W=0):(R=+R+1,W=0)):H==="<="&&(H="<",ge?Q=+Q+1:R=+R+1),H==="<"&&(ie="-0"),U=`${H+Q}.${R}.${W}${ie}`):ge?U=`>=${Q}.0.0${ie} <${+Q+1}.0.0-0`:pe&&(U=`>=${Q}.${R}.0${ie} <${Q}.${+R+1}.0-0`),s("xRange return",U),U})},L=(P,j)=>(s("replaceStars",P,j),P.trim().replace(l[f.STAR],"")),B=(P,j)=>(s("replaceGTE0",P,j),P.trim().replace(l[j.includePrerelease?f.GTE0PRE:f.GTE0],"")),V=P=>(j,F,U,H,Q,R,W,ie,se,ge,pe,_e)=>(w(U)?F="":w(H)?F=`>=${U}.0.0${P?"-0":""}`:w(Q)?F=`>=${U}.${H}.0${P?"-0":""}`:R?F=`>=${F}`:F=`>=${F}${P?"-0":""}`,w(se)?ie="":w(ge)?ie=`<${+se+1}.0.0-0`:w(pe)?ie=`<${se}.${+ge+1}.0-0`:_e?ie=`<=${se}.${ge}.${pe}-${_e}`:P?ie=`<${se}.${ge}.${+pe+1}-0`:ie=`<=${ie}`,`${F} ${ie}`.trim()),G=(P,j,F)=>{for(let U=0;U<P.length;U++)if(!P[U].test(j))return!1;if(j.prerelease.length&&!F.includePrerelease){for(let U=0;U<P.length;U++)if(s(P[U].semver),P[U].semver!==a.ANY&&P[U].semver.prerelease.length>0){const H=P[U].semver;if(H.major===j.major&&H.minor===j.minor&&H.patch===j.patch)return!0}return!1}return!0};return ES}var _S,J9;function gCe(){if(J9)return _S;J9=1;const e=VY();return _S=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},_S}var pCe=gCe(),WY=iCe(pCe);function mCe(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let s=40;function o(f){f.source===i&&(s=0,e.removeEventListener("message",o,!1))}e.addEventListener("message",o,!1);function l(){s<=0||(i.postMessage(n,a),setTimeout(l,r),s-=1)}setTimeout(l,r)}var yCe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function QY(e,...t){for(const n of t)vCe(e,n);return e}function vCe(e,t){for(const n of Object.keys(t))Wg(e,n,t[n],!0)}const Fa=r1e;let Xg=Ywe;const e7=typeof window<"u"?window:void 0;Xg===void 0&&e7?.vl?.compile&&(Xg=e7.vl);const bCe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},xCe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},X0={vega:"Vega","vega-lite":"Vega-Lite"},Jv={vega:Fa.version,"vega-lite":Xg?Xg.version:"not available"},ECe={vega:e=>e,"vega-lite":(e,t)=>Xg.compile(e,{config:t}).spec},_Ce=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,ACe="chart-wrapper";function SCe(e){return typeof e=="function"}function t7(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+a),s.document.title=`${X0[i]} JSON Source`}function wCe(e,t){if(e.$schema){const n=BY(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${X0[n.library]}, but mode argument sets ${X0[t]??t}.`);const i=n.library;return WY(Jv[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${X0[i]} ${n.version}, but the current version of ${X0[i]} is v${Jv[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function ZY(e){return!!(e&&"load"in e)}function n7(e){return ZY(e)?e:Fa.loader(e)}function OCe(e){const t=e.usermeta?.embedOptions??{};return tt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function CCe(e,t,n={}){let i,r;tt(t)?(r=n7(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=OCe(i),s=a.loader;(!r||s)&&(r=n7(n.loader??s));const o=await i7(a,r),l=await i7(n,r),f={...QY(l,o),config:tb(l.config??{},o.config??{})};return await $Ce(e,i,f,r)}async function i7(e,t){const n=tt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=tt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function DCe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function $Ce(e,t,n={},i){const r=n.theme?tb(TOe[n.theme],n.config??{}):n.config,a=WO(n.actions)?n.actions:QY({},bCe,n.actions??{}),s={...xCe,...n.i18n},o=n.renderer??"canvas",l=n.logLevel??Fa.Warn,f=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const O="vega-embed-style",{root:M,rootContainer:C}=DCe(d);if(!M.getElementById(O)){const k=document.createElement("style");k.id=O,k.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?yCe.toString():n.defaultStyle,C.appendChild(k)}}const g=wCe(t,n.mode);let p=ECe[g](t,r);if(g==="vega-lite"&&p.$schema){const O=BY(p.$schema);WY(Jv.vega,`^${O.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${O.version}, but current version is v${Jv.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const O=document.createElement("div");O.classList.add(ACe),d.appendChild(O),y=O}const v=n.patch;if(v&&(p=v instanceof Function?v(p):c2(p,v,!0,!1).newDocument),n.formatLocale&&Fa.formatLocale(n.formatLocale),n.timeFormatLocale&&Fa.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const O in n.expressionFunctions){const M=n.expressionFunctions[O];"fn"in M?Fa.expressionFunction(O,M.fn,M.visitor):M instanceof Function&&Fa.expressionFunction(O,M)}const{ast:x}=n,E=Fa.parse(p,g==="vega-lite"?{}:r,{ast:x}),A=new(n.viewClass||Fa.View)(E,{loader:i,logLevel:l,renderer:o,...x?{expr:Fa.expressionInterpreter??n.expr??g1e}:{}});if(A.addSignalListener("autosize",(O,M)=>{const{type:C}=M;C=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):C=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):C=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:O,tooltip:M}=n,C=O&&!ZY(O)?O?.baseURL:void 0,k=SCe(M)?M:new POe({baseURL:C,...M===!0?{}:M}).call;A.tooltip(k)}let{hover:S}=n;if(S===void 0&&(S=g==="vega"),S){const{hoverSet:O,updateSet:M}=typeof S=="boolean"?{}:S;A.hover(O,M)}n&&(n.width!=null&&A.width(n.width),n.height!=null&&A.height(n.height),n.padding!=null&&A.padding(n.padding)),await A.initialize(y,n.bind).runAsync();let w;if(a!==!1){let O=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const C=document.createElement("details");C.title=s.CLICK_TO_VIEW_ACTIONS,d.append(C),O=C;const k=document.createElement("summary");k.innerHTML=_Ce,C.append(k),w=N=>{C.contains(N.target)||C.removeAttribute("open")},document.addEventListener("click",w)}const M=document.createElement("div");if(O.append(M),M.classList.add("vega-actions"),a===!0||a.export!==!1){for(const C of["svg","png"])if(a===!0||a.export===!0||a.export[C]){const k=s[`${C.toUpperCase()}_ACTION`],N=document.createElement("a"),L=je(n.scaleFactor)?n.scaleFactor[C]:n.scaleFactor;N.text=k,N.href="#",N.target="_blank",N.download=`${f}.${C}`,N.addEventListener("mousedown",async function(B){B.preventDefault();const V=await A.toImageURL(C,L);this.href=V}),M.append(N)}}if(a===!0||a.source!==!1){const C=document.createElement("a");C.text=s.SOURCE_ACTION,C.href="#",C.addEventListener("click",function(k){t7($_(t),n.sourceHeader??"",n.sourceFooter??"",g),k.preventDefault()}),M.append(C)}if(g==="vega-lite"&&(a===!0||a.compiled!==!1)){const C=document.createElement("a");C.text=s.COMPILED_ACTION,C.href="#",C.addEventListener("click",function(k){t7($_(p),n.sourceHeader??"",n.sourceFooter??"","vega"),k.preventDefault()}),M.append(C)}if(a===!0||a.editor!==!1){const C=n.editorUrl??"https://vega.github.io/editor/",k=document.createElement("a");k.text=s.EDITOR_ACTION,k.href="#",k.addEventListener("click",function(N){mCe(window,C,{config:r,mode:v?"vega":g,renderer:o,spec:$_(v?p:t)}),N.preventDefault()}),M.append(k)}}function D(){w&&document.removeEventListener("click",w),A.finalize()}return{view:A,spec:t,vgSpec:p,finalize:D,embedOptions:n}}function MCe({spec:e,style:t}){const n="vega-"+Ke(e);return a7.useEffect(()=>{CCe("#"+n,e)}),Ml.jsx("div",{id:n,style:t})}const TCe="https://vega.github.io/schema/vega-lite/v5.json",kCe={url:"https://raw.githubusercontent.com/SeanMASilva/FIT3179-Datavis2/refs/heads/main/src/assets/bushfireChoropleth.csv",name:"choropleth"},FCe=[{name:"decade",value:2e3,bind:{input:"range",min:1930,max:2010,step:10,name:"Decade"}}],RCe=[{title:{text:"Map of Australia's Bushfires and Cyclones"},width:500,height:400,projection:{type:"azimuthalEqualArea",rotate:[-133.5,26,0],scale:500,center:[-30,25]},layer:[{data:{url:"https://raw.githubusercontent.com/SeanMASilva/FIT3179-Datavis2/refs/heads/main/src/assets/baseWorldLarger.json",format:{type:"topojson",feature:"ne_50m_land"}},mark:{type:"geoshape",fill:"lightgrey",stroke:"white"}},{data:{url:"https://raw.githubusercontent.com/SeanMASilva/FIT3179-Datavis2/refs/heads/main/src/assets/baseWorldLarger.json",format:{type:"topojson",feature:"ne_50m_ocean"}},mark:{type:"geoshape",fill:"lightblue"}},{data:{url:"https://raw.githubusercontent.com/SeanMASilva/FIT3179-Datavis2/refs/heads/main/src/assets/baseWorldLarger.json",format:{type:"topojson",feature:"ne_50m_admin_1_states_provinces_lines"}},mark:{type:"geoshape",fill:"",stroke:"white"}},{data:{name:"choropleth",format:{type:"csv"}},transform:[{lookup:"State",from:{data:{url:"https://raw.githubusercontent.com/SeanMASilva/FIT3179-Datavis2/refs/heads/main/src/assets/baseWorldLarger.json",format:{type:"topojson",feature:"ne_50m_admin_1_states_provinces"}},key:"properties.name"},as:"geo"},{filter:"datum.Decade == decade"},{calculate:"datum.PercentBurnt * 100",as:"PercentBurnt2"}],mark:{type:"geoshape"},encoding:{shape:{field:"geo",type:"geojson"},color:{field:"PercentBurnt2",type:"quantitative",scale:{domain:[0,60],scheme:"yelloworangered"},title:"Percent of state area burnt"},tooltip:[{field:"State",title:"State"},{field:"HectaresBurnt",title:"Hectares Burnt"},{field:"PercentBurnt2",title:"Percent area burnt over 10 years",format:".2f"},{field:"Decade",title:"Decade"}]}},{data:{url:"https://raw.githubusercontent.com/SeanMASilva/FIT3179-Datavis2/refs/heads/main/src/assets/baseWorldLarger.json",format:{type:"topojson",feature:"ne_50m_graticules_10"}},mark:{type:"geoshape",stroke:"grey",fill:null,opacity:.3}}]},{width:250,layer:[{data:{name:"choropleth"},mark:{type:"area",color:"maroon",tooltip:!0},transform:[{aggregate:[{as:"sumHB",field:"HectaresBurnt",op:"sum"}],groupby:["Decade"]}],encoding:{x:{field:"Decade",type:"ordinal",title:"Decade",scale:{domain:["1930","1940","1950","1960","1970","1980","1990","2000","2010"]}},y:{field:"sumHB",type:"quantitative",title:"Hectares"}},title:"Total area of Australia burnt each decade"},{data:{values:[{x:"1960",y:16e7,text:"The destruction of bushfires; is greatly increasing due; to climate change"}]},transform:[{calculate:"split(datum.text, ';')",as:"text_wrap"}],mark:{type:"text"},encoding:{x:{field:"x",type:"ordinal"},y:{field:"y",type:"quantitative"},text:{field:"text_wrap"}}},{data:{name:"choropleth"},transform:[{aggregate:[{as:"sumHB",field:"HectaresBurnt",op:"sum"}],groupby:["Decade"]},{filter:"datum.Decade == decade"}],mark:{type:"point",color:"yellow",stroke:"black",fill:"white"},encoding:{x:{field:"Decade",type:"ordinal"},y:{field:"sumHB",type:"quantitative"}}}]}],UO={$schema:TCe,data:kCe,params:FCe,hconcat:RCe},NCe=e=>({data:{url:"https://raw.githubusercontent.com/SeanMASilva/FIT3179-Datavis2/refs/heads/main/src/assets/"+e},layer:[{mark:{type:"trail",fill:"white",stroke:"lightgreen",strokeOpacity:.5},encoding:{size:{field:"pressure",type:"quantitative",scale:{domain:[1010,900]},legend:{title:"Eye pressure (kpa)"}}}},{height:100,transform:[{sort:[{field:"datetime",order:"descending"}],window:[{op:"rank",as:"ranking"}]},{filter:"datum.ranking == 1"}],mark:{type:"text",baseline:"middle",size:8},encoding:{text:{field:"name"}}}],transform:[{filter:"datum.lat"},{filter:"datum.year >= decade & datum.year < (decade + 10)"}],encoding:{latitude:{field:"lat",type:"quantitative"},longitude:{field:"lon",type:"quantitative"},order:{field:"datetime",type:"temporal"},tooltip:[{field:"name",title:"Cylcone Name"},{field:"year",title:"Year"},{field:"pressure",title:"Eye pressure (kpa)"}]}}),jCe="1971-ALTHEA.csv,1971-EMILY.csv,1974-TRACY.csv,1975-JOAN.csv,1977-ALBY.csv,1985-WINIFRED.csv,1988-ORSON.csv,1994-BOBBY.csv,1996-JUSTIN.csv,2004-INGRID.csv,2005-LARRY.csv,2005-MONICA.csv,2006-GEORGE.csv,2010-YASI.csv,2014-MARCIA.csv".split(","),r7=UO.hconcat[0],zCe={...r7,layer:[...r7.layer,...jCe.map(NCe)]},BCe={...UO,hconcat:[zCe,...UO.hconcat.slice(1)]},LCe=BCe;function UCe(){return Ml.jsxs(Ml.Fragment,{children:[Ml.jsx("h1",{children:"Australia's Ravaged States"}),Ml.jsx(MCe,{spec:LCe,style:{width:"100%"}})]})}OW.createRoot(document.getElementById("root")).render(Ml.jsx(a7.StrictMode,{children:Ml.jsx(UCe,{})}));
